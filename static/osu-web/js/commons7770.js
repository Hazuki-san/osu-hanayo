!function(e){function t(t){for(var r,i,a=t[0],c=t[1],u=t[2],p=0,d=[];p<a.length;p++)i=a[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);d.length;)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;n()}({"+AAq":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("YLtl"),o=n("cDcd");const s=({beatmap:e,overrideVersion:t,showTitle:n=!0,modifier:s})=>{const i=t||BeatmapHelper.getDiffRating(e.difficulty_rating),a=n&&null==t,c=e.convert?"osu":e.mode;let u=`beatmap-icon beatmap-icon--${i} beatmap-icon--${s}`;return a&&(u+=" beatmap-icon--with-hover js-beatmap-tooltip"),o.createElement("div",{className:u,"data-beatmap-title":a?e.version:null,"data-stars":r.round(e.difficulty_rating,2),"data-difficulty":i},o.createElement("div",{className:"beatmap-icon__shadow"}),o.createElement("i",{className:`fal fa-extra-mode-${c}`}))}},"+FrL":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n("cDcd");var r,o=n("NzAu");r="value-display";var s=function(e){var t,n,s,i;return n=e.label,i=e.value,t=e.description,s=e.modifiers,Object(o.div)({className:osu.classWithModifiers(r,s)},Object(o.div)({className:r+"__label"},n),Object(o.div)({className:r+"__value"},i),null!=t?Object(o.div)({className:r+"__description"},t):void 0)}},"/cCk":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDcd");class o extends r.PureComponent{constructor(){super(...arguments),this.eventId=`admin-menu-${osu.uuid()}`}render(){if(null==currentUser.id||!currentUser.is_admin)return null;const e=this.props.items.map(e=>r.createElement(e.component,Object.assign({className:"admin-menu-item",key:`${e.icon}-${e.text}`},e.props),r.createElement("span",{className:"admin-menu-item__content"},r.createElement("span",{className:"admin-menu-item__label admin-menu-item__label--icon"},r.createElement("span",{className:e.icon})),r.createElement("span",{className:"admin-menu-item__label admin-menu-item__label--text"},e.text))));return r.createElement("div",{className:"admin-menu"},r.createElement("button",{className:"admin-menu__button js-menu","data-menu-target":`admin-menu-${this.eventId}`},r.createElement("span",{className:"fas fa-angle-up"}),r.createElement("span",{className:"admin-menu__button-icon fas fa-tools"})),r.createElement("div",{className:"admin-menu__menu js-menu","data-menu-id":`admin-menu-${this.eventId}`,"data-visibility":"hidden"},e))}}},"/pT6":function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},"0EjP":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.sendOnChange=s(this.sendOnChange,this),this._save=s(this._save,this),this._reset=s(this._reset,this),this._cancel=s(this._cancel,this),this.onKeyDown=s(this.onKeyDown,this),this.setSizeSelect=s(this.setSizeSelect,this),this.setBody=s(this.setBody,this),this.toolbarButton=s(this.toolbarButton,this),this.actionButton=s(this.actionButton,this),this.render=s(this.render,this),this.componentDidMount=s(this.componentDidMount,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return this.sizeSelect.value="",this.body.selectionEnd=0,this.body.focus()},t.prototype.render=function(){var e,t,n,r,s;for(e="post-editor",t=0,n=(s=null!=(r=this.props.modifiers)?r:[]).length;t<n;t++)e+=" post-editor--"+s[t];return Object(o.form)({className:e},Object(o.textarea)({className:"post-editor__textarea",name:"body",placeholder:this.props.placeholder,defaultValue:this.props.rawValue,disabled:this.props.disabled,onKeyDown:this.onKeyDown,ref:this.setBody}),Object(o.div)({className:"post-editor__footer"},Object(o.div)({className:"post-editor-footer"},Object(o.div)({className:"post-editor-footer__col post-editor-footer__col--toolbar"},Object(o.div)({className:"post-box-toolbar"},this.toolbarButton("bold",Object(o.i)({className:"fas fa-bold"})),this.toolbarButton("italic",Object(o.i)({className:"fas fa-italic"})),this.toolbarButton("strikethrough",Object(o.i)({className:"fas fa-strikethrough"})),this.toolbarButton("heading",Object(o.i)({className:"fas fa-heading"})),this.toolbarButton("link",Object(o.i)({className:"fas fa-link"})),this.toolbarButton("spoilerbox",Object(o.i)({className:"fas fa-barcode"})),this.toolbarButton("list-numbered",Object(o.i)({className:"fas fa-list-ol"})),this.toolbarButton("list",Object(o.i)({className:"fas fa-list"})),this.toolbarButton("image",Object(o.i)({className:"fas fa-image"})),Object(o.label)({className:"bbcode-size-select",title:osu.trans("bbcode.size._")},Object(o.span)({className:"bbcode-size-select__label"},osu.trans("bbcode.size._")),Object(o.i)({className:"fas fa-chevron-down"}),Object(o.select)({className:"bbcode-size-select__select js-bbcode-btn--size",disabled:this.props.disabled,ref:this.setSizeSelect},Object(o.option)({value:"50"},osu.trans("bbcode.size.tiny")),Object(o.option)({value:"85"},osu.trans("bbcode.size.small")),Object(o.option)({value:"100"},osu.trans("bbcode.size.normal")),Object(o.option)({value:"150"},osu.trans("bbcode.size.large")))))),Object(o.div)({className:"post-editor-footer__col post-editor-footer__col--actions"},this.actionButton(this._cancel,osu.trans("common.buttons.cancel")),this.actionButton(this._reset,osu.trans("common.buttons.reset")),this.actionButton(this._save,osu.trans("common.buttons.save"))))))},t.prototype.actionButton=function(e,t){return Object(o.button)({className:"btn-osu btn-osu--post-editor btn-osu-default",disabled:this.props.disabled,type:"button",onClick:e},t)},t.prototype.toolbarButton=function(e,t){return Object(o.button)({className:"btn-circle btn-circle--bbcode js-bbcode-btn--"+e,disabled:this.props.disabled,title:osu.trans("bbcode."+_.snakeCase(e)),type:"button"},Object(o.span)({className:"btn-circle__content"},t))},t.prototype.setBody=function(e){return this.body=e},t.prototype.setSizeSelect=function(e){return this.sizeSelect=e},t.prototype.onKeyDown=function(e){return 27===e.keyCode&&this._cancel()},t.prototype._cancel=function(e){if(this.body.value===this.props.rawValue||confirm(osu.trans("common.confirmation_unsaved")))return this.body.value=this.props.rawValue,this.sendOnChange({event:e,type:"cancel"})},t.prototype._reset=function(e){return this.body.value=this.props.rawValue,this.sendOnChange({event:e,type:"reset"}),this.body.focus()},t.prototype._save=function(e){return this.sendOnChange({event:e,type:"save"})},t.prototype.sendOnChange=function(e){var t,n,r;return n=e.event,r=e.type,"function"==typeof(t=this.props).onChange?t.onChange({event:n,type:r,value:this.body.value,hasChanged:this.body.value!==this.props.rawValue}):void 0},t}(r.Component)},"0KrW":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,a=function(e){function t(){return this.switchMode=s(this.switchMode,this),this.count=s(this.count,this),this.render=s(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n,r,s;return Object(o.div)({className:"game-mode game-mode--beatmapsets"},Object(o.ul)({className:"game-mode__items"},function(){var i,a,c,u,l,p;for(p=[],a=0,c=(u=BeatmapHelper.modes).length;a<c;a++)s=u[a],n=!(this.props.enableAll||null!=this.props.beatmaps[s]),e=s===this.props.currentMode,r="game-mode-link",e&&(r+=" game-mode-link--active"),n&&(r+=" game-mode-link--disabled"),t=this.count(s),p.push(Object(o.li)({className:"game-mode__item",key:s},Object(o.a)({className:r,onClick:this.switchMode,href:null!=(l="function"==typeof(i=this.props).hrefFunc?i.hrefFunc(s):void 0)?l:"#","data-mode":s,"data-disabled":n},osu.trans("beatmaps.mode."+s),null!=t?Object(o.span)({className:"game-mode-link__badge"},t):void 0)));return p}.call(this)))},t.prototype.count=function(e){var t,n;return null!=(null!=(n=this.props.counts)?n[e]:void 0)?this.props.counts[e]:this.props.showCounts&&(t=Number(_.sumBy(this.props.beatmaps[e],(function(e){return!e.convert}))))>0?t:void 0},t.prototype.switchMode=function(e){var t,n;if(e.preventDefault(),t=(n=e.currentTarget).dataset.mode,this.props.currentMode!==t&&null!=t&&"true"!==n.dataset.disabled)return $.publish("playmode:set",{mode:t})},t}(r.Component)},"0O0h":function(e,t,n){"use strict";var r=["http","https","mailto","tel"];e.exports=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var o=t.indexOf(":");if(-1===o)return t;for(var s=r.length,i=-1;++i<s;){var a=r[i];if(o===a.length&&t.slice(0,a.length).toLowerCase()===a)return t}return-1!==(i=t.indexOf("?"))&&o>i?t:-1!==(i=t.indexOf("#"))&&o>i?t:"javascript:void(0)"}},"0h6b":function(e,t,n){"use strict";n.r(t);var r=n("YLtl"),o={namedRoutes:{"admin.beatmapsets.covers":{uri:"admin/beatmapsets/{beatmapset}/covers",methods:["GET","HEAD"],domain:null},"admin.beatmapsets.covers.regenerate":{uri:"admin/beatmapsets/{beatmapset}/covers/regenerate",methods:["POST"],domain:null},"admin.beatmapsets.covers.remove":{uri:"admin/beatmapsets/{beatmapset}/covers/remove",methods:["POST"],domain:null},"admin.beatmapsets.show":{uri:"admin/beatmapsets/{beatmapset}",methods:["GET","HEAD"],domain:null},"admin.beatmapsets.update":{uri:"admin/beatmapsets/{beatmapset}",methods:["PUT","PATCH"],domain:null},"admin.contests.get-zip":{uri:"admin/contests/{contest}/zip",methods:["POST"],domain:null},"admin.contests.index":{uri:"admin/contests",methods:["GET","HEAD"],domain:null},"admin.contests.show":{uri:"admin/contests/{contest}",methods:["GET","HEAD"],domain:null},"admin.user-contest-entries.destroy":{uri:"admin/user-contest-entries/{user_contest_entry}",methods:["DELETE"],domain:null},"admin.user-contest-entries.restore":{uri:"admin/user-contest-entries/{user_contest_entry}/restore",methods:["POST"],domain:null},"admin.logs.index":{uri:"admin/logs",methods:["GET","HEAD"],domain:null},"admin.root":{uri:"admin",methods:["GET","HEAD"],domain:null},"admin.forum.forum-covers.index":{uri:"admin/forum/forum-covers",methods:["GET","HEAD"],domain:null},"admin.forum.forum-covers.store":{uri:"admin/forum/forum-covers",methods:["POST"],domain:null},"admin.forum.forum-covers.update":{uri:"admin/forum/forum-covers/{forum_cover}",methods:["PUT","PATCH"],domain:null},"admin.store.addresses.update":{uri:"admin/store/addresses/{address}",methods:["PUT","PATCH"],domain:null},"admin.store.orders.ship":{uri:"admin/store/orders/ship",methods:["POST"],domain:null},"admin.store.orders.index":{uri:"admin/store/orders",methods:["GET","HEAD"],domain:null},"admin.store.orders.show":{uri:"admin/store/orders/{order}",methods:["GET","HEAD"],domain:null},"admin.store.orders.update":{uri:"admin/store/orders/{order}",methods:["PUT","PATCH"],domain:null},"admin.store.orders.items.update":{uri:"admin/store/orders/{order}/items/{item}",methods:["PUT","PATCH"],domain:null},"admin.store.redirect:admin.store.orders.index":{uri:"admin/store",methods:["GET","HEAD"],domain:null},"artists.index":{uri:"beatmaps/artists",methods:["GET","HEAD"],domain:null},"artists.show":{uri:"beatmaps/artists/{artist}",methods:["GET","HEAD"],domain:null},"packs.index":{uri:"beatmaps/packs",methods:["GET","HEAD"],domain:null},"packs.show":{uri:"beatmaps/packs/{pack}",methods:["GET","HEAD"],domain:null},"packs.raw":{uri:"beatmaps/packs/{pack}/raw",methods:["GET","HEAD"],domain:null},"beatmaps.scores":{uri:"beatmaps/{beatmap}/scores",methods:["GET","HEAD"],domain:null},"beatmaps.show":{uri:"beatmaps/{beatmap}",methods:["GET","HEAD"],domain:null},"beatmap-discussions.vote":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/vote",methods:["PUT"],domain:null},"beatmap-discussions.restore":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/restore",methods:["POST"],domain:null},"beatmap-discussions.deny-kudosu":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/deny-kudosu",methods:["POST"],domain:null},"beatmap-discussions.allow-kudosu":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/allow-kudosu",methods:["POST"],domain:null},"beatmap-discussions.index":{uri:"beatmapsets/beatmap-discussions",methods:["GET","HEAD"],domain:null},"beatmap-discussions.show":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}",methods:["GET","HEAD"],domain:null},"beatmap-discussions.destroy":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}",methods:["DELETE"],domain:null},"beatmap-discussion-posts.restore":{uri:"beatmapsets/beatmap-discussions-posts/{beatmap_discussion_post}/restore",methods:["POST"],domain:null},"beatmap-discussion-posts.index":{uri:"beatmapsets/beatmap-discussion-posts",methods:["GET","HEAD"],domain:null},"beatmap-discussion-posts.store":{uri:"beatmapsets/beatmap-discussion-posts",methods:["POST"],domain:null},"beatmap-discussion-posts.update":{uri:"beatmapsets/beatmap-discussion-posts/{beatmap_discussion_post}",methods:["PUT","PATCH"],domain:null},"beatmap-discussion-posts.destroy":{uri:"beatmapsets/beatmap-discussion-posts/{beatmap_discussion_post}",methods:["DELETE"],domain:null},"beatmapsets.events.index":{uri:"beatmapsets/events",methods:["GET","HEAD"],domain:null},"beatmapsets.watches.index":{uri:"beatmapsets/watches",methods:["GET","HEAD"],domain:null},"beatmapsets.watches.update":{uri:"beatmapsets/watches/{watch}",methods:["PUT","PATCH"],domain:null},"beatmapsets.watches.destroy":{uri:"beatmapsets/watches/{watch}",methods:["DELETE"],domain:null},"beatmapsets.discussions.votes.index":{uri:"beatmapsets/discussions/votes",methods:["GET","HEAD"],domain:null},"beatmapsets.favourites.store":{uri:"beatmapsets/{beatmapset}/favourites",methods:["POST"],domain:null},"beatmapsets.search":{uri:"beatmapsets/search/{filters?}",methods:["GET","HEAD"],domain:null},"beatmapsets.discussion":{uri:"beatmapsets/{beatmapset}/discussion/{beatmap?}/{mode?}/{filter?}",methods:["GET","HEAD"],domain:null},"beatmapsets.discussion-lock":{uri:"beatmapsets/{beatmapset}/discussion-lock",methods:["POST"],domain:null},"beatmapsets.discussion-unlock":{uri:"beatmapsets/{beatmapset}/discussion-unlock",methods:["POST"],domain:null},"beatmapsets.download":{uri:"beatmapsets/{beatmapset}/download",methods:["GET","HEAD"],domain:null},"beatmapsets.love":{uri:"beatmapsets/{beatmapset}/love",methods:["PUT"],domain:null},"beatmapsets.nominate":{uri:"beatmapsets/{beatmapset}/nominate",methods:["PUT"],domain:null},"beatmapsets.index":{uri:"beatmapsets",methods:["GET","HEAD"],domain:null},"beatmapsets.show":{uri:"beatmapsets/{beatmapset}",methods:["GET","HEAD"],domain:null},"beatmapsets.update":{uri:"beatmapsets/{beatmapset}",methods:["PUT","PATCH"],domain:null},"beatmapsets.destroy":{uri:"beatmapsets/{beatmapset}",methods:["DELETE"],domain:null},"scores.download":{uri:"scores/{mode}/{score}/download",methods:["GET","HEAD"],domain:null},"client-verifications.create":{uri:"client-verifications/create",methods:["GET","HEAD"],domain:null},"client-verifications.store":{uri:"client-verifications",methods:["POST"],domain:null},"comments.index":{uri:"comments",methods:["GET","HEAD"],domain:null},"comments.store":{uri:"comments",methods:["POST"],domain:null},"comments.show":{uri:"comments/{comment}",methods:["GET","HEAD"],domain:null},"comments.update":{uri:"comments/{comment}",methods:["PUT","PATCH"],domain:null},"comments.destroy":{uri:"comments/{comment}",methods:["DELETE"],domain:null},"comments.restore":{uri:"comments/{comment}/restore",methods:["POST"],domain:null},"comments.vote":{uri:"comments/{comment}/vote",methods:["POST"],domain:null},"contests.index":{uri:"community/contests",methods:["GET","HEAD"],domain:null},"contests.show":{uri:"community/contests/{contest}",methods:["GET","HEAD"],domain:null},"contest-entries.vote":{uri:"community/contest-entries/{contest_entry}/vote",methods:["PUT"],domain:null},"contest-entries.store":{uri:"community/contest-entries",methods:["POST"],domain:null},"contest-entries.destroy":{uri:"community/contest-entries/{contest_entry}",methods:["DELETE"],domain:null},"livestreams.promote":{uri:"community/livestreams/promote",methods:["POST"],domain:null},"livestreams.index":{uri:"community/livestreams",methods:["GET","HEAD"],domain:null},"matches.history":{uri:"community/matches/{match}/history",methods:["GET","HEAD"],domain:null},"matches.show":{uri:"community/matches/{match}",methods:["GET","HEAD"],domain:null},"tournaments.unregister":{uri:"community/tournaments/{tournament}/unregister",methods:["POST"],domain:null},"tournaments.register":{uri:"community/tournaments/{tournament}/register",methods:["POST"],domain:null},"tournaments.index":{uri:"community/tournaments",methods:["GET","HEAD"],domain:null},"tournaments.show":{uri:"community/tournaments/{tournament}",methods:["GET","HEAD"],domain:null},"forum.forum-covers.store":{uri:"community/forums/forum-covers",methods:["POST"],domain:null},"forum.forum-covers.update":{uri:"community/forums/forum-covers/{forum_cover}",methods:["PUT","PATCH"],domain:null},"forum.forum-covers.destroy":{uri:"community/forums/forum-covers/{forum_cover}",methods:["DELETE"],domain:null},"forum.posts.raw":{uri:"community/forums/posts/{post}/raw",methods:["GET","HEAD"],domain:null},"forum.posts.restore":{uri:"community/forums/posts/{post}/restore",methods:["POST"],domain:null},"forum.posts.show":{uri:"community/forums/posts/{post}",methods:["GET","HEAD"],domain:null},"forum.posts.edit":{uri:"community/forums/posts/{post}/edit",methods:["GET","HEAD"],domain:null},"forum.posts.update":{uri:"community/forums/posts/{post}",methods:["PUT","PATCH"],domain:null},"forum.posts.destroy":{uri:"community/forums/posts/{post}",methods:["DELETE"],domain:null},"forum.topics.edit-poll":{uri:"community/forums/topics/{topic}/edit-poll",methods:["GET","HEAD"],domain:null},"forum.topics.preview":{uri:"community/forums/topics/preview",methods:["POST"],domain:null},"forum.topics.issue-tag":{uri:"community/forums/topics/{topic}/issue-tag",methods:["POST"],domain:null},"forum.topics.lock":{uri:"community/forums/topics/{topic}/lock",methods:["POST"],domain:null},"forum.topics.move":{uri:"community/forums/topics/{topic}/move",methods:["POST"],domain:null},"forum.topics.pin":{uri:"community/forums/topics/{topic}/pin",methods:["POST"],domain:null},"forum.topics.reply":{uri:"community/forums/topics/{topic}/reply",methods:["POST"],domain:null},"forum.topics.vote":{uri:"community/forums/topics/{topic}/vote",methods:["POST"],domain:null},"forum.topics.vote-feature":{uri:"community/forums/topics/{topic}/vote-feature",methods:["POST"],domain:null},"forum.topics.create":{uri:"community/forums/topics/create",methods:["GET","HEAD"],domain:null},"forum.topics.store":{uri:"community/forums/topics",methods:["POST"],domain:null},"forum.topics.show":{uri:"community/forums/topics/{topic}",methods:["GET","HEAD"],domain:null},"forum.topics.update":{uri:"community/forums/topics/{topic}",methods:["PUT","PATCH"],domain:null},"forum.topic-covers.store":{uri:"community/forums/topic-covers",methods:["POST"],domain:null},"forum.topic-covers.update":{uri:"community/forums/topic-covers/{topic_cover}",methods:["PUT","PATCH"],domain:null},"forum.topic-covers.destroy":{uri:"community/forums/topic-covers/{topic_cover}",methods:["DELETE"],domain:null},"forum.topic-watches.index":{uri:"community/forums/topic-watches",methods:["GET","HEAD"],domain:null},"forum.topic-watches.update":{uri:"community/forums/topic-watches/{topic_watch}",methods:["PUT","PATCH"],domain:null},"forum.forums.mark-as-read":{uri:"community/forums/mark-as-read",methods:["POST"],domain:null},"forum.forums.search":{uri:"community/forums/search",methods:["GET","HEAD"],domain:null},"forum.forums.index":{uri:"community/forums",methods:["GET","HEAD"],domain:null},"forum.forums.show":{uri:"community/forums/{forum}",methods:["GET","HEAD"],domain:null},"chat.new":{uri:"community/chat/new",methods:["POST"],domain:null},"chat.updates":{uri:"community/chat/updates",methods:["GET","HEAD"],domain:null},"chat.presence":{uri:"community/chat/presence",methods:["GET","HEAD"],domain:null},"chat.channels.messages.index":{uri:"community/chat/channels/{channel}/messages",methods:["GET","HEAD"],domain:null},"chat.channels.messages.store":{uri:"community/chat/channels/{channel}/messages",methods:["POST"],domain:null},"chat.channels.join":{uri:"community/chat/channels/{channel}/users/{user}",methods:["PUT"],domain:null},"chat.channels.part":{uri:"community/chat/channels/{channel}/users/{user}",methods:["DELETE"],domain:null},"chat.channels.mark-as-read":{uri:"community/chat/channels/{channel}/mark-as-read/{message}",methods:["PUT"],domain:null},"chat.channels.index":{uri:"community/chat/channels",methods:["GET","HEAD"],domain:null},"chat.index":{uri:"community/chat",methods:["GET","HEAD"],domain:null},"groups.show":{uri:"groups/{group}",methods:["GET","HEAD"],domain:null},"account.edit":{uri:"home/account/edit",methods:["GET","HEAD"],domain:null},"account.avatar":{uri:"home/account/avatar",methods:["POST"],domain:null},"account.cover":{uri:"home/account/cover",methods:["POST"],domain:null},"account.email":{uri:"home/account/email",methods:["PUT"],domain:null},"account.notification-options":{uri:"home/account/notification-options",methods:["PUT"],domain:null},"account.options":{uri:"home/account/options",methods:["PUT"],domain:null},"account.password":{uri:"home/account/password",methods:["PUT"],domain:null},"account.reissue-code":{uri:"home/account/reissue-code",methods:["POST"],domain:null},"account.sessions.destroy":{uri:"home/account/sessions/{session}",methods:["DELETE"],domain:null},"account.":{uri:"home/account/verify",methods:["GET","HEAD"],domain:null},"account.verify":{uri:"home/account/verify",methods:["POST"],domain:null},"account.update":{uri:"home/account",methods:["PUT"],domain:null},"quick-search":{uri:"home/quick-search",methods:["GET","HEAD"],domain:null},search:{uri:"home/search",methods:["GET","HEAD"],domain:null},"bbcode-preview":{uri:"home/bbcode-preview",methods:["POST"],domain:null},"changelog.build":{uri:"home/changelog/{stream}/{build}",methods:["GET","HEAD"],domain:null},"changelog.index":{uri:"home/changelog",methods:["GET","HEAD"],domain:null},"changelog.show":{uri:"home/changelog/{changelog}",methods:["GET","HEAD"],domain:null},download:{uri:"home/download",methods:["GET","HEAD"],domain:null},"set-locale":{uri:"home/set-locale",methods:["POST"],domain:null},"support-the-game":{uri:"home/support",methods:["GET","HEAD"],domain:null},testflight:{uri:"home/testflight",methods:["GET","HEAD"],domain:null},"password-reset":{uri:"home/password-reset",methods:["GET","HEAD"],domain:null},"support-osu-popup":{uri:"home/support-osu-popup",methods:["GET","HEAD"],domain:null},"download-quota-check":{uri:"home/download-quota-check",methods:["GET","HEAD"],domain:null},"blocks.store":{uri:"home/blocks",methods:["POST"],domain:null},"blocks.destroy":{uri:"home/blocks/{block}",methods:["DELETE"],domain:null},"friends.index":{uri:"home/friends",methods:["GET","HEAD"],domain:null},"friends.store":{uri:"home/friends",methods:["POST"],domain:null},"friends.destroy":{uri:"home/friends/{friend}",methods:["DELETE"],domain:null},"news.index":{uri:"home/news",methods:["GET","HEAD"],domain:null},"news.store":{uri:"home/news",methods:["POST"],domain:null},"news.show":{uri:"home/news/{news}",methods:["GET","HEAD"],domain:null},"news.update":{uri:"home/news/{news}",methods:["PUT","PATCH"],domain:null},"notifications.index":{uri:"home/notifications",methods:["GET","HEAD"],domain:null},"notifications.endpoint":{uri:"home/notifications/endpoint",methods:["GET","HEAD"],domain:null},"notifications.mark-read":{uri:"home/notifications/mark-read",methods:["POST"],domain:null},"messages.users.show":{uri:"home/messages/users/{user}",methods:["GET","HEAD"],domain:null},"follows.store":{uri:"home/follows",methods:["POST"],domain:null},"follows.destroy":{uri:"home/follows",methods:["DELETE"],domain:null},legal:{uri:"legal/{page}",methods:["GET","HEAD"],domain:null},"oauth.authorized-clients.destroy":{uri:"oauth/authorized-clients/{authorized_client}",methods:["DELETE"],domain:null},"oauth.clients.index":{uri:"oauth/clients",methods:["GET","HEAD"],domain:null},"oauth.clients.store":{uri:"oauth/clients",methods:["POST"],domain:null},"oauth.clients.update":{uri:"oauth/clients/{client}",methods:["PUT","PATCH"],domain:null},"oauth.clients.destroy":{uri:"oauth/clients/{client}",methods:["DELETE"],domain:null},rankings:{uri:"rankings/{mode?}/{type?}",methods:["GET","HEAD"],domain:null},"reports.store":{uri:"reports",methods:["POST"],domain:null},login:{uri:"session",methods:["POST"],domain:null},logout:{uri:"session",methods:["DELETE"],domain:null},"users.check-username-availability":{uri:"users/check-username-availability",methods:["POST"],domain:null},"users.check-username-exists":{uri:"users/check-username-exists",methods:["POST"],domain:null},"users.disabled":{uri:"users/disabled",methods:["GET","HEAD"],domain:null},"users.card":{uri:"users/{user}/card",methods:["GET","HEAD"],domain:null},"users.page":{uri:"users/{user}/page",methods:["PUT"],domain:null},"users.kudosu":{uri:"users/{user}/kudosu",methods:["GET","HEAD"],domain:null},"users.recent-activity":{uri:"users/{user}/recent_activity",methods:["GET","HEAD"],domain:null},"users.scores":{uri:"users/{user}/scores/{type}",methods:["GET","HEAD"],domain:null},"users.beatmapsets":{uri:"users/{user}/beatmapsets/{type}",methods:["GET","HEAD"],domain:null},"users.posts":{uri:"users/{user}/posts",methods:["GET","HEAD"],domain:null},"users.modding.index":{uri:"users/{user}/modding",methods:["GET","HEAD"],domain:null},"users.modding.events":{uri:"users/{user}/modding/events",methods:["GET","HEAD"],domain:null},"users.modding.discussions":{uri:"users/{user}/modding/discussions",methods:["GET","HEAD"],domain:null},"users.modding.posts":{uri:"users/{user}/modding/posts",methods:["GET","HEAD"],domain:null},"users.modding.votes-given":{uri:"users/{user}/modding/votes-given",methods:["GET","HEAD"],domain:null},"users.modding.votes-received":{uri:"users/{user}/modding/votes-received",methods:["GET","HEAD"],domain:null},"users.show":{uri:"users/{user}/{mode?}",methods:["GET","HEAD"],domain:null},"users.store":{uri:"users",methods:["POST"],domain:null},"wiki.show":{uri:"help/wiki/{page?}",methods:["GET","HEAD"],domain:null},"redirect:wiki.show":{uri:"wiki/{page?}",methods:["GET","HEAD"],domain:null},"store.redirect:store.products.index":{uri:"store",methods:["GET","HEAD"],domain:null},"store.products.index":{uri:"store/listing",methods:["GET","HEAD"],domain:null},"store.invoice.show":{uri:"store/invoice/{invoice}",methods:["GET","HEAD"],domain:null},"store.":{uri:"store/products/{product}/notification-request",methods:["DELETE"],domain:null},"store.notification-request":{uri:"store/products/{product}/notification-request",methods:["POST"],domain:null},"store.cart.show":{uri:"store/cart",methods:["GET","HEAD"],domain:null},"store.cart.store":{uri:"store/cart",methods:["POST"],domain:null},"store.checkout.store":{uri:"store/checkout",methods:["POST"],domain:null},"store.checkout.show":{uri:"store/checkout/{checkout}",methods:["GET","HEAD"],domain:null},"store.orders.index":{uri:"store/orders",methods:["GET","HEAD"],domain:null},"store.redirect:store.products.show":{uri:"store/product/{product}",methods:["GET","HEAD"],domain:null},"store.products.show":{uri:"store/products/{product}",methods:["GET","HEAD"],domain:null},"payments.paypal.approved":{uri:"payments/paypal/approved",methods:["GET","HEAD"],domain:null},"payments.paypal.declined":{uri:"payments/paypal/declined",methods:["GET","HEAD"],domain:null},"payments.paypal.create":{uri:"payments/paypal/create",methods:["POST"],domain:null},"payments.paypal.completed":{uri:"payments/paypal/completed",methods:["GET","HEAD"],domain:null},"payments.paypal.ipn":{uri:"payments/paypal/ipn",methods:["POST"],domain:null},"payments.xsolla.completed":{uri:"payments/xsolla/completed",methods:["GET","HEAD"],domain:null},"payments.xsolla.token":{uri:"payments/xsolla/token",methods:["POST"],domain:null},"payments.xsolla.callback":{uri:"payments/xsolla/callback",methods:["POST"],domain:null},"payments.centili.callback":{uri:"payments/centili/callback",methods:["POST","GET","HEAD"],domain:null},"payments.centili.completed":{uri:"payments/centili/completed",methods:["GET","HEAD"],domain:null},"payments.centili.failed":{uri:"payments/centili/failed",methods:["GET","HEAD"],domain:null},"payments.shopify.callback":{uri:"payments/shopify/callback",methods:["POST"],domain:null},"api.beatmapsets.favourites.store":{uri:"api/v2/beatmapsets/{beatmapset}/favourites",methods:["POST"],domain:null},"api.comments.index":{uri:"api/v2/comments",methods:["GET","HEAD"],domain:null},"api.comments.store":{uri:"api/v2/comments",methods:["POST"],domain:null},"api.comments.show":{uri:"api/v2/comments/{comment}",methods:["GET","HEAD"],domain:null},"api.comments.update":{uri:"api/v2/comments/{comment}",methods:["PUT","PATCH"],domain:null},"api.comments.destroy":{uri:"api/v2/comments/{comment}",methods:["DELETE"],domain:null},"api.comments.vote":{uri:"api/v2/comments/{comment}/vote",methods:["POST"],domain:null},"api.":{uri:"api/v2/users/{user}/{mode?}",methods:["GET","HEAD"],domain:null},"api.chat.new":{uri:"api/v2/chat/new",methods:["POST"],domain:null},"api.chat.updates":{uri:"api/v2/chat/updates",methods:["GET","HEAD"],domain:null},"api.chat.presence":{uri:"api/v2/chat/presence",methods:["GET","HEAD"],domain:null},"api.chat.channels.messages.index":{uri:"api/v2/chat/channels/{channel}/messages",methods:["GET","HEAD"],domain:null},"api.chat.channels.messages.store":{uri:"api/v2/chat/channels/{channel}/messages",methods:["POST"],domain:null},"api.chat.channels.join":{uri:"api/v2/chat/channels/{channel}/users/{user}",methods:["PUT"],domain:null},"api.chat.channels.part":{uri:"api/v2/chat/channels/{channel}/users/{user}",methods:["DELETE"],domain:null},"api.chat.channels.mark-as-read":{uri:"api/v2/chat/channels/{channel}/mark-as-read/{message}",methods:["PUT"],domain:null},"api.chat.channels.index":{uri:"api/v2/chat/channels",methods:["GET","HEAD"],domain:null},"api.changelog.build":{uri:"api/v2/changelog/{stream}/{build}",methods:["GET","HEAD"],domain:null},"api.changelog.index":{uri:"api/v2/changelog",methods:["GET","HEAD"],domain:null},"api.changelog.show":{uri:"api/v2/changelog/{changelog}",methods:["GET","HEAD"],domain:null},"api.rooms.index":{uri:"api/v2/rooms/{mode?}",methods:["GET","HEAD"],domain:null},"api.rooms.join":{uri:"api/v2/rooms/{room}/users/{user}",methods:["PUT"],domain:null},"api.rooms.part":{uri:"api/v2/rooms/{room}/users/{user}",methods:["DELETE"],domain:null},"api.rooms.":{uri:"api/v2/rooms/{room}/leaderboard",methods:["GET","HEAD"],domain:null},"api.rooms.playlist.scores.store":{uri:"api/v2/rooms/{room}/playlist/{playlist}/scores",methods:["POST"],domain:null},"api.rooms.playlist.scores.update":{uri:"api/v2/rooms/{room}/playlist/{playlist}/scores/{score}",methods:["PUT","PATCH"],domain:null},"api.reports.store":{uri:"api/v2/reports",methods:["POST"],domain:null},"api.rooms.store":{uri:"api/v2/rooms",methods:["POST"],domain:null},"api.rooms.show":{uri:"api/v2/rooms/{room}",methods:["GET","HEAD"],domain:null},"api.scores.download":{uri:"api/v2/scores/{mode}/{score}/download",methods:["GET","HEAD"],domain:null},"api.beatmaps.show":{uri:"api/v2/beatmaps/{beatmap}",methods:["GET","HEAD"],domain:null},"api.beatmapsets.show":{uri:"api/v2/beatmapsets/{beatmapset}",methods:["GET","HEAD"],domain:null},"api.friends.index":{uri:"api/v2/friends",methods:["GET","HEAD"],domain:null},"api.notifications.index":{uri:"api/v2/notifications",methods:["GET","HEAD"],domain:null},"api.notifications.mark-read":{uri:"api/v2/notifications/mark-read",methods:["POST"],domain:null},"lio.user-achievement":{uri:"_lio/user-achievement/{user}/{achievement}/{beatmap?}",methods:["POST"],domain:null},home:{uri:"home",methods:["GET","HEAD"],domain:null},"redirect:home":{uri:"/",methods:["GET","HEAD"],domain:null},"redirect:forum.posts.show":{uri:"po/{post}",methods:["GET","HEAD"],domain:null},"redirect:forum.topics.show":{uri:"forum/t/{topic}",methods:["GET","HEAD"],domain:null},"redirect:forum.forums.show":{uri:"forum/{forum}",methods:["GET","HEAD"],domain:null},"redirect:beatmaps.show":{uri:"b/{beatmap}",methods:["GET","HEAD"],domain:null},"redirect:groups.show":{uri:"g/{group}",methods:["GET","HEAD"],domain:null},"redirect:beatmapsets.show":{uri:"s/{beatmapset}",methods:["GET","HEAD"],domain:null},"redirect:users.show":{uri:"u/{user}",methods:["GET","HEAD"],domain:null},"redirect:forum.forums.index":{uri:"forum",methods:["GET","HEAD"],domain:null},"redirect:matches.show":{uri:"mp/{match}",methods:["GET","HEAD"],domain:null},"status.index":{uri:"/",methods:["GET","HEAD"],domain:"stat.ppy.sh"},"oauth.authorizations.authorize":{uri:"oauth/authorize",methods:["GET","HEAD"],domain:null},"passport.authorizations.approve":{uri:"oauth/authorize",methods:["POST"],domain:null},"passport.authorizations.deny":{uri:"oauth/authorize",methods:["DELETE"],domain:null},"oauth.passport.token":{uri:"oauth/token",methods:["POST"],domain:null}},baseUrl:"https://osu.ppy.sh/",baseProtocol:"https",baseDomain:"osu.ppy.sh",basePort:!1,defaultParameters:[]};if(void 0!==window.Ziggy)for(var s in window.Ziggy.namedRoutes)o.namedRoutes[s]=window.Ziggy.namedRoutes[s];var i=n("fWFV"),a=n.n(i);function c(e,t,n){return null==t&&(t={}),a()(e,t,n,o).toString()}function u(e,t,n,o){const s=c(e,n),i=document.createElement("a");return i.textContent=t,i.href=s,null!=o&&Object(r.forEach)(o,(e,t)=>{null!=e&&i.setAttribute(t,e.toString())}),i.outerHTML}n.d(t,"route",(function(){return c})),n.d(t,"link_to_route",(function(){return u}))},"1OSS":function(e,t,n){"use strict";var r=n("AGZR"),o=n("PsOV"),s=n("BhdQ"),i=n("Sy6K"),a=n("tmLN"),c=n("WU0t");e.exports=function(e,t){var n,s,i={};for(s in t||(t={}),d)n=t[s],i[s]=null==n?d[s]:n;return(i.position.indent||i.position.start)&&(i.indent=i.position.indent||[],i.position=i.position.start),function(e,t){var n,s,i,d,B,L,z,V,F,G,$,W,q,K,J,Y,X,Q,Z,ee,te=t.additional,ne=t.nonTerminated,re=t.text,oe=t.reference,se=t.warning,ie=t.textContext,ae=t.referenceContext,ce=t.warningContext,ue=t.position,le=t.indent||[],pe=e.length,de=0,he=-1,me=ue.column||1,fe=ue.line||1,ve="",be=[];for("string"==typeof te&&(te=te.charCodeAt(0)),Y=ye(),V=se?function(e,t){var n=ye();n.column+=t,n.offset+=t,se.call(ce,R[e],n,e)}:p,de--,pe++;++de<pe;)if(B===m&&(me=le[he]||1),(B=e.charCodeAt(de))===b){if((z=e.charCodeAt(de+1))===h||z===m||z===f||z===v||z===b||z===g||z!=z||te&&z===te){ve+=l(B),me++;continue}for(W=q=de+1,Z=q,z===w?(Z=++W,(z=e.charCodeAt(Z))===O||z===S?(K=k,Z=++W):K=x):K=E,n="",$="",d="",J=T[K],Z--;++Z<pe&&J(z=e.charCodeAt(Z));)d+=l(z),K===E&&u.call(r,d)&&(n=d,$=r[d]);(i=e.charCodeAt(Z)===y)&&(Z++,(s=K===E&&c(d))&&(n=d,$=s)),Q=1+Z-q,(i||ne)&&(d?K===E?(i&&!$?V(I,1):(n!==d&&(Q=1+(Z=W+n.length)-W,i=!1),i||(F=n?A:C,t.attribute?(z=e.charCodeAt(Z))===_?(V(F,Q),$=null):a(z)?$=null:V(F,Q):V(F,Q))),L=$):(i||V(P,Q),(ee=L=parseInt(d,N[K]))>=55296&&ee<=57343||ee>1114111?(V(U,Q),L=l(j)):L in o?(V(M,Q),L=o[L]):(G="",H(L)&&V(M,Q),L>65535&&(G+=l((L-=65536)>>>10|55296),L=56320|1023&L),L=G+l(L))):K!==E&&V(D,Q)),L?(ge(),Y=ye(),de=Z-1,me+=Z-q+1,be.push(L),(X=ye()).offset++,oe&&oe.call(ae,L,{start:Y,end:X},e.slice(q-1,Z)),Y=X):(d=e.slice(q-1,Z),ve+=d,me+=d.length,de=Z-1)}else 10===B&&(fe++,he++,me=0),B==B?(ve+=l(B),me++):ge();return be.join("");function ye(){return{line:fe,column:me,offset:de+(ue.offset||0)}}function ge(){ve&&(be.push(ve),re&&re.call(ie,ve,{start:Y,end:ye()}),ve="")}}(e,i)};var u={}.hasOwnProperty,l=String.fromCharCode,p=Function.prototype,d={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},h=9,m=10,f=12,v=32,b=38,y=59,g=60,_=61,w=35,O=88,S=120,j=65533,E="named",k="hexadecimal",x="decimal",N={};N[k]=16,N[x]=10;var T={};T[E]=a,T[x]=s,T[k]=i;var A=1,P=2,C=3,D=4,I=5,M=6,U=7,R={};function H(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)}R[A]="Named character references must be terminated by a semicolon",R[P]="Numeric character references must be terminated by a semicolon",R[C]="Named character references cannot be empty",R[D]="Numeric character references cannot be empty",R[I]="Named character references must be known",R[M]="Numeric character references cannot be disallowed",R[U]="Numeric character references cannot be outside the permissible Unicode range"},"2LKk":function(e,t,n){"use strict";var r,o,s=n("UVl7"),i=n("2b+G"),a=n("O0zI"),c=n("cF9b"),u=n("f4vq"),l=n("cDcd"),p=n("NzAu"),d=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty;r=l.createElement,o=u.a.dataStore.uiState;var m=function(e){function t(){return this.setSort=d(this.setSort,this),this.renderButton=d(this.renderButton,this),this.render=d(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){return Object(p.div)({className:osu.classWithModifiers("sort",this.props.modifiers)},Object(p.div)({className:"sort__items"},Object(p.div)({className:"sort__item sort__item--title"},osu.trans("sort._")),this.renderButton("new"),this.renderButton("old"),this.renderButton("top")))},t.prototype.renderButton=function(e){return r(c.a,null,(t=this,function(){var n,r;return n="sort__item sort__item--button",e===(null!=(r=o.comments.loadingSort)?r:o.comments.currentSort)&&(n+=" sort__item--active"),Object(p.button)({className:n,"data-sort":e,onClick:t.setSort},osu.trans("sort."+e))}));var t},t.prototype.setSort=function(e){return $.publish("comments:sort",{sort:e.target.dataset.sort})},t}(l.PureComponent),f=n("4PZ6"),v=n("SYfz");n.d(t,"a",(function(){return S}));var b,y,g,w=function(e,t){return function(){return e.apply(t,arguments)}},O={}.hasOwnProperty;b=l.createElement,y=u.a.dataStore.commentStore,g=u.a.dataStore.uiState;var S=function(e){function t(){return this.renderFollowToggle=w(this.renderFollowToggle,this),this.renderShowDeletedToggle=w(this.renderShowDeletedToggle,this),this.renderComment=w(this.renderComment,this),this.render=w(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)O.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){return b(c.a,null,(e=this,function(){var t;return t=g.comments.topLevelCommentIds.map((function(e){return y.comments.get(e)})),Object(p.div)({className:osu.classWithModifiers("comments",e.props.modifiers)},Object(p.div)({className:"u-has-anchor u-has-anchor--no-event"},Object(p.div)({className:"fragment-target",id:"comments"})),Object(p.h2)({className:"comments__title"},osu.trans("comments.title"),Object(p.span)({className:"comments__count"},osu.formatNumber(g.comments.total))),Object(p.div)({className:"comments__new"},b(i.a,{commentableType:e.props.commentableType,commentableId:e.props.commentableId,focus:!1,modifiers:e.props.modifiers})),Object(p.div)({className:"comments__content"},Object(p.div)({className:"comments__items comments__items--toolbar"},b(m,{modifiers:e.props.modifiers}),Object(p.div)({className:osu.classWithModifiers("sort",e.props.modifiers)},Object(p.div)({className:"sort__items"},e.renderFollowToggle(),e.renderShowDeletedToggle()))),t.length>0?Object(p.div)({className:"comments__items "+(null!=g.comments.loadingSort?"comments__items--loading":"")},t.map(e.renderComment),b(f.a,{comments:t,showDeleted:g.comments.isShowDeleted,modifiers:["top"]}),b(a.a,{commentableType:e.props.commentableType,commentableId:e.props.commentableId,comments:t,total:g.comments.topLevelCount,sort:g.comments.currentSort,modifiers:_.concat("top",e.props.modifiers)})):Object(p.div)({className:"comments__items comments__items--empty"},osu.trans("comments.empty"))))}));var e},t.prototype.renderComment=function(e){return e.isDeleted&&!g.comments.isShowDeleted?null:b(s.a,{key:e.id,comment:e,depth:0,modifiers:this.props.modifiers,showDeleted:g.comments.isShowDeleted})},t.prototype.renderShowDeletedToggle=function(){return Object(p.button)({type:"button",className:"sort__item sort__item--button",onClick:this.toggleShowDeleted},Object(p.span)({className:"sort__item-icon"},Object(p.span)({className:g.comments.isShowDeleted?"fas fa-check-square":"far fa-square"})),osu.trans("common.buttons.show_deleted"))},t.prototype.renderFollowToggle=function(){var e,t,n;return g.comments.userFollow?(e="fas fa-eye-slash",n=osu.trans("common.buttons.watch.to_0")):(e="fas fa-eye",n=osu.trans("common.buttons.watch.to_1")),t=this.props.loadingFollow?b(v.a,{modifiers:["center-inline"]}):Object(p.span)({className:e}),Object(p.button)({type:"button",className:"sort__item sort__item--button",onClick:this.toggleFollow,disabled:this.props.loadingFollow},Object(p.span)({className:"sort__item-icon"},t),n)},t.prototype.toggleShowDeleted=function(){return $.publish("comments:toggle-show-deleted")},t.prototype.toggleFollow=function(){return $.publish("comments:toggle-follow")},t}(l.PureComponent)},"2YuA":function(e,t){var n,r,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,u=[],l=!1,p=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||l||a(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"2b+G":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,o,s=n("6nUW"),i=n("cDcd"),a=n("NzAu"),c=n("SYfz"),u=n("TY2o"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;o=i.createElement,r="comment-editor";var d=function(e){function t(e){var n;this.post=l(this.post,this),this.onChange=l(this.onChange,this),this.mode=l(this.mode,this),this.isValid=l(this.isValid,this),this.handleKeyDownCallback=l(this.handleKeyDownCallback,this),this.close=l(this.close,this),this.buttonText=l(this.buttonText,this),this.render=l(this.render,this),this.componentWillUnmount=l(this.componentWillUnmount,this),this.componentDidMount=l(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.textarea=i.createRef(),this.throttledPost=_.throttle(this.post,1e3),this.handleKeyDown=InputHandler.textarea(this.handleKeyDownCallback),this.state={message:null!=(n=this.props.message)?n:"",posting:!1}}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){var e,t,n;if(null!=(e=this.textarea.current)&&(e.selectionStart=-1),null==(t=this.props.focus)||t)return null!=(n=this.textarea.current)?n.focus():void 0},t.prototype.componentWillUnmount=function(){var e;return this.throttledPost.cancel(),null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e;return e=osu.classWithModifiers(r,this.props.modifiers),"new"===this.mode()&&(e+=" "+r+"--fancy"),Object(a.div)({className:e},"new"===this.mode()?Object(a.div)({className:r+"__avatar"},o(u.a,{user:currentUser,modifiers:["full-circle"]})):void 0,o(TextareaAutosize,{className:r+"__message",ref:this.textarea,value:this.state.message,placeholder:osu.trans("comments.placeholder."+this.mode()),onChange:this.onChange,onKeyDown:this.handleKeyDown,disabled:null==currentUser.id||this.state.posting}),Object(a.div)({className:r+"__footer"},Object(a.div)({className:r+"__footer-item "+r+"__footer-item--notice hidden-xs"},osu.trans("comments.editor.textarea_hint._",{action:osu.trans("comments.editor.textarea_hint."+this.mode())})),null!=this.props.close?Object(a.div)({className:r+"__footer-item"},o(s.a,{modifiers:["comment-editor"],text:osu.trans("common.buttons.cancel"),props:{onClick:this.props.close,disabled:this.state.posting}})):void 0,null!=currentUser.id?Object(a.div)({className:r+"__footer-item"},o(s.a,{modifiers:["comment-editor"],text:this.state.posting?o(c.a):this.buttonText(),props:{onClick:this.throttledPost,disabled:this.state.posting||!this.isValid()}})):Object(a.div)({className:r+"__footer-item"},o(s.a,{modifiers:["comment-editor"],extraClasses:["js-user-link"],text:osu.trans("comments.guest_button."+this.mode())}))))},t.prototype.buttonText=function(){var e;return e=function(){switch(this.mode()){case"reply":return"reply";case"edit":return"save";case"new":return"post"}}.call(this),osu.trans("common.buttons."+e)},t.prototype.close=function(){var e;if(null!=this.props.close&&((null!=(e=this.props.message)?e:"")===this.state.message||confirm(osu.trans("common.confirmation_unsaved"))))return this.props.close()},t.prototype.handleKeyDownCallback=function(e,t){switch(e){case InputHandler.CANCEL:return this.close();case InputHandler.SUBMIT:return this.throttledPost()}},t.prototype.isValid=function(){return null!=this.state.message&&this.state.message.length>0},t.prototype.mode=function(){return null!=this.props.parent?"reply":null!=this.props.id?"edit":"new"},t.prototype.onChange=function(e){return this.setState({message:e.target.value})},t.prototype.post=function(){var e,t,n,r,o,s,i;if("edit"===this.mode()&&this.state.message===this.props.message)return"function"==typeof(e=this.props).close?e.close():void 0;switch(this.setState({posting:!0}),t={comment:{message:this.state.message}},this.mode()){case"reply":case"new":s=laroute.route("comments.store"),n="POST",t.comment.commentable_type=this.props.commentableType,t.comment.commentable_id=this.props.commentableId,t.comment.parent_id=null!=(o=this.props.parent)?o.id:void 0,i=this,r=function(e){return i.setState({message:""}),$.publish("comments:new",e)};break;case"edit":s=laroute.route("comments.update",{comment:this.props.id}),n="PUT",r=function(e){return $.publish("comment:updated",e)}}return this.xhr=$.ajax(s,{method:n,data:t}).always(function(e){return function(){return e.setState({posting:!1})}}(this)).done(function(e){return function(t){var n,o;return r(t),"function"==typeof(n=e.props).onPosted&&n.onPosted(e.mode()),"function"==typeof(o=e.props).close?o.close():void 0}}(this)).fail((function(e,t){return osu.ajaxError(e,t)}))},t}(i.PureComponent)},"2oEb":function(e,t,n){"use strict";var r=[].slice;e.exports=function(e,t){var n;return function(){var t,i=r.call(arguments,0),a=e.length>i.length;a&&i.push(o);try{t=e.apply(null,i)}catch(e){if(a&&n)throw e;return o(e)}a||(t&&"function"==typeof t.then?t.then(s,o):t instanceof Error?o(t):s(t))};function o(){n||(n=!0,t.apply(null,arguments))}function s(e){o(null,e)}}},"4PZ6":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDcd");class o extends r.Component{render(){const e=this.props.comments.filter(e=>null!=e.deletedAt).length;return this.props.showDeleted||0===e?null:r.createElement("div",{className:osu.classWithModifiers("deleted-comments-count",this.props.modifiers)},r.createElement("span",{className:"deleted-comments-count__icon"},r.createElement("span",{className:"far fa-trash-alt"})),osu.transChoice("comments.deleted_count",e))}}},"6MCy":function(e,t,n){"use strict";var r=n("Jryd"),o=n("cDcd"),s=parseInt((o.version||"16").slice(0,2),10)>=16,i=o.createElement;function a(e,t){return i(e,c(t),t.children)}function c(e){return e["data-sourcepos"]?{"data-sourcepos":e["data-sourcepos"]}:{}}e.exports={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:a.bind(null,"table"),tableHead:a.bind(null,"thead"),tableBody:a.bind(null,"tbody"),tableRow:a.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=c(e);return i(e.isHeader?"th":"td",t?r({style:t},n):n,e.children)},root:function(e){var t=!e.className,n=t&&o.Fragment||"div";return i(n,t?null:e,e.children)},text:function(e){return s?e.children:i("span",null,e.children)},list:function(e){var t=c(e);return null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString()),i(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=i("input",{type:"checkbox",checked:n,readOnly:!0})}return i("li",c(e),t,e.children)},definition:function(){return null},heading:function(e){return i("h".concat(e.level),c(e),e.children)},inlineCode:function(e){return i("code",c(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=i("code",t?{className:t}:null,e.value);return i("pre",c(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.isBlock?"div":"span";if(e.escapeHtml){var n=o.Fragment||t;return i(n,null,e.value)}var r={dangerouslySetInnerHTML:{__html:e.value}};return i(t,r)},virtualHtml:function(e){return i(e.tag,c(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?o.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}}},"6Nha":function(e,t,n){"use strict";e.exports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t.children||[]).reduce((function(t,n){return"definition"===n.type&&(t[n.identifier]={href:n.url,title:n.title}),e(n,t)}),n)}},"6nUW":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,o=n("cDcd"),s=n("NzAu"),i=n("SYfz");r=o.createElement;var a=function(e){var t,n,o,a,c,u,l,p,d,h,m,f,v,b;for(l=null!=(d=e.modifiers)?d:[],b=e.text,n=e.icon,p=null!=(h=e.props)?h:{},t=null!=(m=e.extraClasses)?m:[],o=null!=(f=e.isBusy)&&f,p.className=osu.classWithModifiers("btn-osu-big",l),a=0,u=t.length;a<u;a++)c=t[a],p.className+=" "+c;return(null!=p.href?p.disabled?s.span:s.a:s.button)(p,Object(s.span)({className:"btn-osu-big__content "+(null==b||null==n?"btn-osu-big__content--center":"")},null!=b?Object(s.span)({className:"btn-osu-big__left"},Object(s.span)({className:"btn-osu-big__text-top"},null!=(v=b.top)?v:b),null!=b.bottom?Object(s.span)({className:"btn-osu-big__text-bottom"},b.bottom):void 0):void 0,null!=n?Object(s.span)({className:"btn-osu-big__icon"},Object(s.span)({className:"fa-fw"},o?r(i.a):Object(s.i)({className:n}))):void 0))}},"7Pxk":function(e,t,n){"use strict";var r=n("WCVR"),o=n("Zs/d");e.exports=function(e,t,n){for(var r,u,l,p=-1,d=t.length,h="",m="",f="",v="";++p<d;)if(r=t.charAt(p),l)if(l=!1,h+=f,m+=v,f="",v="",r===s)f=r,v=r;else for(h+=r,m+=r;++p<d;){if(!(r=t.charAt(p))||r===s){v=r,f=r;break}h+=r,m+=r}else if(r===a&&t.charAt(p+1)===r&&t.charAt(p+2)===r&&t.charAt(p+3)===r)f+=c,p+=3,l=!0;else if(r===i)f+=r,l=!0;else{for(u="";r===i||r===a;)u+=r,r=t.charAt(++p);if(r!==s)break;f+=u+r,v+=r}if(m)return!!n||e(h)({type:"code",lang:null,meta:null,value:o(m)})};var s="\n",i="\t",a=" ",c=r(a,4)},"7dd3":function(e,t,n){"use strict";var r,o=n("cDcd"),s=n("NzAu");o.createElement,r={add:"fas fa-plus",fix:"fas fa-check",misc:"far fa-circle"};var i=function(e){var t,n,o,i,a,c;return t=e.entry,Object(s.div)({className:"changelog-entry",key:t.id},Object(s.div)({className:"changelog-entry__row"},Object(s.div)({className:"changelog-entry__title "+(t.major?"changelog-entry__title--major":"")},Object(s.span)({className:"changelog-entry__title-icon"},Object(s.span)({className:"changelog-entry__icon "+r[t.type]})),null!=t.url?Object(s.a)({href:t.url,className:"changelog-entry__link"},t.title):t.title,null!=t.github_url?Object(s.span)(null," (",Object(s.a)({className:"changelog-entry__link",href:t.github_url},t.repository.replace(/^.*\//,"")+"#"+t.github_pull_request_id),")"):void 0,(c=_.escape(t.github_user.display_name),n=null!=(a=null!=(o=t.github_user.github_url)?o:t.github_user.user_url)?"<a data-user-id='"+(null!=(i=t.github_user.user_id)?i:"")+"' class='changelog-entry__user-link js-usercard' href='"+_.escape(a)+"' >"+c+"</a>":c,Object(s.span)({className:"changelog-entry__user",dangerouslySetInnerHTML:{__html:osu.trans("changelog.entry.by",{user:n})}})))),null!=t.message_html?Object(s.div)({className:"changelog-entry__row changelog-entry__row--message",dangerouslySetInnerHTML:{__html:t.message_html}}):void 0)};n.d(t,"a",(function(){return l}));var a,c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;a=o.createElement;var l=function(e){function t(){return this.renderNav=c(this.renderNav,this),this.render=c(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n,r,o,c;return e=osu.classWithModifiers("build",this.props.modifiers),r=_.groupBy(this.props.build.changelog_entries,"category"),t=_(r).keys().sort().value(),Object(s.div)({className:e+" t-changelog-stream--"+_.kebabCase(this.props.build.update_stream.display_name)},Object(s.div)({className:"build__version"},this.renderNav({version:"previous",icon:"fas fa-chevron-left"}),Object(s.a)({className:"build__version-link",href:Url.changelogBuild(this.props.build)},Object(s.span)({className:"build__stream"},this.props.build.update_stream.display_name)," ",Object(s.span)({className:"u-changelog-stream--text"},this.props.build.display_version)),this.renderNav({version:"next",icon:"fas fa-chevron-right"})),null!=(c=this.props.showDate)&&c?Object(s.div)({className:"build__date"},moment(this.props.build.created_at).format("LL")):void 0,function(){var e,c,u;for(u=[],e=0,c=t.length;e<c;e++)n=t[e],u.push(Object(s.div)({key:n,className:"build__changelog-entries-container"},Object(s.div)({className:"build__changelog-entries-category"},n),Object(s.div)({className:"build__changelog-entries"},function(){var e,t,c,u,l;for(l=[],e=0,t=(c=r[n]).length;e<t;e++)o=c[e],l.push(Object(s.div)({key:null!=(u=o.id)?u:o.created_at+"-"+o.title,className:"build__changelog-entry"},a(i,{entry:o})));return l}())));return u}())},t.prototype.renderNav=function(e){var t,n,r;if(r=e.version,n=e.icon,null!=this.props.build.versions)return null!=(t=this.props.build.versions[r])?Object(s.a)({className:"build__version-link",href:Url.changelogBuild(t),title:t.display_version},Object(s.i)({className:n})):Object(s.span)({className:"build__version-link build__version-link--disabled"},Object(s.i)({className:n}))},t}(o.PureComponent)},"8K+w":function(e,t){e.exports=function(){function e(e,t,n){const r=new RegExp(/%\[\]\(#(\d+)\)\n*/).exec(t);if(n)return!0;if(!r||0!==r.index)return;const[o,s,i]=r;return e(o)({children:[{type:"text",value:s}],data:{discussion_id:s},reference:i,type:"embed"})}const t=this.Parser,n=t.prototype.inlineTokenizers,r=t.prototype.inlineMethods;e.locator=function(e,t){return e.indexOf("%[",t)},n.embed=e,r.unshift("embed")}},"9lfl":function(e,t,n){"use strict";var r=n("Jryd"),o=n("yXVM");e.exports=function(e){var t,n,s;for(n in o(a,e),o(i,a),t=a.prototype)(s=t[n])&&"object"==typeof s&&(t[n]="concat"in s?s.concat():r(s));return a;function i(t){return e.apply(this,t)}function a(){return this instanceof a?e.apply(this,arguments):new i(arguments)}}},AGZR:function(e){e.exports=JSON.parse('{"AElig":"","AMP":"&","Aacute":"","Acirc":"","Agrave":"","Aring":"","Atilde":"","Auml":"","COPY":"","Ccedil":"","ETH":"","Eacute":"","Ecirc":"","Egrave":"","Euml":"","GT":">","Iacute":"","Icirc":"","Igrave":"","Iuml":"","LT":"<","Ntilde":"","Oacute":"","Ocirc":"","Ograve":"","Oslash":"","Otilde":"","Ouml":"","QUOT":"\\"","REG":"","THORN":"","Uacute":"","Ucirc":"","Ugrave":"","Uuml":"","Yacute":"","aacute":"","acirc":"","acute":"","aelig":"","agrave":"","amp":"&","aring":"","atilde":"","auml":"","brvbar":"","ccedil":"","cedil":"","cent":"","copy":"","curren":"","deg":"","divide":"","eacute":"","ecirc":"","egrave":"","eth":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","iacute":"","icirc":"","iexcl":"","igrave":"","iquest":"","iuml":"","laquo":"","lt":"<","macr":"","micro":"","middot":"","nbsp":"","not":"","ntilde":"","oacute":"","ocirc":"","ograve":"","ordf":"","ordm":"","oslash":"","otilde":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","raquo":"","reg":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","thorn":"","times":"","uacute":"","ucirc":"","ugrave":"","uml":"","uuml":"","yacute":"","yen":"","yuml":""}')},AMMU:function(e,t,n){"use strict";e.exports=function(e){return o.test("number"==typeof e?r(e):e.charAt(0))};var r=String.fromCharCode,o=/\s/},AU96:function(e,t,n){"use strict";var r=n("f7bm"),o=n("Yin1"),s=n("6nUW"),i=n("cDcd"),a=n("NzAu"),c=n("hc33"),u=n("KHX3"),l=n("8K+w"),p=n("+AAq"),d=n("Y9Pv"),h=n("DHbW");const m=({data:e})=>{const t="beatmap-discussion-review-post-embed",n=i.useContext(h.a),r=i.useContext(d.a),o=n[e.discussion_id];if(!o)return i.createElement("div",{className:t},i.createElement("div",{className:`${t}__error`},"[DISCUSSION NOT LOADED]"));const s=[];"praise"===o.message_type?s.push("praise"):o.resolved&&s.push("resolved");const a=null!==o.beatmap_id;a||s.push("general-all");const c=()=>i.createElement("div",{className:`beatmap-discussion-message-type beatmap-discussion-message-type--${o.message_type}`},i.createElement("i",{className:BeatmapDiscussionHelper.messageType.icon[o.message_type]}));return i.createElement("div",{className:osu.classWithModifiers(t,s)},i.createElement("div",{className:`${t}__meta`},i.createElement("div",{className:`${t}__icon`},o.beatmap_id&&i.createElement(p.a,{beatmap:r[o.beatmap_id]}),!o.beatmap_id&&c()),i.createElement("div",null,o.beatmap_id&&c(),(()=>i.createElement("div",{className:`${t}__timestamp-text`},null!==o.timestamp?BeatmapDiscussionHelper.formatTimestamp(o.timestamp):osu.trans(`beatmap_discussions.timestamp_display.${a?"general":"general_all"}`)))())),i.createElement("div",{className:`${t}__stripe`}),i.createElement("div",{className:`${t}__body`,dangerouslySetInnerHTML:{__html:BeatmapDiscussionHelper.format((o.starting_post||o.posts[0]).message)}}),o.parent_id&&i.createElement("div",{className:`${t}__link`},i.createElement("a",{href:BeatmapDiscussionHelper.url({discussion:o}),className:`${t}__link-text`,title:osu.trans("beatmap_discussions.review.go_to_child")},i.createElement("i",{className:"fas fa-external-link-alt"}))))};class f extends i.Component{render(){return i.createElement("div",{className:"beatmap-discussion-review-post"},i.createElement(u,{allowedTypes:["emphasis","link","paragraph","strong","text"],plugins:[l],source:this.props.message,renderers:{embed:m,link:e=>i.createElement("a",Object.assign({className:"beatmap-discussion-review-post__link",rel:"nofollow"},e)),paragraph:e=>i.createElement("div",Object.assign({className:"beatmap-discussion-review-post__block"},e))}}))}}var v=n("CnOT");n.d(t,"a",(function(){return O}));var b,y,g=function(e,t){return function(){return e.apply(t,arguments)}},w={}.hasOwnProperty;y=i.createElement,b="beatmap-discussion-post";var O=function(e){function t(e){this.validPost=g(this.validPost,this),this.updatePost=g(this.updatePost,this),this.setMessage=g(this.setMessage,this),this.isTimeline=g(this.isTimeline,this),this.canReport=g(this.canReport,this),this.messageViewer=g(this.messageViewer,this),this.messageEditor=g(this.messageEditor,this),this.isOwner=g(this.isOwner,this),this.handleKeyDownCallback=g(this.handleKeyDownCallback,this),this.editStart=g(this.editStart,this),this.editCancel=g(this.editCancel,this),this.render=g(this.render,this),this.componentWillUnmount=g(this.componentWillUnmount,this),this.componentDidUpdate=g(this.componentDidUpdate,this),this.componentWillUpdate=g(this.componentWillUpdate,this),this.componentDidMount=g(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.textarea=i.createRef(),this.throttledUpdatePost=_.throttle(this.updatePost,1e3),this.handleKeyDown=InputHandler.textarea(this.handleKeyDownCallback),this.xhr={},this.cache={},this.state={editing:!1,posting:!1,message:this.props.post.message}}return function(e,t){for(var n in t)w.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return osu.pageChange()},t.prototype.componentWillUpdate=function(){return this.cache={}},t.prototype.componentDidUpdate=function(){return osu.pageChange()},t.prototype.componentWillUnmount=function(){var e,t,n,r;for(e in this.throttledUpdatePost.cancel(),n=[],t=this.xhr)w.call(t,e)&&(r=t[e],n.push(null!=r?r.abort():void 0));return n},t.prototype.render=function(){var e,t,n;return e=b+" "+b+"--"+this.props.type,this.state.editing&&(e+=" "+b+"--editing"),null!=this.props.post.deleted_at&&(e+=" "+b+"--deleted"),this.props.read||(e+=" "+b+"--unread"),t=this.isOwner()?"mapper":this.props.user.group_badge,Object(a.div)({className:e,key:this.props.type+"-"+this.props.post.id,onClick:(n=this,function(){return $.publish("beatmapDiscussionPost:markRead",{id:n.props.post.id})})},Object(a.div)({className:b+"__content"},this.props.hideUserCard?void 0:y(v.a,{user:this.props.user,badge:t}),this.messageViewer(),this.messageEditor()))},t.prototype.editCancel=function(){return this.setState({editing:!1,message:this.props.post.message})},t.prototype.editStart=function(){var e,t;return null!=(e=this.textarea.current)&&(e.style.minHeight=this.messageBody.getBoundingClientRect().height+50+"px"),this.setState({editing:!0},(t=this,function(){var e;return null!=(e=t.textarea.current)?e.focus():void 0}))},t.prototype.handleKeyDownCallback=function(e,t){switch(e){case InputHandler.SUBMIT:return this.throttledUpdatePost()}},t.prototype.isOwner=function(){return this.props.post.user_id===this.props.beatmapset.user_id},t.prototype.messageEditor=function(){var e;if(this.props.canBeEdited)return e=!this.state.posting&&this.validPost(),Object(a.div)({className:b+"__message-container "+(this.state.editing?void 0:"hidden")},y(TextareaAutosize,{disabled:this.state.posting,className:b+"__message "+b+"__message--editor",onChange:this.setMessage,onKeyDown:this.handleKeyDown,value:this.state.message,ref:this.textarea}),y(o.a,{message:this.state.message,isTimeline:this.isTimeline()}),Object(a.div)({className:b+"__actions"},Object(a.div)({className:b+"__actions-group"}),Object(a.div)({className:b+"__actions-group"},Object(a.div)({className:b+"__action"},y(s.a,{text:osu.trans("common.buttons.cancel"),props:{onClick:this.editCancel,disabled:this.state.posting}})),Object(a.div)({className:b+"__action"},y(s.a,{text:osu.trans("common.buttons.save"),props:{onClick:this.throttledUpdatePost,disabled:!e}})))))},t.prototype.messageViewer=function(){var e,t,n,o,s,i,u,l,p,d;return e=(i="reply"===this.props.type?["beatmap-discussion-posts","beatmap_discussion_post",this.props.post]:["beatmap-discussions","beatmap_discussion",this.props.discussion])[0],n=i[1],t=i[2],Object(a.div)({className:b+"__message-container "+(this.state.editing?"hidden":void 0)},"review"===this.props.discussion.message_type&&"discussion"===this.props.type?Object(a.div)({className:b+"__message",ref:(d=this,function(e){return d.messageBody=e})},y(f,{discussions:this.context.discussions,message:this.props.post.message})):Object(a.div)({className:b+"__message",ref:function(e){return function(t){return e.messageBody=t}}(this),dangerouslySetInnerHTML:{__html:BeatmapDiscussionHelper.format(this.props.post.message)}}),Object(a.div)({className:b+"__info-container"},Object(a.span)({className:b+"__info",dangerouslySetInnerHTML:{__html:osu.timeago(this.props.post.created_at)}}),null!=t.deleted_at?Object(a.span)({className:b+"__info "+b+"__info--edited",dangerouslySetInnerHTML:{__html:osu.trans("beatmaps.discussions.deleted",{editor:osu.link(laroute.route("users.show",{user:t.deleted_by_id}),null!=(u=this.props.users[t.deleted_by_id])?u.username:void 0,{classNames:[b+"__info-user"]}),delete_time:osu.timeago(this.props.post.deleted_at)})}}):void 0,this.props.post.updated_at!==this.props.post.created_at&&(null!=(l=this.props.lastEditor)?l.id:void 0)?Object(a.span)({className:b+"__info "+b+"__info--edited",dangerouslySetInnerHTML:{__html:osu.trans("beatmaps.discussions.edited",{editor:osu.link(laroute.route("users.show",{user:this.props.lastEditor.id}),this.props.lastEditor.username,{classNames:[b+"__info-user"]}),update_time:osu.timeago(this.props.post.updated_at)})}}):void 0,"discussion"===this.props.type&&this.props.discussion.kudosu_denied?Object(a.span)({className:b+"__info "+b+"__info--edited"},osu.trans("beatmaps.discussions.kudosu_denied")):void 0),Object(a.div)({className:b+"__actions"},Object(a.div)({className:b+"__actions-group"},"discussion"===this.props.type?Object(a.span)({className:b+"__action "+b+"__action--button"},y(r.a,{value:BeatmapDiscussionHelper.url({discussion:this.props.discussion}),label:osu.trans("common.buttons.permalink"),valueAsUrl:!0})):void 0,this.props.canBeEdited?Object(a.button)({className:b+"__action "+b+"__action--button",onClick:this.editStart},osu.trans("beatmaps.discussions.edit")):void 0,null==t.deleted_at&&this.props.canBeDeleted?Object(a.a)({className:"js-beatmapset-discussion-update "+b+"__action "+b+"__action--button",href:laroute.route(e+".destroy",(o={},o[""+n]=t.id,o)),"data-remote":!0,"data-method":"DELETE","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.delete")):void 0,null!=t.deleted_at&&this.props.canBeRestored?Object(a.a)({className:"js-beatmapset-discussion-update "+b+"__action "+b+"__action--button",href:laroute.route(e+".restore",(s={},s[""+n]=t.id,s)),"data-remote":!0,"data-method":"POST","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.restore")):void 0,"discussion"===this.props.type&&(null!=(p=this.props.discussion.current_user_attributes)?p.can_moderate_kudosu:void 0)?this.props.discussion.can_grant_kudosu?Object(a.a)({className:"js-beatmapset-discussion-update "+b+"__action "+b+"__action--button",href:laroute.route("beatmap-discussions.deny-kudosu",{beatmap_discussion:this.props.discussion.id}),"data-remote":!0,"data-method":"POST","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.deny_kudosu")):this.props.discussion.kudosu_denied?Object(a.a)({className:"js-beatmapset-discussion-update "+b+"__action "+b+"__action--button",href:laroute.route("beatmap-discussions.allow-kudosu",{beatmap_discussion:this.props.discussion.id}),"data-remote":!0,"data-method":"POST","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.allow_kudosu")):void 0:void 0,this.canReport()?y(c.a,{className:b+"__action "+b+"__action--button",reportableId:this.props.post.id,reportableType:"beatmapset_discussion_post",user:this.props.user}):void 0)))},t.prototype.canReport=function(){return null!=currentUser.id&&this.props.post.user_id!==currentUser.id},t.prototype.isTimeline=function(){return null!=this.props.discussion.timestamp},t.prototype.setMessage=function(e){return this.setState({message:e.target.value})},t.prototype.updatePost=function(){var e,t;if(this.state.message!==this.props.post.message)return this.setState({posting:!0}),null!=(e=this.xhr.updatePost)&&e.abort(),this.xhr.updatePost=$.ajax(laroute.route("beatmap-discussion-posts.update",{beatmap_discussion_post:this.props.post.id}),{method:"PUT",data:{beatmap_discussion_post:{message:this.state.message}}}).done((t=this,function(e){return t.setState({editing:!1}),$.publish("beatmapsetDiscussions:update",{beatmapset:e})})).fail(osu.ajaxError).always(function(e){return function(){return e.setState({posting:!1})}}(this));this.setState({editing:!1})},t.prototype.validPost=function(){return BeatmapDiscussionHelper.validMessageLength(this.state.message,this.isTimeline())},t}(i.PureComponent)},AUlK:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){}return e.hasMenu=function(e){return e.replay||null!=currentUser.id&&e.user_id!==currentUser.id},e}()},"B+BC":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.render=s(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t;return Object(o.div)({className:"profile-badges"},function(){var n,r,s,i;for(i=[],n=0,r=(s=this.props.badges).length;n<r;n++)e=s[n],t=osu.present(e.url)?o.a:o.div,i.push(t({key:e.image_url,href:osu.present(e.url)?e.url:void 0,className:"profile-badges__badge",style:{backgroundImage:osu.urlPresence(e.image_url)},title:e.description}));return i}.call(this))},t}(r.PureComponent)},Be1W:function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},BhdQ:function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},C92G:function(e,t,n){"use strict";var r=n("cDcd"),o=n("faye"),s=n("NzAu"),i=n("LhsB"),a=n("txhI"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},p=function(e){function t(e){this.renderMenu=c(this.renderMenu,this),this.render=c(this.render,this),this.removePortal=c(this.removePortal,this),this.addPortal=c(this.addPortal,this),this.tooltipElement=c(this.tooltipElement,this),this.toggle=c(this.toggle,this),this.isMenuInPath=c(this.isMenuInPath,this),this.hide=c(this.hide,this),this.dismiss=c(this.dismiss,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidUpdate=c(this.componentDidUpdate,this),this.resize=c(this.resize,this),this.componentDidMount=c(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.uuid=osu.uuid(),this.menu=Object(r.createRef)(),this.state={active:!1}}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.contextType=i.a,t.defaultProps={children:function(e){}},t.prototype.componentDidMount=function(){return this.tooltipHideEvent=this.tooltipElement().qtip("option","hide.event"),$(window).on("throttled-resize.#{@uuid}",this.resize),$(document).on("turbolinks:before-cache."+this.uuid,(e=this,function(){return e.removePortal()}));var e},t.prototype.resize=function(){var e,t,n,r,o;if(this.state.active){if(null!=this.menu.current.offsetParent)return o=(n=(e=$(this.menu.current)).offset()).top,t=n.left,this.portal.style.display="block",this.portal.style.position="absolute",this.portal.style.top=Math.floor(o+e.height()/2)+"px",this.portal.style.left=Math.floor(t+e.width())+"px",null!=(r=this.tooltipElement()[0])?this.portal.style.zIndex=getComputedStyle(r).zIndex:void 0;this.portal.style.display="none"}},t.prototype.componentDidUpdate=function(e,t){var n,r;if(t.active!==this.state.active)return this.state.active?(this.resize(),this.addPortal(),this.tooltipElement().qtip("option","hide.event",!1),$(document).on("click."+this.uuid+" keydown."+this.uuid,this.hide),"function"==typeof(n=this.props).onShow?n.onShow():void 0):(this.removePortal(),this.tooltipElement().qtip("option","hide.event",this.tooltipHideEvent),$(document).off("click."+this.uuid+" keydown."+this.uuid,this.hide),"function"==typeof(r=this.props).onHide?r.onHide():void 0)},t.prototype.componentWillUnmount=function(){return $(document).off("."+this.uuid)},t.prototype.dismiss=function(){return this.setState({active:!1})},t.prototype.hide=function(e){var t;if(this.state.active&&!a.a.isOpen()&&!osu.popupShowing()&&null!=(t=e.originalEvent))return 27===t.keyCode||0===t.button&&!this.isMenuInPath(t.composedPath())?this.setState({active:!1}):void 0},t.prototype.isMenuInPath=function(e){var t,n;return t=this.menu.current,l.call(e,t)>=0||(n=this.portal,l.call(e,n)>=0)},t.prototype.toggle=function(){return this.setState({active:!this.state.active})},t.prototype.tooltipElement=function(){return $(this.context).closest(".qtip")},t.prototype.addPortal=function(){if(null==this.portal.parentElement)return document.body.appendChild(this.portal)},t.prototype.removePortal=function(){if(null!=this.portal.parentElement)return document.body.removeChild(this.portal)},t.prototype.render=function(){return null==this.portal&&(this.portal=document.createElement("div")),Object(s.div)({className:"popup-menu",ref:this.menu},Object(s.button)({className:"popup-menu__button",type:"button",onClick:this.toggle},Object(s.i)({className:"fas fa-ellipsis-v"})),Object(o.createPortal)(this.renderMenu(),this.portal))},t.prototype.renderMenu=function(){return this.state.active?Object(s.div)({className:"popup-menu__menu"},Object(s.div)({className:"simple-menu simple-menu--popup-menu"},this.props.children(this.dismiss))):null},t}(r.PureComponent),d=n("ZG74");n.d(t,"a",(function(){return m}));var h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function m(e){var{children:t}=e,n=h(e,["children"]);const o=r.useContext(d.a),s=r.useContext(d.b);return r.createElement(p,Object.assign({onHide:()=>o.activeKeyDidChange(null),onShow:()=>o.activeKeyDidChange(s)},n),t)}},CnOT:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,o,s=n("TY2o"),i=n("NzAu"),a=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;o=React.createElement,r="beatmap-discussion-user-card";var u=function(e){function t(){return this.render=a(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,React.PureComponent),t.prototype.render=function(){var e,t,n,a;return e=null!=(n=this.props.additionalClasses)?n:[],null!=this.props.badge&&e.push(this.props.badge),t=null!=(a=this.props.hideStripe)&&a,Object(i.div)({className:osu.classWithModifiers(r,e)},Object(i.div)({className:r+"__avatar"},Object(i.a)({className:r+"__user-link",href:laroute.route("users.show",{user:this.props.user.id})},o(s.a,{user:this.props.user,modifiers:["full-rounded"]}))),Object(i.div)({className:r+"__user"},Object(i.div)({className:r+"__user-row"},Object(i.a)({className:r+"__user-link",href:laroute.route("users.show",{user:this.props.user.id})},Object(i.span)({className:r+"__user-text u-ellipsis-overflow"},this.props.user.username)),this.props.user.is_bot?void 0:Object(i.a)({className:r+"__user-modding-history-link",href:laroute.route("users.modding.index",{user:this.props.user.id}),title:osu.trans("beatmap_discussion_posts.item.modding_history_link")},Object(i.i)({className:"fas fa-align-left"}))),Object(i.div)({className:r+"__user-badge"},null!=this.props.badge?Object(i.div)({className:"user-group-badge user-group-badge--"+this.props.badge}):void 0)),t?void 0:Object(i.div)({className:r+"__user-stripe"}))},t}()},DGoX:function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},DHbW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n("cDcd").createContext([])},De3I:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,o=n("cDcd"),s=n("dcvb"),i=n("NzAu");r=o.createElement;var a=function(e){var t,n,o,a,c,u,l,p;for(c=null!=(l=e.modifiers)?l:[],u=null!=(p=e.mods)?p:[],t="mods",n=0,o=c.length;n<o;n++)t+=" mods--"+(a=c[n]);return Object(i.div)({className:t},function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)a=u[e],n.push(Object(i.div)({key:a,className:"mods__mod"},Object(i.div)({className:"mods__mod-image"},r(s.a,{mod:a}))));return n}())}},DmM8:function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},EaLk:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return De})),n.d(t,"c",(function(){return re})),n.d(t,"d",(function(){return Fe})),n.d(t,"e",(function(){return Z})),n.d(t,"f",(function(){return Ke})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return Mt})),n.d(t,"i",(function(){return yt})),n.d(t,"j",(function(){return Ot})),n.d(t,"k",(function(){return Ct})),n.d(t,"l",(function(){return J})),n.d(t,"m",(function(){return et})),n.d(t,"n",(function(){return Ge})),n.d(t,"o",(function(){return Be})),n.d(t,"p",(function(){return tt})),n.d(t,"q",(function(){return be}));var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}var c="An invariant failed, however the error is obfuscated because this is an production build.",u=[];Object.freeze(u);var l={};function p(){return++je.mobxGuid}function d(e){throw h(!1,e),"X"}function h(e,t){if(!e)throw new Error("[mobx] "+(t||c))}function m(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}Object.freeze(l);var f=function(){};function v(e){return null!==e&&"object"==typeof e}function b(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function y(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function g(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return v(e)&&!0===e[n]}}function _(e){return e instanceof Map}function w(e){return e instanceof Set}function O(e){var t=new Set;for(var n in e)t.add(n);return Object.getOwnPropertySymbols(e).forEach((function(n){Object.getOwnPropertyDescriptor(e,n).enumerable&&t.add(n)})),Array.from(t)}function S(e){return e&&e.toString?e.toString():new String(e).toString()}function j(e){return null===e?null:"object"==typeof e?""+e:e}var E=Symbol("mobx administration"),k=function(){function e(e){void 0===e&&(e="Atom@"+p()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ie.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.reportObserved=function(){return Pe(this)},e.prototype.reportChanged=function(){Te(),function(e){e.lowestObserverState!==ie.STALE&&(e.lowestObserverState=ie.STALE,e.observers.forEach((function(t){t.dependenciesState===ie.UP_TO_DATE&&(t.isTracing!==ae.NONE&&Ce(t,e),t.onBecomeStale()),t.dependenciesState=ie.STALE})))}(this),Ae()},e.prototype.toString=function(){return this.name},e}(),x=g("Atom",k);function N(e,t,n){void 0===t&&(t=f),void 0===n&&(n=f);var r=new k(e);return t!==f&&qe("onBecomeObserved",r,t,void 0),n!==f&&function(e,t,n){qe("onBecomeUnobserved",e,t,void 0)}(r,n),r}var T={identity:function(e,t){return e===t},structural:function(e,t){return Rt(e,t)},default:function(e,t){return Object.is(e,t)}},A=Symbol("mobx did run lazy initializers"),P=Symbol("mobx pending decorators"),C={},D={};function I(e,t){var n=t?C:D;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return M(this),this[e]},set:function(t){M(this),this[e]=t}})}function M(e){if(!0!==e[A]){var t=e[P];if(t)for(var n in y(e,A,!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function U(e,t){return function(){var n,r=function(r,o,i,a){if(!0===a)return t(r,o,i,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,P)){var c=r[P];y(r,P,s({},c))}return r[P][o]={prop:o,propertyCreator:t,descriptor:i,decoratorTarget:r,decoratorArguments:n},I(o,e)};return R(arguments)?(n=u,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function R(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function H(e,t,n){return Ze(e)?e:Array.isArray(e)?J.array(e,{name:n}):b(e)?J.object(e,void 0,{name:n}):_(e)?J.map(e,{name:n}):w(e)?J.set(e,{name:n}):e}function B(e){return e}function L(t){h(t);var n=U(!0,(function(e,n,r,o,s){var i=r?r.initializer?r.initializer.call(e):r.value:void 0;xt(e).addObservableProp(n,i,t)})),r=(void 0!==e&&e.env,n);return r.enhancer=t,r}var z={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function V(e){return null==e?z:"string"==typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(z);var F=L(H),G=L((function(e,t,n){return null==e?e:Ct(e)||yt(e)||Ot(e)||Et(e)?e:Array.isArray(e)?J.array(e,{name:n,deep:!1}):b(e)?J.object(e,void 0,{name:n,deep:!1}):_(e)?J.map(e,{name:n,deep:!1}):w(e)?J.set(e,{name:n,deep:!1}):d(!1)})),$=L(B),W=L((function(e,t,n){return Rt(e,t)?t:e}));function q(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?B:H}var K={box:function(e,t){arguments.length>2&&Y("box");var n=V(t);return new ce(e,q(n),n.name,!0,n.equals)},array:function(e,t){arguments.length>2&&Y("array");var n=V(t);return ht(e,q(n),n.name)},map:function(e,t){arguments.length>2&&Y("map");var n=V(t);return new wt(e,q(n),n.name)},set:function(e,t){arguments.length>2&&Y("set");var n=V(t);return new jt(e,q(n),n.name)},object:function(e,t,n){"string"==typeof arguments[1]&&Y("object");var r=V(n);if(!1===r.proxy)return Je({},e,t,r);var o=Ye(r),s=Je({},void 0,void 0,r),i=st(s);return Xe(i,e,t,o),i},ref:$,shallow:G,deep:F,struct:W},J=function(e,t,n){if("string"==typeof arguments[1])return F.apply(null,arguments);if(Ze(e))return e;var r=b(e)?J.object(e,t,n):Array.isArray(e)?J.array(e,t):_(e)?J.map(e,t):w(e)?J.set(e,t):e;if(r!==e)return r;d(!1)};function Y(e){d("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(K).forEach((function(e){return J[e]=K[e]}));var X=U(!1,(function(e,t,n,r,o){var i=n.get,a=n.set,c=o[0]||{};xt(e).addComputedProp(e,t,s({get:i,set:a,context:e},c))})),Q=X({equals:T.structural}),Z=function(e,t,n){if("string"==typeof t)return X.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return X.apply(null,arguments);var r="object"==typeof t?t:{};return r.get=e,r.set="function"==typeof t?t:r.set,r.name=r.name||e.name||"",new ue(r)};function ee(e,t,n){var r=function(){return te(e,t,n||this,arguments)};return r.isMobxAction=!0,r}function te(e,t,n,r){var o=function(e,t,n,r){var o=ye();return Te(),{prevDerivation:o,prevAllowStateChanges:oe(!0),notifySpy:!1,startTime:0}}(),s=!0;try{var i=t.apply(n,r);return s=!1,i}finally{s?(je.suppressReactionErrors=s,ne(o),je.suppressReactionErrors=!1):ne(o)}}function ne(e){se(e.prevAllowStateChanges),Ae(),ge(e.prevDerivation),e.notifySpy}function re(e,t){var n,r=oe(e);try{n=t()}finally{se(r)}return n}function oe(e){var t=je.allowStateChanges;return je.allowStateChanges=e,t}function se(e){je.allowStateChanges=e}Z.struct=Q;var ie,ae,ce=function(e){function t(t,n,r,o,s){void 0===r&&(r="ObservableValue@"+p()),void 0===o&&(o=!0),void 0===s&&(s=T.default);var i=e.call(this,r)||this;return i.enhancer=n,i.name=r,i.equals=s,i.hasUnreportedChange=!1,i.value=n(t,void 0,r),i}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){this.value,(e=this.prepareNewValue(e))!==je.UNCHANGED&&this.setNewValue(e)},t.prototype.prepareNewValue=function(e){if(me(this),it(this)){var t=ct(this,{object:this,type:"update",newValue:e});if(!t)return je.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?je.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),ut(this)&&pt(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return at(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),lt(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return j(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(k),ue=(g("ObservableValue",ce),function(){function e(e){this.dependenciesState=ie.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ie.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+p(),this.value=new pe(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ae.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+p(),e.set&&(this.setter=ee(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?T.structural:T.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){e.lowestObserverState===ie.UP_TO_DATE&&(e.lowestObserverState=ie.POSSIBLY_STALE,e.observers.forEach((function(t){t.dependenciesState===ie.UP_TO_DATE&&(t.dependenciesState=ie.POSSIBLY_STALE,t.isTracing!==ae.NONE&&Ce(t,e),t.onBecomeStale())})))}(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.get=function(){this.isComputing&&d("Cycle detected in computation "+this.name+": "+this.derivation),0!==je.inBatch||0!==this.observers.size||this.keepAlive?(Pe(this),he(this)&&this.trackAndCompute()&&function(e){e.lowestObserverState!==ie.STALE&&(e.lowestObserverState=ie.STALE,e.observers.forEach((function(t){t.dependenciesState===ie.POSSIBLY_STALE?t.dependenciesState=ie.STALE:t.dependenciesState===ie.UP_TO_DATE&&(e.lowestObserverState=ie.UP_TO_DATE)})))}(this)):he(this)&&(this.warnAboutUntrackedRead(),Te(),this.value=this.computeValue(!1),Ae());var e=this.value;if(de(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(de(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){h(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else h(!1,!1)},e.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===ie.NOT_TRACKING,n=this.computeValue(!0),r=t||de(e)||de(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,je.computationDepth++,e)t=fe(this,this.derivation,this.scope);else if(!0===je.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new pe(e)}return je.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(ve(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,o=void 0;return function(e,t){void 0===t&&(t=l);var n,r=t&&t.name||e.name||"Autorun@"+p();if(t.scheduler||t.delay){var o=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:We}(t),s=!1;n=new De(r,(function(){s||(s=!0,o((function(){s=!1,n.isDisposed||n.track(i)})))}),t.onError)}else n=new De(r,(function(){this.track(i)}),t.onError);function i(){e(n)}return n.schedule(),n.getDisposer()}((function(){var s=n.get();if(!r||t){var i=ye();e({type:"update",object:n,newValue:s,oldValue:o}),ge(i)}r=!1,o=s}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return j(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}()),le=g("ComputedValue",ue);!function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(ie||(ie={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(ae||(ae={}));var pe=function(e){this.cause=e};function de(e){return e instanceof pe}function he(e){switch(e.dependenciesState){case ie.UP_TO_DATE:return!1;case ie.NOT_TRACKING:case ie.STALE:return!0;case ie.POSSIBLY_STALE:for(var t=ye(),n=e.observing,r=n.length,o=0;o<r;o++){var s=n[o];if(le(s)){if(je.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return ge(t),!0}if(e.dependenciesState===ie.STALE)return ge(t),!0}}return _e(e),ge(t),!1}}function me(e){var t=e.observers.size>0;je.computationDepth>0&&t&&d(!1),je.allowStateChanges||!t&&"strict"!==je.enforceActions||d(!1)}function fe(e,t,n){_e(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++je.runId;var r,o=je.trackingDerivation;if(je.trackingDerivation=e,!0===je.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new pe(e)}return je.trackingDerivation=o,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=ie.UP_TO_DATE,o=0,s=e.unboundDepsCount,i=0;i<s;i++)0===(a=n[i]).diffValue&&(a.diffValue=1,o!==i&&(n[o]=a),o++),a.dependenciesState>r&&(r=a.dependenciesState);for(n.length=o,e.newObserving=null,s=t.length;s--;)0===(a=t[s]).diffValue&&xe(a,e),a.diffValue=0;for(;o--;){var a;1===(a=n[o]).diffValue&&(a.diffValue=0,ke(a,e))}r!==ie.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),r}function ve(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)xe(t[n],e);e.dependenciesState=ie.NOT_TRACKING}function be(e){var t=ye();try{return e()}finally{ge(t)}}function ye(){var e=je.trackingDerivation;return je.trackingDerivation=null,e}function ge(e){je.trackingDerivation=e}function _e(e){if(e.dependenciesState!==ie.UP_TO_DATE){e.dependenciesState=ie.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=ie.UP_TO_DATE}}var we=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Oe=!0,Se=!1,je=function(){var e=Ee();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Oe=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new we).version&&(Oe=!1),Oe?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new we):(setTimeout((function(){Se||d("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new we)}();function Ee(){return"undefined"!=typeof window?window:r}function ke(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function xe(e,t){e.observers.delete(t),0===e.observers.size&&Ne(e)}function Ne(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,je.pendingUnobservations.push(e))}function Te(){je.inBatch++}function Ae(){if(0==--je.inBatch){Ue();for(var e=je.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof ue&&n.suspend())}je.pendingUnobservations=[]}}function Pe(e){var t=je.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&je.inBatch>0&&Ne(e),!1)}function Ce(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===ae.BREAK){var n=[];!function e(t,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,n,r+1)})))}((r=e,Qe(Dt(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof ue?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var De=function(){function e(e,t,n){void 0===e&&(e="Reaction@"+p()),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=ie.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+p(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ae.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,je.pendingReactions.push(this),Ue())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Te(),this._isScheduled=!1,he(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(e){this.reportExceptionInDerivation(e)}}Ae()}},e.prototype.track=function(e){if(!this.isDisposed){Te(),this._isRunning=!0;var t=fe(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ve(this),de(t)&&this.reportExceptionInDerivation(t.cause),Ae()}},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(je.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";je.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,e),je.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Te(),ve(this),Ae()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[E]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=function(e){switch(e.length){case 0:return je.trackingDerivation;case 1:return Dt(e[0]);case 2:return Dt(e[0],e[1])}}(e);if(!r)return d(!1);r.isTracing===ae.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?ae.BREAK:ae.LOG}(this,e)},e}(),Ie=100,Me=function(e){return e()};function Ue(){je.inBatch>0||je.isRunningReactions||Me(Re)}function Re(){je.isRunningReactions=!0;for(var e=je.pendingReactions,t=0;e.length>0;){++t===Ie&&(console.error("Reaction doesn't converge to a stable state after "+Ie+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction()}je.isRunningReactions=!1}var He=g("Reaction",De);function Be(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Le(){d(!1)}function ze(e){return function(t,n,r){if(r){if(r.value)return{value:ee(e,r.value),enumerable:!1,configurable:!0,writable:!0};var o=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return ee(e,o.call(this))}}}return Ve(e).apply(this,arguments)}}function Ve(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){y(this,n,Fe(e,t))}})}}var Fe=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?ee(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?ee(e,t):1===arguments.length&&"string"==typeof e?ze(e):!0!==r?ze(t).apply(null,arguments):void y(e,t,ee(e.name||t,n.value,this))};function Ge(e,t){return"string"==typeof e||e.name,te(0,"function"==typeof e?e:t,this,void 0)}function $e(e,t,n){y(e,t,ee(t,n.bind(e)))}Fe.bound=function(e,t,n,r){return!0===r?($e(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return $e(this,t,n.value||n.initializer.call(this)),this[t]},set:Le}:{enumerable:!1,configurable:!0,set:function(e){$e(this,t,e)},get:function(){}}};var We=function(e){return e()};function qe(e,t,n,r){var o="string"==typeof n?Dt(t,n):Dt(t),s="string"==typeof n?r:n,i=e+"Listeners";return o[i]?o[i].add(s):o[i]=new Set([s]),"function"!=typeof o[e]?d(!1):function(){var e=o[i];e&&(e.delete(s),0===e.size&&delete o[i])}}function Ke(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.computedConfigurable,o=e.disableErrorBoundaries,s=e.reactionScheduler;if(!0===e.isolateGlobalState&&((je.pendingReactions.length||je.inBatch||je.isRunningReactions)&&d("isolateGlobalState should be called before MobX is running any reactions"),Se=!0,Oe&&(0==--Ee().__mobxInstanceCount&&(Ee().__mobxGlobals=void 0),je=new we)),void 0!==t){var i=void 0;switch(t){case!0:case"observed":i=!0;break;case!1:case"never":i=!1;break;case"strict":case"always":i="strict";break;default:d("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}je.enforceActions=i,je.allowStateChanges=!0!==i&&"strict"!==i}void 0!==n&&(je.computedRequiresReaction=!!n),void 0!==r&&(je.computedConfigurable=!!r),void 0!==o&&(!0===o&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),je.disableErrorBoundaries=!!o),s&&function(e){var t=Me;Me=function(n){return e((function(){return t(n)}))}}(s)}function Je(e,t,n,r){var o=Ye(r=V(r));return M(e),xt(e,r.name,o.enhancer),t&&Xe(e,t,n,o),e}function Ye(e){return e.defaultDecorator||(!1===e.deep?$:F)}function Xe(e,t,n,r){var o,s;Te();try{var a=O(t);try{for(var c=i(a),u=c.next();!u.done;u=c.next()){var l=u.value,p=Object.getOwnPropertyDescriptor(t,l),d=(n&&l in n?n[l]:p.get?X:r)(e,l,p,!0);d&&Object.defineProperty(e,l,d)}}catch(e){o={error:e}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}}finally{Ae()}}function Qe(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(Qe)),r}function Ze(e){return 1!==arguments.length&&d(!1),function(e,t){return null!=e&&(void 0!==t?!!Ct(e)&&e[E].values.has(t):Ct(e)||!!e[E]||x(e)||He(e)||le(e))}(e)}function et(e,t,n,r){return"function"==typeof n?function(e,t,n,r){return It(e,t).observe(n,r)}(e,t,n,r):function(e,t,n){return It(e).observe(t,n)}(e,t,n)}function tt(e,t){void 0===t&&(t=void 0),Te();try{return e.apply(t)}finally{Ae()}}function nt(e){return e[E]}function rt(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e}var ot={has:function(e,t){if(t===E||"constructor"===t||t===A)return!0;var n=nt(e);return rt(t)?n.has(t):t in e},get:function(e,t){if(t===E||"constructor"===t||t===A)return e[t];var n=nt(e),r=n.values.get(t);if(r instanceof k){var o=r.get();return void 0===o&&n.has(t),o}return rt(t)&&n.has(t),e[t]},set:function(e,t,n){return!!rt(t)&&(function e(t,n,r){if(2!==arguments.length||Et(t))if(Ct(t)){var o=t[E];o.values.get(n)?o.write(n,r):o.addObservableProp(n,r,o.defaultEnhancer)}else if(Ot(t))t.set(n,r);else if(Et(t))t.add(n);else{if(!yt(t))return d(!1);"number"!=typeof n&&(n=parseInt(n,10)),h(n>=0,"Not a valid index: '"+n+"'"),Te(),n>=t.length&&(t.length=n+1),t[n]=r,Ae()}else{Te();var s=n;try{for(var i in s)e(t,i,s[i])}finally{Ae()}}}(e,t,n),!0)},deleteProperty:function(e,t){return!!rt(t)&&(nt(e).remove(t),!0)},ownKeys:function(e){return nt(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return d("Dynamic observable objects cannot be frozen"),!1}};function st(e){var t=new Proxy(e,ot);return e[E].proxy=t,t}function it(e){return void 0!==e.interceptors&&e.interceptors.length>0}function at(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),m((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ct(e,t){var n=ye();try{var r=e.interceptors;if(r)for(var o=0,s=r.length;o<s&&(h(!(t=r[o](t))||t.type,"Intercept handlers should return nothing or a change object"),t);o++);return t}finally{ge(n)}}function ut(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function lt(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),m((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function pt(e,t){var n=ye(),r=e.changeListeners;if(r){for(var o=0,s=(r=r.slice()).length;o<s;o++)r[o](t);ge(n)}}var dt={get:function(e,t){return t===E?e[E]:"length"===t?e[E].getArrayLength():"number"==typeof t?ft.get.call(e,t):"string"!=typeof t||isNaN(t)?ft.hasOwnProperty(t)?ft[t]:e[t]:ft.get.call(e,parseInt(t))},set:function(e,t,n){return"length"===t?(e[E].setArrayLength(n),!0):"number"==typeof t?(ft.set.call(e,t,n),!0):!isNaN(t)&&(ft.set.call(e,parseInt(t),n),!0)},preventExtensions:function(e){return d("Observable arrays cannot be frozen"),!1}};function ht(e,t,n,r){void 0===n&&(n="ObservableArray@"+p()),void 0===r&&(r=!1);var o,s,i,a=new mt(n,t,r);o=a.values,s=E,i=a,Object.defineProperty(o,s,{enumerable:!1,writable:!1,configurable:!0,value:i});var c=new Proxy(a.values,dt);if(a.proxy=c,e&&e.length){var u=oe(!0);a.spliceWithArray(0,0,e),se(u)}return c}var mt=function(){function e(e,t,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new k(e||"ObservableArray@"+p()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return at(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),lt(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,n){var r=this;me(this.atom);var o=this.values.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:null==t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=u),it(this)){var s=ct(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:n});if(!s)return u;t=s.removedCount,n=s.added}n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}));var i=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,i),this.dehanceValues(i)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}([e,t],n));var o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),o},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&!1,o=ut(this),s=o||r?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:n}:null;this.atom.reportChanged(),o&&pt(this,s)},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&!1,o=ut(this),s=o||r?{object:this.proxy,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom.reportChanged(),o&&pt(this,s)},e}(),ft={intercept:function(e){return this[E].intercept(e)},observe:function(e,t){return void 0===t&&(t=!1),this[E].observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[E];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this[E];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray(e);case 2:return o.spliceWithArray(e,t)}return o.spliceWithArray(e,t,n)},spliceWithArray:function(e,t,n){return this[E].spliceWithArray(e,t,n)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[E];return n.spliceWithArray(n.values.length,0,e),n.values.length},pop:function(){return this.splice(Math.max(this[E].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[E];return n.spliceWithArray(0,0,e),n.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[E],n=t.dehanceValues(t.values).indexOf(e);return n>-1&&(this.splice(n,1),!0)},get:function(e){var t=this[E];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var n=this[E],r=n.values;if(e<r.length){me(n.atom);var o=r[e];if(it(n)){var s=ct(n,{type:"update",object:n.proxy,index:e,newValue:t});if(!s)return;t=s.newValue}(t=n.enhancer(t,o))!==o&&(r[e]=t,n.notifyArrayChildUpdate(e,t,o))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(e){ft[e]=function(){var t=this[E];t.atom.reportObserved();var n=t.dehanceValues(t.values);return n[e].apply(n,arguments)}}));var vt,bt=g("ObservableArrayAdministration",mt);function yt(e){return v(e)&&bt(e[E])}var gt,_t={},wt=function(){function e(e,t,n){if(void 0===t&&(t=H),void 0===n&&(n="ObservableMap@"+p()),this.enhancer=t,this.name=n,this[vt]=_t,this._keysAtom=N(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,t){var n=this._has(e);if(it(this)){var r=ct(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(it(this)&&!(r=ct(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=ut(this),r=n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return tt((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),n&&pt(this,r),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);return n?n.setNewValue(t):(n=new ce(t,B,this.name+"."+S(e)+"?",!1),this._hasMap.set(e,n)),n},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==je.UNCHANGED){var r=ut(this),o=r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;n.setNewValue(t),r&&pt(this,o)}},e.prototype._addValue=function(e,t){var n=this;me(this._keysAtom),tt((function(){var r=new ce(t,n.enhancer,n.name+"."+S(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()}));var r=ut(this);r&&pt(this,r?{type:"add",object:this,name:e,newValue:t}:null)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=0,n=Array.from(this.keys());return Lt({next:function(){return t<n.length?{value:e.get(n[t++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var e=this,t=0,n=Array.from(this.keys());return Lt({next:function(){if(t<n.length){var r=n[t++];return{value:[r,e.get(r)],done:!1}}return{done:!0}}})},e.prototype[(vt=E,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,t){var n,r;try{for(var o=i(this),s=o.next();!s.done;s=o.next()){var c=a(s.value,2),u=c[0],l=c[1];e.call(t,l,u,this)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.merge=function(e){var t=this;return Ot(e)&&(e=e.toJS()),tt((function(){b(e)?O(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=a(e,2),r=n[0],o=n[1];return t.set(r,o)})):_(e)?(e.constructor!==Map&&d("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&d("Cannot initialize map from "+e)})),this},e.prototype.clear=function(){var e=this;tt((function(){be((function(){var t,n;try{for(var r=i(e.keys()),o=r.next();!o.done;o=r.next()){var s=o.value;e.delete(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))}))},e.prototype.replace=function(e){var t=this;return tt((function(){var n,r=b(n=e)?Object.keys(n):Array.isArray(n)?n.map((function(e){return a(e,1)[0]})):_(n)||Ot(n)?Array.from(n.keys()):d("Cannot get keys from '"+n+"'");Array.from(t.keys()).filter((function(e){return-1===r.indexOf(e)})).forEach((function(e){return t.delete(e)})),t.merge(e)})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,t,n={};try{for(var r=i(this),o=r.next();!o.done;o=r.next()){var s=a(o.value,2),c=s[0],u=s[1];n["symbol"==typeof c?c:S(c)]=u}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map((function(t){return S(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return lt(this,e)},e.prototype.intercept=function(e){return at(this,e)},e}(),Ot=g("ObservableMap",wt),St={},jt=function(){function e(e,t,n){if(void 0===t&&(t=H),void 0===n&&(n="ObservableSet@"+p()),this.name=n,this[gt]=St,this._data=new Set,this._atom=N(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;tt((function(){be((function(){var t,n;try{for(var r=i(e._data.values()),o=r.next();!o.done;o=r.next()){var s=o.value;e.delete(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))}))},e.prototype.forEach=function(e,t){var n,r;try{for(var o=i(this),s=o.next();!s.done;s=o.next()){var a=s.value;e.call(t,a,a,this)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if(me(this._atom),it(this)&&!(r=ct(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){tt((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=ut(this),r=n?{type:"add",object:this,newValue:e}:null;n&&pt(this,r)}return this},e.prototype.delete=function(e){var t=this;if(it(this)&&!(r=ct(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var n=ut(this),r=n?{type:"delete",object:this,oldValue:e}:null;return tt((function(){t._atom.reportChanged(),t._data.delete(e)})),n&&pt(this,r),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Lt({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,n=Array.from(this._data.values());return Lt({next:function(){return t<n.length?{value:e.dehanceValue(n[t++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Et(e)&&(e=e.toJS()),tt((function(){Array.isArray(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):w(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&d("Cannot initialize set from "+e)})),this},e.prototype.observe=function(e,t){return lt(this,e)},e.prototype.intercept=function(e){return at(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[(gt=E,Symbol.iterator)]=function(){return this.values()},e}(),Et=g("ObservableSet",jt),kt=function(){function e(e,t,n,r){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=n,this.defaultEnhancer=r,this.keysAtom=new k(n+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var n=this.target,r=this.values.get(e);if(r instanceof ue)r.set(t);else{if(it(this)){if(!(s=ct(this,{type:"update",object:this.proxy||n,name:e,newValue:t})))return;t=s.newValue}if((t=r.prepareNewValue(t))!==je.UNCHANGED){var o=ut(this),s=o?{type:"update",object:this.proxy||n,oldValue:r.value,name:e,newValue:t}:null;r.setNewValue(t),o&&pt(this,s)}}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),n=t.get(e);if(n)return n.get();var r=!!this.values.get(e);return n=new ce(r,B,this.name+"."+S(e)+"?",!1),t.set(e,n),n.get()},e.prototype.addObservableProp=function(e,t,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(it(this)){var o=ct(this,{object:this.proxy||r,name:e,type:"add",newValue:t});if(!o)return;t=o.newValue}var s=new ce(t,n,this.name+"."+S(e),!1);this.values.set(e,s),t=s.value,Object.defineProperty(r,e,function(e){return Nt[e]||(Nt[e]={configurable:!0,enumerable:!0,get:function(){return this[E].read(e)},set:function(t){this[E].write(e,t)}})}(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,n){var r,o,s,i=this.target;n.name=n.name||this.name+"."+S(t),this.values.set(t,new ue(n)),(e===i||(r=e,o=t,!(s=Object.getOwnPropertyDescriptor(r,o))||!1!==s.configurable&&!1!==s.writable))&&Object.defineProperty(e,t,function(e){return Tt[e]||(Tt[e]={configurable:je.computedConfigurable,enumerable:!1,get:function(){return At(this).read(e)},set:function(t){At(this).write(e,t)}})}(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(it(this)&&!(i=ct(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{Te();var n=ut(this),r=this.values.get(e),o=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var s=this.pendingKeys.get(e);s&&s.set(!1)}delete this.target[e];var i=n?{type:"remove",object:this.proxy||t,oldValue:o,name:e}:null;n&&pt(this,i)}finally{Ae()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return lt(this,e)},e.prototype.intercept=function(e){return at(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var n=ut(this),r=n?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(n&&pt(this,r),this.pendingKeys){var o=this.pendingKeys.get(e);o&&o.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var n=[];try{for(var r=i(this.values),o=r.next();!o.done;o=r.next()){var s=a(o.value,2),c=s[0];s[1]instanceof ce&&n.push(c)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e}();function xt(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=H),Object.prototype.hasOwnProperty.call(e,E))return e[E];b(e)||(t=(e.constructor.name||"ObservableObject")+"@"+p()),t||(t="ObservableObject@"+p());var r=new kt(e,new Map,S(t),n);return y(e,E,r),r}var Nt=Object.create(null),Tt=Object.create(null);function At(e){return e[E]||(M(e),e[E])}var Pt=g("ObservableObjectAdministration",kt);function Ct(e){return!!v(e)&&(M(e),Pt(e[E]))}function Dt(e,t){if("object"==typeof e&&null!==e){if(yt(e))return void 0!==t&&d(!1),e[E].atom;if(Et(e))return e[E];if(Ot(e)){var n=e;return void 0===t?n._keysAtom:((r=n._data.get(t)||n._hasMap.get(t))||d(!1),r)}var r;if(M(e),t&&!e[E]&&e[t],Ct(e))return t?((r=e[E].values.get(t))||d(!1),r):d(!1);if(x(e)||le(e)||He(e))return e}else if("function"==typeof e&&He(e[E]))return e[E];return d(!1)}function It(e,t){return e||d("Expecting some object"),void 0!==t?It(Dt(e,t)):x(e)||le(e)||He(e)?e:Ot(e)||Et(e)?e:(M(e),e[E]?e[E]:void d(!1))}function Mt(e,t){return(void 0!==t?Dt(e,t):Ct(e)||Ot(e)||Et(e)?It(e):Dt(e)).name}var Ut=Object.prototype.toString;function Rt(e,t){return function e(t,n,r,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var s=typeof t;return("function"===s||"object"===s||"object"==typeof n)&&function(t,n,r,o){t=Ht(t),n=Ht(n);var s=Ut.call(t);if(s!==Ut.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var i="[object Array]"===s;if(!i){if("object"!=typeof t||"object"!=typeof n)return!1;var a=t.constructor,c=n.constructor;if(a!==c&&!("function"==typeof a&&a instanceof a&&"function"==typeof c&&c instanceof c)&&"constructor"in t&&"constructor"in n)return!1}o=o||[];for(var u=(r=r||[]).length;u--;)if(r[u]===t)return o[u]===n;if(r.push(t),o.push(n),i){if((u=t.length)!==n.length)return!1;for(;u--;)if(!e(t[u],n[u],r,o))return!1}else{var l=Object.keys(t),p=void 0;if(u=l.length,Object.keys(n).length!==u)return!1;for(;u--;)if(!Bt(n,p=l[u])||!e(t[p],n[p],r,o))return!1}return r.pop(),o.pop(),!0}(t,n,r,o)}(e,t)}function Ht(e){return yt(e)?e.slice():_(e)||Ot(e)?Array.from(e.entries()):w(e)||Et(e)?Array.from(e.entries()):e}function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Lt(e){return e[Symbol.iterator]=zt,e}function zt(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Be,extras:{getDebugName:Mt},$mobx:E})}).call(this,n("2YuA"),n("btiA"))},EaeJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.renderHeaderStream=s(this.renderHeaderStream,this),this.render=s(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e;return Object(o.div)({className:osu.classWithModifiers("update-streams-v2",[null!=this.props.currentStreamId?"with-active":void 0])},Object(o.div)({className:"update-streams-v2__container"},function(){var t,n,r,o;for(o=[],t=0,n=(r=this.props.updateStreams).length;t<n;t++)e=r[t],o.push(this.renderHeaderStream({stream:e}));return o}.call(this)))},t.prototype.renderHeaderStream=function(e){var t,n,r;return n=e.stream,r=_.kebabCase(n.display_name),t=osu.classWithModifiers("update-streams-v2__item",[r,n.is_featured?"featured":void 0,this.props.currentStreamId===n.id?"active":void 0]),t+=" t-changelog-stream--"+r,Object(o.a)({href:Url.changelogBuild(n.latest_build),key:n.id,className:t},Object(o.div)({className:"update-streams-v2__bar u-changelog-stream--bg"}),Object(o.p)({className:"update-streams-v2__row update-streams-v2__row--name"},n.display_name),Object(o.p)({className:"update-streams-v2__row update-streams-v2__row--version"},n.latest_build.display_version),n.user_count[0]>0?Object(o.p)({className:"update-streams-v2__row update-streams-v2__row--users"},osu.transChoice("changelog.builds.users_online",n.user_count[0])):void 0)},t}(r.PureComponent)},EiUu:function(e,t,n){"use strict";var r=n("RnBu");e.exports=function(e,t){if("string"!=typeof e)return e;if(0===e.length)return e;var n=r.basename(e,r.extname(e))+t;return r.join(r.dirname(e),n)}},ElYz:function(e,t,n){"use strict";var r=n("DmM8"),o=n("WCVR"),s=n("p3jD");e.exports=function(e,t){var n,l,p,d,h=e.split(a),m=h.length+1,f=1/0,v=[];for(h.unshift(o(c,t)+u);m--;)if(l=s(h[m]),v[m]=l.stops,0!==r(h[m]).length){if(!l.indent){f=1/0;break}l.indent>0&&l.indent<f&&(f=l.indent)}if(f!==1/0)for(m=h.length;m--;){for(p=v[m],n=f;n&&!(n in p);)n--;d=0!==r(h[m]).length&&f&&n!==f?i:"",h[m]=d+h[m].slice(n in p?p[n]+1:0)}return h.shift(),h.join(a)};var i="\t",a="\n",c=" ",u="!"},Eo6g:function(e,t,n){"use strict";var r=n("AMMU"),o=n("mPRR");e.exports=m,m.notInList=!0,m.notInBlock=!0;var s="\\",i="\n",a="\t",c=" ",u="[",l="]",p="^",d=":",h=/^( {4}|\t)?/gm;function m(e,t,n){var m,f,v,b,y,g,_,w,O,S,j,E,k=this.offset;if(this.options.footnotes){for(m=0,f=t.length,v="",b=e.now(),y=b.line;m<f&&(O=t.charAt(m),r(O));)v+=O,m++;if(t.charAt(m)===u&&t.charAt(m+1)===p){for(m=(v+=u+p).length,_="";m<f&&(O=t.charAt(m))!==l;)O===s&&(_+=O,m++,O=t.charAt(m)),_+=O,m++;if(_&&t.charAt(m)===l&&t.charAt(m+1)===d){if(n)return!0;for(S=_,m=(v+=_+l+d).length;m<f&&((O=t.charAt(m))===a||O===c);)v+=O,m++;for(b.column+=v.length,b.offset+=v.length,_="",g="",w="";m<f;){if((O=t.charAt(m))===i){for(w=O,m++;m<f&&(O=t.charAt(m))===i;)w+=O,m++;for(_+=w,w="";m<f&&(O=t.charAt(m))===c;)w+=O,m++;if(0===w.length)break;_+=w}_&&(g+=_,_=""),g+=O,m++}return v+=g,g=g.replace(h,(function(e){return k[y]=(k[y]||0)+e.length,y++,""})),j=e(v),E=this.enterBlock(),g=this.tokenizeBlock(g,b),E(),j({type:"footnoteDefinition",identifier:o(S),label:S,children:g})}}}}},Ev30:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,o=n("If6E"),s=n("cDcd"),i=n("NzAu"),a=n("TY2o"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;r=s.createElement;var l=function(e){var t;function n(){return this.previousUsernames=c(this.previousUsernames,this),this.render=c(this.render,this),n.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),t="profile-info",n.prototype.render=function(){var e,n,s;return e=r(a.a,{user:this.props.user,modifiers:["full"]}),Object(i.div)({className:t},Object(i.div)({className:t+"__bg",style:{backgroundImage:osu.urlPresence(this.props.coverUrl)}}),this.props.user.id===currentUser.id?Object(i.a)({className:t+"__avatar",href:laroute.route("account.edit")+"#avatar",title:osu.trans("users.show.change_avatar")},e):Object(i.div)({className:t+"__avatar"},e),Object(i.div)({className:t+"__details"},Object(i.h1)({className:t+"__name"},Object(i.span)({className:"u-ellipsis-overflow"},this.props.user.username),Object(i.div)({className:t+"__previous-usernames"},this.previousUsernames())),Object(i.span)({className:t+"__title",style:{color:this.props.user.profile_colour}},null!=(n=this.props.user.title)?n:""),Object(i.div)({className:t+"__icon-group"},Object(i.div)({className:t+"__icons"},this.props.user.is_supporter?Object(i.span)({className:t+"__icon "+t+"__icon--supporter",title:osu.trans("users.show.is_supporter")},_(this.props.user.support_level).times((function(e){return Object(i.span)({key:e,className:"fas fa-heart"})}))):void 0),Object(i.div)({className:t+"__icons "+t+"__icons--flag"},null!=(null!=(s=this.props.user.country)?s.code:void 0)?Object(i.a)({className:t+"__flag "+t+"__flag--country",href:laroute.route("rankings",{mode:this.props.currentMode,country:this.props.user.country.code,type:"performance"})},Object(i.span)({className:t+"__flag-flag"},r(o.a,{country:this.props.user.country,modifiers:["full"]})),Object(i.span)({className:t+"__flag-text"},this.props.user.country.name)):void 0))),Object(i.div)({className:"profile-info__bar hidden-xs",style:{backgroundColor:this.props.user.profile_colour}}))},n.prototype.previousUsernames=function(){var e;if(0!==this.props.user.previous_usernames.length)return e=this.props.user.previous_usernames.join(", "),Object(i.div)({className:"profile-previous-usernames"},Object(i.a)({className:"profile-previous-usernames__icon profile-previous-usernames__icon--with-title",title:osu.trans("users.show.previous_usernames")+": "+e,onClick:this.doNothing},Object(i.span)({className:"fas fa-address-card"})),Object(i.div)({className:"profile-previous-usernames__icon profile-previous-usernames__icon--plain"},Object(i.span)({className:"fas fa-address-card"})),Object(i.div)({className:"profile-previous-usernames__content"},Object(i.div)({className:"profile-previous-usernames__title"},osu.trans("users.show.previous_usernames")),Object(i.div)({className:"profile-previous-usernames__names"},e)))},n.prototype.doNothing=function(e){},n}(s.PureComponent)},FAY1:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("0h6b"),o=n("YLtl"),s=n("C92G"),i=n("cDcd"),a=n("hc33");class c extends i.PureComponent{get canReport(){return!o.isEmpty(currentUser)&&null!=currentUser.id&&currentUser.id!==this.props.score.user_id}render(){const{score:e}=this.props;return i.createElement(s.a,null,t=>i.createElement(i.Fragment,null,e.replay?i.createElement("a",{className:"simple-menu__item js-login-required--click","data-turbolinks":!1,href:Object(r.route)("scores.download",{mode:e.mode,score:e.id}),onClick:t},osu.trans("users.show.extra.top_ranks.download_replay")):null,this.canReport?i.createElement(a.a,{className:"simple-menu__item",baseKey:"scores",reportableId:e.id,reportableType:`score_best_${e.mode}`,user:e.user}):null))}}},FVE9:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,o,s=n("cDcd"),i=n("NzAu"),a=n("SYfz"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;o=s.createElement,r="user-action-button";var l=function(e){function t(e){var n,r,o;this.isVisible=c(this.isVisible,this),this.followers=c(this.followers,this),this.renderIcon=c(this.renderIcon,this),this.renderCounter=c(this.renderCounter,this),this.render=c(this.render,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidMount=c(this.componentDidMount,this),this.refresh=c(this.refresh,this),this.clicked=c(this.clicked,this),this.updateFriends=c(this.updateFriends,this),this.requestDone=c(this.requestDone,this),t.__super__.constructor.call(this,e),this.button=s.createRef(),this.eventId="friendButton-"+this.props.userId+"-"+osu.uuid(),r=_.find(currentUser.friends,{target_id:e.userId}),n=null!=(o=this.props.followers)?o:0,null!=r&&(n-=1),this.state={friend:r,followersWithoutSelf:n}}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.defaultProps={showFollowerCounter:!1,alwaysVisible:!1},t.prototype.requestDone=function(){return this.setState({loading:!1})},t.prototype.updateFriends=function(e){return this.setState({friend:_.find(e,{target_id:this.props.userId})},(function(){return currentUser.friends=e,$.publish("user:update",currentUser),$.publish("friendButton:refresh")}))},t.prototype.clicked=function(e){return this.setState({loading:!0}),null!=this.state.friend?this.xhr=$.ajax({type:"DELETE",url:laroute.route("friends.destroy",{friend:this.props.userId})}):this.xhr=$.ajax({type:"POST",url:laroute.route("friends.store",{target:this.props.userId})}),this.xhr.done(this.updateFriends).fail(osu.emitAjaxError(this.button.current)).always(this.requestDone)},t.prototype.refresh=function(e){return this.setState({friend:_.find(currentUser.friends,{target_id:this.props.userId})},(function(){}),this.forceUpdate())},t.prototype.componentDidMount=function(){return $.subscribe("friendButton:refresh."+this.eventId,this.refresh)},t.prototype.componentWillUnmount=function(){var e;return $.unsubscribe("."+this.eventId),null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e,t,n,o,s,a,c,u,l;if(o=this.isVisible(),!this.props.alwaysVisible){if(!o)return null!=(a=this.props.container)&&a.classList.add("hidden"),null;null!=(s=this.props.container)&&s.classList.remove("hidden")}return e=osu.classWithModifiers(r,this.props.modifiers),n=(null!=(c=null!=(u=currentUser.friends)?u.length:void 0)?c:0)>=currentUser.max_friends,l=function(){switch(!1){case!!o:return osu.trans("friends.buttons.disabled");case null==this.state.friend:return osu.trans("friends.buttons.remove");case!n:return osu.trans("friends.too_many");default:return osu.trans("friends.buttons.add")}}.call(this),t=!o||this.state.loading||n&&null==this.state.friend,null==this.state.friend||this.state.loading||(this.state.friend.mutual?e+=" "+r+"--mutual":e+=" "+r+"--friend"),Object(i.div)({title:l},Object(i.button)({type:"button",className:e,onClick:this.clicked,ref:this.button,disabled:t},this.renderIcon({isFriendLimit:n,isVisible:o}),this.renderCounter()))},t.prototype.renderCounter=function(){if(this.props.showFollowerCounter&&null!=this.props.followers)return Object(i.span)({className:r+"__counter"},osu.formatNumber(this.followers()))},t.prototype.renderIcon=function(e){var t,n;return t=e.isFriendLimit,n=e.isVisible,Object(i.span)({className:r+"__icon-container"},function(){switch(!1){case!this.state.loading:return o(a.a);case!!n:return Object(i.i)({className:"fas fa-user"});case null==this.state.friend:return[Object(i.span)({key:"hover",className:r+"__icon "+r+"__icon--hover-visible"},Object(i.i)({className:"fas fa-user-times"})),this.state.friend.mutual?Object(i.span)({key:"normal-mutual",className:r+"__icon "+r+"__icon--hover-hidden"},Object(i.i)({className:"fas fa-user-friends"})):Object(i.span)({key:"normal",className:r+"__icon "+r+"__icon--hover-hidden"},Object(i.i)({className:"fas fa-user"}))];default:return Object(i.i)({className:t?"fas fa-user":"fas fa-user-plus"})}}.call(this))},t.prototype.followers=function(){return this.state.followersWithoutSelf+(null!=this.state.friend?1:0)},t.prototype.isVisible=function(){return null!=currentUser.id&&_.isFinite(this.props.userId)&&this.props.userId!==currentUser.id&&!_.find(currentUser.blocks,{target_id:this.props.userId})},t}(s.PureComponent)},GLyB:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(e){this.previewStop=s(this.previewStop,this),this.previewPlay=s(this.previewPlay,this),t.__super__.constructor.call(this,e),this.state={playing:!1}}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return this.eventId="trackpreview-"+this.props.track.id,$.subscribe("osuAudio:initializing."+this.eventId,this.previewPlay),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop)},t.prototype.componentWillUnmount=function(){return $.unsubscribe("."+this.eventId)},t.prototype.render=function(){return Object(o.div)({className:"tracklist__cover",style:{backgroundImage:osu.urlPresence(this.props.track.cover_url)}},Object(o.a)({className:"tracklist__preview js-audio--play",href:"#","data-audio-url":this.props.track.preview},Object(o.i)({className:"fas "+(this.state.playing?"fa-pause":"fa-play")})))},t.prototype.previewPlay=function(e,t){return t.url!==this.props.track.preview?this.previewStop():this.setState({playing:!0})},t.prototype.previewStop=function(e){if(this.state.playing)return this.setState({playing:!1})},t}(r.Component)},GhGe:function(e,t,n){"use strict";var r=n("nHh1"),o=n("jiio"),s=n("pVYY"),i=n("gTvg"),a=n("pI+u");e.exports=function e(){var t=[],n=i(),b={},y=!1,g=-1;return _.data=function(e,t){return"string"==typeof e?2===arguments.length?(m("data",y),b[e]=t,_):u.call(b,e)&&b[e]||null:e?(m("data",y),b=e,_):b},_.freeze=w,_.attachers=t,_.use=function(e){var n;if(m("use",y),null==e);else if("function"==typeof e)u.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?i(e):o(e)}return n&&(b.settings=r(b.settings||{},n)),_;function o(e){i(e.plugins),e.settings&&(n=r(n||{},e.settings))}function s(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?u.apply(null,e):o(e)}}function i(e){var t,n;if(null==e);else{if(!("object"==typeof e&&"length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,n=-1;++n<t;)s(e[n])}}function u(e,n){var o=function(e){for(var n,r=t.length,o=-1;++o<r;)if((n=t[o])[0]===e)return n}(e);o?(a(o[1])&&a(n)&&(n=r(o[1],n)),o[1]=n):t.push(c.call(arguments))}},_.parse=function(e){var t,n=s(e);return w(),d("parse",t=_.Parser),p(t,"parse")?new t(String(n),n).parse():t(String(n),n)},_.stringify=function(e,t){var n,r=s(t);return w(),h("stringify",n=_.Compiler),f(e),p(n,"compile")?new n(e,r).compile():n(e,r)},_.run=O,_.runSync=function(e,t){var n,r=!1;return O(e,t,(function(e,t){r=!0,o(e),n=t})),v("runSync","run",r),n},_.process=S,_.processSync=function(e){var t,n=!1;return w(),d("processSync",_.Parser),h("processSync",_.Compiler),S(t=s(e),(function(e){n=!0,o(e)})),v("processSync","process",n),t},_;function _(){for(var n=e(),o=t.length,s=-1;++s<o;)n.use.apply(null,t[s]);return n.data(r(!0,{},b)),n}function w(){var e,r,o,s;if(y)return _;for(;++g<t.length;)r=(e=t[g])[0],!1!==(o=e[1])&&(!0===o&&(e[1]=void 0),"function"==typeof(s=r.apply(_,e.slice(1)))&&n.use(s));return y=!0,g=1/0,_}function O(e,t,r){if(f(e),w(),r||"function"!=typeof t||(r=t,t=null),!r)return new Promise(o);function o(o,i){n.run(e,s(t),(function(t,n,s){n=n||e,t?i(t):o?o(n):r(null,n,s)}))}o(null,r)}function S(e,t){if(w(),d("process",_.Parser),h("process",_.Compiler),!t)return new Promise(n);function n(n,r){var o=s(e);l.run(_,{file:o},(function(e){e?r(e):n?n(o):t(null,o)}))}n(null,t)}}().freeze();var c=[].slice,u={}.hasOwnProperty,l=i().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,r,o){e?n(e):(t.tree=r,t.file=o,n())}))})).use((function(e,t){t.file.contents=e.stringify(t.tree,t.file)}));function p(e,t){return"function"==typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function d(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function h(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function m(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function f(e){if(!e||"string"!=typeof e.type)throw new Error("Expected node, got `"+e+"`")}function v(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},GtRd:function(e,t,n){"use strict";e.exports=function(e,t){for(var n=e.indexOf("\n",t);n>t&&" "===e.charAt(n-1);)n--;return n}},HYKJ:function(e,t,n){"use strict";function r(e){return function(t){var n=-1,r=e.length;if(t<0)return{};for(;++n<r;)if(e[n]>t)return{line:n+1,column:t-(e[n-1]||0)+1,offset:t};return{}}}function o(e){return function(t){var n=t&&t.line,r=t&&t.column;return!isNaN(n)&&!isNaN(r)&&n-1 in e?(e[n-2]||0)+r-1||0:-1}}e.exports=function(e){var t=function(e){for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(n+1),n=e.indexOf("\n",n+1);return t.push(e.length+1),t}(String(e));return{toPosition:r(t),toOffset:o(t)}}},If6E:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd"),o=n("NzAu");r.createElement;var s=function(e){var t,n,r;return n=e.country,r=e.modifiers,null==(null!=n?n.code:void 0)?null:(t=osu.classWithModifiers("flag-country",r),Object(o.span)({className:t,title:n.name,style:{backgroundImage:"url('/images/flags/"+n.code+".png')"}}))}},Ix6x:function(e,t,n){"use strict";var r=n("1OSS"),o=n("AMMU"),s=n("uLnF");e.exports=w,w.locator=s,w.notInLink=!0;var i='"',a="'",c="(",u=")",l=",",p=".",d=":",h=";",m="<",f="@",v="[",b="]",y="mailto:",g=["http://","https://",y],_=g.length;function w(e,t,n){var s,w,O,S,j,E,k,x,N,T,A,P,C;if(this.options.gfm){for(s="",S=-1;++S<_;)if(E=g[S],(k=t.slice(0,E.length)).toLowerCase()===E){s=k;break}if(s){for(S=s.length,x=t.length,N="",T=0;S<x&&(O=t.charAt(S),!o(O)&&O!==m)&&(O!==p&&O!==l&&O!==d&&O!==h&&O!==i&&O!==a&&O!==u&&O!==b||(A=t.charAt(S+1))&&!o(A))&&(O!==c&&O!==v||T++,O!==u&&O!==b||!(--T<0));)N+=O,S++;if(N){if(w=s+=N,E===y){if(-1===(j=N.indexOf(f))||j===x-1)return;w=w.substr(y.length)}return!!n||(C=this.enterLink(),P=this.inlineTokenizers,this.inlineTokenizers={text:P.text},w=this.tokenizeInline(w,e.now()),this.inlineTokenizers=P,C(),e(s)({type:"link",title:null,url:r(s,{nonTerminated:!1}),children:w}))}}}}},JN1X:function(e,t,n){"use strict";var r=n("DmM8"),o=n("QgkL");e.exports=function(e,t,n){for(var u,l,p,d,h,m,f,v,b,y=this.offset,g=this.blockTokenizers,_=this.interruptBlockquote,w=e.now(),O=w.line,S=t.length,j=[],E=[],k=[],x=0;x<S&&((l=t.charAt(x))===a||l===i);)x++;if(t.charAt(x)===c){if(n)return!0;for(x=0;x<S;){for(f=x,v=!1,-1===(d=t.indexOf(s,x))&&(d=S);x<S&&((l=t.charAt(x))===a||l===i);)x++;if(t.charAt(x)===c?(x++,v=!0,t.charAt(x)===a&&x++):x=f,h=t.slice(x,d),!v&&!r(h)){x=f;break}if(!v&&(p=t.slice(x),o(_,g,this,[e,p,!0])))break;m=f===x?h:t.slice(f,d),k.push(x-f),j.push(m),E.push(h),x=d+1}for(x=-1,S=k.length,u=e(j.join(s));++x<S;)y[O]=(y[O]||0)+k[x],O++;return b=this.enterBlock(),E=this.tokenizeBlock(E.join(s),w),b(),u({type:"blockquote",children:E})}};var s="\n",i="\t",a=" ",c=">"},JOWQ:function(e,t,n){"use strict";e.exports=function(e,t,n){return function(){var r=n||this,o=r[e];return r[e]=!t,function(){r[e]=o}}}},Jcop:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var l,p,d,h,m=-1,f=t.length+1,v="";++m<f&&((l=t.charAt(m))===r||l===s);)v+=l;if(l===i||l===a||l===c)for(p=l,v+=l,d=1,h="";++m<f;)if((l=t.charAt(m))===p)d++,v+=h+p,h="";else{if(l!==s)return d>=u&&(!l||l===o)?(v+=h,!!n||e(v)({type:"thematicBreak"})):void 0;h+=l}};var r="\t",o="\n",s=" ",i="*",a="-",c="_",u=3},Jryd:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var o in r)n.call(r,o)&&(e[o]=r[o])}return e};var n=Object.prototype.hasOwnProperty},KHX3:function(e,t,n){"use strict";var r=n("Jryd"),o=n("GhGe"),s=n("SifC"),i=n("rf6O"),a=n("lYbo"),c=n("TRjL"),u=n("Oyu6"),l=n("UXHk"),p=n("k6t2"),d=n("6Nha"),h=n("0O0h"),m=n("6MCy"),f=n("wke6"),v=Object.keys(m),b=function(e){var t=e.source||e.children||"",n=e.parserOptions;if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var i=r(m,e.renderers),h=[[s,n]].concat(e.plugins||[]).reduce(y,o()),b=h.parse(t),g=r(e,{renderers:i,definitions:d(b)}),_=function(e){var t=[p,a()],n=e.disallowedTypes;e.allowedTypes&&(n=v.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var r=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(u.ofType(n,r)),e.allowNode&&t.push(u.ifNotMatch(e.allowNode,r));var o=!e.escapeHtml&&!e.skipHtml,s=(e.astPlugins||[]).some((function(e){return(Array.isArray(e)?e[0]:e).identity===f.HtmlParser}));return o&&!s&&t.push(c),e.astPlugins?t.concat(e.astPlugins):t}(e),w=h.runSync(b),O=_.reduce((function(e,t){return t(e,g)}),w);return l(O,g)};function y(e,t){return Array.isArray(t)?e.use.apply(e,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t)):e.use(t)}b.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:h,astPlugins:[],plugins:[],parserOptions:{}},b.propTypes={className:i.string,source:i.string,children:i.string,sourcePos:i.bool,rawSourcePos:i.bool,escapeHtml:i.bool,skipHtml:i.bool,allowNode:i.func,allowedTypes:i.arrayOf(i.oneOf(v)),disallowedTypes:i.arrayOf(i.oneOf(v)),transformLinkUri:i.oneOfType([i.func,i.bool]),linkTarget:i.oneOfType([i.func,i.string]),transformImageUri:i.func,astPlugins:i.arrayOf(i.func),unwrapDisallowed:i.bool,renderers:i.object,plugins:i.array,parserOptions:i.object},b.types=v,b.renderers=m,b.uriTransformer=h,e.exports=b},KTKs:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,s,i,a,c,u,l,p,d;if(n)return!0;for(i=(r=this.inlineMethods).length,o=this.inlineTokenizers,s=-1,p=t.length;++s<i;)"text"!==(l=r[s])&&o[l]&&((u=o[l].locator)||e.file.fail("Missing locator: `"+l+"`"),-1!==(c=u.call(this,t,1))&&c<p&&(p=c));a=t.slice(0,p),d=e.now(),this.decode(a,d,(function(t,n,r){e(r||t)({type:"text",value:t})}))}},KbVC:function(e,t,n){"use strict";var r=n("T+HN").openCloseTag;e.exports=function(e,t,n){for(var r,_,w,O,S,j,E,k=this.options.blocks.join("|"),x=new RegExp("^</?("+k+")(?=(\\s|/?>|$))","i"),N=t.length,T=0,A=[[c,u,!0],[l,p,!0],[d,h,!0],[m,f,!0],[v,b,!0],[x,y,!0],[g,y,!1]];T<N&&((O=t.charAt(T))===o||O===s);)T++;if(t.charAt(T)===a){for(r=-1===(r=t.indexOf(i,T+1))?N:r,_=t.slice(T,r),w=-1,S=A.length;++w<S;)if(A[w][0].test(_)){j=A[w];break}if(j){if(n)return j[2];if(T=r,!j[1].test(_))for(;T<N;){if(r=-1===(r=t.indexOf(i,T+1))?N:r,_=t.slice(T+1,r),j[1].test(_)){_&&(T=r);break}T=r}return e(E=t.slice(0,T))({type:"html",value:E})}}};var o="\t",s=" ",i="\n",a="<",c=/^<(script|pre|style)(?=(\s|>|$))/i,u=/<\/(script|pre|style)>/i,l=/^<!--/,p=/-->/,d=/^<\?/,h=/\?>/,m=/^<![A-Za-z]/,f=/>/,v=/^<!\[CDATA\[/,b=/\]\]>/,y=/^$/,g=new RegExp(r.source+"\\s*$")},LLPm:function(e,t,n){"use strict";e.exports=function(e,t,n){var l,p,d,h,m,f,v,b,y,g,_,w,O,S=this.options.gfm,j=t.length+1,E=0,k="";if(S){for(;E<j&&((d=t.charAt(E))===s||d===o);)k+=d,E++;if(w=E,(d=t.charAt(E))===i||d===a){for(E++,p=d,l=1,k+=d;E<j&&(d=t.charAt(E))===p;)k+=d,l++,E++;if(!(l<c)){for(;E<j&&((d=t.charAt(E))===s||d===o);)k+=d,E++;for(h="",v="";E<j&&(d=t.charAt(E))!==r&&(p!==a||d!==p);)d===s||d===o?v+=d:(h+=v+d,v=""),E++;if(!(d=t.charAt(E))||d===r){if(n)return!0;(O=e.now()).column+=k.length,O.offset+=k.length,k+=h,h=this.decode.raw(this.unescape(h),O),v&&(k+=v),v="",g="",_="",b="",y="";for(var x=!0;E<j;)if(b+=g,y+=_,g="",_="",(d=t.charAt(E))===r){for(x?(k+=d,x=!1):(g+=d,_+=d),v="",E++;E<j&&(d=t.charAt(E))===s;)v+=d,E++;if(g+=v,_+=v.slice(w),!(v.length>=u)){for(v="";E<j&&(d=t.charAt(E))===p;)v+=d,E++;if(g+=v,_+=v,!(v.length<l)){for(v="";E<j&&((d=t.charAt(E))===s||d===o);)g+=d,_+=d,E++;if(!d||d===r)break}}}else b+=d,_+=d,E++;for(k+=b+g,E=-1,j=h.length;++E<j;)if((d=h.charAt(E))===s||d===o)m||(m=h.slice(0,E));else if(m){f=h.slice(E);break}return e(k)({type:"code",lang:m||h||null,meta:f||null,value:y})}}}}};var r="\n",o="\t",s=" ",i="~",a="`",c=3,u=4},LhsB:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDcd");const o=Object(r.createContext)(void 0)},LnNg:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var p,d,h,m,f,v=e.now(),b=t.length,y=-1,g="";++y<b;){if((h=t.charAt(y))!==s||y>=c){y--;break}g+=h}for(p="",d="";++y<b;){if((h=t.charAt(y))===r){y--;break}h===s||h===o?d+=h:(p+=d+h,d="")}if(v.column+=g.length,v.offset+=g.length,g+=p+d,h=t.charAt(++y),m=t.charAt(++y),h===r&&(m===i||m===a)){for(g+=h,d=m,f=m===i?u:l;++y<b;){if((h=t.charAt(y))!==m){if(h!==r)return;y--;break}d+=h}return!!n||e(g+d)({type:"heading",depth:f,children:this.tokenizeInline(p,v)})}};var r="\n",o="\t",s=" ",i="=",a="-",c=3,u=1,l=2},Lspe:function(e,t,n){"use strict";var r=n("AMMU");e.exports=function(e,t,n){var s,i,a,c,u=t.charAt(0);if(u===o){if(n)return!0;for(c=1,s=t.length,i=u,a="";c<s&&(u=t.charAt(c),r(u));)a+=u,u===o&&(i+=a,a=""),c++;e(i)}};var o="\n"},MCzN:function(e,t,n){"use strict";var r=n("AMMU"),o=n("1OSS"),s=n("Be1W");e.exports=d,d.locator=s,d.notInLink=!0;var i="<",a=">",c="@",u="/",l="mailto:",p=l.length;function d(e,t,n){var s,d,h,m,f,v="",b=t.length,y=0,g="",_=!1,w="";if(t.charAt(0)===i){for(y++,v=i;y<b&&(s=t.charAt(y),!(r(s)||s===a||s===c||":"===s&&t.charAt(y+1)===u));)g+=s,y++;if(g){if(w+=g,g="",w+=s=t.charAt(y),y++,s===c)_=!0;else{if(":"!==s||t.charAt(y+1)!==u)return;w+=u,y++}for(;y<b&&(s=t.charAt(y),!r(s)&&s!==a);)g+=s,y++;if(s=t.charAt(y),g&&s===a)return!!n||(h=w+=g,v+=w+s,(d=e.now()).column++,d.offset++,_&&(w.slice(0,p).toLowerCase()===l?(h=h.substr(p),d.column+=p,d.offset+=p):w=l+w),m=this.inlineTokenizers,this.inlineTokenizers={text:m.text},f=this.enterLink(),h=this.tokenizeInline(h,d),this.inlineTokenizers=m,f(),e(v)({type:"link",title:null,url:o(w,{nonTerminated:!1}),children:h}))}}}},MKRK:function(e,t,n){"use strict";var r=n("DmM8"),o=n("WCVR"),s=n("BhdQ"),i=n("p3jD"),a=n("ElYz"),c=n("QgkL");e.exports=function(e,t,n){for(var o,i,a,y,_,w,O,S,j,k,x,N,T,A,P,C,D,I,M,U,R,H,B=this.options.commonmark,L=this.options.pedantic,z=this.blockTokenizers,V=this.interruptList,F=0,G=t.length,$=null,W=0,q=!1;F<G;){if((a=t.charAt(F))===v)W+=g-W%g;else{if(a!==m)break;W++}F++}if(!(W>=g)){if((a=t.charAt(F))===u||a===p||a===d)y=a,i=!1;else{for(i=!0,o="";F<G&&(a=t.charAt(F),s(a));)o+=a,F++;if(a=t.charAt(F),!o||!(a===h||B&&a===b))return;$=parseInt(o,10),y=a}if((a=t.charAt(++F))===m||a===v||!(L||a!==f&&""!==a)){if(n)return!0;for(F=0,T=[],A=[],P=[];F<G;){for(w=F,O=!1,H=!1,-1===(_=t.indexOf(f,F))&&(_=G),R=F+g,W=0;F<G;){if((a=t.charAt(F))===v)W+=g-W%g;else{if(a!==m)break;W++}F++}if(W>=g&&(H=!0),C&&W>=C.indent&&(H=!0),a=t.charAt(F),S=null,!H){if(a===u||a===p||a===d)S=a,F++,W++;else{for(o="";F<G&&(a=t.charAt(F),s(a));)o+=a,F++;a=t.charAt(F),F++,o&&(a===h||B&&a===b)&&(S=a,W+=o.length+1)}if(S)if((a=t.charAt(F))===v)W+=g-W%g,F++;else if(a===m){for(R=F+g;F<R&&t.charAt(F)===m;)F++,W++;F===R&&t.charAt(F)===m&&(F-=g-1,W-=g-1)}else a!==f&&""!==a&&(S=null)}if(S){if(!L&&y!==S)break;O=!0}else B||H||t.charAt(w)!==m?B&&C&&(H=W>=C.indent||W>g):H=!0,O=!1,F=w;if(k=t.slice(w,_),j=w===F?k:t.slice(F,_),(S===u||S===l||S===d)&&z.thematicBreak.call(this,e,k,!0))break;if(x=N,N=!O&&!r(j).length,H&&C)C.value=C.value.concat(P,k),A=A.concat(P,k),P=[];else if(O)0!==P.length&&(q=!0,C.value.push(""),C.trail=P.concat()),C={value:[k],indent:W,trail:[]},T.push(C),A=A.concat(P,k),P=[];else if(N){if(x&&!B)break;P.push(k)}else{if(x)break;if(c(V,z,this,[e,k,!0]))break;C.value=C.value.concat(P,k),A=A.concat(P,k),P=[]}F=_+1}for(M=e(A.join(f)).reset({type:"list",ordered:i,start:$,spread:q,children:[]}),D=this.enterList(),I=this.enterBlock(),F=-1,G=T.length;++F<G;)C=T[F].value.join(f),U=e.now(),e(C)(E(this,C,U),M),C=T[F].trail.join(f),F!==G-1&&(C+=f),e(C);return D(),I(),M}}};var u="*",l="_",p="+",d="-",h=".",m=" ",f="\n",v="\t",b=")",y="x",g=4,_=/\n\n(?!\s*$)/,w=/^\[([ \t]|x|X)][ \t]/,O=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,S=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,j=/^( {1,4}|\t)?/gm;function E(e,t,n){var r,o,s=e.offset,i=null;return t=(e.options.pedantic?k:x).apply(null,arguments),e.options.gfm&&(r=t.match(w))&&(o=r[0].length,i=r[1].toLowerCase()===y,s[n.line]+=o,t=t.slice(o)),{type:"listItem",spread:_.test(t),checked:i,children:e.tokenizeBlock(t,n)}}function k(e,t,n){var r=e.offset,o=n.line;return t=t.replace(S,s),o=n.line,t.replace(j,s);function s(e){return r[o]=(r[o]||0)+e.length,o++,""}}function x(e,t,n){var r,s,c,u,l,p,d,h=e.offset,v=n.line;for(u=(t=t.replace(O,(function(e,t,n,i,a){return s=t+n+i,c=a,Number(n)<10&&s.length%2==1&&(n=m+n),(r=t+o(m,n.length)+i)+c}))).split(f),(l=a(t,i(r).indent).split(f))[0]=c,h[v]=(h[v]||0)+s.length,v++,p=0,d=u.length;++p<d;)h[v]=(h[v]||0)+u[p].length-l[p].length,v++;return l.join(f)}},MaVE:function(e,t,n){"use strict";e.exports=function(e,t){return function(n){for(var o,s=0,i=n.indexOf(r),a=e[t],c=[];-1!==i;)c.push(n.slice(s,i)),s=i+1,(o=n.charAt(s))&&-1!==a.indexOf(o)||c.push(r),i=n.indexOf(r,s+1);return c.push(n.slice(s)),c.join("")}};var r="\\"},MeXQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},c=function(e){function t(e){var n;this.toggleSelector=s(this.toggleSelector,this),this.hideSelector=s(this.hideSelector,this),this.renderOption=s(this.renderOption,this),this.render=s(this.render,this),this.componentDidUpdate=s(this.componentDidUpdate,this),this.componentDidMount=s(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.bn=null!=(n=this.props.bn)?n:"select-options",this.hasBlackout=this.props.blackout||void 0===this.props.blackout,this.ref=Object(r.createRef)(),this.state={showingSelector:!1}}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return document.addEventListener("click",this.hideSelector)},t.prototype.componentDidUpdate=function(e,t){if(this.hasBlackout&&t.showingSelector!==this.state.showingSelector)return Blackout.toggle(this.state.showingSelector,.5)},t.prototype.componentWillUnmount=function(){return document.removeEventListener("click",this.hideSelector)},t.prototype.render=function(){var e,t,n;return e=""+this.bn,this.state.showingSelector&&(e+=" "+this.bn+"--selecting"),Object(o.div)({className:e,ref:this.ref},Object(o.div)({className:this.bn+"__select"},this.renderItem({children:[Object(o.div)({className:"u-ellipsis-overflow",key:"current"},null!=(n=this.props.selected)?n.text:void 0),Object(o.div)({key:"decoration",className:this.bn+"__decoration"},Object(o.i)({className:"fas fa-chevron-down"}))],item:this.props.selected,onClick:this.toggleSelector})),Object(o.div)({className:this.bn+"__selector"},function(){var e,n,r,o;for(o=[],e=0,n=(r=this.props.options).length;e<n;e++)t=r[e],o.push(this.renderOption(t));return o}.call(this)))},t.prototype.renderOption=function(e){var t,n;return this.renderItem({children:[Object(o.div)({className:"u-ellipsis-overflow",key:e.id},e.text)],item:e,selected:(null!=(t=this.props.selected)?t.id:void 0)===e.id,onClick:(n=this,function(t){return n.itemSelected(t,e)})})},t.prototype.renderItem=function(e){var t,n,r,s,i,a;return t=e.children,r=e.item,s=e.onClick,a=null!=(i=e.selected)&&i,n=this.bn+"__item",a&&(n+=" "+this.bn+"__item--selected"),null!=this.props.renderItem?this.props.renderItem({children:t,item:r,onClick:s,cssClasses:n}):Object(o.a)({className:n,href:"#",key:r.id,onClick:s},t)},t.prototype.hideSelector=function(e){var t;if(0===e.button&&(t=this.ref.current,!(a.call(e.composedPath(),t)>=0)))return this.setState({showingSelector:!1})},t.prototype.itemSelected=function(e,t){var n;if(0===e.button)return e.preventDefault(),this.setState({showingSelector:!1}),"function"==typeof(n=this.props).onItemSelected?n.onItemSelected(t):void 0},t.prototype.toggleSelector=function(e){if(0===e.button)return e.preventDefault(),this.setState({showingSelector:!this.state.showingSelector})},t}(r.PureComponent)},"NW+U":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t;return t=_.extend(osu.src2x(e.src),e),ReactDOMFactories.img(t,e.children)}},NkXE:function(e,t,n){"use strict";var r=n("AMMU"),o=n("WR+t");e.exports=a,a.locator=o;var s="~",i="~~";function a(e,t,n){var o,a,c,u="",l="",p="",d="";if(this.options.gfm&&t.charAt(0)===s&&t.charAt(1)===s&&!r(t.charAt(2)))for(o=1,a=t.length,(c=e.now()).column+=2,c.offset+=2;++o<a;){if(!((u=t.charAt(o))!==s||l!==s||p&&r(p)))return!!n||e(i+d+i)({type:"delete",children:this.tokenizeInline(d,c)});d+=l,p=l,l=u}}},O0zI:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,o,s,i=n("f4vq"),a=n("cDcd"),c=n("NzAu"),u=n("R6iF"),l=n("SYfz"),p=function(e,t){return function(){return e.apply(t,arguments)}},d={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=a.createElement,s=i.a.dataStore.uiState,r="comment-show-more";var m=function(e){function t(e){this.load=p(this.load,this),this.render=p(this.render,this),this.componentWillUnmount=p(this.componentWillUnmount,this),t.__super__.constructor.call(this,e),this.state={loading:!1}}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.defaultProps={modifiers:[]},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e,t,n,i,a,p,d;return this.props.comments.length>=this.props.total?null:null==(n=s.comments.hasMoreComments[null!=(i=null!=(a=this.props.parent)?a.id:void 0)?i:null])||n?(e=osu.classWithModifiers(r,this.props.modifiers),h.call(this.props.modifiers,"top")>=0?(d=this.props.total-this.props.comments.length,t=["comments"],h.call(this.props.modifiers,"changelog")>=0?t.push("t-greyviolet-darker"):t.push("t-ddd"),o(u.a,{loading:this.state.loading,hasMore:!0,callback:this.load,modifiers:t,remaining:d})):Object(c.div)({className:e},this.state.loading?o(l.a):Object(c.button)({className:r+"__link",onClick:this.load},null!=(p=this.props.label)?p:osu.trans("common.buttons.show_more")))):null},t.prototype.load=function(){var e,t,n,r,o,i,a,c,u;return this.setState({loading:!0}),t={commentable_type:null!=(n=null!=(r=this.props.parent)?r.commentable_type:void 0)?n:this.props.commentableType,commentable_id:null!=(o=null!=(i=this.props.parent)?i.commentable_id:void 0)?o:this.props.commentableId,parent_id:null!=(a=null!=(c=this.props.parent)?c.id:void 0)?a:0,sort:s.comments.currentSort},null!=(e=_.last(this.props.comments))&&(t.cursor={id:e.id,created_at:e.createdAt,votes_count:e.votesCount}),this.xhr=$.ajax(laroute.route("comments.index"),{data:t,dataType:"json"}).done((function(e){return $.publish("comments:added",e)})).always((u=this,function(){return u.setState({loading:!1})}))},t}(a.PureComponent)},OTBi:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("*",t),r=e.indexOf("_",t);return-1===r?n:-1===n?r:r<n?r:n}},Oyu6:function(e,t,n){"use strict";var r=n("fDIx");function o(e,t,n,r){if("remove"===r)n.children.splice(t,1);else if("unwrap"===r){var o=[t,1];e.children&&(o=o.concat(e.children)),Array.prototype.splice.apply(n.children,o)}}t.ofType=function(e,t){return function(t){return e.forEach((function(e){return r(t,e,n,!0)})),t};function n(e,n,r){r&&o(e,n,r,t)}},t.ifNotMatch=function(e,t){return function(e){return r(e,n,!0),e};function n(n,r,s){s&&!e(n,r,s)&&o(n,r,s,t)}}},PTft:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n("cDcd");var r,o,s=n("NzAu");r="beatmap-basic-stats",o=function(e){var t,n,r;return r=e%60,n=Math.floor(e/60)%60,(t=Math.floor(e/3600))>0?t+":"+_.padStart(n,2,0)+":"+_.padStart(r,2,0):n+":"+_.padStart(r,2,0)};var i=function(e){var t,n,i;return t=e.beatmap,Object(s.div)({className:r},function(){var e,a,c,u;for(u=[],e=0,a=(c=["total_length","bpm","count_circles","count_sliders"]).length;e<a;e++)i=t[n=c[e]],i="bpm"===n?i>1e3?"":osu.formatNumber(i):"total_length"===n?o(i):osu.formatNumber(i),u.push(Object(s.div)({className:r+"__entry",key:n,title:osu.trans("beatmapsets.show.stats."+n,"total_length"===n?{hit_length:o(t.hit_length)}:void 0)},Object(s.div)({className:r+"__entry-icon",style:{backgroundImage:"url(/images/layout/beatmapset-page/"+n+".svg)"}}),Object(s.span)(null,i)));return u}())}},PsOV:function(e){e.exports=JSON.parse('{"0":"","128":"","130":"","131":"","132":"","133":"","134":"","135":"","136":"","137":"","138":"","139":"","140":"","142":"","145":"","146":"","147":"","148":"","149":"","150":"","151":"","152":"","153":"","154":"","155":"","156":"","158":"","159":""}')},QgkL:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var o,s,i=e.length,a=-1;++a<i;)if((void 0===(s=(o=e[a])[1]||{}).pedantic||s.pedantic===n.options.pedantic)&&(void 0===s.commonmark||s.commonmark===n.options.commonmark)&&t[o[0]].apply(n,r))return!0;return!1}},Qu9x:function(e,t,n){"use strict";var r=n("fDIx");function o(e){delete e.position}function s(e){e.position=void 0}e.exports=function(e,t){return r(e,t?o:s),e}},R6iF:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,o,s=n("cDcd"),i=n("NzAu"),a=n("SYfz");o=s.createElement,r="show-more-link";var c=s.forwardRef((function(e,t){var n,s,c,u,l;return e.hasMore||e.loading?(null==(c=e.callback)&&(c=function(){return $.publish(e.event,e.data)}),s=Object(i.span)({className:r+"__label-icon"},Object(i.span)({className:"fas fa-angle-"+(null!=(u=e.direction)?u:"down")})),e.hideIcon&&(s=null),n=i.button,e.url&&(n=i.a),n({ref:t,type:"button",onClick:e.url?void 0:c,href:e.url?e.url:void 0,disabled:e.loading,className:osu.classWithModifiers(r,e.modifiers)},Object(i.span)({className:r+"__spinner"},o(a.a)),Object(i.span)({className:r+"__label"},s,Object(i.span)({className:r+"__label-text"},null!=(l=e.label)?l:osu.trans("common.buttons.show_more"),null!=e.remaining?" ("+e.remaining+")":void 0),s))):null}))},RnBu:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,o="/"===i.charAt(0))}return(o?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var s=t.isAbsolute(e),i="/"===o(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&i&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),s=r(n.split("/")),i=Math.min(o.length,s.length),a=i,c=0;c<i;c++)if(o[c]!==s[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return(u=u.concat(s.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,s=0,i=e.length-1;i>=0;--i){var a=e.charCodeAt(i);if(47!==a)-1===r&&(o=!1,r=i+1),46===a?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=i+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("2YuA"))},"SW8+":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.render=s(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e;return e="page-mode-link page-mode-link--profile-page",this.props.page===this.props.currentPage&&(e+=" page-mode-link--is-active"),Object(o.span)({className:e},Object(o.span)({className:"fake-bold","data-content":osu.trans("users.show.extra."+this.props.page+".title")},osu.trans("users.show.extra."+this.props.page+".title")),Object(o.span)({className:"page-mode-link__stripe"}))},t}(r.PureComponent)},SYfz:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("cDcd");var r=n("NzAu"),o=function(e){var t;return t=e.modifiers,Object(r.div)({className:osu.classWithModifiers("la-ball-clip-rotate",t)})}},SYsv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd"),o=n("NzAu");r.createElement;var s=function(e){return Object(o.div)(null,Object(o.h2)({className:"title title--page-extra"},osu.trans("users.show.extra."+e.name+".title")),e.withEdit?Object(o.span)({className:"page-extra__dragdrop-toggle hidden-xs js-profile-page-extra--sortable-handle"},Object(o.i)({className:"fas fa-bars"})):void 0)}},SifC:function(e,t,n){"use strict";var r=n("9lfl"),o=n("Jryd"),s=n("UXHL");function i(e){var t=this.data("settings"),n=r(s);n.prototype.options=o(n.prototype.options,t,e),this.Parser=n}e.exports=i,i.Parser=s},SwEc:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,o=n("cDcd"),s=n("+FrL");r=o.createElement;var i=function(e){var t,n,o;return o=e.type,n=e.stats,t=e.modifiers,r(s.a,{modifiers:t,label:osu.trans("users.show.rank."+o+"_simple"),value:null!=n.rank[o]?"#"+osu.formatNumber(n.rank[o]):"-"})}},Sy6K:function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}},"T+HN":function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.openCloseTag=new RegExp("^(?:"+r+"|"+o+")"),t.tag=new RegExp("^(?:"+r+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},TGI5:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,o=n("f7bm"),s=n("cDcd"),i=n("NzAu"),a=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;r=s.createElement;var u=function(e){var t,n,s,u;function l(){return this.renderText=a(this.renderText,this),this.renderLink=a(this.renderLink,this),this.render=a(this.render,this),l.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(l,e),t="profile-links",s=function(e,n,r){var o,s,i,a;for(s in null==n&&(n={}),null==r&&(r=[]),null!=n.href?(i="a",r.push("link")):i="span",o=document.createElement(i),n)c.call(n,s)&&(a=n[s],o[s]=a);return o.className+=" "+osu.classWithModifiers(t+"__value",r),o.innerHTML=e,o.outerHTML},n={twitter:function(e){return{icon:"fab fa-twitter",url:"https://twitter.com/"+e,text:"@"+e}},discord:function(e){return{icon:"fab fa-discord",text:r(o.a,{value:e,showIcon:!0})}},interests:function(){return{icon:"far fa-heart"}},skype:function(e){return{icon:"fab fa-skype",url:"skype:"+e+"?chat"}},lastfm:function(e){return{icon:"fab fa-lastfm",url:"https://last.fm/user/"+e}},location:function(){return{icon:"fas fa-map-marker-alt"}},occupation:function(){return{icon:"fas fa-suitcase"}},website:function(e){return{icon:"fas fa-link",url:e,text:e.replace(/^https?:\/\//,"")}}},u={join_date:function(e){var t,n;return n=(t=moment(e)).toISOString(),t.isBefore(moment.utc([2008]))?{title:n,extraClasses:"js-tooltip-time",html:osu.trans("users.show.first_members")}:{html:osu.trans("users.show.joined_at",{date:s(t.format(osu.trans("common.datetime.year_month.moment")),{className:"js-tooltip-time",title:n})})}},last_visit:function(e,t){return t.is_online?{html:osu.trans("users.show.lastvisit_online")}:{html:osu.trans("users.show.lastvisit",{date:s(osu.timeago(e))})}},playstyle:function(e){var t;return t=e.map((function(e){return osu.trans("common.device."+e)})).join(", "),{html:osu.trans("users.show.plays_with",{devices:s(t)})}},post_count:function(e,t){var n,r;return n=osu.transChoice("users.show.post_count.count",osu.formatNumber(e)),r=laroute.route("users.posts",{user:t.id}),{html:osu.trans("users.show.post_count._",{link:s(n,{href:r})})}}},l.prototype.render=function(){var e,n,r;return r=[["join_date","last_visit","playstyle","post_count"].map(this.renderText),["location","interests","occupation"].map(this.renderLink),["twitter","discord","skype","lastfm","website"].map(this.renderLink)],Object(i.div)({className:t},function(){var o,s,a;for(a=[],e=o=0,s=r.length;o<s;e=++o)n=r[e],_.compact(n).length>0&&a.push(Object(i.div)({key:e,className:t+"__row "+t+"__row--"+e},n));return a}())},l.prototype.renderLink=function(e){var r,o,s,a,c,u,l,p;if(null!=(p=this.props.user[e]))return l=(a=n[e](p)).url,s=a.icon,c=a.text,null==(u=a.title)&&(u=osu.trans("users.show.info."+e)),null==c&&(c=p),o=t+"__value",null!=l?(r=i.a,o+=" "+t+"__value--link"):r=i.span,Object(i.div)({className:t+"__item",key:e},Object(i.span)({className:t+"__icon",title:u},Object(i.span)({className:"fa-fw "+s})),r({href:l,className:o},c))},l.prototype.renderText=function(e){var n,r,o,s,a;if(null!=(a=this.props.user[e]))return n=(o=u[e](a,this.props.user)).extraClasses,r=o.html,s=o.title,Object(i.div)({className:t+"__item "+(null!=n?n:""),key:e,title:s,dangerouslySetInnerHTML:{__html:r}})},l}(s.PureComponent)},TRjL:function(e,t,n){"use strict";var r=n("fDIx"),o="virtualHtml",s=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,i=/^<(\/?)([a-z]+)\s*>$/;e.exports=function(e){var t,n;return r(e,"html",(function(e,r,a){n!==a&&(t=[],n=a);var c=function(e){var t=e.value.match(s);return!!t&&t[1]}(e);if(c)return a.children.splice(r,1,{type:o,tag:c,position:e.position}),!0;var u=function(e,t){var n=e.value.match(i);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!u)return!0;var l=function(e,t){for(var n=e.length;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,u.tag);return l?a.children.splice(r,0,function(e,t,n){var r=n.children.indexOf(e.node),s=n.children.indexOf(t.node),i=n.children.splice(r,s-r+1).slice(1,-1);return{type:o,children:i,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(u,l,a)):u.opening||t.push(u),!0}),!0),e}},TY2o:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("cDcd");var r=n("NzAu"),o=function(e){return null!=e.user.id?Object(r.div)({className:osu.classWithModifiers("avatar",e.modifiers),style:{backgroundImage:osu.urlPresence(e.user.avatar_url)}}):Object(r.div)({className:osu.classWithModifiers("avatar",_.concat(e.modifiers,"guest"))})}},U70x:function(e,t,n){"use strict";var r=n("wy2R"),o=n("cDcd");class s extends o.PureComponent{render(){const e=this.props.values.map(e=>{var t;let n="sort__item sort__item--button";return this.props.sortMode===e&&(n+=" sort__item--active"),o.createElement("button",{className:n,"data-value":e,key:e,onClick:this.props.onSortSelected},"rank"===e?o.createElement("span",null,o.createElement("i",{className:`fas fa-extra-mode-${t=currentUser.playmode,null!=t?t:"osu"}`})," ",osu.trans("sort.rank")):osu.trans(`sort.${e}`))});return o.createElement("div",{className:osu.classWithModifiers("sort",this.props.modifiers)},o.createElement("div",{className:"sort__items"},o.createElement("span",{className:"sort__item sort__item--title"},osu.trans("sort._")),e))}}var i=n("ed4P");n.d(t,"a",(function(){return d}));const a=["all","online","offline"],c=["last_visit","rank","username"],u=["card","list"];function l(e,t){return null!=e.current_mode_rank&&null!=t.current_mode_rank?e.current_mode_rank>t.current_mode_rank?1:-1:null===e.current_mode_rank?1:-1}function p(e,t){return e.username.localeCompare(t.username)}class d extends o.PureComponent{constructor(){super(...arguments),this.state={filter:this.filterFromUrl,sortMode:this.sortFromUrl,viewMode:this.viewFromUrl},this.onSortSelected=e=>{const t=e.currentTarget.dataset.value,n=osu.updateQueryString(null,{sort:t});Turbolinks.controller.advanceHistory(n),this.setState({sortMode:t})},this.onViewSelected=e=>{const t=e.currentTarget.dataset.value,n=osu.updateQueryString(null,{view:t});Turbolinks.controller.advanceHistory(n),this.setState({viewMode:t})},this.optionSelected=e=>{e.preventDefault();const t=e.currentTarget.dataset.key,n=osu.updateQueryString(null,{filter:t});Turbolinks.controller.advanceHistory(n),this.setState({filter:t})}}get filterFromUrl(){const e=new URL(location.href);return this.getAllowedQueryStringValue(a,e.searchParams.get("filter"))}get sortedUsers(){const e=this.getFilteredUsers(this.state.filter).slice();switch(this.state.sortMode){case"rank":return e.sort(l);case"username":return e.sort(p);default:return e.sort((e,t)=>e.is_online&&t.is_online?p(e,t):e.is_online||t.is_online?e.is_online?-1:1:r(t.last_visit||0).diff(r(e.last_visit||0)))}}get sortFromUrl(){const e=new URL(location.href);return this.getAllowedQueryStringValue(c,e.searchParams.get("sort"))}get viewFromUrl(){const e=new URL(location.href);return this.getAllowedQueryStringValue(u,e.searchParams.get("view"))}render(){return o.createElement(o.Fragment,null,this.renderSelections(),o.createElement("div",{className:"user-list"},o.createElement("div",{className:"user-list__toolbar"},o.createElement("div",{className:"user-list__toolbar-item"},this.renderSorter()),o.createElement("div",{className:"user-list__toolbar-item"},this.renderViewMode())),o.createElement(i.a,{users:this.sortedUsers,viewMode:this.state.viewMode})))}renderOption(e,t,n=!1){const r=n?["active"]:[];let s=osu.classWithModifiers("update-streams-v2__item",r);return s+=` t-changelog-stream--${e}`,o.createElement("a",{className:s,"data-key":e,href:osu.updateQueryString(null,{filter:e}),key:e,onClick:this.optionSelected},o.createElement("div",{className:"update-streams-v2__bar u-changelog-stream--bg"}),o.createElement("p",{className:"update-streams-v2__row update-streams-v2__row--name"},osu.trans(`users.status.${e}`)),o.createElement("p",{className:"update-streams-v2__row update-streams-v2__row--version"},t))}renderSelections(){return o.createElement("div",{className:"update-streams-v2 update-streams-v2--with-active update-streams-v2--user-list"},o.createElement("div",{className:"update-streams-v2__container"},a.map(e=>this.renderOption(e,this.getFilteredUsers(e).length,e===this.state.filter))))}renderSorter(){return o.createElement(s,{modifiers:["user-list"],onSortSelected:this.onSortSelected,sortMode:this.state.sortMode,values:c})}renderViewMode(){return o.createElement("div",{className:"user-list__view-modes"},o.createElement("button",{className:osu.classWithModifiers("user-list__view-mode","card"===this.state.viewMode?["active"]:[]),"data-value":"card",title:osu.trans("users.view_mode.card"),onClick:this.onViewSelected},o.createElement("span",{className:"fas fa-square"})),o.createElement("button",{className:osu.classWithModifiers("user-list__view-mode","list"===this.state.viewMode?["active"]:[]),"data-value":"list",title:osu.trans("users.view_mode.list"),onClick:this.onViewSelected},o.createElement("span",{className:"fas fa-bars"})))}getAllowedQueryStringValue(e,t){const n=t;return e.indexOf(n)>-1?n:e[0]}getFilteredUsers(e){switch(e){case"online":return this.props.users.filter(e=>e.is_online);case"offline":return this.props.users.filter(e=>!e.is_online);default:return this.props.users}}}},UVl7:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r,o,s,i,a,c,u=n("f7bm"),l=n("2b+G"),p=n("O0zI"),d=n("4PZ6"),h=n("cF9b"),m=n("f4vq"),f=n("cDcd"),v=n("NzAu"),b=n("hc33"),y=n("SYfz"),g=n("TY2o"),w=function(e,t){return function(){return e.apply(t,arguments)}},O={}.hasOwnProperty;s=f.createElement,o={username:osu.trans("users.deleted")},r=m.a.dataStore.commentableMetaStore,i=m.a.dataStore.commentStore,c=m.a.dataStore.userStore,a=m.a.dataStore.uiState;var S=function(e){var t,n,m;function S(e){var n,r;this.toggleReplies=w(this.toggleReplies,this),this.closeNewReply=w(this.closeNewReply,this),this.voteToggle=w(this.voteToggle,this),this.toggleNewReply=w(this.toggleNewReply,this),this.restore=w(this.restore,this),this.userFor=w(this.userFor,this),this.parentLink=w(this.parentLink,this),this.loadReplies=w(this.loadReplies,this),this.closeEdit=w(this.closeEdit,this),this.toggleEdit=w(this.toggleEdit,this),this.handleReplyPosted=w(this.handleReplyPosted,this),this.delete=w(this.delete,this),this.hasVoted=w(this.hasVoted,this),this.renderCommentableMeta=w(this.renderCommentableMeta,this),this.renderVoteText=w(this.renderVoteText,this),this.renderVoteButton=w(this.renderVoteButton,this),this.renderUsername=w(this.renderUsername,this),this.renderUserAvatar=w(this.renderUserAvatar,this),this.renderRestore=w(this.renderRestore,this),this.renderReport=w(this.renderReport,this),this.renderReplyButton=w(this.renderReplyButton,this),this.renderReplyBox=w(this.renderReplyBox,this),this.renderRepliesToggle=w(this.renderRepliesToggle,this),this.renderRepliesText=w(this.renderRepliesText,this),this.renderPermalink=w(this.renderPermalink,this),this.renderEditedBy=w(this.renderEditedBy,this),this.renderEdit=w(this.renderEdit,this),this.renderDelete=w(this.renderDelete,this),this.renderComment=w(this.renderComment,this),this.render=w(this.render,this),this.componentWillUnmount=w(this.componentWillUnmount,this),S.__super__.constructor.call(this,e),this.xhr={},this.loadMoreRef=f.createRef(),r=!osu.isMobile()&&!this.props.comment.isDeleted&&(null!=(n=a.getOrderedCommentsByParentId(this.props.comment.id))?n.length:void 0)>0&&this.props.depth<t,this.state={postingVote:!1,editing:!1,showNewReply:!1,expandReplies:r}}return function(e,t){for(var n in t)O.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(S,e),t=6,m=document.createElement("div"),n=function(e){return e.isDeleted?osu.trans("comments.deleted"):(m.innerHTML=e.messageHtml,_.truncate(m.textContent,{length:100}))},S.defaultProps={showReplies:!0},S.prototype.componentWillUnmount=function(){var e,t,n,r;for(e in n=[],t=this.xhr)O.call(t,e)&&(r=t[e],n.push(null!=r?r.abort():void 0));return n},S.prototype.render=function(){return s(h.a,null,(e=this,function(){var n,r,o,c,u,h,m;return e.children=null!=(o=a.getOrderedCommentsByParentId(e.props.comment.id))?o:[],r=i.comments.get(e.props.comment.parentId),m=e.userFor(e.props.comment),n=null!=(c=null!=(u=e.props.modifiers)?u.slice(0):void 0)?c:[],0===e.props.depth&&n.push("top"),h="comment__replies",e.props.depth<t&&(h+=" comment__replies--indented"),e.state.expandReplies||(h+=" comment__replies--hidden"),Object(v.div)({className:osu.classWithModifiers("comment",n)},e.renderRepliesToggle(),e.renderCommentableMeta(),Object(v.div)({className:"comment__main "+(e.props.comment.isDeleted?"comment__main--deleted":"")},e.props.comment.canHaveVote?Object(v.div)({className:"comment__float-container comment__float-container--left hidden-xs"},e.renderVoteButton()):void 0,e.renderUserAvatar(m),Object(v.div)({className:"comment__container"},Object(v.div)({className:"comment__row comment__row--header"},e.renderUsername(m),null!=r?Object(v.span)({className:"comment__row-item comment__row-item--parent"},e.parentLink(r)):void 0,e.props.comment.isDeleted?Object(v.span)({className:"comment__row-item comment__row-item--deleted"},osu.trans("comments.deleted")):void 0),e.state.editing?Object(v.div)({className:"comment__editor"},s(l.a,{id:e.props.comment.id,message:e.props.comment.message,modifiers:e.props.modifiers,close:e.closeEdit})):null!=e.props.comment.messageHtml?Object(v.div)({className:"comment__message",dangerouslySetInnerHTML:{__html:e.props.comment.messageHtml}}):void 0,Object(v.div)({className:"comment__row comment__row--footer"},e.props.comment.canHaveVote?Object(v.div)({className:"comment__row-item visible-xs"},e.renderVoteText()):void 0,Object(v.div)({className:"comment__row-item comment__row-item--info",dangerouslySetInnerHTML:{__html:osu.timeago(e.props.comment.createdAt)}}),e.renderPermalink(),e.renderReplyButton(),e.renderEdit(),e.renderRestore(),e.renderDelete(),e.renderReport(),e.renderRepliesText(),e.renderEditedBy()),e.renderReplyBox())),e.props.showReplies&&e.props.comment.repliesCount>0?Object(v.div)({className:h},e.children.map(e.renderComment),s(d.a,{comments:e.children,showDeleted:a.comments.isShowDeleted}),s(p.a,{parent:e.props.comment,comments:e.children,total:e.props.comment.repliesCount,modifiers:e.props.modifiers,label:0===e.children.length?osu.trans("comments.load_replies"):void 0,ref:e.loadMoreRef})):void 0)}));var e},S.prototype.renderComment=function(e){return(e=i.comments.get(e.id)).isDeleted&&!a.comments.isShowDeleted?null:s(S,{key:e.id,comment:e,depth:this.props.depth+1,parent:this.props.comment,modifiers:this.props.modifiers})},S.prototype.renderDelete=function(){if(!this.props.comment.isDeleted&&this.props.comment.canDelete)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action",onClick:this.delete},osu.trans("common.buttons.delete")))},S.prototype.renderEdit=function(){if(this.props.comment.canEdit)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action "+(this.state.editing?"comment__action--active":""),onClick:this.toggleEdit},osu.trans("common.buttons.edit")))},S.prototype.renderEditedBy=function(){var e;if(!this.props.comment.isDeleted&&this.props.comment.isEdited)return e=c.get(this.props.comment.editedById),Object(v.div)({className:"comment__row-item comment__row-item--info",dangerouslySetInnerHTML:{__html:osu.trans("comments.edited",{timeago:osu.timeago(this.props.comment.editedAt),user:null!=e.id?osu.link(laroute.route("users.show",{user:e.id}),e.username,{classNames:["comment__link"]}):_.escape(e.username)})}})},S.prototype.renderPermalink=function(){return Object(v.div)({className:"comment__row-item"},Object(v.span)({className:"comment__action comment__action--permalink"},s(u.a,{value:laroute.route("comments.show",{comment:this.props.comment.id}),label:osu.trans("common.buttons.permalink"),valueAsUrl:!0})))},S.prototype.renderRepliesText=function(){var e,t;if(0!==this.props.comment.repliesCount)return this.props.showReplies?(this.state.expandReplies||0!==this.children.length?(t=this.toggleReplies,e=osu.trans("comments.replies")+" ("+osu.formatNumber(this.props.comment.repliesCount)+")"):(t=this.loadReplies,e=osu.trans("comments.load_replies")),e="["+(this.state.expandReplies?"-":"+")+"] "+e,Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action",onClick:t},e))):Object(v.div)({className:"comment__row-item"},osu.trans("comments.replies"),": ",osu.formatNumber(this.props.comment.repliesCount))},S.prototype.renderRepliesToggle=function(){if(this.props.showReplies&&0===this.props.depth&&this.children.length>0)return Object(v.div)({className:"comment__float-container comment__float-container--right"},Object(v.button)({className:"comment__top-show-replies",type:"button",onClick:this.toggleReplies},Object(v.span)({className:"fas "+(this.state.expandReplies?"fa-angle-up":"fa-angle-down")})))},S.prototype.renderReplyBox=function(){if(this.state.showNewReply)return Object(v.div)({className:"comment__reply-box"},s(l.a,{close:this.closeNewReply,modifiers:this.props.modifiers,onPosted:this.handleReplyPosted,parent:this.props.comment}))},S.prototype.renderReplyButton=function(){if(this.props.showReplies&&!this.props.comment.isDeleted)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action "+(this.state.showNewReply?"comment__action--active":""),onClick:this.toggleNewReply},osu.trans("common.buttons.reply")))},S.prototype.renderReport=function(){if(this.props.comment.canReport)return Object(v.div)({className:"comment__row-item"},s(b.a,{className:"comment__action",reportableId:this.props.comment.id,reportableType:"comment",user:this.userFor(this.props.comment)}))},S.prototype.renderRestore=function(){if(this.props.comment.isDeleted&&this.props.comment.canRestore)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action",onClick:this.restore},osu.trans("common.buttons.restore")))},S.prototype.renderUserAvatar=function(e){return null!=e.id?Object(v.a)({className:"comment__avatar js-usercard","data-user-id":e.id,href:laroute.route("users.show",{user:e.id})},s(g.a,{user:e,modifiers:["full-circle"]})):Object(v.span)({className:"comment__avatar"},s(g.a,{user:e,modifiers:["full-circle"]}))},S.prototype.renderUsername=function(e){return null!=e.id?Object(v.a)({"data-user-id":e.id,href:laroute.route("users.show",{user:e.id}),className:"js-usercard comment__row-item comment__row-item--username comment__row-item--username-link"},e.username):Object(v.span)({className:"comment__row-item comment__row-item--username"},e.username)},S.prototype.renderVoteButton=function(){var e,t;return e=osu.classWithModifiers("comment-vote",this.props.modifiers),this.state.postingVote&&(e+=" comment-vote--posting"),this.hasVoted()?(e+=" comment-vote--on",t=null):(e+=" comment-vote--off",t=Object(v.div)({className:"comment-vote__hover"},"+1")),Object(v.button)({className:e,type:"button",onClick:this.voteToggle,disabled:this.state.postingVote||!this.props.comment.canVote},Object(v.span)({className:"comment-vote__text"},"+"+osu.formatNumberSuffixed(this.props.comment.votesCount,null,{maximumFractionDigits:1})),this.state.postingVote?Object(v.span)({className:"comment-vote__spinner"},s(y.a)):void 0,t)},S.prototype.renderVoteText=function(){var e;return e="comment__action",this.hasVoted()&&(e+=" comment__action--active"),Object(v.button)({className:e,type:"button",onClick:this.voteToggle,disabled:this.state.postingVote},"+"+osu.formatNumberSuffixed(this.props.comment.votesCount,null,{maximumFractionDigits:1}))},S.prototype.renderCommentableMeta=function(){var e,t,n;if(this.props.showCommentableMeta)return(t=r.get(this.props.comment.commentableType,this.props.comment.commentableId)).url?(e=v.a,n={href:t.url,className:"comment__link"}):(e=v.span,n=null),Object(v.div)({className:"comment__commentable-meta"},null!=this.props.comment.commentableType?Object(v.span)({className:"comment__commentable-meta-type"},Object(v.span)({className:"comment__commentable-meta-icon fas fa-comment"})," ",osu.trans("comments.commentable_name."+this.props.comment.commentableType)):void 0,e(n,t.title))},S.prototype.hasVoted=function(){return i.userVotes.has(this.props.comment.id)},S.prototype.delete=function(){var e;if(confirm(osu.trans("common.confirmation")))return null!=(e=this.xhr.delete)&&e.abort(),this.xhr.delete=$.ajax(laroute.route("comments.destroy",{comment:this.props.comment.id}),{method:"DELETE"}).done((function(e){return $.publish("comment:updated",e)})).fail((function(e,t){if("abort"!==t)return osu.ajaxError(e)}))},S.prototype.handleReplyPosted=function(e){if("reply"===e)return this.setState({expandReplies:!0})},S.prototype.toggleEdit=function(){return this.setState({editing:!this.state.editing})},S.prototype.closeEdit=function(){return this.setState({editing:!1})},S.prototype.loadReplies=function(){var e;return null!=(e=this.loadMoreRef.current)&&e.load(),this.toggleReplies()},S.prototype.parentLink=function(e){var t,r;return r={title:n(e)},this.props.linkParent?(t=v.a,r.href=laroute.route("comments.show",{comment:e.id}),r.className="comment__link"):t=v.span,t(r,Object(v.span)({className:"fas fa-reply"})," ",this.userFor(e).username)},S.prototype.userFor=function(e){var t,n;return null!=(n=null!=(t=c.get(e.userId))?t.toJSON():void 0)?n:null!=e.legacyName?{username:e.legacyName}:o},S.prototype.restore=function(){var e;return null!=(e=this.xhr.restore)&&e.abort(),this.xhr.restore=$.ajax(laroute.route("comments.restore",{comment:this.props.comment.id}),{method:"POST"}).done((function(e){return $.publish("comment:updated",e)})).fail((function(e,t){if("abort"!==t)return osu.ajaxError(e)}))},S.prototype.toggleNewReply=function(){return this.setState({showNewReply:!this.state.showNewReply})},S.prototype.voteToggle=function(e){var t,n,r,o,s;if(o=e.target,null!=currentUser.id)return this.setState({postingVote:!0}),this.hasVoted()?(t="DELETE",r="removeUserVote"):(t="POST",r="addUserVote"),null!=(n=this.xhr.vote)&&n.abort(),this.xhr.vote=$.ajax(laroute.route("comments.vote",{comment:this.props.comment.id}),{method:t}).always((s=this,function(){return s.setState({postingVote:!1})})).done(function(e){return function(t){return $.publish("comment:updated",t),i[r](e.props.comment)}}(this)).fail((function(e,t){if("abort"!==t)return 401===e.status?$(o).trigger("ajax:error",[e,t]):osu.ajaxError(e)}));userLogin.show(o)},S.prototype.closeNewReply=function(){return this.setState({showNewReply:!1})},S.prototype.toggleReplies=function(){return this.setState({expandReplies:!this.state.expandReplies})},S}(f.PureComponent)},UXHL:function(e,t,n){"use strict";var r=n("Jryd"),o=n("JOWQ"),s=n("HYKJ"),i=n("MaVE"),a=n("oQpG"),c=n("ZB8s");function u(e,t){this.file=t,this.offset={},this.options=r(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=s(t).toOffset,this.unescape=i(this,"escape"),this.decode=a(this)}e.exports=u;var l=u.prototype;function p(e){var t,n=[];for(t in e)n.push(t);return n}l.setOptions=n("l2ru"),l.parse=n("pLKd"),l.options=n("q7YD"),l.exitStart=o("atStart",!0),l.enterList=o("inList",!1),l.enterLink=o("inLink",!1),l.enterBlock=o("inBlock",!1),l.interruptParagraph=[["thematicBreak"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.blockTokenizers={newline:n("Lspe"),indentedCode:n("7Pxk"),fencedCode:n("LLPm"),blockquote:n("JN1X"),atxHeading:n("pL8D"),thematicBreak:n("Jcop"),list:n("MKRK"),setextHeading:n("LnNg"),html:n("KbVC"),footnote:n("Eo6g"),definition:n("XYTD"),table:n("iwIW"),paragraph:n("eBPa")},l.inlineTokenizers={escape:n("wOcG"),autoLink:n("MCzN"),url:n("Ix6x"),html:n("l6ln"),link:n("v33t"),reference:n("wlJd"),strong:n("bYiV"),emphasis:n("giZH"),deletion:n("NkXE"),code:n("yzy7"),break:n("b3/f"),text:n("KTKs")},l.blockMethods=p(l.blockTokenizers),l.inlineMethods=p(l.inlineTokenizers),l.tokenizeBlock=c("block"),l.tokenizeInline=c("inline"),l.tokenizeFactory=c},UXHk:function(e,t,n){"use strict";var r=n("cDcd"),o=n("Jryd"),s=n("i5IF"),i={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function a(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}e.exports=function e(t,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=n.renderers[t.type];void 0===t.position&&(t.position=c.node&&c.node.position||i);var p=t.position.start,d=[t.type,p.line,p.column,u].join("-");if(!s.isValidElementType(l))throw new Error("Renderer for type `".concat(t.type,"` not defined or is not renderable"));var h=function(t,n,s,i,c,u){var l,p={key:n},d="string"==typeof i;s.sourcePos&&t.position&&(p["data-sourcepos"]=[(l=t.position).start.line,":",l.start.column,"-",l.end.line,":",l.end.column].map(String).join("")),s.rawSourcePos&&!d&&(p.sourcePosition=t.position),s.includeNodeIndex&&c.node&&c.node.children&&!d&&(p.index=c.node.children.indexOf(t),p.parentChildCount=c.node.children.length);var h=null!==t.identifier&&void 0!==t.identifier?s.definitions[t.identifier]||{}:null;switch(t.type){case"root":a(p,{className:s.className});break;case"text":p.nodeKey=n,p.children=t.value;break;case"heading":p.level=t.depth;break;case"list":p.start=t.start,p.ordered=t.ordered,p.tight=!t.loose,p.depth=t.depth;break;case"listItem":p.checked=t.checked,p.tight=!t.loose,p.ordered=t.ordered,p.index=t.index,p.children=function(e,t){return e.loose?e.children:t.node&&e.index>0&&t.node.children[e.index-1].loose?e.children:function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children||[]:[t])}),[])}(e)}(t,c).map((function(n,r){return e(n,s,{node:t,props:p},r)}));break;case"definition":a(p,{identifier:t.identifier,title:t.title,url:t.url});break;case"code":a(p,{language:t.lang&&t.lang.split(/\s/,1)[0]});break;case"inlineCode":p.children=t.value,p.inline=!0;break;case"link":a(p,{title:t.title||void 0,target:"function"==typeof s.linkTarget?s.linkTarget(t.url,t.children,t.title):s.linkTarget,href:s.transformLinkUri?s.transformLinkUri(t.url,t.children,t.title):t.url});break;case"image":a(p,{alt:t.alt||void 0,title:t.title||void 0,src:s.transformImageUri?s.transformImageUri(t.url,t.children,t.title,t.alt):t.url});break;case"linkReference":a(p,o(h,{href:s.transformLinkUri?s.transformLinkUri(h.href):h.href}));break;case"imageReference":a(p,{src:s.transformImageUri&&h.href?s.transformImageUri(h.href,t.children,h.title,t.alt):h.href,title:h.title||void 0,alt:t.alt||void 0});break;case"table":case"tableHead":case"tableBody":p.columnAlignment=t.align;break;case"tableRow":p.isHeader="tableHead"===c.node.type,p.columnAlignment=c.props.columnAlignment;break;case"tableCell":a(p,{isHeader:c.props.isHeader,align:c.props.columnAlignment[u]});break;case"virtualHtml":p.tag=t.tag;break;case"html":p.isBlock=t.position.start.line!==t.position.end.line,p.escapeHtml=s.escapeHtml,p.skipHtml=s.skipHtml;break;case"parsedHtml":var m;t.children&&(m=t.children.map((function(n,r){return e(n,s,{node:t,props:p},r)}))),p.escapeHtml=s.escapeHtml,p.skipHtml=s.skipHtml,p.element=function(e,t){var n=e.element;if(Array.isArray(n)){var o=r.Fragment||"div";return r.createElement(o,null,n)}if(n.props.children||t){var s=r.Children.toArray(n.props.children).concat(t);return r.cloneElement(n,null,s)}return r.cloneElement(n,null)}(t,m);break;default:a(p,o(t,{type:void 0,position:void 0,children:void 0}))}return!d&&t.value&&(p.value=t.value),p}(t,d,n,l,c,u);return r.createElement(l,h,h.children||t.children&&t.children.map((function(r,o){return e(r,n,{node:t,props:h},o)}))||void 0)}},UpvM:function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},VefT:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("YLtl"),o=n("cDcd");const s=e=>{const t=osu.classWithModifiers("supporter-icon",e.modifiers);return o.createElement("span",{className:t,title:osu.trans("users.show.is_supporter")},Object(r.times)(e.level||1,e=>o.createElement("span",{key:e,className:"fas fa-heart"})))}},WCVR:function(e,t,n){"use strict";var r,o="";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(r!==e||void 0===r)r=e,o="";else if(o.length>=n)return o.substr(0,n);for(;n>o.length&&t>1;)1&t&&(o+=e),t>>=1,e+=e;return o=(o+=e).substr(0,n)}},"WR+t":function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},WU0t:function(e,t,n){"use strict";var r;e.exports=function(e){var t,n="&"+e+";";return(r=r||document.createElement("i")).innerHTML=n,(59!==(t=r.textContent).charCodeAt(t.length-1)||"semi"===e)&&(t!==n&&t)}},X9sK:function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},XFVs:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("0h6b"),o=n("wy2R"),s=n("cDcd");function i({modifiers:e,post:t}){let n;null!=t.first_image&&(n=s.createElement("img",{className:"news-card__cover",src:t.first_image}));let i=t.preview;return null==i&&(i=""),s.createElement("a",{href:Object(r.route)("news.show",{news:t.slug}),className:osu.classWithModifiers("news-card",e||["index","hover"])},n,s.createElement("div",{className:"news-card__overlay"}),s.createElement("div",{className:"news-card__content"},s.createElement("div",{className:"news-card__time js-tooltip-time",title:t.published_at},o(t.published_at).format("ll")),s.createElement("div",{className:"news-card__main"},s.createElement("div",{className:"news-card__title"},t.title),s.createElement("div",{className:"news-card__preview",dangerouslySetInnerHTML:{__html:i}}))))}},XPyy:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("jbZF"),o=n("If6E"),s=n("FVE9"),i=n("0h6b"),a=n("YLtl"),c=n("C92G"),u=n("cDcd"),l=n("hc33"),p=n("SYfz"),d=n("VefT");class h extends u.PureComponent{constructor(){super(...arguments),this.state={avatarLoaded:!1,backgroundLoaded:!1},this.onAvatarLoad=()=>{this.setState({avatarLoaded:!0})},this.onBackgroundLoad=()=>{this.setState({backgroundLoaded:!0})}}get canMessage(){return!this.isSelf&&null==a.find(currentUser.blocks,{target_id:this.user.id})}get isOnline(){return this.user.is_online}get isSelf(){return currentUser.id===this.user.id}get isUserLoaded(){return Number.isFinite(this.user.id)&&this.user.id>0}get isUserNotFound(){return-1===this.user.id}get user(){return this.props.user||h.userLoading}render(){const e=this.props.modifiers.slice();return e.push(this.props.activated?"active":"highlightable"),e.push(this.props.mode),u.createElement("div",{className:osu.classWithModifiers("user-card",e)},this.renderBackground(),u.createElement("div",{className:"user-card__card"},u.createElement("div",{className:"user-card__content user-card__content--details"},u.createElement("div",{className:"user-card__user"},this.renderAvatar()),u.createElement("div",{className:"user-card__details"},this.renderIcons(),u.createElement("div",{className:"user-card__username"},u.createElement("div",{className:"u-ellipsis-overflow"},this.user.username)),this.renderListModeIcons())),this.renderStatusBar()))}renderAvatar(){const e=this.state.avatarLoaded?["loaded"]:[];return u.createElement("div",{className:"user-card__avatar-space"},u.createElement("div",{className:osu.classWithModifiers("user-card__avatar-spinner",e)},this.isUserNotFound?null:u.createElement(p.a,{modifiers:e})),this.isUserLoaded?u.createElement("img",{className:osu.classWithModifiers("user-card__avatar",e),onError:this.onAvatarLoad,onLoad:this.onAvatarLoad,src:this.user.avatar_url}):null)}renderBackground(){let e;const t=osu.classWithModifiers("user-card__background-overlay",this.isOnline?["online"]:[]);if(this.user.cover&&this.user.cover.url){let n="user-card__background";this.state.backgroundLoaded||(n+=" user-card__background--loading"),e=u.createElement(u.Fragment,null,u.createElement("img",{className:n,onLoad:this.onBackgroundLoad,src:this.user.cover.url}),u.createElement("div",{className:t}))}else e=u.createElement("div",{className:t});return this.isUserLoaded?u.createElement("a",{href:Object(i.route)("users.show",{user:this.user.id}),className:"user-card__background-container"},e):e}renderIcons(){return this.isUserLoaded?u.createElement("div",{className:"user-card__icons"},u.createElement("a",{className:"user-card__icon user-card__icon--flag",href:Object(i.route)("rankings",{mode:"osu",type:"performance",country:this.user.country_code})},u.createElement(o.a,{country:this.user.country,modifiers:["full"]})),"card"===this.props.mode&&this.user.is_supporter?u.createElement("a",{className:"user-card__icon",href:Object(i.route)("support-the-game")},u.createElement(d.a,{modifiers:["user-card"]})):null,"card"===this.props.mode?u.createElement("div",{className:"user-card__icon"},u.createElement(s.a,{userId:this.user.id,modifiers:["user-card"]})):null):null}renderListModeIcons(){return"list"===this.props.mode&&this.isUserLoaded&&this.user.is_supporter?u.createElement("div",{className:"user-card__icons"},u.createElement("a",{className:"user-card__icon",href:Object(i.route)("support-the-game")},u.createElement(d.a,{level:this.user.support_level}))):null}renderMenuButton(){return this.isSelf?null:u.createElement("div",{className:"user-card__icon user-card__icon--menu"},u.createElement(c.a,null,e=>u.createElement(u.Fragment,null,this.canMessage?u.createElement("a",{className:"simple-menu__item js-login-required--click",href:Object(i.route)("messages.users.show",{user:this.user.id}),onClick:e},u.createElement("span",{className:"fas fa-envelope"}),` ${osu.trans("users.card.send_message")}`):null,u.createElement(r.a,{onClick:e,modifiers:["inline"],userId:this.user.id,wrapperClass:"simple-menu__item"}),u.createElement(l.a,{className:"simple-menu__item",icon:!0,onFormClose:e,reportableId:this.user.id.toString(),reportableType:"user",user:this.user}))))}renderStatusBar(){if(!this.isUserLoaded)return null;const e=this.isOnline||null==this.user.last_visit?"":osu.trans("users.show.lastvisit",{date:osu.timeago(this.user.last_visit)}),t=this.isOnline?osu.trans("users.status.online"):osu.trans("users.status.offline");return u.createElement("div",{className:"user-card__content user-card__content--status"},u.createElement("div",{className:"user-card__status"},this.renderStatusIcon(),u.createElement("div",{className:"user-card__status-messages"},u.createElement("span",{className:"user-card__status-message user-card__status-message--sub u-ellipsis-overflow",dangerouslySetInnerHTML:{__html:e}}),u.createElement("span",{className:"user-card__status-message u-ellipsis-overflow"},t))),u.createElement("div",{className:"user-card__icons user-card__icons--menu"},this.renderMenuButton()))}renderStatusIcon(){return this.isUserLoaded?u.createElement("div",{className:"user-card__status-icon-container"},u.createElement("div",{className:`user-card__status-icon user-card__status-icon--${this.isOnline?"online":"offline"}`})):null}}h.defaultProps={activated:!1,mode:"card",modifiers:[]},h.userLoading={cover:{},default_group:"",id:0,is_active:!1,is_bot:!1,is_online:!1,is_supporter:!1,pm_friends_only:!0,username:osu.trans("users.card.loading")}},XVa7:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("[",t),r=e.indexOf("![",t);return-1===r?n:n<r?n:r}},XYTD:function(e,t,n){"use strict";var r=n("AMMU"),o=n("mPRR");e.exports=function(e,t,n){for(var r,b,_,w,O,S,j,E,k=this.options.commonmark,x=0,N=t.length,T="";x<N&&((w=t.charAt(x))===l||w===u);)T+=w,x++;if((w=t.charAt(x))===p){for(x++,T+=w,_="";x<N&&(w=t.charAt(x))!==d;)w===a&&(_+=w,x++,w=t.charAt(x)),_+=w,x++;if(_&&t.charAt(x)===d&&t.charAt(x+1)===f){for(S=_,x=(T+=_+d+f).length,_="";x<N&&((w=t.charAt(x))===u||w===l||w===c);)T+=w,x++;if(_="",r=T,(w=t.charAt(x))===v){for(x++;x<N&&y(w=t.charAt(x));)_+=w,x++;if((w=t.charAt(x))===y.delimiter)T+=v+_+w,x++;else{if(k)return;x-=_.length+1,_=""}}if(!_){for(;x<N&&g(w=t.charAt(x));)_+=w,x++;T+=_}if(_){for(j=_,_="";x<N&&((w=t.charAt(x))===u||w===l||w===c);)_+=w,x++;if(O=null,(w=t.charAt(x))===s?O=s:w===i?O=i:w===h&&(O=m),O){if(!_)return;for(x=(T+=_+w).length,_="";x<N&&(w=t.charAt(x))!==O;){if(w===c){if(x++,(w=t.charAt(x))===c||w===O)return;_+=c}_+=w,x++}if((w=t.charAt(x))!==O)return;b=T,T+=_+w,x++,E=_,_=""}else _="",x=T.length;for(;x<N&&((w=t.charAt(x))===u||w===l);)T+=w,x++;return(w=t.charAt(x))&&w!==c?void 0:!!n||(r=e(r).test().end,j=this.decode.raw(this.unescape(j),r,{nonTerminated:!1}),E&&(b=e(b).test().end,E=this.decode.raw(this.unescape(E),b)),e(T)({type:"definition",identifier:o(S),label:S,title:E||null,url:j}))}}}};var s='"',i="'",a="\\",c="\n",u="\t",l=" ",p="[",d="]",h="(",m=")",f=":",v="<",b=">";function y(e){return e!==b&&e!==p&&e!==d}function g(e){return e!==p&&e!==d&&!r(e)}y.delimiter=b},Y9Pv:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n("cDcd").createContext([])},Yin1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n("cDcd");var r,o=n("NzAu");r="beatmap-discussion-message-length-counter";var s=function(e){var t,n,s;return s=e.message,e.isTimeline?(n=BeatmapDiscussionHelper.MAX_LENGTH_TIMELINE,t=r,s.length>n?t+=" "+r+"--over":s.length>.95*n&&(t+=" "+r+"--almost-over"),Object(o.div)({className:t},s.length+" / "+n)):null}},ZB8s:function(e,t,n){"use strict";function r(e){var t,n;return"text"!==e.type||!e.position||(t=e.position.start,n=e.position.end,t.line!==n.line||n.column-t.column===e.value.length)}function o(e,t){return e.value+=t.value,e}function s(e,t){return this.options.commonmark||this.options.gfm?t:(e.children=e.children.concat(t.children),e)}e.exports=function(e){return function(t,n){var i,a,c,u,l,p=this,d=p.offset,h=[],m=p[e+"Methods"],f=p[e+"Tokenizers"],v=n.line,b=n.column;if(!t)return h;for(w.now=g,w.file=p.file,y("");t;){for(i=-1,a=m.length,u=!1;++i<a&&(!(c=f[m[i]])||c.onlyAtStart&&!p.atStart||c.notInList&&p.inList||c.notInBlock&&p.inBlock||c.notInLink&&p.inLink||(l=t.length,c.apply(p,[w,t]),!(u=l!==t.length))););u||p.file.fail(new Error("Infinite loop"),w.now())}return p.eof=g(),h;function y(e){for(var t=-1,n=e.indexOf("\n");-1!==n;)v++,t=n,n=e.indexOf("\n",n+1);-1===t?b+=e.length:b=e.length-t,v in d&&(-1!==t?b+=d[v]:b<=d[v]&&(b=d[v]+1))}function g(){var e={line:v,column:b};return e.offset=p.toOffset(e),e}function _(e){this.start=e,this.end=g()}function w(e){var n,i=function(){var e=[],t=v+1;return function(){for(var n=v+1;t<n;)e.push((d[t]||0)+1),t++;return e}}(),a=(n=g(),function(e,t){var r=e.position,o=r?r.start:n,s=[],i=r&&r.end.line,a=n.line;if(e.position=new _(o),r&&t&&r.indent){if(s=r.indent,i<a){for(;++i<a;)s.push((d[i]||0)+1);s.push(n.column)}t=s.concat(t)}return e.position.indent=t||[],e}),c=g();return function(e){t.substring(0,e.length)!==e&&p.file.fail(new Error("Incorrectly eaten value: please report this warning on https://git.io/vg5Ft"),g())}(e),u.reset=l,l.test=m,u.test=m,t=t.substring(e.length),y(e),i=i(),u;function u(e,t){return a(function(e,t){var n=t?t.children:h,i=n[n.length-1];return i&&e.type===i.type&&("text"===e.type||"blockquote"===e.type)&&r(i)&&r(e)&&(e=("text"===e.type?o:s).call(p,i,e)),e!==i&&n.push(e),p.atStart&&0!==h.length&&p.exitStart(),e}(a(e),t),i)}function l(){var n=u.apply(null,arguments);return v=c.line,b=c.column,t=e+t,n}function m(){var n=a({});return v=c.line,b=c.column,t=e+t,n.position}}}}},ZG74:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n("cDcd");function o(e){this.setState({activeKey:e})}const s=Object(r.createContext)({activeKeyDidChange:e=>{}}),i=Object(r.createContext)(null)},ZXkc:function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},"Zs/d":function(e,t,n){"use strict";e.exports=function(e){for(var t=String(e),n=t.length;t.charAt(--n)===r;);return t.slice(0,n+1)};var r="\n"},"b3/f":function(e,t,n){"use strict";var r=n("GtRd");e.exports=a,a.locator=r;var o=" ",s="\n",i=2;function a(e,t,n){for(var r,a=t.length,c=-1,u="";++c<a;){if((r=t.charAt(c))===s){if(c<i)return;return!!n||e(u+=r)({type:"break"})}if(r!==o)return;u+=r}}},b4M7:function(e,t,n){"use strict";e.exports=function(e){return String(e).replace(/\s+/g," ")}},bYiV:function(e,t,n){"use strict";var r=n("DmM8"),o=n("AMMU"),s=n("k4GU");e.exports=u,u.locator=s;var i="\\",a="*",c="_";function u(e,t,n){var s,u,l,p,d,h,m,f=0,v=t.charAt(f);if(!(v!==a&&v!==c||t.charAt(++f)!==v||(u=this.options.pedantic,d=(l=v)+l,h=t.length,f++,p="",v="",u&&o(t.charAt(f)))))for(;f<h;){if(m=v,!((v=t.charAt(f))!==l||t.charAt(f+1)!==l||u&&o(m))&&(v=t.charAt(f+2))!==l){if(!r(p))return;return!!n||((s=e.now()).column+=2,s.offset+=2,e(d+p+d)({type:"strong",children:this.tokenizeInline(p,s)}))}u||v!==i||(p+=v,v=t.charAt(++f)),p+=v,f++}}},btiA:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},cF9b:function(e,t,n){"use strict";n.d(t,"d",(function(){return de})),n.d(t,"a",(function(){return he})),n.d(t,"b",(function(){return ge})),n.d(t,"c",(function(){return W}));var r=n("EaLk"),o=n("cDcd"),s=n.n(o),i=n("faye");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return e(t={exports:{}},t.exports),t.exports}var v,b=f((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case p:case s:case a:case i:return e;default:switch(e=e&&e.$$typeof){case u:case d:case c:return e;default:return t}}case o:return t}}}function b(e){return v(e)===p}t.typeOf=v,t.AsyncMode=l,t.ConcurrentMode=p,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Profiler=a,t.Portal=o,t.StrictMode=i,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===p||e===a||e===i||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d)},t.isAsyncMode=function(e){return b(e)||v(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return v(e)===u},t.isContextProvider=function(e){return v(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===s},t.isProfiler=function(e){return v(e)===a},t.isPortal=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===i}}));(v=b)&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")&&v.default,b.typeOf,b.AsyncMode,b.ConcurrentMode,b.ContextConsumer,b.ContextProvider,b.Element,b.ForwardRef,b.Fragment,b.Profiler,b.Portal,b.StrictMode,b.isValidElementType,b.isAsyncMode,b.isConcurrentMode,b.isContextConsumer,b.isContextProvider,b.isElement,b.isForwardRef,b.isFragment,b.isProfiler,b.isPortal,b.isStrictMode;var y=f((function(e){e.exports=b})),g={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},w={};w[y.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var O=Object.defineProperty,S=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,E=Object.getOwnPropertyDescriptor,k=Object.getPrototypeOf,x=Object.prototype,N=function e(t,n,r){if("string"!=typeof n){if(x){var o=k(n);o&&o!==x&&e(t,o,r)}var s=S(n);j&&(s=s.concat(j(n)));for(var i=w[t.$$typeof]||g,a=w[n.$$typeof]||g,c=0;c<s.length;++c){var u=s[c];if(!(_[u]||r&&r[u]||a&&a[u]||i&&i[u])){var l=E(n,u);try{O(t,u,l)}catch(e){}}}return t}return t},T=function(){function e(){c(this,e),this.listeners=[]}return l(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach((function(t){return t(e)}))}}]),e}();function A(e){function t(t,n,o,s,i,a){for(var c=arguments.length,u=new Array(c>6?c-6:0),l=6;l<c;l++)u[l-6]=arguments[l];return Object(r.q)((function(){if(s=s||"<<anonymous>>",a=a||o,null==n[o]){if(t){var r=null===n[o]?"null":"undefined";return new Error("The "+i+" `"+a+"` is marked as required in `"+s+"`, but its value is `"+r+"`.")}return null}return e.apply(void 0,[n,o,s,i,a].concat(u))}))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function P(e){var t=a(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function C(e,t){return A((function(n,o,s,i,a){return Object(r.q)((function(){if(e&&P(n[o])===t.toLowerCase())return null;var i;switch(t){case"Array":i=r.i;break;case"Object":i=r.k;break;case"Map":i=r.j;break;default:throw new Error("Unexpected mobxType: ".concat(t))}var c=n[o];if(!i(c)){var u=function(e){var t=P(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}(c),l=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+u+"` supplied to `"+s+"`, expected `mobx.Observable"+t+"`"+l+".")}return null}))}))}function D(e,t){return A((function(n,o,s,i,a){for(var c=arguments.length,u=new Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];return Object(r.q)((function(){if("function"!=typeof t)return new Error("Property `"+a+"` of component `"+s+"` has invalid PropType notation.");var r=C(e,"Array")(n,o,s);if(r instanceof Error)return r;for(var c=n[o],l=0;l<c.length;l++)if((r=t.apply(void 0,[c,l,s,i,a+"["+l+"]"].concat(u)))instanceof Error)return r;return null}))}))}C(!1,"Array"),D.bind(null,!1),C(!1,"Map"),C(!1,"Object"),C(!0,"Array"),D.bind(null,!0);var I=C(!0,"Object"),M=0,U={};function R(e){return U[e]||(U[e]=function(e){if("function"==typeof Symbol)return Symbol(e);var t="__$mobx-react ".concat(e," (").concat(M,")");return M++,t}(e)),U[e]}var H=R("patchMixins"),B=R("patchedDefinition");function L(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];t.locks++;try{var i;return null!=e&&(i=e.apply(this,o)),i}finally{t.locks--,0===t.locks&&t.methods.forEach((function(e){e.apply(n,o)}))}}function z(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];L.call.apply(L,[this,e,t].concat(r))}}function V(e,t){for(var n=function(e,t){var n=e[H]=e[H]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(e,t),r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];for(var i=0;i<o.length;i++){var a=o[i];n.methods.indexOf(a)<0&&n.methods.push(a)}var c=Object.getOwnPropertyDescriptor(e,t);if(!c||!c[B]){var u=e[t],l=function e(t,n,r,o,s){var i,a=z(s,o);return p(i={},B,!0),p(i,"get",(function(){return a})),p(i,"set",(function(s){if(this===t)a=z(s,o);else{var i=e(this,n,r,o,s);Object.defineProperty(this,n,i)}})),p(i,"configurable",!0),p(i,"enumerable",r),i}(e,t,c?c.enumerable:void 0,n,u);Object.defineProperty(e,t,l)}}var F={mobxStores:I};Object.seal(F);var G={contextTypes:{get:function(){return F},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function $(e,t,n){var r="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");n&&(r+="-with-"+n);var s=function(n){function r(){var e,t;c(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=m(this,(e=h(r)).call.apply(e,[this].concat(o)))).storeRef=function(e){t.wrappedInstance=e},t}return d(r,n),l(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var s=e(this.context.mobxStores||{},n,this.context)||{};for(var i in s)n[i]=s[i];return function(e){return!(e.prototype&&e.prototype.render)}(t)||(n.ref=this.storeRef),Object(o.createElement)(t,n)}}]),r}(o.Component);return s.displayName=r,N(s,t),s.wrappedComponent=t,Object.defineProperties(s,G),s}function W(){var e;if("function"==typeof arguments[0])return e=arguments[0],function(t){var n=$(e,t);return n.isMobxInjector=!1,(n=de(n)).isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=function(e){return function(t,n){return e.forEach((function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}})),n}}(t),function(n){return $(e,n,t.join("-"))}}var q=r.a||"$mobx",K=R("isUnmounted"),J=!1,Y=!1,X=!1,Q="undefined"!=typeof WeakMap?new WeakMap:void 0,Z=new T,ee=R("skipRender"),te=R("isForcingUpdate"),ne="function"==typeof o.forwardRef&&Object(o.forwardRef)((function(e,t){})).$$typeof;function re(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}function oe(e){if(i.findDOMNode)try{return Object(i.findDOMNode)(e)}catch(e){return null}return null}function se(e){var t=oe(e);t&&Q&&Q.set(t,e),Z.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}var ie=new T;function ae(e,t){if(ce(e,t))return!0;if("object"!==a(e)||null===e||"object"!==a(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!hasOwnProperty.call(t,n[o])||!ce(e[n[o]],t[n[o]]))return!1;return!0}function ce(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ue(e){var t=this;if(!0===Y)return e.call(this);function n(){var e=this;c=!1;var t=void 0,n=void 0;if(u.track((function(){J&&(e.__$mobRenderStart=Date.now());try{n=Object(r.c)(!1,a)}catch(e){t=e}J&&(e.__$mobRenderEnd=Date.now())})),t)throw ie.emit(t),t;return n}var s=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;re(this,ee,!1),re(this,te,!1);var a=e.bind(this),c=!1,u=new r.b("".concat(s,"#").concat(i,".render()"),(function(){if(!c&&(c=!0,"function"==typeof t.componentWillReact&&t.componentWillReact(),!0!==t[K])){var e=!0;try{re(t,te,!0),t[ee]||o.Component.prototype.forceUpdate.call(t),e=!1}finally{re(t,te,!1),e&&u.dispose()}}}));return u.reactComponent=this,n[q]=u,this.render=n,n.call(this)}var le={componentWillUnmount:function(){if(!0!==Y&&(this.render[q]&&this.render[q].dispose(),this[K]=!0,J)){var e=oe(this);e&&Q&&Q.delete(e),Z.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){J&&se(this)},componentDidUpdate:function(){J&&se(this)},shouldComponentUpdate:function(e,t){return Y&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!ae(this.props,e)}};function pe(e,t){var n=R("reactProp_".concat(t,"_valueHolder")),o=R("reactProp_".concat(t,"_atomHolder"));function s(){return this[o]||re(this,o,Object(r.g)("reactive "+t)),this[o]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return s.call(this).reportObserved(),this[n]},set:function(e){this[te]||ae(this[n],e)?re(this,n,e):(re(this,n,e),re(this,ee,!0),s.call(this).reportChanged(),re(this,ee,!1))}})}function de(e,t){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return X||(X=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?W.apply(null,e)(de(t)):function(t){return de(e,t)};var n=e;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===o.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),ne&&n.$$typeof===ne){var r=n.render;if("function"!=typeof r)throw new Error("render property of ForwardRef was not a function");return Object(o.forwardRef)((function(){var e=arguments;return s.a.createElement(he,null,(function(){return r.apply(void 0,e)}))}))}if(!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||o.Component.isPrototypeOf(n))){var i,a,u=de((a=i=function(e){function t(){return c(this,t),m(this,h(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),t}(o.Component),i.displayName=n.displayName||n.name,i.contextTypes=n.contextTypes,i.propTypes=n.propTypes,i.defaultProps=n.defaultProps,a));return N(u,n),u}if(!n)throw new Error("Please pass a valid component to 'observer'");var p=n.prototype||n;!function(e){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach((function(t){!function(e,t){V(e,t,le[t])}(e,t)})),e.shouldComponentUpdate?e.shouldComponentUpdate!==le.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):e.shouldComponentUpdate=le.shouldComponentUpdate}(p),n.isMobXReactObserver=!0,pe(p,"props"),pe(p,"state");var f=p.render;return p.render=function(){return ue.call(this,f)},n}var he=de((function(e){var t=e.children,n=e.inject,r=e.render,o=t||r;if(void 0===o)return null;if(!n)return o();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var i=W(n)(o);return s.a.createElement(i,null)}));he.displayName="Observer";var me=function(e,t,n,r,o){var s="children"===t?"render":"children";return"function"==typeof e[t]&&"function"==typeof e[s]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof e[t]&&"function"!=typeof e[s]?new Error("Invalid prop `"+o+"` of type `"+a(e[t])+"` supplied to `"+n+"`, expected `function`."):void 0};function fe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function ve(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function be(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}he.propTypes={render:me,children:me},fe.__suppressDeprecationWarning=!0,ve.__suppressDeprecationWarning=!0,be.__suppressDeprecationWarning=!0;var ye={children:!0,key:!0,ref:!0},ge=function(e){function t(e,n){var r;return c(this,t),(r=m(this,h(t).call(this,e,n))).state={},_e(e,r.state),r}return d(t,e),l(t,[{key:"render",value:function(){return o.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={};return _e(this.context.mobxStores,e),_e(this.props,e),{mobxStores:e}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e)return null;if(!t)return e;if(Object.keys(e).filter(we).length!==Object.keys(t).filter(we).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var n in e)we(n)&&t[n]!==e[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return e}}]),t}(o.Component);function _e(e,t){if(e)for(var n in e)we(n)&&(t[n]=e[n])}function we(e){return!ye[e]&&"suppressChangedStoreWarning"!==e}if(ge.contextTypes={mobxStores:I},ge.childContextTypes={mobxStores:I.isRequired},function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var s=e.displayName||e.name,i="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+s+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=fe,t.componentWillReceiveProps=ve),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=be;var a=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;a.call(this,e,t,r)}}}(ge),R("disposeOnUnmount"),!o.Component)throw new Error("mobx-react requires React to be available");if(!r.o)throw new Error("mobx-react requires mobx to be available");if("function"==typeof i.unstable_batchedUpdates&&Object(r.f)({reactionScheduler:i.unstable_batchedUpdates}),"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":a(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var Oe={spy:r.o,extras:{getDebugName:r.h}},Se={renderReporter:Z,componentByNodeRegistry:Q,componentByNodeRegistery:Q,trackComponents:function(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");J||(J=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(Se,Oe)}},"d+cC":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("YLtl"),o=n("EaLk"),s=n("srn7"),i=n("wy2R"),a=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class c{constructor(){this.channelId=-1,this.content="",this.errored=!1,this.isAction=!1,this.messageId=-1,this.persisted=!1,this.timestamp=i().toISOString(),this.uuid=osu.uuid(),this.uuid=osu.uuid(),this.sender=new s.a(-1)}get parsedContent(){return osu.linkify(r.escape(this.content),!0)}static fromJSON(e){const t=Object.create(c.prototype);return Object.assign(t,{channelId:e.channel_id,content:e.content,isAction:e.is_action,messageId:e.message_id,persisted:!0,timestamp:e.timestamp,uuid:osu.uuid()})}persist(){return this.persisted=!0,this}update(e){return this.messageId=e.messageId,this.channelId=e.channelId,this.content=e.content,this.timestamp=e.timestamp,this.isAction=e.isAction,this.errored=e.errored,this.sender=e.sender,this}}a([o.l],c.prototype,"channelId",void 0),a([o.l],c.prototype,"content",void 0),a([o.l],c.prototype,"errored",void 0),a([o.l],c.prototype,"isAction",void 0),a([o.l],c.prototype,"messageId",void 0),a([o.l],c.prototype,"persisted",void 0),a([o.l],c.prototype,"sender",void 0),a([o.l],c.prototype,"timestamp",void 0),a([o.l],c.prototype,"uuid",void 0),a([o.e],c.prototype,"parsedContent",null),a([o.d],c.prototype,"persist",null),a([o.d],c.prototype,"update",null)},dcvb:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("cDcd");var r=n("NzAu"),o=function(e){var t,n,o,s,i,a;for(i=null!=(a=e.modifiers)?a:[],s=e.mod,t="mod",n=0,o=i.length;n<o;n++)t+=" mod--"+i[n];return t+=" mod--"+s,Object(r.div)({className:t,title:osu.trans("beatmaps.mods."+s)})}},dqUM:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,o,s=n("cDcd"),i=n("NzAu"),a=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;s.createElement,r="notification-banner-v2",o=document.getElementsByClassName("js-notification-banners");var u=function(e){function t(e){this.createPortalContainer=a(this.createPortalContainer,this),this.removePortalContainer=a(this.removePortalContainer,this),this.render=a(this.render,this),this.componentWillUnmount=a(this.componentWillUnmount,this),this.componentDidMount=a(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.eventId="notification-banner-"+osu.uuid(),this.createPortalContainer()}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return $(document).on("turbolinks:before-cache."+this.eventId,this.removePortalContainer)},t.prototype.componentWillUnmount=function(){return $(document).off("."+this.eventId),this.removePortalContainer()},t.prototype.render=function(){var e;return e=Object(i.div)({className:r+" "+r+"--"+this.props.type},Object(i.div)({className:r+"__col "+r+"__col--icon"}),Object(i.div)({className:r+"__col "+r+"__col--label"},Object(i.div)({className:r+"__type"},this.props.type),Object(i.div)({className:r+"__text"},this.props.title)),Object(i.div)({className:r+"__col"},Object(i.div)({className:r+"__text"},this.props.message))),ReactDOM.createPortal(e,this.portalContainer)},t.prototype.removePortalContainer=function(){return o[0].removeChild(this.portalContainer)},t.prototype.createPortalContainer=function(){return this.portalContainer=document.createElement("div"),o[0].appendChild(this.portalContainer)},t}(s.PureComponent)},eBPa:function(e,t,n){"use strict";var r=n("DmM8"),o=n("BhdQ"),s=n("Zs/d"),i=n("QgkL");e.exports=function(e,t,n){for(var p,d,h,m,f,v=this.options,b=v.commonmark,y=v.gfm,g=this.blockTokenizers,_=this.interruptParagraph,w=t.indexOf(c),O=t.length;w<O;){if(-1===w){w=O;break}if(t.charAt(w+1)===c)break;if(b){for(m=0,p=w+1;p<O;){if((h=t.charAt(p))===a){m=l;break}if(h!==u)break;m++,p++}if(m>=l&&h!==c){w=t.indexOf(c,w+1);continue}}if(d=t.slice(w+1),i(_,g,this,[e,d,!0]))break;if(g.list.call(this,e,d,!0)&&(this.inList||b||y&&!o(r.left(d).charAt(0))))break;if(p=w,-1!==(w=t.indexOf(c,w+1))&&""===r(t.slice(p,w))){w=p;break}}return d=t.slice(0,w),""===r(d)?(e(d),null):!!n||(f=e.now(),e(d=s(d))({type:"paragraph",children:this.tokenizeInline(d,f)}))};var a="\t",c="\n",u=" ",l=4},ed4P:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("cDcd"),o=n("ZG74"),s=n("XPyy");class i extends r.PureComponent{constructor(){super(...arguments),this.activeKeyDidChange=o.c.bind(this),this.state={}}render(){const e=null!=this.state.activeKey?["menu-active"]:[];return e.push(this.props.viewMode),r.createElement(o.a.Provider,{value:{activeKeyDidChange:this.activeKeyDidChange}},r.createElement("div",{className:osu.classWithModifiers("user-cards",e)},this.props.users.map(e=>{const t=this.state.activeKey===e.id;return r.createElement(o.b.Provider,{key:e.id,value:e.id},r.createElement(s.a,{activated:t,mode:this.props.viewMode,modifiers:["has-outline",...this.props.modifiers],user:e}))})))}}i.defaultProps={modifiers:[]}},f4vq:function(e,t,n){"use strict";var r=n("EaLk"),o=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class s{constructor(){this.beatmapsetIds=[],this.hasMore=!1,this.total=0}get hasMoreForPager(){return this.hasMore&&this.beatmapsetIds.length<this.total}get isExpired(){return null==this.fetchedAt||(new Date).getTime()-this.fetchedAt.getTime()>s.CACHE_DURATION_MS}append(e){for(const t of e.beatmapsets)this.beatmapsetIds.push(t.id);this.cursor=e.cursor,this.fetchedAt=new Date,this.hasMore=null!==e.cursor,this.total=e.total}reset(){this.beatmapsetIds=[],this.fetchedAt=void 0,this.cursor=void 0,this.hasMore=!1,this.total=0}}s.CACHE_DURATION_MS=6e4,o([r.l],s.prototype,"beatmapsetIds",void 0),o([r.l],s.prototype,"hasMore",void 0),o([r.l],s.prototype,"total",void 0),o([r.e],s.prototype,"hasMoreForPager",null),o([r.e],s.prototype,"isExpired",null),o([r.d],s.prototype,"append",null),o([r.d],s.prototype,"reset",null);var i=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class a{constructor(e){this.extra=null,this.general=null,this.genre=null,this.language=null,this.mode=null,this.played=null,this.rank=null,this.sort=null,this.status=null,this.sanitizedQuery=null;const t=BeatmapsetFilter.filtersFromUrl(e);for(const n of Object.keys(t))this[n]=t[n]}get displaySort(){return this.selectedValue("sort")}get query(){return this.sanitizedQuery}set query(e){const t=osu.presence((e||"").trim());this.sanitizedQuery!==t&&(this.sanitizedQuery=t)}get queryParams(){const e=this.values;return BeatmapsetFilter.queryParamsFromFilters(e)}selectedValue(e){const t=this[e];return null==t?BeatmapsetFilter.getDefault(this.values,e):t}toKeyString(){const e=this.values,t=BeatmapsetFilter.fillDefaults(e),n=[];for(const r of Object.keys(t))n.push(`${r}=${t[r]}`);return n.join("&")}update(e){(void 0!==e.query&&e.query!==this.query||void 0!==e.status&&e.status!==this.status)&&(this.sort=null);for(const t of Object.keys(e))this[t]=e[t]}get values(){const e=Object.assign({},this);return e.query=this.sanitizedQuery,delete e.sanitizedQuery,e}}i([r.l],a.prototype,"extra",void 0),i([r.l],a.prototype,"general",void 0),i([r.l],a.prototype,"genre",void 0),i([r.l],a.prototype,"language",void 0),i([r.l],a.prototype,"mode",void 0),i([r.l],a.prototype,"played",void 0),i([r.l],a.prototype,"rank",void 0),i([r.l],a.prototype,"sort",void 0),i([r.l],a.prototype,"status",void 0),i([r.l],a.prototype,"sanitizedQuery",void 0),i([r.e],a.prototype,"displaySort",null),i([r.e],a.prototype,"query",null),i([r.e],a.prototype,"queryParams",null),i([r.d],a.prototype,"update",null),i([r.e],a.prototype,"values",null);var c=n("0h6b"),u=n("YLtl"),l=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i},p=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class d{constructor(e){this.beatmapsetSearch=e,this.currentResultSet=new s,this.searchStatus={error:null,from:0,state:"completed"},this.debouncedFilterChangedSearch=Object(u.debounce)(this.filterChangedSearch,500),this.filterChangedHandler=e=>{const t=e;t.oldValue!==t.newValue&&("sort"===e.name&&null==t.newValue||(this.searchStatus.state="input",this.debouncedFilterChangedSearch(),"sanitizedQuery"!==e.name&&this.debouncedFilterChangedSearch.flush()))}}get currentBeatmapsetIds(){return this.currentResultSet.beatmapsetIds}get error(){return this.searchStatus.error}get hasMore(){return this.currentResultSet.hasMoreForPager}get isBusy(){return"searching"===this.searchStatus.state||"input"===this.searchStatus.state}get isPaging(){return"paging"===this.searchStatus.state}get isSupporterMissing(){return!currentUser.is_supporter&&BeatmapsetFilter.supporterRequired(this.filters).length>0}get recommendedDifficulty(){return this.beatmapsetSearch.recommendedDifficulties.get(this.filters.mode)}get supporterRequiredFilterText(){const e=BeatmapsetFilter.supporterRequired(this.filters),t=Object(u.map)(e,e=>osu.trans(`beatmaps.listing.search.filters.${e}`));return osu.transArray(t)}cancel(){this.debouncedFilterChangedSearch.cancel(),this.beatmapsetSearch.cancel()}initialize(e){this.restoreStateFromUrl(),this.beatmapsetSearch.initialize(this.filters,e),this.initialErrorMessage=e.error}loadMore(){return p(this,void 0,void 0,(function*(){!this.isBusy&&this.hasMore&&this.search(this.currentBeatmapsetIds.length)}))}restoreTurbolinks(){this.restoreStateFromUrl(),this.search(0,!0),null!=this.initialErrorMessage&&(osu.popup(this.initialErrorMessage,"danger"),delete this.initialErrorMessage)}search(e=0,t=!1){return p(this,void 0,void 0,(function*(){if(this.isSupporterMissing||e<0)return void(this.searchStatus={state:"completed",error:null,from:e,restore:t});let n;this.searchStatus={from:0,restore:t,state:0===e?"searching":"paging"};try{yield this.beatmapsetSearch.get(this.filters,e)}catch(e){n=0!==e.readyState?e:null}Object(r.n)(()=>{this.searchStatus={state:"completed",error:n,from:e,restore:t},this.currentResultSet=this.beatmapsetSearch.getResultSet(this.filters)})}))}updateFilters(e){this.filters.update(e)}filterChangedSearch(){const e=Object(c.route)("beatmapsets.index",this.filters.queryParams);Turbolinks.controller.advanceHistory(e),this.search()}restoreStateFromUrl(){const e=BeatmapsetFilter.filtersFromUrl(location.href);null!=this.filtersObserver&&this.filtersObserver(),this.filters=new a(location.href),this.filtersObserver=Object(r.m)(this.filters,this.filterChangedHandler),this.isExpanded=Object(u.intersection)(Object.keys(e),BeatmapsetFilter.expand).length>0}}l([r.l],d.prototype,"currentResultSet",void 0),l([r.l],d.prototype,"filters",void 0),l([r.l],d.prototype,"isExpanded",void 0),l([r.l],d.prototype,"searchStatus",void 0),l([r.e],d.prototype,"currentBeatmapsetIds",null),l([r.e],d.prototype,"error",null),l([r.e],d.prototype,"hasMore",null),l([r.e],d.prototype,"isBusy",null),l([r.e],d.prototype,"isPaging",null),l([r.e],d.prototype,"isSupporterMissing",null),l([r.e],d.prototype,"recommendedDifficulty",null),l([r.e],d.prototype,"supporterRequiredFilterText",null),l([r.d],d.prototype,"cancel",null),l([r.d],d.prototype,"loadMore",null),l([r.d],d.prototype,"restoreTurbolinks",null),l([r.d],d.prototype,"search",null),l([r.d],d.prototype,"updateFilters",null),l([r.d],d.prototype,"restoreStateFromUrl",null);var h=n("kKxR"),m=n("iRgH"),f=n("d+cC");class v{getMessages(e){return new Promise((t,n)=>{$.get(Object(c.route)("chat.channels.messages.index",{channel:e})).done(e=>{t(e)}).fail(e=>{n(e)})})}getUpdates(e){return new Promise((t,n)=>{$.get(Object(c.route)("chat.updates"),{since:e}).done(e=>{t(e)}).fail(e=>{n(e)})})}markAsRead(e,t){return new Promise((n,r)=>{$.ajax({type:"PUT",url:Object(c.route)("chat.channels.mark-as-read",{channel:e,message:t})}).done(e=>{n(e)}).fail(e=>{r(e)})})}newConversation(e,t,n){return new Promise((r,o)=>{$.post(Object(c.route)("chat.new"),{is_action:n,message:t,target_id:e}).done(e=>{r(e)}).fail(e=>{o(e)})})}partChannel(e,t){return new Promise((n,r)=>{$.ajax(Object(c.route)("chat.channels.part",{channel:e,user:t}),{method:"DELETE"}).done(e=>{n(e)}).fail(e=>{r(e)})})}sendMessage(e,t,n){return new Promise((r,o)=>{$.post(Object(c.route)("chat.channels.messages.store",{channel:e}),{is_action:n,message:t,target_id:e,target_type:"channel"}).done(e=>{r(e)}).fail(e=>{o(e)})})}}class b{constructor(e,t){this.windowIsActive=!0,this.dispatcher=e,this.rootDataStore=t,this.dispatcher.register(this),this.api=new v}addMessages(e,t){const n=[];Object(r.p)(()=>{t.forEach(e=>{const t=f.a.fromJSON(e);t.sender=this.rootDataStore.userStore.getOrCreate(e.sender_id,e.sender),n.push(t)}),this.rootDataStore.channelStore.addMessages(e,n)})}changeChannel(e){const t=this.rootDataStore.uiState.chat,n=this.rootDataStore.channelStore;(e!==t.selected||n.getOrCreate(e).loaded)&&Object(r.p)(()=>{"NEW"!==n.getOrCreate(t.selected).type&&(t.autoScroll=!1);const r=n.getOrCreate(e);r.newChannel||(r.loaded?this.markAsRead(e):this.loadChannel(e).then(()=>{this.windowIsActive&&this.markAsRead(e)})),t.selected=e})}focusNextChannel(){const e=this.rootDataStore.channelStore,t=e.get(this.rootDataStore.uiState.chat.selected);if(t&&(t.exists||t.newChannel))return;const n=e.channelList;n.length>0?this.dispatcher.dispatch(new h.b(n[0].channelId)):e.loaded=!1}handleDispatchAction(e){e instanceof h.b?this.changeChannel(e.channelId):e instanceof h.a?this.partChannel(e.channelId):e instanceof h.c?this.windowIsActive&&this.rootDataStore.channelStore.loaded&&this.markAsRead(this.rootDataStore.uiState.chat.selected):e instanceof h.f?this.focusNextChannel():e instanceof m.b?(this.windowIsActive=!0,this.rootDataStore.channelStore.loaded&&this.markAsRead(this.rootDataStore.uiState.chat.selected)):e instanceof m.a&&(this.windowIsActive=!1)}loadChannel(e){const t=this.rootDataStore.channelStore.getOrCreate(e);return t.loading?Promise.resolve():(t.loading=!0,this.api.getMessages(e).then(n=>{Object(r.p)(()=>{this.addMessages(e,n),t.loading=!1,t.loaded=!0})}).catch(e=>{console.debug("loadChannel error",e)}))}markAsRead(e){const t=this.rootDataStore.channelStore.getOrCreate(e),n=t.lastMessageId;if(!t.isUnread)return;const r=t.messages[t.messages.length-1];r&&r.sender.id===window.currentUser.id?t.lastReadId=n:this.api.markAsRead(t.channelId,n).then(()=>{t.lastReadId=n}).catch(e=>{console.debug("markAsRead error",e)})}partChannel(e){if(this.rootDataStore.channelStore.partChannel(e),this.focusNextChannel(),-1!==e)return this.api.partChannel(e,window.currentUser.id).catch(e=>{console.debug("leaveChannel error",e)})}}class y{constructor(e,t){this.pollingEnabled=!0,this.pollTime=1e3,this.pollTimeIdle=5e3,this.updateXHR=!1,this.windowIsActive=!0,this.pollForUpdates=()=>{this.updateXHR||(this.updateXHR=!0,this.api.getUpdates(this.rootDataStore.channelStore.maxMessageId).then(e=>{this.updateXHR=!1,this.pollingEnabled&&(this.updateTimerId=Timeout.set(this.pollingTime(),this.pollForUpdates)),e&&Object(r.p)(()=>{e.messages.forEach(e=>{const t=f.a.fromJSON(e);t.sender=this.rootDataStore.userStore.getOrCreate(e.sender_id,e.sender),this.dispatcher.dispatch(new h.c(t))}),this.dispatcher.dispatch(new h.f(e.presence))})}).catch(e=>{this.updateXHR=!1,this.pollingEnabled&&(this.updateTimerId=Timeout.set(this.pollingTime(),this.pollForUpdates))}))},this.dispatcher=e,this.rootDataStore=t,this.dispatcher.register(this),this.api=new v}handleDispatchAction(e){e instanceof h.d?this.sendMessage(e.message):e instanceof m.b?this.windowIsActive=!0:e instanceof m.a&&(this.windowIsActive=!1)}pollingTime(){return this.windowIsActive?this.pollTime:this.pollTimeIdle}sendMessage(e){const t=e.channelId,n=this.rootDataStore.channelStore.getOrCreate(t);if(n.newChannel){const o=n.users.slice().find(e=>e!==currentUser.id);if(!o)return void console.debug("sendMessage:: userId not found?? this shouldn't happen");this.api.newConversation(o,e.content,e.isAction).then(e=>{const n=e.new_channel_id;Object(r.p)(()=>{this.rootDataStore.channelStore.channels.delete(t),this.rootDataStore.channelStore.updatePresence(e.presence),this.dispatcher.dispatch(new h.b(n))})}).catch(()=>{e.errored=!0,this.dispatcher.dispatch(new h.e(e))})}else this.api.sendMessage(t,e.content,e.isAction).then(t=>{t?e.messageId=t.message_id:e.errored=!0,this.dispatcher.dispatch(new h.e(e))}).catch(()=>{e.errored=!0,this.dispatcher.dispatch(new h.e(e))})}startPolling(){this.updateTimerId||(this.updateTimerId=Timeout.set(this.pollingTime(),this.pollForUpdates))}stopPolling(){this.updateTimerId&&(Timeout.clear(this.updateTimerId),this.updateTimerId=void 0,this.updateXHR=!1)}}class g{}class _{}var w=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class O{constructor(e,t){this.beatmapsetStore=e,this.dispatcher=t,this.recommendedDifficulties=new Map,this.resultSets=new Map,this.dispatcher.register(this)}cancel(){this.xhr&&this.xhr.abort()}get(e,t=0){if(t<0)throw Error("from must be > 0");const n=e.toKeyString(),o=this.getOrCreate(n);return t>0&&t<o.beatmapsetIds.length||0===t&&!o.isExpired?Promise.resolve(o):this.fetch(e,t).then(n=>(Object(r.n)(()=>{0===t&&o.reset(),this.updateBeatmapsetStore(n),o.append(n),this.recommendedDifficulties.set(e.mode,n.recommended_difficulty)}),o))}getResultSet(e){const t=e.toKeyString();return this.getOrCreate(t)}handleDispatchAction(e){(e instanceof g||e instanceof _)&&this.clear()}initialize(e,t){this.updateBeatmapsetStore(t);const n=e.toKeyString(),r=this.getOrCreate(n);null==r.fetchedAt&&(r.append(t),this.recommendedDifficulties.set(e.mode,t.recommended_difficulty))}clear(){this.resultSets.clear(),this.recommendedDifficulties.clear()}fetch(e,t){this.cancel();const n=e.queryParams,r=e.toKeyString(),o=this.getOrCreate(r).cursor;if(t>0)if(null!=o)n.cursor=o;else if(null===o)return Promise.resolve({});const s=Object(c.route)("beatmapsets.search");return this.xhr=$.ajax(s,{data:n,dataType:"json",method:"get"}),this.xhr}getOrCreate(e){let t=this.resultSets.get(e);return null==t&&(t=new s,this.resultSets.set(e,t)),t}updateBeatmapsetStore(e){for(const t of e.beatmapsets)this.beatmapsetStore.update(t)}}w([r.l],O.prototype,"recommendedDifficulties",void 0),w([r.l],O.prototype,"resultSets",void 0),w([r.d],O.prototype,"get",null),w([r.d],O.prototype,"initialize",null),w([r.d],O.prototype,"clear",null);class S{constructor(e,t){this.root=e,this.dispatcher=t,t.register(this)}handleDispatchAction(e){}}var j=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class E extends S{constructor(){super(...arguments),this.beatmapsets=r.l.map()}get(e){return this.beatmapsets.get(e)}handleDispatchAction(e){(e instanceof g||e instanceof _)&&this.flushStore()}update(e){this.beatmapsets.set(e.id,e)}flushStore(){this.beatmapsets.clear()}}j([r.l],E.prototype,"beatmapsets",void 0),j([r.d],E.prototype,"update",null),j([r.d],E.prototype,"flushStore",null);var k=n("sTr9"),x=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class N extends S{constructor(){super(...arguments),this.channels=r.l.map(),this.loaded=!1}get channelList(){return[...this.nonPmChannels,...this.pmChannels]}get maxMessageId(){const e=Array.from(this.channels.toJS().values()),t=u.maxBy(e,"lastMessageId");return null==t?-1:t.lastMessageId}get nonPmChannels(){const e=[];return this.channels.forEach(t=>{"PM"!==t.type&&t.metaLoaded&&e.push(t)}),e.sort((e,t)=>e.name===t.name?0:e.name>t.name?-1:1)}get pmChannels(){const e=[];return this.channels.forEach(t=>{(t.newChannel||"PM"===t.type&&t.metaLoaded)&&e.push(t)}),e.sort((e,t)=>e.newChannel?-1:t.newChannel?1:e.lastMessageId===t.lastMessageId?0:e.lastMessageId>t.lastMessageId?-1:1)}addMessages(e,t){u.isEmpty(t)||this.getOrCreate(e).addMessages(t)}findPM(e){if(e===se.currentUser.id)return null;for(let[,t]of this.channels)if("PM"===t.type&&t.users.some(t=>t===e))return t;return null}flushStore(){this.channels=r.l.map(),this.loaded=!1}get(e){return this.channels.get(e)}getOrCreate(e){let t=this.channels.get(e);return t||(t=new k.a(e),this.channels.set(e,t)),t}handleDispatchAction(e){if(e instanceof h.d)this.getOrCreate(e.message.channelId).addMessages(e.message,!0);else if(e instanceof h.c)this.getOrCreate(e.message.channelId).addMessages(e.message);else if(e instanceof h.e){const t=this.getOrCreate(e.message.channelId);t.updateMessage(e.message),t.resortMessages()}else e instanceof h.f?this.updatePresence(e.presence):e instanceof _&&this.flushStore()}partChannel(e){this.channels.delete(e)}updatePresence(e){e.forEach(e=>{this.getOrCreate(e.channel_id).updatePresence(e)}),this.channels.forEach(t=>{t.newChannel||e.find(e=>e.channel_id===t.channelId)||this.channels.delete(t.channelId)}),this.loaded=!0}}x([r.l],N.prototype,"channels",void 0),x([r.l],N.prototype,"loaded",void 0),x([r.e],N.prototype,"channelList",null),x([r.e],N.prototype,"maxMessageId",null),x([r.e],N.prototype,"nonPmChannels",null),x([r.e],N.prototype,"pmChannels",null),x([r.d],N.prototype,"addMessages",null),x([r.d],N.prototype,"flushStore",null),x([r.d],N.prototype,"getOrCreate",null),x([r.d],N.prototype,"partChannel",null),x([r.d],N.prototype,"updatePresence",null);var T=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i},A=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class P{constructor(e){this.isRevoking=!1,this.revoked=!1,this.id=e.id,this.name=e.name,this.scopes=new Set(e.scopes),this.userId=e.user_id,this.user=e.user}revoke(){return A(this,void 0,void 0,(function*(){return this.isRevoking=!0,$.ajax({method:"DELETE",url:Object(c.route)("oauth.authorized-clients.destroy",{authorized_client:this.id})}).then(()=>{this.revoked=!0}).always(()=>{this.isRevoking=!1})}))}}T([r.l],P.prototype,"isRevoking",void 0),T([r.l],P.prototype,"revoked",void 0),T([r.l],P.prototype,"scopes",void 0),T([r.d],P.prototype,"revoke",null);var C=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class D extends S{constructor(){super(...arguments),this.clients=new Map}handleDispatchAction(e){(e instanceof g||e instanceof _)&&this.flushStore()}initialize(e){for(const t of e){const e=new P(t);this.clients.set(e.id,e)}}flushStore(){this.clients.clear()}}C([r.l],D.prototype,"clients",void 0),C([r.d],D.prototype,"flushStore",null);var I=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class M{constructor(e){this.commentableId=e.commentable_id,this.commentableType=e.commentable_type,this.createdAt=e.created_at,this.deletedAt=e.deleted_at,this.editedAt=e.edited_at,this.editedById=e.edited_by_id,this.id=e.id,this.legacyName=e.legacy_name,this.message=e.message,this.messageHtml=e.message_html,this.parentId=e.parent_id,this.repliesCount=e.replies_count,this.updatedAt=e.updated_at,this.userId=e.user_id,this.votesCount=e.votes_count}get canDelete(){return this.canModerate||this.isOwner}get canEdit(){return this.canModerate||this.isOwner&&!this.isDeleted}get canHaveVote(){return!this.isDeleted}get canModerate(){return currentUser.is_admin||currentUser.can_moderate}get canReport(){return null!=currentUser.id&&this.userId!==currentUser.id}get canRestore(){return this.canModerate}get canVote(){return!this.isOwner}get isDeleted(){return null!=this.deletedAt}get isEdited(){return null!=this.editedAt}get isOwner(){return null!=currentUser.id&&this.userId===currentUser.id}}I([r.e],M.prototype,"canDelete",null),I([r.e],M.prototype,"canEdit",null),I([r.e],M.prototype,"canHaveVote",null),I([r.e],M.prototype,"canModerate",null),I([r.e],M.prototype,"canReport",null),I([r.e],M.prototype,"canRestore",null),I([r.e],M.prototype,"canVote",null),I([r.e],M.prototype,"isDeleted",null),I([r.e],M.prototype,"isEdited",null),I([r.e],M.prototype,"isOwner",null);var U=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class R extends S{constructor(){super(...arguments),this.comments=r.l.map(),this.userVotes=new Set,this.groupedByParentId={}}addUserVote(e){this.userVotes.add(e.id)}addVoted(e){null!=e&&e.forEach(e=>this.userVotes.add(e))}flushStore(){this.invalidate(),this.comments.clear(),this.userVotes.clear()}getRepliesByParentId(e){return this.groupedByParentId[String(e)]}handleDispatchAction(e){e instanceof _&&this.flushStore()}initialize(e,t){this.flushStore(),this.addVoted(t),this.updateWithJSON(e)}removeUserVote(e){this.userVotes.delete(e.id)}updateWithJSON(e){if(null!=e)for(const t of e){const e=new M(t),n=this.comments.has(e.id);if(this.comments.set(e.id,e),!n){const t=String(e.parentId);null!=this.groupedByParentId[t]?this.groupedByParentId[t].push(e):this.groupedByParentId[t]=[e]}}}invalidate(){this.groupedByParentId={}}}U([r.l],R.prototype,"comments",void 0),U([r.l],R.prototype,"userVotes",void 0),U([r.d],R.prototype,"addUserVote",null),U([r.d],R.prototype,"addVoted",null),U([r.d],R.prototype,"flushStore",null),U([r.d],R.prototype,"initialize",null),U([r.d],R.prototype,"removeUserVote",null),U([r.d],R.prototype,"updateWithJSON",null);var H=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class B extends S{constructor(){super(...arguments),this.meta=r.l.map()}flushStore(){this.meta.clear()}get(e,t){const n=this.meta.get(`${e}-${t}`);return null!=n?n:this.meta.get(null)}handleDispatchAction(e){e instanceof _&&this.flushStore()}initialize(e){this.flushStore(),this.updateWithJSON(e)}updateWithJSON(e){if(null!=e)for(const t of e){const e=null!=t.type&&null!=t.id?`${t.type}-${t.id}`:null;this.meta.set(e,t)}}}H([r.l],B.prototype,"meta",void 0),H([r.d],B.prototype,"flushStore",null),H([r.d],B.prototype,"initialize",null),H([r.d],B.prototype,"updateWithJSON",null);var L=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i},z=function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class V extends P{constructor(e){super(e),this.isUpdating=!1,this.redirect=e.redirect,this.secret=e.secret}delete(){return z(this,void 0,void 0,(function*(){return this.isRevoking=!0,$.ajax({method:"DELETE",url:Object(c.route)("oauth.clients.destroy",{client:this.id})}).then(()=>{this.revoked=!0}).always(()=>{this.isRevoking=!1})}))}updateFromJson(e){this.id=e.id,this.name=e.name,this.scopes=new Set(e.scopes),this.userId=e.user_id,this.user=e.user,this.redirect=e.redirect,this.secret=e.secret}updateWith(e){return z(this,void 0,void 0,(function*(){const{redirect:t}=e;return this.isUpdating=!0,$.ajax({data:{redirect:t},method:"PUT",url:Object(c.route)("oauth.clients.update",{client:this.id})}).then(e=>{this.updateFromJson(e)}).always(()=>{this.isUpdating=!1})}))}}L([r.l],V.prototype,"isUpdating",void 0),L([r.d],V.prototype,"delete",null),L([r.d],V.prototype,"updateFromJson",null),L([r.d],V.prototype,"updateWith",null);var F=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class G extends S{constructor(){super(...arguments),this.clients=new Map}handleDispatchAction(e){(e instanceof g||e instanceof _)&&this.flushStore()}initialize(e){for(const t of e)this.updateWithJson(t)}updateWithJson(e){const t=new V(e);return this.clients.set(t.id,t),t}flushStore(){this.clients.clear()}}F([r.l],G.prototype,"clients",void 0),F([r.d],G.prototype,"updateWithJson",null),F([r.d],G.prototype,"flushStore",null);var W=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class q extends S{constructor(){super(...arguments),this.autoScroll=!1,this.lastReadId=-1,this.selected=-1}flushStore(){this.selected=-1,this.lastReadId=-1}handleDispatchAction(e){e instanceof h.b?this.lastReadId=this.root.channelStore.getOrCreate(e.channelId).lastReadId||-1:e instanceof h.d?(this.lastReadId=this.root.channelStore.getOrCreate(e.message.channelId).lastMessageId||-1,this.autoScroll=!0):e instanceof _&&this.flushStore()}}W([r.l],q.prototype,"autoScroll",void 0),W([r.l],q.prototype,"lastReadId",void 0),W([r.l],q.prototype,"selected",void 0),W([r.d],q.prototype,"flushStore",null);var K=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};const J={currentSort:"new",hasMoreComments:{},isShowDeleted:!1,loadingFollow:null,loadingSort:null,topLevelCommentIds:[],topLevelCount:0,total:0,userFollow:!1};class Y extends S{constructor(){super(...arguments),this.account={client:null,isCreatingNewClient:!1,newClientVisible:!1},this.chat=new q(this.root,this.dispatcher),this.comments=Object.assign({},J),this.orderedCommentsByParentId={}}exportCommentsUIState(){return{comments:this.comments,orderedCommentsByParentId:this.orderedCommentsByParentId}}getOrderedCommentsByParentId(e){return this.populateOrderedCommentsForParentId(e),this.orderedCommentsByParentId[e]}importCommentsUIState(e){this.comments=Object.assign({},J,e.comments),this.orderedCommentsByParentId=e.orderedCommentsByParentId}initializeWithCommentBundleJSON(e){this.comments.hasMoreComments={},this.comments.hasMoreComments[e.has_more_id]=e.has_more,this.comments.currentSort=e.sort,this.comments.userFollow=e.user_follow,this.comments.topLevelCount=e.top_level_count?e.top_level_count:0,this.comments.total=e.total?e.total:0,null!=e.comments&&(this.comments.topLevelCommentIds=e.comments.map(e=>e.id)),this.orderedCommentsByParentId={}}updateFromCommentsAdded(e){this.comments.hasMoreComments[e.has_more_id]=e.has_more,e.top_level_count&&e.total&&(this.comments.topLevelCount=e.top_level_count,this.comments.total=e.total);for(const t of e.comments){const e=new M(t),n=e.parentId;null==n?this.comments.topLevelCommentIds.push(e.id):(this.populateOrderedCommentsForParentId(n),this.orderedCommentsByParentId[n].push(e))}}updateFromCommentsNew(e){e.top_level_count&&e.total&&(this.comments.topLevelCount=e.top_level_count,this.comments.total=e.total);const t=new M(e.comments[0]),n=t.parentId;null==n?this.comments.topLevelCommentIds.unshift(t.id):(this.populateOrderedCommentsForParentId(n),this.orderedCommentsByParentId[n].unshift(t))}orderComments(e){switch(this.comments.currentSort){case"old":return Object(u.orderBy)(e,"createdAt","asc");case"top":return Object(u.orderBy)(e,"votesCount","desc");default:return Object(u.orderBy)(e,"createdAt","desc")}}populateOrderedCommentsForParentId(e){if(null==this.orderedCommentsByParentId[e]){const t=this.root.commentStore.getRepliesByParentId(e);this.orderedCommentsByParentId[e]=this.orderComments(t)}}}K([r.l],Y.prototype,"account",void 0),K([r.l],Y.prototype,"comments",void 0),K([r.d],Y.prototype,"importCommentsUIState",null),K([r.d],Y.prototype,"initializeWithCommentBundleJSON",null),K([r.d],Y.prototype,"updateFromCommentsAdded",null),K([r.d],Y.prototype,"updateFromCommentsNew",null);var X=n("srn7"),Q=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class Z extends S{constructor(){super(...arguments),this.users=r.l.map()}flushStore(){this.users=r.l.map()}get(e){return this.users.get(e)}getOrCreate(e,t){let n=this.users.get(e);return n&&n.loaded?n:(n=t?X.a.fromJSON(t):new X.a(e),this.users.set(e,n),n.loaded||n.load(),n)}handleDispatchAction(e){e instanceof _&&this.flushStore()}updateWithJSON(e){if(null!=e)for(const t of e){const e=X.a.fromJSON(t);this.users.set(e.id,e)}}}Q([r.l],Z.prototype,"users",void 0),Q([r.d],Z.prototype,"flushStore",null),Q([r.d],Z.prototype,"getOrCreate",null),Q([r.d],Z.prototype,"updateWithJSON",null);class ee{constructor(e){this.uiState=new Y(this,e),this.beatmapsetStore=new E(this,e),this.beatmapsetSearch=new O(this.beatmapsetStore,e),this.clientStore=new D(this,e),this.commentableMetaStore=new B(this,e),this.commentStore=new R(this,e),this.channelStore=new N(this,e),this.ownClientStore=new G(this,e),this.userStore=new Z(this,e)}updateWithCommentBundleJSON(e){this.commentableMetaStore.updateWithJSON(e.commentable_meta),this.commentStore.updateWithJSON(e.comments),this.commentStore.updateWithJSON(e.included_comments),this.userStore.updateWithJSON(e.users),this.commentStore.addVoted(e.user_votes)}}!function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);s>3&&i&&Object.defineProperty(t,n,i)}([r.d],ee.prototype,"updateWithCommentBundleJSON",null);class te{constructor(e,t){this.userLogin=()=>{this.dispatcher.dispatch(new g)},this.userLogout=()=>{this.dispatcher.dispatch(new _)},this.dispatcher=t,$(e.document).on("ajax:success",".js-logout-link",this.userLogout),$(e.document).on("ajax:success",".js-login-form",this.userLogin)}}class ne{constructor(){this.callbacks=[],this.trace=!1}dispatch(e){this.trace&&console.debug("Dispatcher::dispatch",e),this.callbacks.forEach(t=>{t.handleDispatchAction(e)})}register(e){this.callbacks.push(e)}}class re{constructor(e,t){this.focusChange=e=>{"focus"===e.type?this.dispatcher.dispatch(new m.b):this.dispatcher.dispatch(new m.a)},this.dispatcher=t,$(e).on("blur focus",this.focusChange)}}const oe=new class{constructor(e){this.setUser=(e,t)=>{this.dataStore.userStore.getOrCreate(t.id,t)},this.window=e,this.dispatcher=new ne,this.dataStore=new ee(this.dispatcher),this.chatWorker=new y(this.dispatcher,this.dataStore),this.chatOrchestrator=new b(this.dispatcher,this.dataStore),this.userLoginObserver=new te(this.window,this.dispatcher),this.windowFocusObserver=new re(this.window,this.dispatcher),this.beatmapsetSearchController=new d(this.dataStore.beatmapsetSearch),$(document).on("turbolinks:load.osu-core",()=>{null!=e.currentUser&&this.dataStore.userStore.getOrCreate(e.currentUser.id,e.currentUser),$(document).off("turbolinks:load.osu-core")}),$.subscribe("user:update",this.setUser)}get currentUser(){return window.currentUser}}(window);window.OsuCore=oe;var se=t.a=oe},f7bm:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("iBbO"),o=n("cDcd");const s="click-to-copy";class i extends o.Component{constructor(){super(...arguments),this.timer=null,this.title=null,this.click=e=>{e.preventDefault();const t=e.currentTarget;null==this.api&&(this.api=$(t).qtip("api")),r.writeText(this.props.value),this.api.set("content.text",osu.trans("common.buttons.click_to_copy_copied")),Timeout.clear(this.timer),this.timer=Timeout.set(1e3,this.restoreTooltipText),null==this.title&&(this.title=t.getAttribute("title")||t.dataset.origTitle||null)},this.restoreTooltipText=()=>{null!=this.title&&(this.api.hide(),Timeout.set(100,()=>{this.api.set("content.text",this.title)}))}}componentWillMount(){this.restoreTooltipText()}render(){return this.props.value?o.createElement("a",{className:s,"data-tooltip-pin-position":!0,"data-tooltip-position":"bottom center","data-tooltip-hide-events":"mouseleave",href:this.props.valueAsUrl?this.props.value:"#",onClick:this.click,title:osu.trans("common.buttons.click_to_copy")},this.props.label||this.props.value,this.props.showIcon&&o.createElement("i",{className:`fas fa-paste ${s}__icon`})):o.createElement("span",null)}}i.defaultProps={showIcon:!1,valueAsUrl:!1}},fDIx:function(e,t,n){"use strict";e.exports=a;var r=n("uNUE"),o=r.CONTINUE,s=r.SKIP,i=r.EXIT;function a(e,t,n,o){"function"==typeof t&&"function"!=typeof n&&(o=n,n=t,t=null),r(e,t,(function(e,t){var r=t[t.length-1],o=r?r.children.indexOf(e):null;return n(e,o,r)}),o)}a.CONTINUE=o,a.SKIP=s,a.EXIT=i},fWFV:function(e,t,n){(function(e){var n,r,o,s;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===i(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var s=t[r],a=s.obj[s.prop],c=Object.keys(a),u=0;u<c.length;++u){var l=c[u],p=a[l];"object"===i(p)&&null!==p&&-1===n.indexOf(p)&&(t.push({obj:a,prop:l}),n.push(p))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],s=0;s<n.length;++s)void 0!==n[s]&&r.push(n[s]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n){if(0===e.length)return e;var r=e;if("symbol"===i(e)?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var o="",a=0;a<r.length;++a){var c=r.charCodeAt(a);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?o+=r.charAt(a):c<128?o+=s[c]:c<2048?o+=s[192|c>>6]+s[128|63&c]:c<55296||c>=57344?o+=s[224|c>>12]+s[128|c>>6&63]+s[128|63&c]:(a+=1,c=65536+((1023&c)<<10|1023&r.charCodeAt(a)),o+=s[240|c>>18]+s[128|c>>12&63]+s[128|c>>6&63]+s[128|63&c])}return o},isBuffer:function(e){return!(!e||"object"!==i(e)||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,s){if(!n)return t;if("object"!==i(n)){if(o(t))t.push(n);else{if(!t||"object"!==i(t))return[t,n];(s&&(s.plainObjects||s.allowPrototypes)||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==i(t))return[t].concat(n);var c=t;return o(t)&&!o(n)&&(c=a(t,s)),o(t)&&o(n)?(n.forEach((function(n,o){if(r.call(t,o)){var a=t[o];a&&"object"===i(a)&&n&&"object"===i(n)?t[o]=e(a,n,s):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var i=n[o];return r.call(t,o)?t[o]=e(t[o],i,s):t[o]=i,t}),c)}}},function(e,t,n){"use strict";var r=String.prototype.replace,o=/%20/g,s=n(0),i={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=s.assign({default:i.RFC3986,formatters:{RFC1738:function(e){return r.call(e,o,"+")},RFC3986:function(e){return String(e)}}},i)},function(e,t,n){"use strict";var r=n(3),o=n(4),s=n(1);e.exports={formats:s,parse:o,stringify:r}},function(e,t,n){"use strict";var r=n(0),o=n(1),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=Array.prototype.push,l=function(e,t){u.apply(e,c(t)?t:[t])},p=Date.prototype.toISOString,d=o.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:d,formatter:o.formatters[d],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},m=function e(t,n,o,s,a,u,p,d,m,f,v,b,y){var g,_=t;if("function"==typeof p?_=p(n,_):_ instanceof Date?_=f(_):"comma"===o&&c(_)&&(_=_.join(",")),null===_){if(s)return u&&!b?u(n,h.encoder,y):n;_=""}if("string"==typeof(g=_)||"number"==typeof g||"boolean"==typeof g||"symbol"===i(g)||"bigint"==typeof g||r.isBuffer(_))return u?[v(b?n:u(n,h.encoder,y))+"="+v(u(_,h.encoder,y))]:[v(n)+"="+v(String(_))];var w,O=[];if(void 0===_)return O;if(c(p))w=p;else{var S=Object.keys(_);w=d?S.sort(d):S}for(var j=0;j<w.length;++j){var E=w[j];a&&null===_[E]||(c(_)?l(O,e(_[E],"function"==typeof o?o(n,E):n,o,s,a,u,p,d,m,f,v,b,y)):l(O,e(_[E],n+(m?"."+E:"["+E+"]"),o,s,a,u,p,d,m,f,v,b,y)))}return O};e.exports=function(e,t){var n,r=e,u=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],i=h.filter;return("function"==typeof e.filter||c(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:i,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"==typeof u.filter?r=(0,u.filter)("",r):c(u.filter)&&(n=u.filter);var p,d=[];if("object"!==i(r)||null===r)return"";p=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=a[p];n||(n=Object.keys(r)),u.sort&&n.sort(u.sort);for(var v=0;v<n.length;++v){var b=n[v];u.skipNulls&&null===r[b]||l(d,m(r[b],b,f,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var y=d.join(u.delimiter),g=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}},function(e,t,n){"use strict";var r=n(0),o=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},a=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,i=n.depth>0&&/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!n.plainObjects&&o.call(Object.prototype,a)&&!n.allowPrototypes)return;c.push(a)}for(var u=0;n.depth>0&&null!==(i=s.exec(r))&&u<n.depth;){if(u+=1,!n.plainObjects&&o.call(Object.prototype,i[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var s,i=e[o];if("[]"===i&&n.parseArrays)s=[].concat(r);else{s=n.plainObjects?Object.create(null):{};var a="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,c=parseInt(a,10);n.parseArrays||""!==a?!isNaN(c)&&i!==a&&String(c)===a&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(s=[])[c]=r:s[a]=r:s={0:r}}r=s}return r}(c,t,n)}};e.exports=function(e,t){var n=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var n,a={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=t.parameterLimit===1/0?void 0:t.parameterLimit,l=c.split(t.delimiter,u),p=-1,d=t.charset;if(t.charsetSentinel)for(n=0;n<l.length;++n)0===l[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[n]?d="utf-8":"utf8=%26%2310003%3B"===l[n]&&(d="iso-8859-1"),p=n,n=l.length);for(n=0;n<l.length;++n)if(n!==p){var h,m,f=l[n],v=f.indexOf("]="),b=-1===v?f.indexOf("="):v+1;-1===b?(h=t.decoder(f,s.decoder,d),m=t.strictNullHandling?null:""):(h=t.decoder(f.slice(0,b),s.decoder,d),m=t.decoder(f.slice(b+1),s.decoder,d)),m&&t.interpretNumericEntities&&"iso-8859-1"===d&&(m=i(m)),m&&t.comma&&m.indexOf(",")>-1&&(m=m.split(",")),o.call(a,h)?a[h]=r.combine(a[h],m):a[h]=m}return a}(e,n):e,u=n.plainObjects?Object.create(null):{},l=Object.keys(c),p=0;p<l.length;++p){var d=l[p],h=a(d,c[d],n);u=r.merge(u,h,n)}return r.compact(u)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.ziggy=r,this.route=this.ziggy.namedRoutes[this.name],void 0===this.name)throw new Error("Ziggy Error: You must provide a route name");if(void 0===this.route)throw new Error("Ziggy Error: route '".concat(this.name,"' is not found in the route list"));this.absolute=void 0===n||n,this.domain=this.setDomain(),this.path=this.route.uri.replace(/^\//,"")}var t,n;return t=e,(n=[{key:"setDomain",value:function(){if(!this.absolute)return"/";if(!this.route.domain)return this.ziggy.baseUrl.replace(/\/?$/,"/");var e=(this.route.domain||this.ziggy.baseDomain).replace(/\/+$/,"");return this.ziggy.basePort&&e.replace(/\/+$/,"")===this.ziggy.baseDomain.replace(/\/+$/,"")&&(e=this.ziggy.baseDomain+":"+this.ziggy.basePort),this.ziggy.baseProtocol+"://"+e+"/"}},{key:"construct",value:function(){return this.domain+this.path}}])&&r(t.prototype,n),e}(),s=n(2);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,n){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&p(o,n.prototype),o}).apply(null,arguments)}(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"default",(function(){return m}));var h=function(e){function t(e,n,r){var s,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=function(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,d(t).call(this))).name=e,s.absolute=r,s.ziggy=i||Ziggy,s.urlBuilder=s.name?new o(e,r,s.ziggy):null,s.template=s.urlBuilder?s.urlBuilder.construct():"",s.urlParams=s.normalizeParams(n),s.queryParams={},s.hydrated="",s}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"normalizeParams",value:function(e){return void 0===e?{}:((e="object"!==c(e)?[e]:e).hasOwnProperty("id")&&-1==this.template.indexOf("{id}")&&(e=[e.id]),this.numericParamIndices=Array.isArray(e),a({},e))}},{key:"with",value:function(e){return this.urlParams=this.normalizeParams(e),this}},{key:"withQuery",value:function(e){return a(this.queryParams,e),this}},{key:"hydrateUrl",value:function(){var e=this;if(this.hydrated)return this.hydrated;var t=this.template.replace(/{([^}]+)}/gi,(function(t,n){var r,o,s=e.trimParam(t);if(e.ziggy.defaultParameters.hasOwnProperty(s)&&(r=e.ziggy.defaultParameters[s]),r&&!e.urlParams[s])return delete e.urlParams[s],r;if(e.numericParamIndices?(e.urlParams=Object.values(e.urlParams),o=e.urlParams.shift()):(o=e.urlParams[s],delete e.urlParams[s]),void 0===o){if(-1===t.indexOf("?"))throw new Error("Ziggy Error: '"+s+"' key is required for route '"+e.name+"'");return""}return o.id?encodeURIComponent(o.id):encodeURIComponent(o)}));return null!=this.urlBuilder&&""!==this.urlBuilder.path&&(t=t.replace(/\/+$/,"")),this.hydrated=t,this.hydrated}},{key:"matchUrl",value:function(){var e=window.location.hostname+(window.location.port?":"+window.location.port:"")+window.location.pathname,t=this.template.replace(/(\/\{[^\}]*\?\})/g,"/").replace(/(\{[^\}]*\})/gi,"[^/?]+").replace(/\/?$/,"").split("://")[1],n=this.template.replace(/(\{[^\}]*\})/gi,"[^/?]+").split("://")[1],r=e.replace(/\/?$/,"/"),o=new RegExp("^"+n+"/$").test(r),s=new RegExp("^"+t+"/$").test(r);return o||s}},{key:"constructQuery",value:function(){if(0===Object.keys(this.queryParams).length&&0===Object.keys(this.urlParams).length)return"";var e=a(this.urlParams,this.queryParams);return Object(s.stringify)(e,{encodeValuesOnly:!0,skipNulls:!0,addQueryPrefix:!0,arrayFormat:"indices"})}},{key:"current",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Object.keys(this.ziggy.namedRoutes),o=r.filter((function(n){return-1!==e.ziggy.namedRoutes[n].methods.indexOf("GET")&&new t(n,void 0,void 0,e.ziggy).matchUrl()}))[0];if(n){var s=new RegExp("^"+n.replace("*",".*").replace(".",".")+"$","i");return s.test(o)}return o}},{key:"check",value:function(e){return Object.keys(this.ziggy.namedRoutes).includes(e)}},{key:"extractParams",value:function(e,t,n){var r=this,o=e.split(n);return t.split(n).reduce((function(e,t,n){return 0===t.indexOf("{")&&-1!==t.indexOf("}")&&o[n]?a(e,(s={},i=r.trimParam(t),c=o[n],i in s?Object.defineProperty(s,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[i]=c,s)):e;var s,i,c}),{})}},{key:"parse",value:function(){this.return=this.hydrateUrl()+this.constructQuery()}},{key:"url",value:function(){return this.parse(),this.return}},{key:"toString",value:function(){return this.url()}},{key:"trimParam",value:function(e){return e.replace(/{|}|\?/g,"")}},{key:"valueOf",value:function(){return this.url()}},{key:"params",get:function(){var e=this.ziggy.namedRoutes[this.current()];return a(this.extractParams(window.location.hostname,e.domain||"","."),this.extractParams(window.location.pathname.slice(1),e.uri,"/"))}}])&&u(n.prototype,r),t}(l(String));function m(e,t,n,r){return new h(e,t,n,r)}}]).default},"object"===i(t)&&"object"===i(e)?e.exports=s():(r=[],void 0===(o="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=o))}).call(this,n("qs9r")(e))},fgfA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case p:case d:case i:case c:case a:case m:return e;default:switch(e=e&&e.$$typeof){case l:case h:case u:return e;default:return t}}case v:case f:case s:return t}}}function y(e){return b(e)===d}t.typeOf=b,t.AsyncMode=p,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=o,t.ForwardRef=h,t.Fragment=i,t.Lazy=v,t.Memo=f,t.Portal=s,t.Profiler=c,t.StrictMode=a,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===c||e===a||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===f||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h)},t.isAsyncMode=function(e){return y(e)||b(e)===p},t.isConcurrentMode=y,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===i},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===f},t.isPortal=function(e){return b(e)===s},t.isProfiler=function(e){return b(e)===c},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===m}},g1Eu:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),o=n("NzAu"),s=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,a=function(e){function t(e){this.reset=s(this.reset,this),this.render=s(this.render,this),this.mountObserver=s(this.mountObserver,this),this.onScroll=s(this.onScroll,this),this.onClick=s(this.onClick,this),this.componentWillUnmount=s(this.componentWillUnmount,this),t.__super__.constructor.call(this,e),this.state={lastScrollY:null}}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentWillUnmount=function(){if(document.removeEventListener("scroll",this.onScroll),null!=this.observer)return this.observer.disconnect(),this.observer=null},t.prototype.onClick=function(e){var t,n;return null!=this.state.lastScrollY?(window.scrollTo(window.pageXOffset,this.state.lastScrollY),this.setState({lastScrollY:null})):(n=null!=(null!=(t=this.props.anchor)?t.current:void 0)?$(this.props.anchor.current).offset().top:0,window.pageYOffset>n?(this.setState({lastScrollY:window.pageYOffset}),window.scrollTo(window.pageXOffset,n),this.mountObserver()):void 0)},t.prototype.onScroll=function(e){if(this.setState({lastScrollY:null}),document.removeEventListener("scroll",this.onScroll),null!=this.observer)return this.observer.disconnect(),this.observer=null},t.prototype.mountObserver=function(){var e,t,n,r;return null!=window.IntersectionObserver?(n=null!=(e=null!=(t=this.props.anchor)?t.current:void 0)?e:document.body,this.observer=new IntersectionObserver((r=this,function(e){var t,o,s,i;for(i=[],o=0,s=e.length;o<s;o++){if((t=e[o]).target===n&&0===t.boundingClientRect.top){document.addEventListener("scroll",r.onScroll);break}i.push(void 0)}return i})),this.observer.observe(n)):Timeout.set(0,function(e){return function(){return document.addEventListener("scroll",e.onScroll)}}(this))},t.prototype.render=function(){return Object(o.button)({className:"back-to-top","data-tooltip-float":"fixed",onClick:this.onClick,title:null!=this.state.lastScrollY?osu.trans("common.buttons.back_to_previous"):osu.trans("common.buttons.back_to_top")},Object(o.i)({className:null!=this.state.lastScrollY?"fas fa-angle-down":"fas fa-angle-up"}))},t.prototype.reset=function(){return this.setState({lastScrollY:null})},t}(r.PureComponent)},gTvg:function(e,t,n){"use strict";var r=n("2oEb");e.exports=s,s.wrap=r;var o=[].slice;function s(){var e=[],t={run:function(){var t=-1,n=o.call(arguments,0,-1),s=arguments[arguments.length-1];if("function"!=typeof s)throw new Error("Expected function as last argument, not "+s);(function i(a){var c=e[++t],u=o.call(arguments,0).slice(1),l=n.length,p=-1;if(a)s(a);else{for(;++p<l;)null!==u[p]&&void 0!==u[p]||(u[p]=n[p]);n=u,c?r(c,i).apply(null,n):s.apply(null,[null].concat(n))}}).apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},giZH:function(e,t,n){"use strict";var r=n("DmM8"),o=n("kxIg"),s=n("AMMU"),i=n("OTBi");e.exports=l,l.locator=i;var a="*",c="_",u="\\";function l(e,t,n){var i,l,p,d,h,m,f,v=0,b=t.charAt(v);if(!(b!==a&&b!==c||(l=this.options.pedantic,h=b,p=b,m=t.length,v++,d="",b="",l&&s(t.charAt(v)))))for(;v<m;){if(f=b,!((b=t.charAt(v))!==p||l&&s(f))){if((b=t.charAt(++v))!==p){if(!r(d)||f===p)return;if(!l&&p===c&&o(b)){d+=p;continue}return!!n||((i=e.now()).column++,i.offset++,e(h+d+p)({type:"emphasis",children:this.tokenizeInline(d,i)}))}d+=p}l||b!==u||(d+=b,b=t.charAt(++v)),d+=b,v++}}},hc33:function(e,t,n){"use strict";var r,o=n("0h6b"),s=n("cDcd"),i=n("YLtl"),a=n("txhI"),c=n("NzAu"),u=n("MeXQ"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;r="report-form";var d=function(e){function t(e){this.sendReport=l(this.sendReport,this),this.renderFormContent=l(this.renderFormContent,this),this.renderForm=l(this.renderForm,this),this.render=l(this.render,this),this.onItemSelected=l(this.onItemSelected,this),t.__super__.constructor.call(this,e),this.options=[{id:"Cheating",text:osu.trans("users.report.options.cheating")},{id:"Insults",text:osu.trans("users.report.options.insults")},{id:"Spam",text:osu.trans("users.report.options.spam")},{id:"UnwantedContent",text:osu.trans("users.report.options.unwanted_content")},{id:"Nonsense",text:osu.trans("users.report.options.nonsense")},{id:"Other",text:osu.trans("users.report.options.other")}],null!=e.visibleOptions&&(this.options=_.intersectionWith(this.options,e.visibleOptions,(function(e,t){return e.id===t}))),this.textarea=Object(s.createRef)(),this.state={selectedReason:this.options[0]}}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.onItemSelected=function(e){return this.setState({selectedReason:e})},t.prototype.render=function(){return this.props.visible?this.renderForm():null},t.prototype.renderForm=function(){var e;return e=this.props.completed?osu.trans("users.report.thanks"):this.props.title,Object(s.createElement)(a.a,{onClose:this.props.onClose,visible:this.props.visible},Object(c.div)({className:r},Object(c.div)({className:r+"__header"},Object(c.div)({className:r+"__row "+r+"__row--exclamation"},Object(c.i)({className:"fas fa-exclamation-triangle"})),Object(c.div)({className:r+"__row",dangerouslySetInnerHTML:{__html:"<span>"+e+"</span>"}})),this.props.completed?void 0:this.renderFormContent()))},t.prototype.renderFormContent=function(){return Object(c.div)(null,Object(i.isEmpty)(this.options)?void 0:[Object(c.div)({key:"label",className:r+"__row"},osu.trans("users.report.reason")),Object(c.div)({key:"options",className:r+"__row"},Object(s.createElement)(u.a,{blackout:!1,bn:r+"-select-options",onItemSelected:this.onItemSelected,options:this.options,selected:this.state.selectedReason}))],Object(c.div)({className:r+"__row"},osu.trans("users.report.comments")),Object(c.div)({className:r+"__row"},Object(c.textarea)({className:r+"__textarea",placeholder:osu.trans("users.report.placeholder"),ref:this.textarea})),Object(c.div)({className:r+"__row "+r+"__row--buttons"},[Object(c.button)({className:r+"__button "+r+"__button--report",disabled:this.props.disabled,key:"report",type:"button",onClick:this.sendReport},osu.trans("users.report.actions.send")),Object(c.button)({className:r+"__button",disabled:this.props.disabled,key:"cancel",type:"button",onClick:this.props.onClose},osu.trans("users.report.actions.cancel"))]))},t.prototype.sendReport=function(e){var t,n,r;return n={reason:null!=(r=this.state.selectedReason)?r.id:void 0,comments:this.textarea.current.value},"function"==typeof(t=this.props).onSubmit?t.onSubmit(n):void 0},t}(s.PureComponent);n.d(t,"a",(function(){return f}));var h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const m={beatmapset_discussion_post:["Insults","Spam","UnwantedContent","Nonsense","Other"],comment:["Insults","Spam","UnwantedContent","Nonsense","Other"],scores:["Cheating","Other"]};class f extends s.PureComponent{constructor(e){super(e),this.onFormClose=()=>{this.setState({disabled:!1,showingForm:!1},this.props.onFormClose)},this.onSubmit=e=>{this.setState({disabled:!0});const t={data:{comments:e.comments,reason:e.reason,reportable_id:this.props.reportableId,reportable_type:this.props.reportableType},dataType:"json",type:"POST",url:Object(o.route)("reports.store")};$.ajax(t).done(()=>{this.timeout=Timeout.set(1e3,this.onFormClose),this.setState({completed:!0})}).fail(e=>{osu.ajaxError(e),this.setState({disabled:!1})})},this.showForm=e=>{0===e.button&&(e.preventDefault(),Timeout.clear(this.timeout),this.setState({disabled:!1,showingForm:!0}))},this.state={completed:!1,disabled:!1,showingForm:!1}}render(){const e=this.props,{baseKey:t,icon:n,onFormClose:r,reportableId:o,reportableType:i,user:a}=e,c=h(e,["baseKey","icon","onFormClose","reportableId","reportableType","user"]),u=t||this.props.reportableType;return s.createElement(s.Fragment,null,s.createElement("button",Object.assign({key:"button",onClick:this.showForm},c),n?s.createElement("span",{className:"textual-button textual-button--inline"},s.createElement("i",{className:"textual-button__icon fas fa-exclamation-triangle"})," ",osu.trans(`report.${u}.button`)):osu.trans(`report.${u}.button`)),s.createElement(d,{completed:this.state.completed,disabled:this.state.disabled,onClose:this.onFormClose,onSubmit:this.onSubmit,title:osu.trans(`report.${u}.title`,{username:`<strong>${a.username}</strong>`}),visible:this.state.showingForm,visibleOptions:m[u]}))}}f.defaultProps={icon:!1,onFormClose:()=>{}}},i5IF:function(e,t,n){"use strict";e.exports=n("fgfA")},iBbO:function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(){return t=[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(i,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1);t.DT=s.DT;var i=function(e){},a=!0,c=function(){(console.warn||console.log).apply(console,arguments)}.bind("[clipboard-polyfill]"),u="text/plain";function l(e){i=e}function p(){a=!1,s.suppressDTWarnings()}function d(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){if(a&&!e.getData(u)&&c("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),E()){if(function(e){var t=e.getData(u);if(void 0===t)throw"No `text/plain` value was specified.";return window.clipboardData.setData("Text",t)}(e))return[2];throw"Copying failed, possibly because the user rejected it."}if(_(e))return i("regular execCopy worked"),[2];if(-1<navigator.userAgent.indexOf("Edge"))return i('UA "Edge" => assuming success'),[2];if(w(document.body,e))return i("copyUsingTempSelection worked"),[2];if(function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=w(t,e);return document.body.removeChild(t),n}(e))return i("copyUsingTempElem worked"),[2];if(void 0!==(t=e.getData(u))&&function(e){i("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(i("Using shadow DOM."),n=t.attachShadow({mode:"open"}));var r=document.createElement("span");r.innerText=e,n.appendChild(r),document.body.appendChild(t),O(r);var o=document.execCommand("copy");return S(),document.body.removeChild(t),o}(t))return i("copyTextUsingDOM worked"),[2];throw"Copy command failed."}))}))}function h(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return navigator.clipboard&&navigator.clipboard.writeText?(i("Using `navigator.clipboard.writeText()`."),[2,navigator.clipboard.writeText(e)]):[2,d(j(e))]}))}))}function m(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=j,[4,f()];case 1:return[2,e.apply(void 0,[t.sent()])]}}))}))}function f(){return r(this,void 0,void 0,(function(){return o(this,(function(e){if(navigator.clipboard&&navigator.clipboard.readText)return i("Using `navigator.clipboard.readText()`."),[2,navigator.clipboard.readText()];if(E())return i("Reading text using IE strategy."),[2,function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){if(""===(e=window.clipboardData.getData("Text")))throw"Empty clipboard or could not read plain text from clipboard";return[2,e]}))}))}()];throw"Read is not supported in your browser."}))}))}t.setDebugLog=l,t.suppressWarnings=p,t.write=d,t.writeText=h,t.read=m,t.readText=f;var v=!1;function b(){v||(a&&c('The deprecated default object of `clipboard-polyfill` was called. Please switch to `import * as clipboard from "clipboard-polyfill"` and see https://github.com/lgarron/clipboard-polyfill/issues/101 for more info.'),v=!0)}var y=function(){function e(){}return e.setDebugLog=function(e){return b(),l(e)},e.suppressWarnings=function(){return b(),p()},e.write=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return b(),[2,d(e)]}))}))},e.writeText=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return b(),[2,h(e)]}))}))},e.read=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return b(),[2,m()]}))}))},e.readText=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return b(),[2,f()]}))}))},e.DT=s.DT,e}();t.default=y;var g=function(){this.success=!1};function _(e){var t=new g,n=function(e,t,n){i("listener called"),e.success=!0,t.forEach((function(t,r){var o=n.clipboardData;o.setData(r,t),r===u&&o.getData(r)!=t&&(i("setting text/plain failed"),e.success=!1)})),n.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function w(e,t){O(e);var n=_(t);return S(),n}function O(e){var t=document.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function S(){var e=document.getSelection();e&&e.removeAllRanges()}function j(e){var t=new s.DT;return t.setData(u,e),t}function E(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["text/plain","text/html"],o=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),s=!0;t.suppressDTWarnings=function(){s=!1};var i=function(){function e(){this.m={}}return e.prototype.setData=function(e,t){s&&-1===r.indexOf(e)&&o("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[e]=t},e.prototype.getData=function(e){return this.m[e]},e.prototype.forEach=function(e){for(var t in this.m)e(this.m[t],t)},e}();t.DT=i}],n={},e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(e){return t[e]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=0);function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t,n}()},iRgH:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));class r{}class o{}},iwIW:function(e,t,n){"use strict";var r=n("AMMU");e.exports=function(e,t,n){var v,b,y,g,_,w,O,S,j,E,k,x,N,T,A,P,C,D,I,M,U,R;if(this.options.gfm){for(v=0,P=0,w=t.length+1,O=[];v<w;){if(M=t.indexOf(s,v),U=t.indexOf(l,v+1),-1===M&&(M=t.length),-1===U||U>M){if(P<d)return;break}O.push(t.slice(v,M)),P++,v=M+1}for(g=O.join(s),v=0,w=(b=O.splice(1,1)[0]||[]).length,P--,y=!1,k=[];v<w;){if((j=b.charAt(v))===l){if(E=null,!1===y){if(!1===R)return}else k.push(y),y=!1;R=!1}else if(j===a)E=!0,y=y||null;else if(j===c)y=y===h?m:E&&null===y?f:h;else if(!r(j))return;v++}if(!1!==y&&k.push(y),!(k.length<p)){if(n)return!0;for(A=-1,D=[],I=e(g).reset({type:"table",align:k,children:D});++A<P;){for(C=O[A],_={type:"tableRow",children:[]},A&&e(s),e(C).reset(_,I),w=C.length+1,v=0,S="",x="",N=!0;v<w;)(j=C.charAt(v))!==o&&j!==i?(""===j||j===l?N?e(j):(!x&&!j||N||(g=x,S.length>1&&(j?(g+=S.slice(0,S.length-1),S=S.charAt(S.length-1)):(g+=S,S="")),T=e.now(),e(g)({type:"tableCell",children:this.tokenizeInline(x,T)},_)),e(S+j),S="",x=""):(S&&(x+=S,S=""),x+=j,j===u&&v!==w-2&&(x+=C.charAt(v+1),v++)),N=!1,v++):(x?S+=j:e(j),v++);A||e(s+b)}return I}}};var o="\t",s="\n",i=" ",a="-",c=":",u="\\",l="|",p=1,d=2,h="left",m="center",f="right"},jbZF:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,o,s=n("cDcd"),i=n("NzAu"),a=n("SYfz"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;o=s.createElement,r="textual-button";var l=function(e){function t(e){this.isVisible=c(this.isVisible,this),this.render=c(this.render,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidMount=c(this.componentDidMount,this),this.clicked=c(this.clicked,this),this.refresh=c(this.refresh,this),this.updateBlocks=c(this.updateBlocks,this),t.__super__.constructor.call(this,e),this.button=s.createRef(),this.eventId="blockButton-"+this.props.userId+"-"+osu.uuid(),this.state={block:_.find(currentUser.blocks,{target_id:e.userId})}}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.defaultProps={onClick:function(){}},t.prototype.updateBlocks=function(e){return this.setState({block:_.find(e,{target_id:this.props.userId})},(function(){return currentUser.blocks=_.filter(e,{relation_type:"block"}),currentUser.friends=_.filter(e,{relation_type:"friend"}),$.publish("user:update",currentUser),$.publish("blockButton:refresh"),$.publish("friendButton:refresh")})),this.props.onClick()},t.prototype.refresh=function(e){return this.setState({block:_.find(currentUser.blocks,{target_id:this.props.userId})})},t.prototype.clicked=function(e){var t;if(confirm(osu.trans("common.confirmation")))return this.setState({loading:!0},(t=this,function(){return t.state.block?t.xhr=$.ajax({type:"DELETE",url:laroute.route("blocks.destroy",{block:t.props.userId})}):t.xhr=$.ajax({type:"POST",url:laroute.route("blocks.store",{target:t.props.userId})}),t.xhr.always((function(){return t.setState({loading:!1})})).fail(osu.emitAjaxError(t.button.current)).done(t.updateBlocks)}));this.props.onClick()},t.prototype.componentDidMount=function(){return $.subscribe("blockButton:refresh."+this.eventId,this.refresh)},t.prototype.componentWillUnmount=function(){var e;return $.unsubscribe("."+this.eventId),null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e,t,n;return this.isVisible()?(e=osu.classWithModifiers(r,["block"].concat(this.props.modifiers)),null!=this.props.wrapperClass?(n=this.props.wrapperClass,t=e):(n=e,t=null),Object(i.button)({type:"button",className:n,onClick:this.clicked,ref:this.button,disabled:this.state.loading},Object(i.span)({className:t},this.state.loading?Object(i.span)({className:r+"__icon fa-fw"},o(a.a)):Object(i.i)({className:r+"__icon fas fa-ban fa-fw"})," ",this.state.block?osu.trans("users.blocks.button.unblock"):osu.trans("users.blocks.button.block")))):null},t.prototype.isVisible=function(){return null!=currentUser.id&&_.isFinite(this.props.userId)&&this.props.userId!==currentUser.id},t}(s.PureComponent)},jiio:function(e,t,n){"use strict";e.exports=function(e){if(e)throw e}},k4GU:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("**",t),r=e.indexOf("__",t);return-1===r?n:-1===n?r:r<n?r:n}},k6t2:function(e,t,n){"use strict";var r=n("fDIx");function o(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}e.exports=function(e){return r(e,"table",o),e}},kKxR:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c}));class r{constructor(e){this.channelId=e}}class o{constructor(e){this.channelId=e}}class s{constructor(e){this.message=e}}class i{constructor(e){this.message=e}}class a{constructor(e){this.message=e}}class c{constructor(e){this.presence=e}}},kxIg:function(e,t,n){"use strict";e.exports=function(e){return o.test("number"==typeof e?r(e):e.charAt(0))};var r=String.fromCharCode,o=/\w/},"l+Wg":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("qpPZ"),o=n("0h6b"),s=n("cDcd");function i(e){const t=[{active:"index"===e.section,title:osu.trans("news.index.title.info"),url:Object(o.route)("news.index")}];return"show"===e.section&&null!=e.post&&t.push({active:!0,title:e.post.title,url:Object(o.route)("news.show",{news:e.post.slug})}),s.createElement(r.a,{section:osu.trans("news.index.title._",{info:""}),subSection:e.title,theme:"news",links:t,linksBreadcrumb:!0})}},l2ru:function(e,t,n){"use strict";var r=n("Jryd"),o=n("on4i"),s=n("q7YD");e.exports=function(e){var t,n,i=this.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=r(e)}for(t in s){if(null==(n=e[t])&&(n=i[t]),"blocks"!==t&&"boolean"!=typeof n||"blocks"===t&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+t+"`");e[t]=n}return this.options=e,this.escape=o(e),this}},l6ln:function(e,t,n){"use strict";var r=n("DGoX"),o=n("Be1W"),s=n("T+HN").tag;e.exports=d,d.locator=o;var i="<",a="?",c="!",u="/",l=/^<a /i,p=/^<\/a>/i;function d(e,t,n){var o,d,h=t.length;if(!(t.charAt(0)!==i||h<3)&&(o=t.charAt(1),(r(o)||o===a||o===c||o===u)&&(d=t.match(s))))return!!n||(d=d[0],!this.inLink&&l.test(d)?this.inLink=!0:this.inLink&&p.test(d)&&(this.inLink=!1),e(d)({type:"html",value:d}))}},lNvx:function(e,t,n){"use strict";var r={}.hasOwnProperty;function o(e){return e&&"object"==typeof e||(e={}),i(e.line)+":"+i(e.column)}function s(e){return e&&"object"==typeof e||(e={}),o(e.start)+"-"+o(e.end)}function i(e){return e&&"number"==typeof e?e:1}e.exports=function(e){return e&&"object"==typeof e?r.call(e,"position")||r.call(e,"type")?s(e.position):r.call(e,"start")||r.call(e,"end")?s(e):r.call(e,"line")||r.call(e,"column")?o(e):null:null}},lYbo:function(e,t,n){var r=n("uNUE");e.exports=function(){return function(e){return r(e,"list",(function(e,t){var n,r,o=0;for(n=0,r=t.length;n<r;n++)"list"===t[n].type&&(o+=1);for(n=0,r=e.children.length;n<r;n++){var s=e.children[n];s.index=n,s.ordered=e.ordered}e.depth=o})),e}}},leGJ:function(e,t,n){"use strict";var r,o,s=n("Yin1"),i=n("6nUW"),a=n("cDcd"),c=n("NzAu"),u=n("TY2o"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;o=a.createElement,r="beatmap-discussion-post";var d=function(e){var t;function n(e){this.validPost=l(this.validPost,this),this.setMessage=l(this.setMessage,this),this.post=l(this.post,this),this.isTimeline=l(this.isTimeline,this),this.handleKeyDownCallback=l(this.handleKeyDownCallback,this),this.editStart=l(this.editStart,this),this.canResolve=l(this.canResolve,this),this.canReopen=l(this.canReopen,this),this.renderReplyButton=l(this.renderReplyButton,this),this.renderPlaceholder=l(this.renderPlaceholder,this),this.renderCancelButton=l(this.renderCancelButton,this),this.renderBox=l(this.renderBox,this),this.render=l(this.render,this),this.componentWillUnmount=l(this.componentWillUnmount,this),n.__super__.constructor.call(this,e),this.box=a.createRef(),this.throttledPost=_.throttle(this.post,1e3),this.handleKeyDown=InputHandler.textarea(this.handleKeyDownCallback),this.state={editing:!1,message:"",posting:null}}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),t={reply_resolve:"fas fa-check",reply_reopen:"fas fa-exclamation-circle",reply:"fas fa-reply"},n.prototype.componentWillUnmount=function(){var e;return this.throttledPost.cancel(),null!=(e=this.postXhr)?e.abort():void 0},n.prototype.render=function(){return this.state.editing?this.renderBox():this.renderPlaceholder()},n.prototype.renderBox=function(){return Object(c.div)({className:r+" "+r+"--reply "+r+"--new-reply"},Object(c.div)({className:r+"__content"},Object(c.div)({className:r+"__avatar"},o(u.a,{user:this.props.currentUser,modifiers:["full-rounded"]})),this.renderCancelButton(),Object(c.div)({className:r+"__message-container"},o(TextareaAutosize,{disabled:null!=this.state.posting,className:r+"__message "+r+"__message--editor",value:this.state.message,onChange:this.setMessage,onKeyDown:this.handleKeyDown,placeholder:osu.trans("beatmaps.discussions.reply_placeholder"),ref:this.box}))),Object(c.div)({className:r+"__footer "+r+"__footer--notice"},osu.trans("beatmaps.discussions.reply_notice"),o(s.a,{message:this.state.message,isTimeline:this.isTimeline()})),Object(c.div)({className:r+"__footer"},Object(c.div)({className:r+"__actions"},Object(c.div)({className:r+"__actions-group"},this.canResolve()&&!this.props.discussion.resolved?this.renderReplyButton("reply_resolve"):void 0,this.canReopen()&&this.props.discussion.resolved?this.renderReplyButton("reply_reopen"):void 0,this.renderReplyButton("reply")))))},n.prototype.renderCancelButton=function(){return Object(c.button)({className:r+"__action "+r+"__action--cancel",disabled:null!=this.state.posting,onClick:(e=this,function(){return e.setState({editing:!1})})},Object(c.i)({className:"fas fa-times"}));var e},n.prototype.renderPlaceholder=function(){var e,t,n;return n=(t=null!=this.props.currentUser.id?[osu.trans("beatmap_discussions.reply.open.user"),"fas fa-reply"]:[osu.trans("beatmap_discussions.reply.open.guest"),"fas fa-sign-in-alt"])[0],e=t[1],Object(c.div)({className:r+" "+r+"--reply "+r+"--new-reply "+r+"--new-reply-placeholder"},o(i.a,{text:n,icon:e,modifiers:["beatmap-discussion-reply-open"],props:{onClick:this.editStart}}))},n.prototype.renderReplyButton=function(e){return Object(c.div)({className:r+"__action"},o(i.a,{text:osu.trans("common.buttons."+e),icon:t[e],isBusy:this.state.posting===e,props:{disabled:!this.validPost()||null!=this.state.posting,onClick:this.throttledPost,"data-action":e}}))},n.prototype.canReopen=function(){return this.props.discussion.can_be_resolved&&this.props.discussion.current_user_attributes.can_reopen},n.prototype.canResolve=function(){return this.props.discussion.can_be_resolved&&this.props.discussion.current_user_attributes.can_resolve},n.prototype.editStart=function(){var e;if(null!=this.props.currentUser.id)return this.setState({editing:!0},(e=this,function(){var t;return null!=(t=e.box.current)?t.focus():void 0}));userLogin.show()},n.prototype.handleKeyDownCallback=function(e,t){switch(e){case InputHandler.CANCEL:return this.setState({editing:!1});case InputHandler.SUBMIT:return this.throttledPost(t)}},n.prototype.isTimeline=function(){return null!=this.props.discussion.timestamp},n.prototype.post=function(e){var t,n,r,o,s;if(this.validPost())return LoadingOverlay.show(),null!=(n=this.postXhr)&&n.abort(),t=null!=(r=e.currentTarget.dataset.action)?r:"reply",this.setState({posting:t}),o=function(){switch(t){case"reply_resolve":return!0;case"reply_reopen":return!1;default:return this.props.discussion.resolved}}.call(this),this.postXhr=$.ajax(laroute.route("beatmap-discussion-posts.store"),{method:"POST",data:{beatmap_discussion_id:this.props.discussion.id,beatmap_discussion:{resolved:o},beatmap_discussion_post:{message:this.state.message}}}).done((s=this,function(e){return s.setState({message:"",editing:!1}),$.publish("beatmapDiscussionPost:markRead",{id:e.beatmap_discussion_post_ids}),$.publish("beatmapsetDiscussions:update",{beatmapset:e.beatmapset})})).fail(osu.ajaxError).always(function(e){return function(){return LoadingOverlay.hide(),e.setState({posting:null})}}(this))},n.prototype.setMessage=function(e){return this.setState({message:e.target.value})},n.prototype.validPost=function(){return BeatmapDiscussionHelper.validMessageLength(this.state.message,this.isTimeline())},n}(a.PureComponent),h=n("AU96");a.createElement;var m=function(e){var t,n;return t=function(){switch(e.post.message.type){case"resolved":return osu.trans("beatmap_discussions.system.resolved."+e.post.message.value,{user:osu.link(laroute.route("users.show",{user:e.user.id}),e.user.username,{classNames:["beatmap-discussion-system-post__user"]})})}}(),n="beatmap-discussion-system-post beatmap-discussion-system-post--"+e.post.message.type,e.post.deleted_at&&(n+=" beatmap-discussion-system-post--deleted"),Object(c.div)({className:n},Object(c.div)({className:"beatmap-discussion-system-post__content",dangerouslySetInnerHTML:{__html:t}}))},f=n("CnOT");n.d(t,"a",(function(){return g}));var v,b=function(e,t){return function(){return e.apply(t,arguments)}},y={}.hasOwnProperty;v=a.createElement;var g=function(e){function t(e){this.toggleExpand=b(this.toggleExpand,this),this.timestamp=b(this.timestamp,this),this.setHighlight=b(this.setHighlight,this),this.setCollapse=b(this.setCollapse,this),this.resolvedSystemPostId=b(this.resolvedSystemPostId,this),this.post=b(this.post,this),this.canBeRepliedTo=b(this.canBeRepliedTo,this),this.canDownvote=b(this.canDownvote,this),this.isVisible=b(this.isVisible,this),this.isOwner=b(this.isOwner,this),this.emitSetHighlight=b(this.emitSetHighlight,this),this.doVote=b(this.doVote,this),this.showVoters=b(this.showVoters,this),this.refreshTooltip=b(this.refreshTooltip,this),this.getTooltipContent=b(this.getTooltipContent,this),this.voterList=b(this.voterList,this),this.displayVote=b(this.displayVote,this),this.postFooter=b(this.postFooter,this),this.postButtons=b(this.postButtons,this),this.render=b(this.render,this),this.componentDidUpdate=b(this.componentDidUpdate,this),this.componentWillUnmount=b(this.componentWillUnmount,this),this.componentWillMount=b(this.componentWillMount,this),t.__super__.constructor.call(this,e),this.eventId="beatmap-discussion-entry-"+this.props.discussion.id,this.tooltips={},this.state={collapsed:!1,highlighted:!1}}return function(e,t){for(var n in t)y.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentWillMount=function(){return $.subscribe("beatmapDiscussionEntry:collapse."+this.eventId,this.setCollapse),$.subscribe("beatmapDiscussionEntry:highlight."+this.eventId,this.setHighlight)},t.prototype.componentWillUnmount=function(){var e;return $.unsubscribe("."+this.eventId),null!=(e=this.voteXhr)?e.abort():void 0},t.prototype.componentDidUpdate=function(){return _.each(this.tooltips,(e=this,function(t,n){return e.refreshTooltip(t.qtip("api"),n)}));var e},t.prototype.render=function(){var e,t,n,r,o;return this.isVisible(this.props.discussion)&&(this.props.discussion.starting_post||this.props.discussion.posts&&0!==this.props.discussion.posts.length)?(r="beatmap-discussion js-beatmap-discussion-jump",this.state.highlighted&&(r+=" beatmap-discussion--highlighted"),null!=this.props.discussion.deleted_at&&(r+=" beatmap-discussion--deleted"),null!=this.props.discussion.timestamp&&(r+=" beatmap-discussion--timeline"),this.props.preview&&(r+=" beatmap-discussion--preview"),"review"===this.props.discussion.message_type&&(r+=" beatmap-discussion--review"),n="beatmap-discussion__line",this.props.discussion.resolved&&(n+=" beatmap-discussion__line--resolved"),this._resolvedSystemPostId=null,t=this.props.discussion.starting_post||this.props.discussion.posts[0],e=(o=this.props.users[this.props.discussion.user_id]).id===this.props.beatmapset.user_id?"mapper":o.group_badge,_.includes(this.props.readPostIds,t.id)||this.isOwner(t)||this.props.preview||(r+=" beatmap-discussion--unread"),null!=e&&(r+=" beatmap-discussion--"+e),Object(c.div)({className:r,"data-id":this.props.discussion.id,onClick:this.emitSetHighlight},Object(c.div)({className:"beatmap-discussion__timestamp hidden-xs"},this.timestamp()),Object(c.div)({className:"beatmap-discussion__compact"},Object(c.div)({className:"beatmap-discussion__discussion"},Object(c.div)({className:"beatmap-discussion__top"},Object(c.div)({className:"beatmap-discussion__discussion-header"},v(f.a,{user:o,badge:e,hideStripe:!0})),this.props.preview?void 0:this.postButtons()),Object(c.div)({className:"beatmap-discussion__review-wrapper"},this.post(t,"discussion",!0)),this.props.preview?void 0:this.postFooter(),Object(c.div)({className:n}))),Object(c.div)({className:"beatmap-discussion__full"},Object(c.div)({className:"beatmap-discussion__discussion"},Object(c.div)({className:"beatmap-discussion__top"},this.post(t,"discussion"),this.props.preview?void 0:this.postButtons()),this.props.preview?void 0:this.postFooter(),Object(c.div)({className:n}))))):null},t.prototype.postButtons=function(){return Object(c.div)({className:"beatmap-discussion__actions-container"},Object(c.div)({className:"beatmap-discussion__actions"},null!=this.props.parentDiscussion?Object(c.a)({href:BeatmapDiscussionHelper.url({discussion:this.props.parentDiscussion}),title:osu.trans("beatmap_discussions.review.go_to_parent"),className:"beatmap-discussion__link-to-parent"},Object(c.i)({className:"fas fa-tasks"})):void 0,["up","down"].map((e=this,function(t){return Object(c.div)({key:t,type:t,className:"beatmap-discussion__action",onMouseOver:e.showVoters,onTouchStart:e.showVoters},e.displayVote(t),e.voterList(t))})),Object(c.button)({className:"beatmap-discussion__action beatmap-discussion__action--with-line",onClick:this.toggleExpand},Object(c.div)({className:"beatmap-discussion-expand "+(this.state.collapsed?void 0:"beatmap-discussion-expand--expanded")},Object(c.i)({className:"fas fa-chevron-down"})))));var e},t.prototype.postFooter=function(){var e,t,n;return Object(c.div)({className:"beatmap-discussion__expanded "+(this.state.collapsed?"hidden":void 0)},Object(c.div)({className:"beatmap-discussion__replies"},function(){var r,o,s,i;for(i=[],r=0,o=(s=this.props.discussion.posts.slice(1)).length;r<o;r++)if(n=s[r],this.isVisible(n)){if(n.system&&"resolved"===n.message.type){if(e=n.message.value,t===e)continue;t=e}i.push(this.post(n,"reply"))}return i}.call(this)),this.canBeRepliedTo()?v(d,{currentUser:this.props.currentUser,beatmapset:this.props.beatmapset,currentBeatmap:this.props.currentBeatmap,discussion:this.props.discussion}):void 0)},t.prototype.displayVote=function(e){var t,n,r,o,s,i,a,u,l;if(l="beatmap-discussion-vote",t=(s=function(){switch(e){case"up":return[1,"thumbs-up"];case"down":return[-1,"thumbs-down"]}}())[0],o=s[1],null!=t)return n=null!=(i=this.props.discussion.current_user_attributes)?i.vote_score:void 0,u=l+" "+l+"--"+e,0!==(a=n===t?0:t)&&(u+=" "+l+"--inactive"),r=this.isOwner()||"down"===e&&!this.canDownvote()||!this.canBeRepliedTo(),Object(c.button)({className:u,"data-score":a,disabled:r,onClick:this.doVote},Object(c.i)({className:"fas fa-"+o}),Object(c.span)({className:l+"__count"},this.props.discussion.votes[e]))},t.prototype.voterList=function(e){return Object(c.div)({className:"user-list-popup user-list-popup__template js-user-list-popup--"+this.props.discussion.id+"-"+e,style:{display:"none"}},this.props.discussion.votes[e]<1?osu.trans("beatmaps.discussions.votes.none."+e):v(a.Fragment,null,Object(c.div)({className:"user-list-popup__title"},osu.trans("beatmaps.discussions.votes.latest."+e),":"),this.props.discussion.votes.voters[e].map((t=this,function(e){var n;return Object(c.a)({href:laroute.route("users.show",{user:e}),className:"js-usercard user-list-popup__user",key:e,"data-user-id":e},v(u.a,{user:null!=(n=t.props.users[e])?n:[],modifiers:["full"]}))})),this.props.discussion.votes[e]>this.props.discussion.votes.voters[e].length?Object(c.div)({className:"user-list-popup__remainder-count"},osu.transChoice("common.count.plus_others",this.props.discussion.votes[e]-this.props.discussion.votes.voters[e].length)):void 0));var t},t.prototype.getTooltipContent=function(e){return $(".js-user-list-popup--"+this.props.discussion.id+"-"+e).html()},t.prototype.refreshTooltip=function(e,t){if(e)return e.set("content.text",this.getTooltipContent(t))},t.prototype.showVoters=function(e){var t,n,r;if(t=e.currentTarget,!(this.props.favcount<1||t._tooltip))return t._tooltip=!0,n=t.getAttribute("type"),this.tooltips[n]=$(t).qtip({style:{classes:"user-list-popup",def:!1,tip:!1},content:{text:(r=this,function(e,t){return r.getTooltipContent(n)})},position:{at:"top center",my:"bottom center",viewport:$(window)},show:{delay:100,ready:!0,solo:!0,effect:function(){return $(this).fadeTo(110,1)}},hide:{fixed:!0,delay:500,effect:function(){return $(this).fadeTo(250,0)}}})},t.prototype.doVote=function(e){var t;return LoadingOverlay.show(),null!=(t=this.voteXhr)&&t.abort(),this.voteXhr=$.ajax(laroute.route("beatmap-discussions.vote",{beatmap_discussion:this.props.discussion.id}),{method:"PUT",data:{beatmap_discussion_vote:{score:e.currentTarget.dataset.score}}}).done((function(e){return $.publish("beatmapsetDiscussions:update",{beatmapset:e})})).fail(osu.ajaxError).always(LoadingOverlay.hide)},t.prototype.emitSetHighlight=function(){return $.publish("beatmapDiscussionEntry:highlight",{id:this.props.discussion.id})},t.prototype.isOwner=function(e){return null==e&&(e=this.props.discussion),null!=this.props.currentUser.id&&e.user_id===this.props.currentUser.id},t.prototype.isVisible=function(e){return null!=e&&(this.props.showDeleted||null==e.deleted_at)},t.prototype.canDownvote=function(){return this.props.currentUser.is_admin||this.props.currentUser.can_moderate||this.props.currentUser.is_bng},t.prototype.canBeRepliedTo=function(){return(!this.props.beatmapset.discussion_locked||BeatmapDiscussionHelper.canModeratePosts(this.props.currentUser))&&(null==this.props.discussion.beatmap_id||null==this.props.currentBeatmap.deleted_at)},t.prototype.post=function(e,t,n){var r,o,s,i,a;if(null!=e.id)return i=e.system?m:h.a,s=BeatmapDiscussionHelper.canModeratePosts(this.props.currentUser),o=this.isOwner(e)&&e.id>this.resolvedSystemPostId(),r="discussion"===t?null!=(a=this.props.discussion.current_user_attributes)?a.can_destroy:void 0:s||o,v(i,{key:e.id,beatmapset:this.props.beatmapset,beatmap:this.props.currentBeatmap,discussion:this.props.discussion,post:e,type:t,read:_.includes(this.props.readPostIds,e.id)||this.isOwner(e)||this.props.preview,users:this.props.users,user:this.props.users[e.user_id],lastEditor:this.props.users[e.last_editor_id],canBeEdited:this.props.currentUser.is_admin||o,canBeDeleted:r,canBeRestored:s,currentUser:this.props.currentUser,hideUserCard:n})},t.prototype.resolvedSystemPostId=function(){var e,t;return null==this._resolvedSystemPostId&&(t=_.findLast(this.props.discussion.posts,(function(e){return e.system&&"resolved"===e.message.type})),this._resolvedSystemPostId=null!=(e=null!=t?t.id:void 0)?e:-1),this._resolvedSystemPostId},t.prototype.setCollapse=function(e,t){var n,r;if(n=t.collapse,this.props.visible&&(r="collapse"===n,this.state.collapsed!==r))return this.setState({collapsed:r})},t.prototype.setHighlight=function(e,t){var n;if(n=t.id===this.props.discussion.id,this.state.highlighted!==n)return this.setState({highlighted:n})},t.prototype.timestamp=function(){var e;return e="beatmap-discussion-timestamp",Object(c.div)({className:e},null!=this.props.discussion.timestamp&&this.props.isTimelineVisible?Object(c.div)({className:e+"__point"}):void 0,Object(c.div)({className:e+"__icons-container"},Object(c.div)({className:e+"__icons"},Object(c.div)({className:e+"__icon"},Object(c.span)({className:"beatmap-discussion-message-type beatmap-discussion-message-type--"+_.kebabCase(this.props.discussion.message_type)},Object(c.i)({className:BeatmapDiscussionHelper.messageType.icon[_.camelCase(this.props.discussion.message_type)]}))),this.props.discussion.resolved?Object(c.div)({className:e+"__icon "+e+"__icon--resolved"},Object(c.i)({className:"far fa-check-circle"})):void 0),Object(c.div)({className:e+"__text"},BeatmapDiscussionHelper.formatTimestamp(this.props.discussion.timestamp))))},t.prototype.toggleExpand=function(){return this.setState({collapsed:!this.state.collapsed})},t}(a.PureComponent)},mPRR:function(e,t,n){"use strict";var r=n("b4M7");e.exports=function(e){return r(e).toLowerCase()}},mQSo:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,o=n("cDcd"),s=n("NzAu"),i=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty;o.createElement,r="beatmapset-mapping";var c=function(e){function t(){return this.renderDate=i(this.renderDate,this),this.render=i(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n;return n={id:this.props.beatmapset.user_id,username:this.props.beatmapset.creator,avatar_url:null!=(e=null!=(t=this.props.user)?t:this.props.beatmapset.user)?e.avatar_url:void 0},Object(s.div)({className:r},null!=n.id?Object(s.a)({href:laroute.route("users.show",{user:n.id}),className:"avatar avatar--beatmapset",style:{backgroundImage:osu.urlPresence(n.avatar_url)}}):Object(s.span)({className:"avatar avatar--beatmapset avatar--guest"}),Object(s.div)({className:r+"__content"},Object(s.div)({className:r+"__mapper",dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.mapped_by",{mapper:this.userLink(n)})}}),this.renderDate("submitted","submitted_date"),this.props.beatmapset.ranked>0?this.renderDate(this.props.beatmapset.status,"ranked_date"):this.renderDate("updated","last_updated")))},t.prototype.renderDate=function(e,t){return Object(s.div)(null,osu.trans("beatmapsets.show.details."+e),Object(s.time)({className:r+"__date js-tooltip-time",dateTime:this.props.beatmapset[t],title:this.props.beatmapset[t]},moment(this.props.beatmapset[t]).format("LL")))},t.prototype.userLink=function(e){var t;return null!=e.id?laroute.link_to_route("users.show",e.username,{user:e.id},{class:r+"__user js-usercard","data-user-id":e.id}):"<span class='"+r+"__user'>"+_.escape(null!=(t=e.username)?t:osu.trans("users.deleted"))+"</span>"},t}(o.PureComponent)},mk7q:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDcd");function o(e){const t=Object.keys(e.mappings),n=new RegExp(`(${t.join("|")})`),o=e.pattern.split(n);return r.createElement(r.Fragment,null,o.map(t=>e.mappings[t]?e.mappings[t]:t))}},nHh1:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},c=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t,n=r.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!s)return!1;for(t in e);return void 0===t||r.call(e,t)},u=function(e,t){s&&"__proto__"===t.name?s(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(i)return i(e,t).value}return e[t]};e.exports=function e(){var t,n,r,o,s,i,p=arguments[0],d=1,h=arguments.length,m=!1;for("boolean"==typeof p&&(m=p,p=arguments[1]||{},d=2),(null==p||"object"!=typeof p&&"function"!=typeof p)&&(p={});d<h;++d)if(null!=(t=arguments[d]))for(n in t)r=l(p,n),p!==(o=l(t,n))&&(m&&o&&(c(o)||(s=a(o)))?(s?(s=!1,i=r&&a(r)?r:[]):i=r&&c(r)?r:{},u(p,{name:n,newValue:e(m,i,o)})):void 0!==o&&u(p,{name:n,newValue:o}));return p}},nfvb:function(e,t,n){"use strict";(function(t){var r=n("RnBu"),o=n("EiUu"),s=n("X9sK");e.exports=u;var i={}.hasOwnProperty,a=u.prototype,c=["history","path","basename","stem","extname","dirname"];function u(e){var n,r,o;if(e){if("string"==typeof e||s(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof u))return new u(e);for(this.data={},this.messages=[],this.history=[],this.cwd=t.cwd(),r=-1,o=c.length;++r<o;)n=c[r],i.call(e,n)&&(this[n]=e[n]);for(n in e)-1===c.indexOf(n)&&(this[n]=e[n])}function l(e,t){if(-1!==e.indexOf(r.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+r.sep+"`")}function p(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function d(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}a.toString=function(e){var t=this.contents||"";return s(t)?t.toString(e):String(t)},Object.defineProperty(a,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){p(e,"path"),e!==this.path&&this.history.push(e)}}),Object.defineProperty(a,"dirname",{get:function(){return"string"==typeof this.path?r.dirname(this.path):void 0},set:function(e){d(this.path,"dirname"),this.path=r.join(e||"",this.basename)}}),Object.defineProperty(a,"basename",{get:function(){return"string"==typeof this.path?r.basename(this.path):void 0},set:function(e){p(e,"basename"),l(e,"basename"),this.path=r.join(this.dirname||"",e)}}),Object.defineProperty(a,"extname",{get:function(){return"string"==typeof this.path?r.extname(this.path):void 0},set:function(e){var t=e||"";if(l(t,"extname"),d(this.path,"extname"),t){if("."!==t.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==t.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=o(this.path,t)}}),Object.defineProperty(a,"stem",{get:function(){return"string"==typeof this.path?r.basename(this.path,this.extname):void 0},set:function(e){p(e,"stem"),l(e,"stem"),this.path=r.join(this.dirname||"",e+(this.extname||""))}})}).call(this,n("2YuA"))},oQpG:function(e,t,n){"use strict";var r=n("Jryd"),o=n("1OSS");e.exports=function(e){return n.raw=function(e,n,i){return o(e,r(i,{position:t(n),warning:s}))},n;function t(t){for(var n=e.offset,r=t.line,o=[];++r&&r in n;)o.push((n[r]||0)+1);return{start:t,indent:o}}function n(n,r,i){o(n,{position:t(r),warning:s,text:i,reference:i,textContext:e,referenceContext:e})}function s(t,n,r){3!==r&&e.file.message(t,n)}}},on4i:function(e,t,n){"use strict";e.exports=i;var r=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],o=r.concat(["~","|"]),s=o.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function i(e){var t=e||{};return t.commonmark?s:t.gfm?o:r}i.default=r,i.gfm=o,i.commonmark=s},p3jD:function(e,t,n){"use strict";e.exports=function(e){for(var t,n=0,a=0,c=e.charAt(n),u={};c===r||c===o;)a+=t=c===r?i:s,t>1&&(a=Math.floor(a/t)*t),u[a]=n,c=e.charAt(++n);return{indent:a,stops:u}};var r="\t",o=" ",s=1,i=4},"pI+u":function(e,t,n){"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})}},pL8D:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var c,u,l,p=this.options.pedantic,d=t.length+1,h=-1,m=e.now(),f="",v="";++h<d;){if((c=t.charAt(h))!==s&&c!==o){h--;break}f+=c}for(l=0;++h<=d;){if((c=t.charAt(h))!==i){h--;break}f+=c,l++}if(!(l>a)&&l&&(p||t.charAt(h+1)!==i)){for(d=t.length+1,u="";++h<d;){if((c=t.charAt(h))!==s&&c!==o){h--;break}u+=c}if(p||0!==u.length||!c||c===r){if(n)return!0;for(f+=u,u="",v="";++h<d&&(c=t.charAt(h))&&c!==r;)if(c===s||c===o||c===i){for(;c===s||c===o;)u+=c,c=t.charAt(++h);if(p||!v||u||c!==i){for(;c===i;)u+=c,c=t.charAt(++h);for(;c===s||c===o;)u+=c,c=t.charAt(++h);h--}else v+=c}else v+=u+c,u="";return m.column+=f.length,m.offset+=f.length,e(f+=v+u)({type:"heading",depth:l,children:this.tokenizeInline(v,m)})}}};var r="\n",o="\t",s=" ",i="#",a=6},pLKd:function(e,t,n){"use strict";var r=n("Jryd"),o=n("Qu9x");e.exports=function(){var e,t=String(this.file),n={line:1,column:1,offset:0},a=r(n);return 65279===(t=t.replace(i,s)).charCodeAt(0)&&(t=t.slice(1),a.column++,a.offset++),e={type:"root",children:this.tokenizeBlock(t,a),position:{start:n,end:this.eof||r(n)}},this.options.position||o(e,!0),e};var s="\n",i=/\r\n|\r/g},pVYY:function(e,t,n){"use strict";var r=n("ulNQ"),o=n("nfvb");e.exports=o;var s=o.prototype;s.message=function(e,t,n){var o=this.path,s=new r(e,t,n);return o&&(s.name=o+":"+s.name,s.file=o),s.fatal=!1,this.messages.push(s),s},s.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},s.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},"q3z+":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,o=n("+AAq"),s=n("NW+U"),i=n("cDcd"),a=n("NzAu"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;r=i.createElement;var l=function(e){function t(e){this.previewStop=c(this.previewStop,this),this.previewStart=c(this.previewStart,this),this.previewInitializing=c(this.previewInitializing,this),this.render=c(this.render,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidMount=c(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.eventId="beatmapsetPanel-"+e.beatmap.beatmapset_id+"-"+osu.uuid(),this.state={preview:"ended",previewDuration:0}}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return $.subscribe("osuAudio:initializing."+this.eventId,this.previewInitializing),$.subscribe("osuAudio:playing."+this.eventId,this.previewStart),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop),$(document).on("turbolinks:before-cache."+this.eventId,this.componentWillUnmount)},t.prototype.componentWillUnmount=function(){return this.previewStop(),$.unsubscribe("."+this.eventId),$(document).off("."+this.eventId)},t.prototype.hideImage=function(e){return e.currentTarget.style.display="none"},t.prototype.render=function(){var e,t,n,i,c,u,l,p,d,h,m,f,v,b,y;return n=this.props.beatmap,(y=_.includes(["wip","pending","graveyard"],n.status))&&(c=osu.formatNumber(n.hype.current),v=osu.formatNumber(n.hype.required),u=osu.formatNumber(n.nominations.current),b=osu.formatNumber(n.nominations.required)),m=osu.formatNumber(n.play_count),p=osu.formatNumber(n.favourite_count),i=n.beatmaps.length>10,d=BeatmapHelper.group(n.beatmaps),l=function(){var n,s,c,u;for(u=[],n=0,s=(c=BeatmapHelper.modes).length;n<s;n++)h=c[n],null!=(t=d[h])&&(i?u.push([r(o.a,{key:h+"-icon",beatmap:_.last(t),showTitle:!1}),Object(a.span)({className:"beatmapset-panel__difficulty-count",key:h+"-count"},t.length)]):u.push(function(){var n,s,i;for(i=[],n=0,s=t.length;n<s;n++)e=t[n],i.push(Object(a.div)({className:"beatmapset-panel__difficulty-icon",key:e.id},r(o.a,{beatmap:e})));return i}()));return u}(),Object(a.div)({className:"beatmapset-panel"+("ended"!==this.state.preview?" beatmapset-panel--previewing":"")},Object(a.div)({className:"beatmapset-panel__panel"},Object(a.a)({href:laroute.route("beatmapsets.show",{beatmapset:n.id}),className:"beatmapset-panel__header"},r(s.a,{className:"beatmapset-panel__image",onError:this.hideImage,src:n.covers.card}),Object(a.div)({className:"beatmapset-panel__image-overlay"}),Object(a.div)({className:"beatmapset-panel__status-container"},n.video?Object(a.div)({className:"beatmapset-panel__extra-icon"},Object(a.i)({className:"fas fa-film fa-fw"})):void 0,n.storyboard?Object(a.div)({className:"beatmapset-panel__extra-icon"},Object(a.i)({className:"fas fa-image fa-fw"})):void 0,Object(a.div)({className:"beatmapset-status"},osu.trans("beatmapsets.show.status."+n.status))),Object(a.div)({className:"beatmapset-panel__title-artist-box"},Object(a.div)({className:"u-ellipsis-overflow beatmapset-panel__header-text beatmapset-panel__header-text--title"},n.title),Object(a.div)({className:"beatmapset-panel__header-text"},n.artist)),Object(a.div)({className:"beatmapset-panel__counts-box"},y?Object(a.div)(null,Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.hype.required_text",{current:c,required:v})},Object(a.span)({className:"beatmapset-panel__count-number"},c),Object(a.i)({className:"fas fa-bullhorn fa-fw"})),Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.nominations.required_text",{current:u,required:b})},Object(a.span)({className:"beatmapset-panel__count-number"},u),Object(a.i)({className:"fas fa-thumbs-up fa-fw"}))):Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.panel.playcount",{count:m})},Object(a.span)({className:"beatmapset-panel__count-number"},m),Object(a.i)({className:"fas fa-fw fa-play-circle"})),Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.panel.favourites",{count:p})},Object(a.span)({className:"beatmapset-panel__count-number"},p),Object(a.i)({className:"fas fa-fw fa-heart"}))),Object(a.div)({className:"beatmapset-panel__preview-bar",style:{transitionDuration:this.state.previewDuration+"s",width:""+("playing"===this.state.preview?"100%":0)}})),Object(a.div)({className:"beatmapset-panel__content"},Object(a.div)({className:"beatmapset-panel__row"},Object(a.div)({className:"beatmapset-panel__mapper-source-box"},Object(a.div)({className:"u-ellipsis-overflow",dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.mapped_by",{mapper:laroute.link_to_route("users.show",n.creator,{user:n.user_id},{class:"js-usercard","data-user-id":n.user_id})})}}),Object(a.div)({className:"u-ellipsis-overflow"},"graveyard"===(f=n.status)||"wip"===f||"pending"===f?Object(a.span)({dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.updated_timeago",{timeago:osu.timeago(n.last_updated)})}}):n.source)),Object(a.div)({className:"beatmapset-panel__icons-box"},("undefined"!=typeof currentUser&&null!==currentUser?currentUser.id:void 0)?n.availability.download_disabled?Object(a.div)({title:osu.trans("beatmapsets.availability.disabled"),className:"beatmapset-panel__icon beatmapset-panel__icon--disabled"},Object(a.i)({className:"fas fa-lg fa-download"})):Object(a.a)({href:laroute.route("beatmapsets.download",{beatmapset:n.id}),title:osu.trans("beatmapsets.show.details.download._"),className:"beatmapset-panel__icon js-beatmapset-download-link","data-turbolinks":"false"},Object(a.i)({className:"fas fa-lg fa-download"})):void 0)),Object(a.div)({className:"beatmapset-panel__difficulties"},l))),Object(a.a)({href:"#",className:"beatmapset-panel__play js-audio--play","data-audio-url":n.preview_url},Object(a.i)({className:"fas fa-"+("ended"===this.state.preview?"play":"stop")})),Object(a.div)({className:"beatmapset-panel__shadow"}))},t.prototype.previewInitializing=function(e,t){var n;return n=t.url,t.player,n!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"initializing",previewDuration:0})},t.prototype.previewStart=function(e,t){var n,r;return r=t.url,n=t.player,r!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"playing",previewDuration:n.duration})},t.prototype.previewStop=function(){if("ended"!==this.state.preview)return this.setState({preview:"ended",previewDuration:0})},t}(i.PureComponent)},q7YD:function(e,t,n){"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,footnotes:!1,pedantic:!1,blocks:n("UpvM")}},qpPZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd"),o=n("SYfz");class s extends r.Component{render(){let e="header-v4";return this.props.theme&&(e+=` header-v4--${this.props.theme}`),currentUser.is_restricted&&(e+=" header-v4--restricted"),r.createElement("div",{className:e},r.createElement("div",{className:"header-v4__container header-v4__container--main"},r.createElement("div",{className:"header-v4__bg-container"},r.createElement("div",{className:"header-v4__bg",style:{backgroundImage:osu.urlPresence(this.props.backgroundImage)}})),this.props.isCoverUpdating&&r.createElement("div",{className:"header-v4__spinner"},r.createElement(o.a,null)),r.createElement("div",{className:"header-v4__content"},this.props.contentPrepend,r.createElement("div",{className:"header-v4__row header-v4__row--title"},r.createElement("div",{className:"header-v4__icon"}),r.createElement("div",{className:"header-v4__title"},r.createElement("span",{className:"header-v4__title-section"},this.props.section),""!==this.props.subSection&&r.createElement("span",{className:"header-v4__title-action"},this.props.subSection)),this.props.titleAppend),this.props.contentAppend)),this.props.links.length>0&&r.createElement("div",{className:"header-v4__container"},r.createElement("div",{className:"header-v4__content"},r.createElement("div",{className:"header-v4__row header-v4__row--bar"},this.renderLinks()))))}renderLinks(){const e=this.props.links.map(e=>{const t=[];return e.active&&t.push("active"),r.createElement("li",{className:"header-nav-v4__item",key:`${e.url}-${e.title}`},r.createElement("a",{className:osu.classWithModifiers("header-nav-v4__link",t),href:e.url,onClick:this.props.onLinkClick},e.title))}),t=this.props.linksBreadcrumb?"ol":"ul",n=[];return n.push(this.props.linksBreadcrumb?"breadcrumb":"list"),r.createElement(t,{className:osu.classWithModifiers("header-nav-v4",n)},e)}}s.defaultProps={links:[],linksBreadcrumb:!1,subSection:""}},qs9r:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},sTr9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("YLtl"),o=n("EaLk"),s=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class i{constructor(e){this.lastMessageId=-1,this.loaded=!1,this.loading=!1,this.messages=Object(o.l)([]),this.metaLoaded=!1,this.moderated=!1,this.name="",this.newChannel=!1,this.type="NEW",this.users=[],this.backlogSize=100,this.updatePresence=e=>{this.name=e.name,this.description=e.description,this.type=e.type,this.icon=e.icon||"/images/layout/chat/channel-default.png",this.lastReadId=e.last_read_id;const t=r.max([this.lastMessageId,e.last_message_id]);this.lastMessageId=null==t?-1:t,this.users=e.users,this.metaLoaded=!0},this.channelId=e}get isUnread(){return null!=this.lastReadId?this.lastMessageId>this.lastReadId:this.lastMessageId>-1}get exists(){return this.channelId>0}get pmTarget(){if("PM"===this.type)return this.users.find(e=>e!==currentUser.id)}static fromJSON(e){const t=Object.create(i.prototype);return Object.assign(t,{channelId:e.channel_id,name:e.name,type:e.type,description:e.description,icon:e.icon,lastMessageId:e.last_message_id,lastReadId:e.last_read_id})}static newPM(e){const t=new i(-1);return t.newChannel=!0,t.type="PM",t.name=e.username,t.icon=e.avatarUrl,t.users=[currentUser.id,e.id],t}addMessages(e,t=!1){Object(o.p)(()=>{this.messages=this.messages.concat(e),t||this.resortMessages(),this.messages.length>this.backlogSize&&(this.messages=r.drop(this.messages,this.messages.length-this.backlogSize));const n=r([].concat(e)).filter(e=>"number"==typeof e.messageId).maxBy("messageId");let o;(o=null!=n&&"number"==typeof n.messageId?n.messageId:-1)>this.lastMessageId&&(this.lastMessageId=o)})}resortMessages(){let e=this.messages.slice();e=r.sortBy(e,"timestamp"),e=r.uniqBy(e,"messageId"),this.messages=e}unload(){this.messages=Object(o.l)([])}updateMessage(e){const t=r.find(this.messages,{uuid:e.uuid});t&&(t.update(e),t.errored?t.messageId=t.uuid:t.persist())}}s([o.l],i.prototype,"channelId",void 0),s([o.l],i.prototype,"description",void 0),s([o.l],i.prototype,"icon",void 0),s([o.l],i.prototype,"lastMessageId",void 0),s([o.l],i.prototype,"lastReadId",void 0),s([o.l],i.prototype,"loaded",void 0),s([o.l],i.prototype,"loading",void 0),s([o.l],i.prototype,"messages",void 0),s([o.l],i.prototype,"metaLoaded",void 0),s([o.l],i.prototype,"moderated",void 0),s([o.l],i.prototype,"name",void 0),s([o.l],i.prototype,"newChannel",void 0),s([o.l],i.prototype,"type",void 0),s([o.l],i.prototype,"users",void 0),s([o.e],i.prototype,"isUnread",null),s([o.e],i.prototype,"exists",null),s([o.e],i.prototype,"pmTarget",null),s([o.d],i.prototype,"addMessages",null),s([o.d],i.prototype,"resortMessages",null),s([o.d],i.prototype,"unload",null),s([o.d],i.prototype,"updateMessage",null),s([o.d],i.prototype,"updatePresence",void 0)},srn7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("EaLk"),o=function(e,t,n,r){var o,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};class s{constructor(e){this.avatarUrl="/images/layout/avatar-guest.png",this.countryCode="XX",this.isActive=!1,this.isBot=!1,this.isOnline=!1,this.isSupporter=!1,this.loaded=!1,this.pmFriendsOnly=!1,this.profileColour="",this.username="",this.id=e}static fromJSON(e){const t=Object.create(s.prototype);return Object.assign(t,{avatarUrl:e.avatar_url,countryCode:e.country_code,id:e.id,isActive:e.is_active,isBot:e.is_bot,isOnline:e.is_online,isSupporter:e.is_supporter,loaded:!0,pmFriendsOnly:e.pm_friends_only,profileColour:e.profile_colour,username:e.username})}is(e){return e.id===this.id}load(){}toJSON(){return{avatar_url:this.avatarUrl,country_code:this.countryCode,id:this.id,is_active:this.isActive,is_bot:this.isBot,is_online:this.isOnline,is_supporter:this.isSupporter,pm_friends_only:this.pmFriendsOnly,profile_colour:this.profileColour,username:this.username}}updateFromJSON(e){this.username=e.username,this.avatarUrl=e.avatar_url,this.profileColour=e.profile_colour,this.countryCode=e.country_code,this.isSupporter=e.is_supporter,this.isActive=e.is_active,this.isBot=e.is_bot,this.isOnline=e.is_online,this.pmFriendsOnly=e.pm_friends_only,this.loaded=!0}}o([r.l],s.prototype,"avatarUrl",void 0),o([r.l],s.prototype,"countryCode",void 0),o([r.l],s.prototype,"id",void 0),o([r.l],s.prototype,"isActive",void 0),o([r.l],s.prototype,"isBot",void 0),o([r.l],s.prototype,"isOnline",void 0),o([r.l],s.prototype,"isSupporter",void 0),o([r.l],s.prototype,"loaded",void 0),o([r.l],s.prototype,"pmFriendsOnly",void 0),o([r.l],s.prototype,"profileColour",void 0),o([r.l],s.prototype,"username",void 0),o([r.d],s.prototype,"updateFromJSON",null)},tmLN:function(e,t,n){"use strict";var r=n("DGoX"),o=n("BhdQ");e.exports=function(e){return r(e)||o(e)}},txhI:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("cDcd"),o=n("NzAu"),s=n("faye"),i=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,c=function(e){function t(){this.renderPortalContent=i(this.renderPortalContent,this),this.render=i(this.render,this),this.hideModal=i(this.hideModal,this),this.handleMouseUp=i(this.handleMouseUp,this),this.handleMouseDown=i(this.handleMouseDown,this),this.handleEsc=i(this.handleEsc,this),this.componentWillUnmount=i(this.componentWillUnmount,this),this.componentDidUpdate=i(this.componentDidUpdate,this),this.componentDidMount=i(this.componentDidMount,this),this.ref=Object(r.createRef)()}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.isOpen=function(){return document.body.classList.contains("js-react-modal---is-open")},t.prototype.close=function(){return document.body.classList.remove("js-react-modal---is-open"),Blackout.toggle(!1,.5)},t.prototype.componentDidMount=function(){var e;return document.body.appendChild(this.portal),document.addEventListener("keydown",this.handleEsc),$(document).on("turbolinks:before-cache.modal",(e=this,function(){return e.close(),document.body.removeChild(e.portal)})),this.props.visible?this.open():this.close()},t.prototype.componentDidUpdate=function(e){if(e.visible!==this.props.visible)return this.props.visible?this.open():this.close()},t.prototype.componentWillUnmount=function(){return this.close(),document.removeEventListener("keydown",this.handleEsc),$(document).off(".modal")},t.prototype.handleEsc=function(e){var t;if(27===e.keyCode)return"function"==typeof(t=this.props).onClose?t.onClose():void 0},t.prototype.handleMouseDown=function(e){return this.clickStartTarget=e.target},t.prototype.handleMouseUp=function(e){return this.clickEndTarget=e.target},t.prototype.hideModal=function(e){var t;if(0===e.button&&e.target===this.ref.current&&this.clickEndTarget===this.clickStartTarget)return"function"==typeof(t=this.props).onClose?t.onClose():void 0},t.prototype.open=function(){return document.body.classList.add("js-react-modal---is-open"),Blackout.toggle(!0,.5)},t.prototype.render=function(){return null==this.portal&&(this.portal=document.createElement("div")),Object(s.createPortal)(this.renderPortalContent(),this.portal)},t.prototype.renderPortalContent=function(){return Object(o.div)({className:"js-react-modal",onClick:this.hideModal,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.ref},this.props.children)},t}(r.PureComponent)},uLnF:function(e,t,n){"use strict";e.exports=function(e,t){var n,o=r.length,s=-1,i=-1;if(!this.options.gfm)return-1;for(;++s<o;)-1!==(n=e.indexOf(r[s],t))&&(n<i||-1===i)&&(i=n);return i};var r=["https://","http://","mailto:"]},uNUE:function(e,t,n){"use strict";e.exports=function(e,t,n){var r=[];"function"==typeof t&&(n=t,t=null),function e(o){var s;return t&&o.type!==t||(s=n(o,r.concat())),o.children&&!1!==s?function(t,n){var o,s=t.length,i=-1;for(r.push(n);++i<s;)if((o=t[i])&&!1===e(o))return!1;return r.pop(),!0}(o.children,o):s}(e)}},ulNQ:function(e,t,n){"use strict";var r=n("lNvx");function o(){}e.exports=i,o.prototype=Error.prototype,i.prototype=new o;var s=i.prototype;function i(e,t,n){var o,s,i;"string"==typeof t&&(n=t,t=null),o=function(e){var t,n=[null,null];return"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1))),n}(n),s=r(t)||"1:1",i={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(i=t,t=t.start):i.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=s,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=i,this.source=o[0],this.ruleId=o[1]}s.file="",s.name="",s.reason="",s.message="",s.stack="",s.fatal=null,s.column=null,s.line=null},v33t:function(e,t,n){"use strict";var r=n("AMMU"),o=n("XVa7");e.exports=b,b.locator=o;var s="\n",i="!",a='"',c="'",u="(",l=")",p="<",d=">",h="[",m="\\",f="]",v="`";function b(e,t,n){var o,b,y,g,_,w,O,S,j,E,k,x,N,T,A,P,C,D,I="",M=0,U=t.charAt(0),R=this.options.pedantic,H=this.options.commonmark,B=this.options.gfm;if(U===i&&(S=!0,I=U,U=t.charAt(++M)),U===h&&(S||!this.inLink)){for(I+=U,T="",M++,k=t.length,N=0,(P=e.now()).column+=M,P.offset+=M;M<k;){if(w=U=t.charAt(M),U===v){for(b=1;t.charAt(M+1)===v;)w+=U,M++,b++;y?b>=y&&(y=0):y=b}else if(U===m)M++,w+=t.charAt(M);else if(y&&!B||U!==h){if((!y||B)&&U===f){if(!N){if(!R)for(;M<k&&(U=t.charAt(M+1),r(U));)w+=U,M++;if(t.charAt(M+1)!==u)return;w+=u,o=!0,M++;break}N--}}else N++;T+=w,w="",M++}if(o){for(j=T,I+=T+w,M++;M<k&&(U=t.charAt(M),r(U));)I+=U,M++;if(T="",g=I,(U=t.charAt(M))===p){for(M++,g+=p;M<k&&(U=t.charAt(M))!==d;){if(H&&U===s)return;T+=U,M++}if(t.charAt(M)!==d)return;I+=p+T+d,A=T,M++}else{for(U=null,w="";M<k&&(U=t.charAt(M),!w||!(U===a||U===c||H&&U===u));){if(r(U)){if(!R)break;w+=U}else{if(U===u)N++;else if(U===l){if(0===N)break;N--}T+=w,w="",U===m&&(T+=m,U=t.charAt(++M)),T+=U}M++}A=T,M=(I+=T).length}for(T="";M<k&&(U=t.charAt(M),r(U));)T+=U,M++;if(U=t.charAt(M),I+=T,T&&(U===a||U===c||H&&U===u))if(M++,T="",E=U===u?l:U,_=I+=U,H){for(;M<k&&(U=t.charAt(M))!==E;)U===m&&(T+=m,U=t.charAt(++M)),M++,T+=U;if((U=t.charAt(M))!==E)return;for(x=T,I+=T+U,M++;M<k&&(U=t.charAt(M),r(U));)I+=U,M++}else for(w="";M<k;){if((U=t.charAt(M))===E)O&&(T+=E+w,w=""),O=!0;else if(O){if(U===l){I+=T+E+w,x=T;break}r(U)?w+=U:(T+=E+w+U,w="",O=!1)}else T+=U;M++}if(t.charAt(M)===l)return!!n||(I+=l,A=this.decode.raw(this.unescape(A),e(g).test().end,{nonTerminated:!1}),x&&(_=e(_).test().end,x=this.decode.raw(this.unescape(x),_)),D={type:S?"image":"link",title:x||null,url:A},S?D.alt=this.decode.raw(this.unescape(j),P)||null:(C=this.enterLink(),D.children=this.tokenizeInline(j,P),C()),e(I)(D))}}}},vt1Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,o=n("SYsv"),s=n("cDcd"),i=n("NzAu"),a=n("R6iF"),c=n("mk7q"),u=n("+FrL"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;r=s.createElement;var d=function(e){function t(){return this.render=l(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n,s;return Object(i.div)({className:"page-extra"},r(o.a,{name:this.props.name,withEdit:this.props.withEdit}),Object(i.div)({className:"kudosu-box"},r(u.a,{modifiers:["kudosu"],label:osu.trans("users.show.extra.kudosu.total"),value:osu.formatNumber(this.props.user.kudosu.total),description:r(c.a,{mappings:{":link":Object(i.a)({href:laroute.route("wiki.show",{page:"Kudosu"}),key:"link"},osu.trans("users.show.extra.kudosu.total_info.link"))},pattern:osu.trans("users.show.extra.kudosu.total_info._")})}),r(u.a,{modifiers:["kudosu"],label:osu.trans("users.show.extra.kudosu.available"),value:osu.formatNumber(this.props.user.kudosu.available),description:osu.trans("users.show.extra.kudosu.available_info")})),(null!=(s=this.props.recentlyReceivedKudosu)?s.length:void 0)?Object(i.ul)({className:"profile-extra-entries profile-extra-entries--kudosu"},function(){var r,o,s,a,c,u,l,p;for(p=[],r=0,o=(s=this.props.recentlyReceivedKudosu).length;r<o;r++)null!=(t=s[r]).id&&(e=null!=t.giver?osu.link(t.giver.url,t.giver.username,{classNames:["profile-extra-entries__link profile-extra-entries__link--kudosu"]}):_.escape(osu.trans("users.deleted")),n=null!=(null!=(a=t.post)?a.url:void 0)?osu.link(null!=(c=t.post)?c.url:void 0,null!=(u=t.post)?u.title:void 0,{classNames:["profile-extra-entries__link profile-extra-entries__link--kudosu"]}):null!=(l=t.post)?l.title:void 0,p.push(Object(i.li)({key:"kudosu-"+t.id,className:"profile-extra-entries__item"},Object(i.div)({className:"profile-extra-entries__detail"},Object(i.div)({className:"profile-extra-entries__text",dangerouslySetInnerHTML:{__html:osu.trans("users.show.extra.kudosu.entry."+t.model+"."+t.action,{amount:"<strong class='profile-extra-entries__kudosu-amount'>"+osu.trans("users.show.extra.kudosu.entry.amount",{amount:Math.abs(t.amount)})+"</strong>",giver:e,post:n})}})),Object(i.div)({className:"profile-extra-entries__time",dangerouslySetInnerHTML:{__html:osu.timeago(t.created_at)}}))));return p}.call(this),Object(i.li)({className:"profile-extra-entries__item"},r(a.a,{modifiers:["profile-page","t-greyseafoam-dark"],event:"profile:showMore",hasMore:this.props.pagination.recentlyReceivedKudosu.hasMore,loading:this.props.pagination.recentlyReceivedKudosu.loading,data:{name:"recentlyReceivedKudosu",url:laroute.route("users.kudosu",{user:this.props.user.id})}}))):Object(i.div)({className:"profile-extra-entries profile-extra-entries--kudosu"},osu.trans("users.show.extra.kudosu.entry.empty")))},t}(s.Component)},w9NC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,o,s=n("EaLk"),i=n("cF9b"),a=n("f4vq"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=a.a.dataStore.uiState,r=React.createElement;var p=function(e){function t(e){var n,r;this.updateSort=c(this.updateSort,this),this.toggleFollow=c(this.toggleFollow,this),this.toggleShowDeleted=c(this.toggleShowDeleted,this),this.saveState=c(this.saveState,this),this.jsonStorageId=c(this.jsonStorageId,this),this.handleCommentUpdated=c(this.handleCommentUpdated,this),this.handleCommentsNew=c(this.handleCommentsNew,this),this.handleCommentsAdded=c(this.handleCommentsAdded,this),this.render=c(this.render,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidMount=c(this.componentDidMount,this),t.__super__.constructor.call(this,e),null!=e.commentableType&&null!=e.commentableId&&(null!=(n=osu.parseJson("json-comments-"+e.commentableType+"-"+e.commentableId,!0))&&(a.a.dataStore.updateWithCommentBundleJSON(n),o.initializeWithCommentBundleJSON(n)),null!=(r=osu.parseJson(this.jsonStorageId()))&&o.importCommentsUIState(r)),this.id="comments-"+osu.uuid()}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,React.PureComponent),t.prototype.SORTS=["new","old","top"],t.prototype.componentDidMount=function(){return $.subscribe("comments:added."+this.id,this.handleCommentsAdded),$.subscribe("comments:new."+this.id,this.handleCommentsNew),$.subscribe("comments:sort."+this.id,this.updateSort),$.subscribe("comments:toggle-show-deleted."+this.id,this.toggleShowDeleted),$.subscribe("comments:toggle-follow."+this.id,this.toggleFollow),$.subscribe("comment:updated."+this.id,this.handleCommentUpdated),$(document).on("turbolinks:before-cache."+this.id,this.saveState)},t.prototype.componentWillUnmount=function(){return $.unsubscribe("."+this.id)},t.prototype.render=function(){return r(i.a,null,(e=this,function(){var t;return(t=_.assign({},e.props.componentProps)).commentableId=e.props.commentableId,t.commentableType=e.props.commentableType,r(e.props.component,t)}));var e},t.prototype.handleCommentsAdded=function(e,t){return Object(s.n)((function(){return a.a.dataStore.updateWithCommentBundleJSON(t),o.updateFromCommentsAdded(t)}))},t.prototype.handleCommentsNew=function(e,t){return Object(s.n)((function(){return a.a.dataStore.updateWithCommentBundleJSON(t),o.updateFromCommentsNew(t)}))},t.prototype.handleCommentUpdated=function(e,t){return Object(s.n)((function(){return a.a.dataStore.updateWithCommentBundleJSON(t)}))},t.prototype.jsonStorageId=function(){return"json-comments-manager-state-"+this.props.commentableType+"-"+this.props.commentableId},t.prototype.saveState=function(){if(null!=this.props.commentableType&&null!=this.props.commentableId)return osu.storeJson(this.jsonStorageId(),o.exportCommentsUIState())},t.prototype.toggleShowDeleted=function(){return Object(s.n)((function(){return o.comments.isShowDeleted=!o.comments.isShowDeleted}))},t.prototype.toggleFollow=function(){var e;if(e={follow:{notifiable_type:this.props.commentableType,notifiable_id:this.props.commentableId,subtype:"comment"}},!o.comments.loadingFollow)return o.comments.loadingFollow=!0,$.ajax(laroute.route("follows.store"),{data:e,dataType:"json",method:o.comments.userFollow?"DELETE":"POST"}).always((function(){return o.comments.loadingFollow=!1})).done((function(){return o.comments.userFollow=!o.comments.userFollow})).fail((function(e,t){if("abort"!==t)return osu.ajaxError(e)}))},t.prototype.updateSort=function(e,t){var n,r;if(r=t.sort,this.props.commentableType&&this.props.commentableId&&!(l.call(this.SORTS,r)<0))return Object(s.n)((function(){return o.comments.loadingSort=r})),n={commentable_type:this.props.commentableType,commentable_id:this.props.commentableId,sort:r,parent_id:0},$.ajax(laroute.route("comments.index"),{data:n,dataType:"json"}).done((function(e){return $.ajax(laroute.route("account.options"),{method:"PUT",data:{user_profile_customization:{comments_sort:r}}}),Object(s.n)((function(){return a.a.dataStore.commentStore.flushStore(),a.a.dataStore.updateWithCommentBundleJSON(e),o.initializeWithCommentBundleJSON(e)}))})).always((function(){return Object(s.n)((function(){return o.comments.loadingSort=null}))}))},t}()},wOcG:function(e,t,n){"use strict";var r=n("ZXkc");e.exports=i,i.locator=r;var o="\n",s="\\";function i(e,t,n){var r,i;if(t.charAt(0)===s&&(r=t.charAt(1),-1!==this.escape.indexOf(r)))return!!n||(i=r===o?{type:"break"}:{type:"text",value:r},e(s+r)(i))}},wke6:function(e,t,n){"use strict";t.HtmlParser="undefined"==typeof Symbol?"__RMD_HTML_PARSER__":Symbol("__RMD_HTML_PARSER__")},wlJd:function(e,t,n){"use strict";var r=n("AMMU"),o=n("XVa7"),s=n("mPRR");e.exports=y,y.locator=o;var i="link",a="image",c="footnote",u="shortcut",l="collapsed",p="full",d=" ",h="!",m="[",f="\\",v="]",b="^";function y(e,t,n){var o,y,g,_,w,O,S,j,E=this.options.commonmark,k=this.options.footnotes,x=t.charAt(0),N=0,T=t.length,A="",P="",C=i,D=u;if(x===h&&(C=a,P=x,x=t.charAt(++N)),x===m){if(N++,P+=x,O="",k&&t.charAt(N)===b){if(C===a)return;P+=b,N++,C=c}for(j=0;N<T;){if((x=t.charAt(N))===m)S=!0,j++;else if(x===v){if(!j)break;j--}x===f&&(O+=f,x=t.charAt(++N)),O+=x,N++}if(A=O,o=O,(x=t.charAt(N))===v){if(N++,A+=x,O="",!E)for(;N<T&&(x=t.charAt(N),r(x));)O+=x,N++;if(x=t.charAt(N),C===c||x!==m||k&&t.charAt(N+1)===b){if(!o)return;y=o}else{for(y="",O+=x,N++;N<T&&(x=t.charAt(N))!==m&&x!==v;)x===f&&(y+=f,x=t.charAt(++N)),y+=x,N++;(x=t.charAt(N))===v?(D=y?p:l,O+=y+x,N++):y="",A+=O,O=""}if(D===p||!S)return A=P+A,C===i&&this.inLink?null:!!n||(C===c&&-1!==o.indexOf(d)?e(A)({type:c,children:this.tokenizeInline(o,e.now())}):((g=e.now()).column+=P.length,g.offset+=P.length,_={type:C+"Reference",identifier:s(y=D===p?y:o),label:y},C!==i&&C!==a||(_.referenceType=D),C===i?(w=this.enterLink(),_.children=this.tokenizeInline(o,g),w()):C===a&&(_.alt=this.decode.raw(this.unescape(o),g)||null),e(A)(_)))}}}},yXVM:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},yzy7:function(e,t,n){"use strict";var r=n("/pT6");e.exports=a,a.locator=r;var o=10,s=32,i=96;function a(e,t,n){for(var r,a,c,u,l,p,d=t.length,h=0;h<d&&t.charCodeAt(h)===i;)h++;if(0!==h&&h!==d){for(r=h,l=t.charCodeAt(h);h<d;){if(u=l,l=t.charCodeAt(h+1),u===i){if(void 0===a&&(a=h),c=h+1,l!==i&&c-a===r){p=!0;break}}else void 0!==a&&(a=void 0,c=void 0);h++}if(p){if(n)return!0;if(h=r,d=a,u=t.charCodeAt(h),l=t.charCodeAt(d-1),p=!1,d-h>2&&(u===s||u===o)&&(l===s||l===o)){for(h++,d--;h<d;){if((u=t.charCodeAt(h))!==s&&u!==o){p=!0;break}h++}!0===p&&(r++,a--)}return e(t.slice(0,c))({type:"inlineCode",value:t.slice(r,a)})}}}}});
//# sourceMappingURL=commons.js.map