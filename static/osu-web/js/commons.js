!function(e){function t(t){for(var r,i,a=t[0],c=t[1],u=t[2],p=0,d=[];p<a.length;p++)i=a[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;n()}({"+AAq":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("YLtl"),s=n("cDcd");const o=({beatmap:e,overrideVersion:t,showTitle:n=!0,modifier:o})=>{const i=t||BeatmapHelper.getDiffRating(e.difficulty_rating),a=n&&null==t,c=e.convert?"osu":e.mode;let u=`beatmap-icon beatmap-icon--${i} beatmap-icon--${o}`;return a&&(u+=" beatmap-icon--with-hover js-beatmap-tooltip"),s.createElement("div",{className:u,"data-beatmap-title":a?e.version:null,"data-stars":r.round(e.difficulty_rating,2),"data-difficulty":i},s.createElement("i",{className:`fal fa-extra-mode-${c}`}))}},"+FrL":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("cDcd");var r,s=n("NzAu");r="value-display";var o=function(e){var t,n,o,i;return n=e.label,i=e.value,t=e.description,o=e.modifiers,Object(s.div)({className:osu.classWithModifiers(r,o)},Object(s.div)({className:r+"__label"},n),Object(s.div)({className:r+"__value"},i),null!=t?Object(s.div)({className:r+"__description"},t):void 0)}},"/cCk":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd");class s extends r.PureComponent{constructor(){super(...arguments),this.eventId=`admin-menu-${osu.uuid()}`}render(){if(null==currentUser.id||!currentUser.is_admin)return null;const e=this.props.items.map(e=>r.createElement(e.component,Object.assign({className:"admin-menu-item",key:`${e.icon}-${e.text}`},e.props),r.createElement("span",{className:"admin-menu-item__content"},r.createElement("span",{className:"admin-menu-item__label admin-menu-item__label--icon"},r.createElement("span",{className:e.icon})),r.createElement("span",{className:"admin-menu-item__label admin-menu-item__label--text"},e.text))));return r.createElement("div",{className:"admin-menu"},r.createElement("button",{className:"admin-menu__button js-menu","data-menu-target":`admin-menu-${this.eventId}`},r.createElement("span",{className:"fas fa-angle-up"}),r.createElement("span",{className:"admin-menu__button-icon fas fa-tools"})),r.createElement("div",{className:"admin-menu__menu js-menu","data-menu-id":`admin-menu-${this.eventId}`,"data-visibility":"hidden"},e))}}},"/pT6":function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},"0EjP":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.sendOnChange=o(this.sendOnChange,this),this._save=o(this._save,this),this._reset=o(this._reset,this),this._cancel=o(this._cancel,this),this.onKeyDown=o(this.onKeyDown,this),this.setSizeSelect=o(this.setSizeSelect,this),this.setBody=o(this.setBody,this),this.toolbarButton=o(this.toolbarButton,this),this.actionButton=o(this.actionButton,this),this.render=o(this.render,this),this.componentDidMount=o(this.componentDidMount,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return this.sizeSelect.value="",this.body.selectionEnd=0,this.body.focus()},t.prototype.render=function(){var e,t,n,r,o;for(e="post-editor",t=0,n=(o=null!=(r=this.props.modifiers)?r:[]).length;t<n;t++)e+=" post-editor--"+o[t];return Object(s.form)({className:e},Object(s.textarea)({className:"post-editor__textarea",name:"body",placeholder:this.props.placeholder,defaultValue:this.props.rawValue,disabled:this.props.disabled,onKeyDown:this.onKeyDown,ref:this.setBody}),Object(s.div)({className:"post-editor__footer"},Object(s.div)({className:"post-editor-footer"},Object(s.div)({className:"post-editor-footer__col post-editor-footer__col--toolbar"},Object(s.div)({className:"post-box-toolbar"},this.toolbarButton("bold",Object(s.i)({className:"fas fa-bold"})),this.toolbarButton("italic",Object(s.i)({className:"fas fa-italic"})),this.toolbarButton("strikethrough",Object(s.i)({className:"fas fa-strikethrough"})),this.toolbarButton("heading",Object(s.i)({className:"fas fa-heading"})),this.toolbarButton("link",Object(s.i)({className:"fas fa-link"})),this.toolbarButton("spoilerbox",Object(s.i)({className:"fas fa-barcode"})),this.toolbarButton("list-numbered",Object(s.i)({className:"fas fa-list-ol"})),this.toolbarButton("list",Object(s.i)({className:"fas fa-list"})),this.toolbarButton("image",Object(s.i)({className:"fas fa-image"})),Object(s.label)({className:"bbcode-size-select",title:osu.trans("bbcode.size._")},Object(s.span)({className:"bbcode-size-select__label"},osu.trans("bbcode.size._")),Object(s.i)({className:"fas fa-chevron-down"}),Object(s.select)({className:"bbcode-size-select__select js-bbcode-btn--size",disabled:this.props.disabled,ref:this.setSizeSelect},Object(s.option)({value:"50"},osu.trans("bbcode.size.tiny")),Object(s.option)({value:"85"},osu.trans("bbcode.size.small")),Object(s.option)({value:"100"},osu.trans("bbcode.size.normal")),Object(s.option)({value:"150"},osu.trans("bbcode.size.large")))))),Object(s.div)({className:"post-editor-footer__col post-editor-footer__col--actions"},this.actionButton(this._cancel,osu.trans("common.buttons.cancel")),this.actionButton(this._reset,osu.trans("common.buttons.reset")),this.actionButton(this._save,osu.trans("common.buttons.save"))))))},t.prototype.actionButton=function(e,t){return Object(s.button)({className:"btn-osu btn-osu--post-editor btn-osu-default",disabled:this.props.disabled,type:"button",onClick:e},t)},t.prototype.toolbarButton=function(e,t){return Object(s.button)({className:"btn-circle btn-circle--bbcode js-bbcode-btn--"+e,disabled:this.props.disabled,title:osu.trans("bbcode."+_.snakeCase(e)),type:"button"},Object(s.span)({className:"btn-circle__content"},t))},t.prototype.setBody=function(e){return this.body=e},t.prototype.setSizeSelect=function(e){return this.sizeSelect=e},t.prototype.onKeyDown=function(e){return 27===e.keyCode&&this._cancel()},t.prototype._cancel=function(e){if(this.body.value===this.props.rawValue||confirm(osu.trans("common.confirmation_unsaved")))return this.body.value=this.props.rawValue,this.sendOnChange({event:e,type:"cancel"})},t.prototype._reset=function(e){return this.body.value=this.props.rawValue,this.sendOnChange({event:e,type:"reset"}),this.body.focus()},t.prototype._save=function(e){return this.sendOnChange({event:e,type:"save"})},t.prototype.sendOnChange=function(e){var t,n,r;return n=e.event,r=e.type,"function"==typeof(t=this.props).onChange?t.onChange({event:n,type:r,value:this.body.value,hasChanged:this.body.value!==this.props.rawValue}):void 0},t}(r.Component)},"0KrW":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,a=function(e){function t(){return this.switchMode=o(this.switchMode,this),this.count=o(this.count,this),this.render=o(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n,r,o;return Object(s.div)({className:"game-mode game-mode--beatmapsets"},Object(s.ul)({className:"game-mode__items"},function(){var i,a,c,u,l,p;for(p=[],a=0,c=(u=BeatmapHelper.modes).length;a<c;a++)o=u[a],n=!(this.props.enableAll||null!=this.props.beatmaps[o]),e=o===this.props.currentMode,r="game-mode-link",e&&(r+=" game-mode-link--active"),n&&(r+=" game-mode-link--disabled"),t=this.count(o),p.push(Object(s.li)({className:"game-mode__item",key:o},Object(s.a)({className:r,onClick:this.switchMode,href:null!=(l="function"==typeof(i=this.props).hrefFunc?i.hrefFunc(o):void 0)?l:"#","data-mode":o,"data-disabled":n},osu.trans("beatmaps.mode."+o),null!=t?Object(s.span)({className:"game-mode-link__badge"},t):void 0)));return p}.call(this)))},t.prototype.count=function(e){var t,n;return null!=(null!=(n=this.props.counts)?n[e]:void 0)?this.props.counts[e]:this.props.showCounts&&(t=Number(_.sumBy(this.props.beatmaps[e],(function(e){return!e.convert}))))>0?t:void 0},t.prototype.switchMode=function(e){var t,n;if(e.preventDefault(),t=(n=e.currentTarget).dataset.mode,this.props.currentMode!==t&&null!=t&&"true"!==n.dataset.disabled)return $.publish("playmode:set",{mode:t})},t}(r.Component)},"0O0h":function(e,t,n){"use strict";var r=["http","https","mailto","tel"];e.exports=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var s=t.indexOf(":");if(-1===s)return t;for(var o=r.length,i=-1;++i<o;){var a=r[i];if(s===a.length&&t.slice(0,a.length).toLowerCase()===a)return t}return-1!==(i=t.indexOf("?"))&&s>i?t:-1!==(i=t.indexOf("#"))&&s>i?t:"javascript:void(0)"}},"0h6b":function(e,t,n){"use strict";n.r(t);var r=n("YLtl"),s={namedRoutes:{"admin.beatmapsets.covers":{uri:"admin/beatmapsets/{beatmapset}/covers",methods:["GET","HEAD"],domain:null},"admin.beatmapsets.covers.regenerate":{uri:"admin/beatmapsets/{beatmapset}/covers/regenerate",methods:["POST"],domain:null},"admin.beatmapsets.covers.remove":{uri:"admin/beatmapsets/{beatmapset}/covers/remove",methods:["POST"],domain:null},"admin.beatmapsets.show":{uri:"admin/beatmapsets/{beatmapset}",methods:["GET","HEAD"],domain:null},"admin.beatmapsets.update":{uri:"admin/beatmapsets/{beatmapset}",methods:["PUT","PATCH"],domain:null},"admin.contests.get-zip":{uri:"admin/contests/{contest}/zip",methods:["POST"],domain:null},"admin.contests.index":{uri:"admin/contests",methods:["GET","HEAD"],domain:null},"admin.contests.show":{uri:"admin/contests/{contest}",methods:["GET","HEAD"],domain:null},"admin.user-contest-entries.destroy":{uri:"admin/user-contest-entries/{user_contest_entry}",methods:["DELETE"],domain:null},"admin.user-contest-entries.restore":{uri:"admin/user-contest-entries/{user_contest_entry}/restore",methods:["POST"],domain:null},"admin.logs.index":{uri:"admin/logs",methods:["GET","HEAD"],domain:null},"admin.root":{uri:"admin",methods:["GET","HEAD"],domain:null},"admin.forum.forum-covers.index":{uri:"admin/forum/forum-covers",methods:["GET","HEAD"],domain:null},"admin.forum.forum-covers.store":{uri:"admin/forum/forum-covers",methods:["POST"],domain:null},"admin.forum.forum-covers.update":{uri:"admin/forum/forum-covers/{forum_cover}",methods:["PUT","PATCH"],domain:null},"admin.store.addresses.update":{uri:"admin/store/addresses/{address}",methods:["PUT","PATCH"],domain:null},"admin.store.orders.ship":{uri:"admin/store/orders/ship",methods:["POST"],domain:null},"admin.store.orders.index":{uri:"admin/store/orders",methods:["GET","HEAD"],domain:null},"admin.store.orders.show":{uri:"admin/store/orders/{order}",methods:["GET","HEAD"],domain:null},"admin.store.orders.update":{uri:"admin/store/orders/{order}",methods:["PUT","PATCH"],domain:null},"admin.store.orders.items.update":{uri:"admin/store/orders/{order}/items/{item}",methods:["PUT","PATCH"],domain:null},"admin.store.redirect:admin.store.orders.index":{uri:"admin/store",methods:["GET","HEAD"],domain:null},"artists.index":{uri:"beatmaps/artists",methods:["GET","HEAD"],domain:null},"artists.show":{uri:"beatmaps/artists/{artist}",methods:["GET","HEAD"],domain:null},"packs.index":{uri:"beatmaps/packs",methods:["GET","HEAD"],domain:null},"packs.show":{uri:"beatmaps/packs/{pack}",methods:["GET","HEAD"],domain:null},"packs.raw":{uri:"beatmaps/packs/{pack}/raw",methods:["GET","HEAD"],domain:null},"beatmaps.scores":{uri:"beatmaps/{beatmap}/scores",methods:["GET","HEAD"],domain:null},"beatmaps.show":{uri:"beatmaps/{beatmap}",methods:["GET","HEAD"],domain:null},"beatmap-discussions.vote":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/vote",methods:["PUT"],domain:null},"beatmap-discussions.restore":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/restore",methods:["POST"],domain:null},"beatmap-discussions.deny-kudosu":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/deny-kudosu",methods:["POST"],domain:null},"beatmap-discussions.allow-kudosu":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}/allow-kudosu",methods:["POST"],domain:null},"beatmap-discussions.index":{uri:"beatmapsets/beatmap-discussions",methods:["GET","HEAD"],domain:null},"beatmap-discussions.show":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}",methods:["GET","HEAD"],domain:null},"beatmap-discussions.destroy":{uri:"beatmapsets/beatmap-discussions/{beatmap_discussion}",methods:["DELETE"],domain:null},"beatmap-discussion-posts.restore":{uri:"beatmapsets/beatmap-discussions-posts/{beatmap_discussion_post}/restore",methods:["POST"],domain:null},"beatmap-discussion-posts.index":{uri:"beatmapsets/beatmap-discussion-posts",methods:["GET","HEAD"],domain:null},"beatmap-discussion-posts.store":{uri:"beatmapsets/beatmap-discussion-posts",methods:["POST"],domain:null},"beatmap-discussion-posts.update":{uri:"beatmapsets/beatmap-discussion-posts/{beatmap_discussion_post}",methods:["PUT","PATCH"],domain:null},"beatmap-discussion-posts.destroy":{uri:"beatmapsets/beatmap-discussion-posts/{beatmap_discussion_post}",methods:["DELETE"],domain:null},"beatmapsets.events.index":{uri:"beatmapsets/events",methods:["GET","HEAD"],domain:null},"beatmapsets.watches.index":{uri:"beatmapsets/watches",methods:["GET","HEAD"],domain:null},"beatmapsets.watches.update":{uri:"beatmapsets/watches/{watch}",methods:["PUT","PATCH"],domain:null},"beatmapsets.watches.destroy":{uri:"beatmapsets/watches/{watch}",methods:["DELETE"],domain:null},"beatmapsets.discussions.votes.index":{uri:"beatmapsets/discussions/votes",methods:["GET","HEAD"],domain:null},"beatmapsets.beatmap-discussions.review":{uri:"beatmapsets/beatmapsets/discussions/review",methods:["POST"],domain:null},"beatmapsets.favourites.store":{uri:"beatmapsets/{beatmapset}/favourites",methods:["POST"],domain:null},"beatmapsets.search":{uri:"beatmapsets/search/{filters?}",methods:["GET","HEAD"],domain:null},"beatmapsets.discussion":{uri:"beatmapsets/{beatmapset}/discussion/{beatmap?}/{mode?}/{filter?}",methods:["GET","HEAD"],domain:null},"beatmapsets.discussion-lock":{uri:"beatmapsets/{beatmapset}/discussion-lock",methods:["POST"],domain:null},"beatmapsets.discussion-unlock":{uri:"beatmapsets/{beatmapset}/discussion-unlock",methods:["POST"],domain:null},"beatmapsets.download":{uri:"beatmapsets/{beatmapset}/download",methods:["GET","HEAD"],domain:null},"beatmapsets.love":{uri:"beatmapsets/{beatmapset}/love",methods:["PUT"],domain:null},"beatmapsets.nominate":{uri:"beatmapsets/{beatmapset}/nominate",methods:["PUT"],domain:null},"beatmapsets.index":{uri:"beatmapsets",methods:["GET","HEAD"],domain:null},"beatmapsets.show":{uri:"beatmapsets/{beatmapset}",methods:["GET","HEAD"],domain:null},"beatmapsets.update":{uri:"beatmapsets/{beatmapset}",methods:["PUT","PATCH"],domain:null},"beatmapsets.destroy":{uri:"beatmapsets/{beatmapset}",methods:["DELETE"],domain:null},"scores.download":{uri:"scores/{mode}/{score}/download",methods:["GET","HEAD"],domain:null},"client-verifications.create":{uri:"client-verifications/create",methods:["GET","HEAD"],domain:null},"client-verifications.store":{uri:"client-verifications",methods:["POST"],domain:null},"comments.index":{uri:"comments",methods:["GET","HEAD"],domain:null},"comments.store":{uri:"comments",methods:["POST"],domain:null},"comments.show":{uri:"comments/{comment}",methods:["GET","HEAD"],domain:null},"comments.update":{uri:"comments/{comment}",methods:["PUT","PATCH"],domain:null},"comments.destroy":{uri:"comments/{comment}",methods:["DELETE"],domain:null},"comments.pin":{uri:"comments/{comment}/pin",methods:["POST"],domain:null},"comments.restore":{uri:"comments/{comment}/restore",methods:["POST"],domain:null},"comments.vote":{uri:"comments/{comment}/vote",methods:["POST"],domain:null},"contests.index":{uri:"community/contests",methods:["GET","HEAD"],domain:null},"contests.show":{uri:"community/contests/{contest}",methods:["GET","HEAD"],domain:null},"contest-entries.vote":{uri:"community/contest-entries/{contest_entry}/vote",methods:["PUT"],domain:null},"contest-entries.store":{uri:"community/contest-entries",methods:["POST"],domain:null},"contest-entries.destroy":{uri:"community/contest-entries/{contest_entry}",methods:["DELETE"],domain:null},"livestreams.promote":{uri:"community/livestreams/promote",methods:["POST"],domain:null},"livestreams.index":{uri:"community/livestreams",methods:["GET","HEAD"],domain:null},"matches.history":{uri:"community/matches/{match}/history",methods:["GET","HEAD"],domain:null},"matches.show":{uri:"community/matches/{match}",methods:["GET","HEAD"],domain:null},"tournaments.unregister":{uri:"community/tournaments/{tournament}/unregister",methods:["POST"],domain:null},"tournaments.register":{uri:"community/tournaments/{tournament}/register",methods:["POST"],domain:null},"tournaments.index":{uri:"community/tournaments",methods:["GET","HEAD"],domain:null},"tournaments.show":{uri:"community/tournaments/{tournament}",methods:["GET","HEAD"],domain:null},"forum.forum-covers.store":{uri:"community/forums/forum-covers",methods:["POST"],domain:null},"forum.forum-covers.update":{uri:"community/forums/forum-covers/{forum_cover}",methods:["PUT","PATCH"],domain:null},"forum.forum-covers.destroy":{uri:"community/forums/forum-covers/{forum_cover}",methods:["DELETE"],domain:null},"forum.posts.raw":{uri:"community/forums/posts/{post}/raw",methods:["GET","HEAD"],domain:null},"forum.posts.restore":{uri:"community/forums/posts/{post}/restore",methods:["POST"],domain:null},"forum.posts.show":{uri:"community/forums/posts/{post}",methods:["GET","HEAD"],domain:null},"forum.posts.edit":{uri:"community/forums/posts/{post}/edit",methods:["GET","HEAD"],domain:null},"forum.posts.update":{uri:"community/forums/posts/{post}",methods:["PUT","PATCH"],domain:null},"forum.posts.destroy":{uri:"community/forums/posts/{post}",methods:["DELETE"],domain:null},"forum.topics.edit-poll":{uri:"community/forums/topics/{topic}/edit-poll",methods:["GET","HEAD"],domain:null},"forum.topics.preview":{uri:"community/forums/topics/preview",methods:["POST"],domain:null},"forum.topics.issue-tag":{uri:"community/forums/topics/{topic}/issue-tag",methods:["POST"],domain:null},"forum.topics.lock":{uri:"community/forums/topics/{topic}/lock",methods:["POST"],domain:null},"forum.topics.move":{uri:"community/forums/topics/{topic}/move",methods:["POST"],domain:null},"forum.topics.pin":{uri:"community/forums/topics/{topic}/pin",methods:["POST"],domain:null},"forum.topics.reply":{uri:"community/forums/topics/{topic}/reply",methods:["POST"],domain:null},"forum.topics.vote":{uri:"community/forums/topics/{topic}/vote",methods:["POST"],domain:null},"forum.topics.vote-feature":{uri:"community/forums/topics/{topic}/vote-feature",methods:["POST"],domain:null},"forum.topics.create":{uri:"community/forums/topics/create",methods:["GET","HEAD"],domain:null},"forum.topics.store":{uri:"community/forums/topics",methods:["POST"],domain:null},"forum.topics.show":{uri:"community/forums/topics/{topic}",methods:["GET","HEAD"],domain:null},"forum.topics.update":{uri:"community/forums/topics/{topic}",methods:["PUT","PATCH"],domain:null},"forum.topic-covers.store":{uri:"community/forums/topic-covers",methods:["POST"],domain:null},"forum.topic-covers.update":{uri:"community/forums/topic-covers/{topic_cover}",methods:["PUT","PATCH"],domain:null},"forum.topic-covers.destroy":{uri:"community/forums/topic-covers/{topic_cover}",methods:["DELETE"],domain:null},"forum.topic-watches.index":{uri:"community/forums/topic-watches",methods:["GET","HEAD"],domain:null},"forum.topic-watches.update":{uri:"community/forums/topic-watches/{topic_watch}",methods:["PUT","PATCH"],domain:null},"forum.forums.mark-as-read":{uri:"community/forums/mark-as-read",methods:["POST"],domain:null},"forum.forums.search":{uri:"community/forums/search",methods:["GET","HEAD"],domain:null},"forum.forums.index":{uri:"community/forums",methods:["GET","HEAD"],domain:null},"forum.forums.show":{uri:"community/forums/{forum}",methods:["GET","HEAD"],domain:null},"chat.new":{uri:"community/chat/new",methods:["POST"],domain:null},"chat.updates":{uri:"community/chat/updates",methods:["GET","HEAD"],domain:null},"chat.presence":{uri:"community/chat/presence",methods:["GET","HEAD"],domain:null},"chat.channels.messages.index":{uri:"community/chat/channels/{channel}/messages",methods:["GET","HEAD"],domain:null},"chat.channels.messages.store":{uri:"community/chat/channels/{channel}/messages",methods:["POST"],domain:null},"chat.channels.join":{uri:"community/chat/channels/{channel}/users/{user}",methods:["PUT"],domain:null},"chat.channels.part":{uri:"community/chat/channels/{channel}/users/{user}",methods:["DELETE"],domain:null},"chat.channels.mark-as-read":{uri:"community/chat/channels/{channel}/mark-as-read/{message}",methods:["PUT"],domain:null},"chat.channels.index":{uri:"community/chat/channels",methods:["GET","HEAD"],domain:null},"chat.index":{uri:"community/chat",methods:["GET","HEAD"],domain:null},"groups.show":{uri:"groups/{group}",methods:["GET","HEAD"],domain:null},"account.edit":{uri:"home/account/edit",methods:["GET","HEAD"],domain:null},"account.avatar":{uri:"home/account/avatar",methods:["POST"],domain:null},"account.cover":{uri:"home/account/cover",methods:["POST"],domain:null},"account.email":{uri:"home/account/email",methods:["PUT"],domain:null},"account.notification-options":{uri:"home/account/notification-options",methods:["PUT"],domain:null},"account.options":{uri:"home/account/options",methods:["PUT"],domain:null},"account.password":{uri:"home/account/password",methods:["PUT"],domain:null},"account.reissue-code":{uri:"home/account/reissue-code",methods:["POST"],domain:null},"account.sessions.destroy":{uri:"home/account/sessions/{session}",methods:["DELETE"],domain:null},"account.":{uri:"home/account/verify",methods:["GET","HEAD"],domain:null},"account.verify":{uri:"home/account/verify",methods:["POST"],domain:null},"account.update":{uri:"home/account",methods:["PUT"],domain:null},"quick-search":{uri:"home/quick-search",methods:["GET","HEAD"],domain:null},search:{uri:"home/search",methods:["GET","HEAD"],domain:null},"bbcode-preview":{uri:"home/bbcode-preview",methods:["POST"],domain:null},"changelog.build":{uri:"home/changelog/{stream}/{build}",methods:["GET","HEAD"],domain:null},"changelog.index":{uri:"home/changelog",methods:["GET","HEAD"],domain:null},"changelog.show":{uri:"home/changelog/{changelog}",methods:["GET","HEAD"],domain:null},download:{uri:"home/download",methods:["GET","HEAD"],domain:null},"set-locale":{uri:"home/set-locale",methods:["POST"],domain:null},"support-the-game":{uri:"home/support",methods:["GET","HEAD"],domain:null},testflight:{uri:"home/testflight",methods:["GET","HEAD"],domain:null},"password-reset":{uri:"home/password-reset",methods:["GET","HEAD"],domain:null},"support-osu-popup":{uri:"home/support-osu-popup",methods:["GET","HEAD"],domain:null},"download-quota-check":{uri:"home/download-quota-check",methods:["GET","HEAD"],domain:null},"blocks.store":{uri:"home/blocks",methods:["POST"],domain:null},"blocks.destroy":{uri:"home/blocks/{block}",methods:["DELETE"],domain:null},"friends.index":{uri:"home/friends",methods:["GET","HEAD"],domain:null},"friends.store":{uri:"home/friends",methods:["POST"],domain:null},"friends.destroy":{uri:"home/friends/{friend}",methods:["DELETE"],domain:null},"news.index":{uri:"home/news",methods:["GET","HEAD"],domain:null},"news.store":{uri:"home/news",methods:["POST"],domain:null},"news.show":{uri:"home/news/{news}",methods:["GET","HEAD"],domain:null},"news.update":{uri:"home/news/{news}",methods:["PUT","PATCH"],domain:null},"notifications.index":{uri:"home/notifications",methods:["GET","HEAD"],domain:null},"notifications.endpoint":{uri:"home/notifications/endpoint",methods:["GET","HEAD"],domain:null},"notifications.mark-read":{uri:"home/notifications/mark-read",methods:["POST"],domain:null},"messages.users.show":{uri:"home/messages/users/{user}",methods:["GET","HEAD"],domain:null},"follows.store":{uri:"home/follows",methods:["POST"],domain:null},"follows.destroy":{uri:"home/follows",methods:["DELETE"],domain:null},legal:{uri:"legal/{page}",methods:["GET","HEAD"],domain:null},"oauth.authorized-clients.destroy":{uri:"oauth/authorized-clients/{authorized_client}",methods:["DELETE"],domain:null},"oauth.clients.index":{uri:"oauth/clients",methods:["GET","HEAD"],domain:null},"oauth.clients.store":{uri:"oauth/clients",methods:["POST"],domain:null},"oauth.clients.update":{uri:"oauth/clients/{client}",methods:["PUT","PATCH"],domain:null},"oauth.clients.destroy":{uri:"oauth/clients/{client}",methods:["DELETE"],domain:null},rankings:{uri:"rankings/{mode?}/{type?}",methods:["GET","HEAD"],domain:null},"reports.store":{uri:"reports",methods:["POST"],domain:null},login:{uri:"session",methods:["POST"],domain:null},logout:{uri:"session",methods:["DELETE"],domain:null},"users.check-username-availability":{uri:"users/check-username-availability",methods:["POST"],domain:null},"users.check-username-exists":{uri:"users/check-username-exists",methods:["POST"],domain:null},"users.disabled":{uri:"users/disabled",methods:["GET","HEAD"],domain:null},"users.card":{uri:"users/{user}/card",methods:["GET","HEAD"],domain:null},"users.page":{uri:"users/{user}/page",methods:["PUT"],domain:null},"users.kudosu":{uri:"users/{user}/kudosu",methods:["GET","HEAD"],domain:null},"users.recent-activity":{uri:"users/{user}/recent_activity",methods:["GET","HEAD"],domain:null},"users.scores":{uri:"users/{user}/scores/{type}",methods:["GET","HEAD"],domain:null},"users.beatmapsets":{uri:"users/{user}/beatmapsets/{type}",methods:["GET","HEAD"],domain:null},"users.posts":{uri:"users/{user}/posts",methods:["GET","HEAD"],domain:null},"users.modding.index":{uri:"users/{user}/modding",methods:["GET","HEAD"],domain:null},"users.modding.events":{uri:"users/{user}/modding/events",methods:["GET","HEAD"],domain:null},"users.modding.posts":{uri:"users/{user}/modding/posts",methods:["GET","HEAD"],domain:null},"users.modding.votes-given":{uri:"users/{user}/modding/votes-given",methods:["GET","HEAD"],domain:null},"users.modding.votes-received":{uri:"users/{user}/modding/votes-received",methods:["GET","HEAD"],domain:null},"users.show":{uri:"users/{user}/{mode?}",methods:["GET","HEAD"],domain:null},"users.store":{uri:"users",methods:["POST"],domain:null},"wiki.sitemap":{uri:"help/wiki/Sitemap",methods:["GET","HEAD"],domain:null},"wiki.show":{uri:"help/wiki/{page?}",methods:["GET","HEAD"],domain:null},"wiki-suggestions":{uri:"help/wiki-suggestions",methods:["GET","HEAD"],domain:null},"redirect:wiki.show":{uri:"wiki/{page?}",methods:["GET","HEAD"],domain:null},"store.redirect:store.products.index":{uri:"store",methods:["GET","HEAD"],domain:null},"store.products.index":{uri:"store/listing",methods:["GET","HEAD"],domain:null},"store.invoice.show":{uri:"store/invoice/{invoice}",methods:["GET","HEAD"],domain:null},"store.":{uri:"store/products/{product}/notification-request",methods:["DELETE"],domain:null},"store.notification-request":{uri:"store/products/{product}/notification-request",methods:["POST"],domain:null},"store.cart.show":{uri:"store/cart",methods:["GET","HEAD"],domain:null},"store.cart.store":{uri:"store/cart",methods:["POST"],domain:null},"store.checkout.store":{uri:"store/checkout",methods:["POST"],domain:null},"store.checkout.show":{uri:"store/checkout/{checkout}",methods:["GET","HEAD"],domain:null},"store.orders.index":{uri:"store/orders",methods:["GET","HEAD"],domain:null},"store.redirect:store.products.show":{uri:"store/product/{product}",methods:["GET","HEAD"],domain:null},"store.products.show":{uri:"store/products/{product}",methods:["GET","HEAD"],domain:null},"payments.paypal.approved":{uri:"payments/paypal/approved",methods:["GET","HEAD"],domain:null},"payments.paypal.declined":{uri:"payments/paypal/declined",methods:["GET","HEAD"],domain:null},"payments.paypal.create":{uri:"payments/paypal/create",methods:["POST"],domain:null},"payments.paypal.completed":{uri:"payments/paypal/completed",methods:["GET","HEAD"],domain:null},"payments.paypal.ipn":{uri:"payments/paypal/ipn",methods:["POST"],domain:null},"payments.xsolla.completed":{uri:"payments/xsolla/completed",methods:["GET","HEAD"],domain:null},"payments.xsolla.token":{uri:"payments/xsolla/token",methods:["POST"],domain:null},"payments.xsolla.callback":{uri:"payments/xsolla/callback",methods:["POST"],domain:null},"payments.centili.callback":{uri:"payments/centili/callback",methods:["POST","GET","HEAD"],domain:null},"payments.centili.completed":{uri:"payments/centili/completed",methods:["GET","HEAD"],domain:null},"payments.centili.failed":{uri:"payments/centili/failed",methods:["GET","HEAD"],domain:null},"payments.shopify.callback":{uri:"payments/shopify/callback",methods:["POST"],domain:null},"api.beatmapsets.favourites.store":{uri:"api/v2/beatmapsets/{beatmapset}/favourites",methods:["POST"],domain:null},"api.beatmapsets.beatmap-discussions.review":{uri:"api/v2/beatmapsets/discussions/review",methods:["POST"],domain:null},"api.comments.index":{uri:"api/v2/comments",methods:["GET","HEAD"],domain:null},"api.comments.store":{uri:"api/v2/comments",methods:["POST"],domain:null},"api.comments.show":{uri:"api/v2/comments/{comment}",methods:["GET","HEAD"],domain:null},"api.comments.update":{uri:"api/v2/comments/{comment}",methods:["PUT","PATCH"],domain:null},"api.comments.destroy":{uri:"api/v2/comments/{comment}",methods:["DELETE"],domain:null},"api.comments.vote":{uri:"api/v2/comments/{comment}/vote",methods:["POST"],domain:null},"api.":{uri:"api/v2/users/{user}/{mode?}",methods:["GET","HEAD"],domain:null},"api.chat.new":{uri:"api/v2/chat/new",methods:["POST"],domain:null},"api.chat.updates":{uri:"api/v2/chat/updates",methods:["GET","HEAD"],domain:null},"api.chat.presence":{uri:"api/v2/chat/presence",methods:["GET","HEAD"],domain:null},"api.chat.channels.messages.index":{uri:"api/v2/chat/channels/{channel}/messages",methods:["GET","HEAD"],domain:null},"api.chat.channels.messages.store":{uri:"api/v2/chat/channels/{channel}/messages",methods:["POST"],domain:null},"api.chat.channels.join":{uri:"api/v2/chat/channels/{channel}/users/{user}",methods:["PUT"],domain:null},"api.chat.channels.part":{uri:"api/v2/chat/channels/{channel}/users/{user}",methods:["DELETE"],domain:null},"api.chat.channels.mark-as-read":{uri:"api/v2/chat/channels/{channel}/mark-as-read/{message}",methods:["PUT"],domain:null},"api.chat.channels.index":{uri:"api/v2/chat/channels",methods:["GET","HEAD"],domain:null},"api.changelog.build":{uri:"api/v2/changelog/{stream}/{build}",methods:["GET","HEAD"],domain:null},"api.changelog.index":{uri:"api/v2/changelog",methods:["GET","HEAD"],domain:null},"api.changelog.show":{uri:"api/v2/changelog/{changelog}",methods:["GET","HEAD"],domain:null},"api.rooms.index":{uri:"api/v2/rooms/{mode?}",methods:["GET","HEAD"],domain:null},"api.rooms.join":{uri:"api/v2/rooms/{room}/users/{user}",methods:["PUT"],domain:null},"api.rooms.part":{uri:"api/v2/rooms/{room}/users/{user}",methods:["DELETE"],domain:null},"api.rooms.":{uri:"api/v2/rooms/{room}/leaderboard",methods:["GET","HEAD"],domain:null},"api.rooms.playlist.scores.store":{uri:"api/v2/rooms/{room}/playlist/{playlist}/scores",methods:["POST"],domain:null},"api.rooms.playlist.scores.update":{uri:"api/v2/rooms/{room}/playlist/{playlist}/scores/{score}",methods:["PUT","PATCH"],domain:null},"api.reports.store":{uri:"api/v2/reports",methods:["POST"],domain:null},"api.rooms.store":{uri:"api/v2/rooms",methods:["POST"],domain:null},"api.rooms.show":{uri:"api/v2/rooms/{room}",methods:["GET","HEAD"],domain:null},"api.seasonal-backgrounds.index":{uri:"api/v2/seasonal-backgrounds",methods:["GET","HEAD"],domain:null},"api.scores.download":{uri:"api/v2/scores/{mode}/{score}/download",methods:["GET","HEAD"],domain:null},"api.beatmaps.show":{uri:"api/v2/beatmaps/{beatmap}",methods:["GET","HEAD"],domain:null},"api.beatmapsets.show":{uri:"api/v2/beatmapsets/{beatmapset}",methods:["GET","HEAD"],domain:null},"api.friends.index":{uri:"api/v2/friends",methods:["GET","HEAD"],domain:null},"api.notifications.index":{uri:"api/v2/notifications",methods:["GET","HEAD"],domain:null},"api.notifications.mark-read":{uri:"api/v2/notifications/mark-read",methods:["POST"],domain:null},"api.spotlights.index":{uri:"api/v2/spotlights",methods:["GET","HEAD"],domain:null},"api.wiki.show":{uri:"api/v2/wiki/{page?}",methods:["GET","HEAD"],domain:null},"lio.user-achievement":{uri:"_lio/user-achievement/{user}/{achievement}/{beatmap?}",methods:["POST"],domain:null},home:{uri:"home",methods:["GET","HEAD"],domain:null},"redirect:home":{uri:"/",methods:["GET","HEAD"],domain:null},"redirect:forum.posts.show":{uri:"po/{post}",methods:["GET","HEAD"],domain:null},"redirect:forum.topics.show":{uri:"forum/t/{topic}",methods:["GET","HEAD"],domain:null},"redirect:forum.forums.show":{uri:"forum/{forum}",methods:["GET","HEAD"],domain:null},"redirect:beatmaps.show":{uri:"b/{beatmap}",methods:["GET","HEAD"],domain:null},"redirect:groups.show":{uri:"g/{group}",methods:["GET","HEAD"],domain:null},"redirect:beatmapsets.show":{uri:"s/{beatmapset}",methods:["GET","HEAD"],domain:null},"redirect:users.show":{uri:"u/{user}",methods:["GET","HEAD"],domain:null},"redirect:forum.forums.index":{uri:"forum",methods:["GET","HEAD"],domain:null},"redirect:matches.show":{uri:"mp/{match}",methods:["GET","HEAD"],domain:null},"status.index":{uri:"/",methods:["GET","HEAD"],domain:"stat.ppy.sh"},"oauth.authorizations.authorize":{uri:"oauth/authorize",methods:["GET","HEAD"],domain:null},"passport.authorizations.approve":{uri:"oauth/authorize",methods:["POST"],domain:null},"passport.authorizations.deny":{uri:"oauth/authorize",methods:["DELETE"],domain:null},"oauth.passport.token":{uri:"oauth/token",methods:["POST"],domain:null}},baseUrl:"https://osu.ppy.sh/",baseProtocol:"https",baseDomain:"osu.ppy.sh",basePort:!1,defaultParameters:[]};if(void 0!==window.Ziggy)for(var o in window.Ziggy.namedRoutes)s.namedRoutes[o]=window.Ziggy.namedRoutes[o];var i=n("fWFV"),a=n.n(i);function c(e,t,n){return null==t&&(t={}),a()(e,t,n,s).toString()}function u(e,t,n,s){const o=c(e,n),i=document.createElement("a");return i.textContent=t,i.href=o,null!=s&&Object(r.forEach)(s,(e,t)=>{null!=e&&i.setAttribute(t,e.toString())}),i.outerHTML}n.d(t,"route",(function(){return c})),n.d(t,"link_to_route",(function(){return u}))},"1OSS":function(e,t,n){"use strict";var r=n("AGZR"),s=n("PsOV"),o=n("BhdQ"),i=n("Sy6K"),a=n("tmLN"),c=n("WU0t");e.exports=function(e,t){var n,o,i={};for(o in t||(t={}),d)n=t[o],i[o]=null==n?d[o]:n;return(i.position.indent||i.position.start)&&(i.indent=i.position.indent||[],i.position=i.position.start),function(e,t){var n,o,i,d,B,H,$,z,V,W,F,G,q,J,K,Y,X,Q,Z,ee,te=t.additional,ne=t.nonTerminated,re=t.text,se=t.reference,oe=t.warning,ie=t.textContext,ae=t.referenceContext,ce=t.warningContext,ue=t.position,le=t.indent||[],pe=e.length,de=0,he=-1,me=ue.column||1,fe=ue.line||1,ve="",be=[];for("string"==typeof te&&(te=te.charCodeAt(0)),Y=ye(),z=oe?function(e,t){var n=ye();n.column+=t,n.offset+=t,oe.call(ce,U[e],n,e)}:p,de--,pe++;++de<pe;)if(B===m&&(me=le[he]||1),(B=e.charCodeAt(de))===b){if(($=e.charCodeAt(de+1))===h||$===m||$===f||$===v||$===b||$===g||$!=$||te&&$===te){ve+=l(B),me++;continue}for(G=q=de+1,Z=q,$===w?(Z=++G,($=e.charCodeAt(Z))===O||$===j?(J=S,Z=++G):J=x):J=E,n="",F="",d="",K=T[J],Z--;++Z<pe&&K($=e.charCodeAt(Z));)d+=l($),J===E&&u.call(r,d)&&(n=d,F=r[d]);(i=e.charCodeAt(Z)===y)&&(Z++,(o=J===E&&c(d))&&(n=d,F=o)),Q=1+Z-q,(i||ne)&&(d?J===E?(i&&!F?z(R,1):(n!==d&&(Q=1+(Z=G+n.length)-G,i=!1),i||(V=n?A:C,t.attribute?($=e.charCodeAt(Z))===_?(z(V,Q),F=null):a($)?F=null:z(V,Q):z(V,Q))),H=F):(i||z(P,Q),(ee=H=parseInt(d,N[J]))>=55296&&ee<=57343||ee>1114111?(z(I,Q),H=l(k)):H in s?(z(M,Q),H=s[H]):(W="",L(H)&&z(M,Q),H>65535&&(W+=l((H-=65536)>>>10|55296),H=56320|1023&H),H=W+l(H))):J!==E&&z(D,Q)),H?(ge(),Y=ye(),de=Z-1,me+=Z-q+1,be.push(H),(X=ye()).offset++,se&&se.call(ae,H,{start:Y,end:X},e.slice(q-1,Z)),Y=X):(d=e.slice(q-1,Z),ve+=d,me+=d.length,de=Z-1)}else 10===B&&(fe++,he++,me=0),B==B?(ve+=l(B),me++):ge();return be.join("");function ye(){return{line:fe,column:me,offset:de+(ue.offset||0)}}function ge(){ve&&(be.push(ve),re&&re.call(ie,ve,{start:Y,end:ye()}),ve="")}}(e,i)};var u={}.hasOwnProperty,l=String.fromCharCode,p=Function.prototype,d={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},h=9,m=10,f=12,v=32,b=38,y=59,g=60,_=61,w=35,O=88,j=120,k=65533,E="named",S="hexadecimal",x="decimal",N={};N[S]=16,N[x]=10;var T={};T[E]=a,T[x]=o,T[S]=i;var A=1,P=2,C=3,D=4,R=5,M=6,I=7,U={};function L(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)}U[A]="Named character references must be terminated by a semicolon",U[P]="Numeric character references must be terminated by a semicolon",U[C]="Named character references cannot be empty",U[D]="Numeric character references cannot be empty",U[R]="Named character references must be known",U[M]="Numeric character references cannot be disallowed",U[I]="Numeric character references cannot be outside the permissible Unicode range"},"2LKk":function(e,t,n){"use strict";var r,s,o=n("UVl7"),i=n("2b+G"),a=n("O0zI"),c=n("cF9b"),u=n("f4vq"),l=n("cDcd"),p=n("NzAu"),d=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty;r=l.createElement,s=u.a.dataStore.uiState;var m=function(e){function t(){return this.setSort=d(this.setSort,this),this.renderButton=d(this.renderButton,this),this.render=d(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)h.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){return Object(p.div)({className:osu.classWithModifiers("sort",this.props.modifiers)},Object(p.div)({className:"sort__items"},Object(p.div)({className:"sort__item sort__item--title"},osu.trans("sort._")),this.renderButton("new"),this.renderButton("old"),this.renderButton("top")))},t.prototype.renderButton=function(e){return r(c.a,null,(t=this,function(){var n,r;return n="sort__item sort__item--button",e===(null!=(r=s.comments.loadingSort)?r:s.comments.currentSort)&&(n+=" sort__item--active"),Object(p.button)({className:n,"data-sort":e,onClick:t.setSort},osu.trans("sort."+e))}));var t},t.prototype.setSort=function(e){return $.publish("comments:sort",{sort:e.target.dataset.sort})},t}(l.PureComponent),f=n("4PZ6"),v=n("SYfz");n.d(t,"a",(function(){return j}));var b,y,g,w=function(e,t){return function(){return e.apply(t,arguments)}},O={}.hasOwnProperty;b=l.createElement,y=u.a.dataStore.commentStore,g=u.a.dataStore.uiState;var j=function(e){function t(){return this.renderFollowToggle=w(this.renderFollowToggle,this),this.renderShowDeletedToggle=w(this.renderShowDeletedToggle,this),this.renderComments=w(this.renderComments,this),this.renderComment=w(this.renderComment,this),this.render=w(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)O.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){return b(c.a,null,(e=this,function(){var t,n;return t=g.comments.topLevelCommentIds.map((function(e){return y.comments.get(e)})),n=g.comments.pinnedCommentIds.map((function(e){return y.comments.get(e)})),Object(p.div)({className:osu.classWithModifiers("comments",e.props.modifiers)},Object(p.div)({className:"u-has-anchor u-has-anchor--no-event"},Object(p.div)({className:"fragment-target",id:"comments"})),Object(p.h2)({className:"comments__title"},osu.trans("comments.title"),Object(p.span)({className:"comments__count"},osu.formatNumber(g.comments.total))),n.length>0?Object(p.div)({className:"comments__items comments__items--pinned"},e.renderComments(n,!0)):void 0,Object(p.div)({className:"comments__new"},b(i.a,{commentableType:e.props.commentableType,commentableId:e.props.commentableId,focus:!1,modifiers:e.props.modifiers})),Object(p.div)({className:"comments__items comments__items--toolbar"},b(m,{modifiers:e.props.modifiers}),Object(p.div)({className:osu.classWithModifiers("sort",e.props.modifiers)},Object(p.div)({className:"sort__items"},e.renderFollowToggle(),e.renderShowDeletedToggle()))),t.length>0?Object(p.div)({className:"comments__items "+(null!=g.comments.loadingSort?"comments__items--loading":"")},e.renderComments(t,!1),b(f.a,{comments:t,showDeleted:g.comments.isShowDeleted,modifiers:["top"]}),b(a.a,{commentableType:e.props.commentableType,commentableId:e.props.commentableId,comments:t,total:g.comments.topLevelCount,sort:g.comments.currentSort,modifiers:_.concat("top",e.props.modifiers)})):Object(p.div)({className:"comments__items comments__items--empty"},osu.trans("comments.empty")))}));var e},t.prototype.renderComment=function(e,t){return null==t&&(t=!1),e.isDeleted&&!g.comments.isShowDeleted?null:b(o.a,{key:e.id,comment:e,depth:0,modifiers:this.props.modifiers,showDeleted:g.comments.isShowDeleted,expandReplies:!t&&null})},t.prototype.renderComments=function(e,t){var n,r,s,o;for(o=[],r=0,s=e.length;r<s;r++)(n=e[r]).pinned===t&&o.push(this.renderComment(n,t));return o},t.prototype.renderShowDeletedToggle=function(){return Object(p.button)({type:"button",className:"sort__item sort__item--button",onClick:this.toggleShowDeleted},Object(p.span)({className:"sort__item-icon"},Object(p.span)({className:g.comments.isShowDeleted?"fas fa-check-square":"far fa-square"})),osu.trans("common.buttons.show_deleted"))},t.prototype.renderFollowToggle=function(){var e,t,n;return g.comments.userFollow?(e="fas fa-eye-slash",n=osu.trans("common.buttons.watch.to_0")):(e="fas fa-eye",n=osu.trans("common.buttons.watch.to_1")),t=this.props.loadingFollow?b(v.a,{modifiers:["center-inline"]}):Object(p.span)({className:e}),Object(p.button)({type:"button",className:"sort__item sort__item--button",onClick:this.toggleFollow,disabled:this.props.loadingFollow},Object(p.span)({className:"sort__item-icon"},t),n)},t.prototype.toggleShowDeleted=function(){return $.publish("comments:toggle-show-deleted")},t.prototype.toggleFollow=function(){return $.publish("comments:toggle-follow")},t}(l.PureComponent)},"2YuA":function(e,t){var n,r,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,u=[],l=!1,p=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||l||a(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},"2b+G":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,s,o=n("6nUW"),i=n("cDcd"),a=n("NzAu"),c=n("SYfz"),u=n("TY2o"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;s=i.createElement,r="comment-editor";var d=function(e){function t(e){var n;this.post=l(this.post,this),this.onChange=l(this.onChange,this),this.mode=l(this.mode,this),this.isValid=l(this.isValid,this),this.handleKeyDownCallback=l(this.handleKeyDownCallback,this),this.close=l(this.close,this),this.buttonText=l(this.buttonText,this),this.render=l(this.render,this),this.componentWillUnmount=l(this.componentWillUnmount,this),this.componentDidMount=l(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.textarea=i.createRef(),this.throttledPost=_.throttle(this.post,1e3),this.handleKeyDown=InputHandler.textarea(this.handleKeyDownCallback),this.state={message:null!=(n=this.props.message)?n:"",posting:!1}}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){var e,t,n;if(null!=(e=this.textarea.current)&&(e.selectionStart=-1),null==(t=this.props.focus)||t)return null!=(n=this.textarea.current)?n.focus():void 0},t.prototype.componentWillUnmount=function(){var e;return this.throttledPost.cancel(),null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e;return e=osu.classWithModifiers(r,this.props.modifiers),"new"===this.mode()&&(e+=" "+r+"--fancy"),Object(a.div)({className:e},"new"===this.mode()?Object(a.div)({className:r+"__avatar"},s(u.a,{user:currentUser,modifiers:["full-circle"]})):void 0,s(TextareaAutosize,{className:r+"__message",ref:this.textarea,value:this.state.message,placeholder:osu.trans("comments.placeholder."+this.mode()),onChange:this.onChange,onKeyDown:this.handleKeyDown,disabled:null==currentUser.id||this.state.posting}),Object(a.div)({className:r+"__footer"},Object(a.div)({className:r+"__footer-item "+r+"__footer-item--notice hidden-xs"},osu.trans("comments.editor.textarea_hint._",{action:osu.trans("comments.editor.textarea_hint."+this.mode())})),null!=this.props.close?Object(a.div)({className:r+"__footer-item"},s(o.a,{modifiers:["comment-editor"],text:osu.trans("common.buttons.cancel"),props:{onClick:this.props.close,disabled:this.state.posting}})):void 0,null!=currentUser.id?Object(a.div)({className:r+"__footer-item"},s(o.a,{modifiers:["comment-editor"],text:this.state.posting?s(c.a):this.buttonText(),props:{onClick:this.throttledPost,disabled:this.state.posting||!this.isValid()}})):Object(a.div)({className:r+"__footer-item"},s(o.a,{modifiers:["comment-editor"],extraClasses:["js-user-link"],text:osu.trans("comments.guest_button."+this.mode())}))))},t.prototype.buttonText=function(){var e;return e=function(){switch(this.mode()){case"reply":return"reply";case"edit":return"save";case"new":return"post"}}.call(this),osu.trans("common.buttons."+e)},t.prototype.close=function(){var e;if(null!=this.props.close&&((null!=(e=this.props.message)?e:"")===this.state.message||confirm(osu.trans("common.confirmation_unsaved"))))return this.props.close()},t.prototype.handleKeyDownCallback=function(e,t){switch(e){case InputHandler.CANCEL:return this.close();case InputHandler.SUBMIT:return this.throttledPost()}},t.prototype.isValid=function(){return null!=this.state.message&&this.state.message.length>0},t.prototype.mode=function(){return null!=this.props.parent?"reply":null!=this.props.id?"edit":"new"},t.prototype.onChange=function(e){return this.setState({message:e.target.value})},t.prototype.post=function(){var e,t,n,r,s,o,i;if("edit"===this.mode()&&this.state.message===this.props.message)return"function"==typeof(e=this.props).close?e.close():void 0;switch(this.setState({posting:!0}),t={comment:{message:this.state.message}},this.mode()){case"reply":case"new":o=laroute.route("comments.store"),n="POST",t.comment.commentable_type=this.props.commentableType,t.comment.commentable_id=this.props.commentableId,t.comment.parent_id=null!=(s=this.props.parent)?s.id:void 0,i=this,r=function(e){return i.setState({message:""}),$.publish("comments:new",e)};break;case"edit":o=laroute.route("comments.update",{comment:this.props.id}),n="PUT",r=function(e){return $.publish("comment:updated",e)}}return this.xhr=$.ajax(o,{method:n,data:t}).always(function(e){return function(){return e.setState({posting:!1})}}(this)).done(function(e){return function(t){var n,s;return r(t),"function"==typeof(n=e.props).onPosted&&n.onPosted(e.mode()),"function"==typeof(s=e.props).close?s.close():void 0}}(this)).fail((function(e,t){return osu.ajaxError(e,t)}))},t}(i.PureComponent)},"2etm":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));const r={beatmapset_discussion:["fas fa-drafting-compass","fas fa-comment"],beatmapset_problem:["fas fa-drafting-compass","fas fa-exclamation-circle"],beatmapset_state:["fas fa-drafting-compass"],channel:["fas fa-comments"],comment:["fas fa-comment"],forum_topic_reply:["fas fa-comment-medical"],legacy_pm:["fas fa-envelope"]},s={beatmapset_discussion_lock:["fas fa-drafting-compass","fas fa-lock"],beatmapset_discussion_post_new:["fas fa-drafting-compass","fas fa-comment-medical"],beatmapset_discussion_qualified_problem:["fas fa-drafting-compass","fas fa-exclamation-circle"],beatmapset_discussion_unlock:["fas fa-drafting-compass","fas fa-unlock"],beatmapset_disqualify:["fas fa-drafting-compass","far fa-times-circle"],beatmapset_love:["fas fa-drafting-compass","fas fa-heart"],beatmapset_nominate:["fas fa-drafting-compass","fas fa-vote-yea"],beatmapset_qualify:["fas fa-drafting-compass","fas fa-check"],beatmapset_rank:["fas fa-drafting-compass","fas fa-check-double"],beatmapset_reset_nominations:["fas fa-drafting-compass","fas fa-undo"],channel_message:["fas fa-comments"],comment_new:["fas fa-comment"],forum_topic_reply:["fas fa-comment-medical"],legacy_pm:["fas fa-envelope"],user_achievement_unlock:["fas fa-trophy"]},o={beatmapset_discussion_lock:["fas fa-lock"],beatmapset_discussion_post_new:["fas fa-comment-medical"],beatmapset_discussion_qualified_problem:["fas fa-exclamation-circle"],beatmapset_discussion_unlock:["fas fa-unlock"],beatmapset_disqualify:["far fa-times-circle"],beatmapset_love:["fas fa-heart"],beatmapset_nominate:["fas fa-vote-yea"],beatmapset_qualify:["fas fa-check"],beatmapset_rank:["fas fa-check-double"],beatmapset_reset_nominations:["fas fa-undo"],channel_message:["fas fa-comments"],comment_new:["fas fa-comment"],forum_topic_reply:["fas fa-comment-medical"],legacy_pm:["fas fa-envelope"]}},"2oEb":function(e,t,n){"use strict";var r=[].slice;e.exports=function(e,t){var n;return function(){var t,i=r.call(arguments,0),a=e.length>i.length;a&&i.push(s);try{t=e.apply(null,i)}catch(e){if(a&&n)throw e;return s(e)}a||(t&&"function"==typeof t.then?t.then(o,s):t instanceof Error?s(t):o(t))};function s(){n||(n=!0,t.apply(null,arguments))}function o(e){s(null,e)}}},"3Zv4":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("y2EG");class s extends r.a{constructor(){super(-1,"legacy_pm"),this.details={},this.isRead=!1,this.name="legacy_pm",this.objectId=-1}get count(){var e,t;return null!=(t=null===(e=currentUser)||void 0===e?void 0:e.unread_pm_count)?t:0}}},"4PZ6":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd");class s extends r.Component{render(){const e=this.props.comments.filter(e=>null!=e.deletedAt).length;return this.props.showDeleted||0===e?null:r.createElement("div",{className:osu.classWithModifiers("deleted-comments-count",this.props.modifiers)},r.createElement("span",{className:"deleted-comments-count__icon"},r.createElement("span",{className:"far fa-trash-alt"})),osu.transChoice("comments.deleted_count",e))}}},"4cxI":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd");function s({badge:e,modifiers:t}){if(null==e)return null;const n=osu.groupColour(e);return r.createElement("div",{className:osu.classWithModifiers("user-group-badge",t),"data-label":e.short_name,style:n,title:e.name})}},"5evE":function(e,t,n){"use strict";function r(e){return null==e.objectId||null==e.name||null==e.category?null:"user_achievement_unlock"===e.name?`achievement:${e.id}`:`${e.category}:${e.objectId}`}function s(e){var t;return null!=(t=o[e])?t:e}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));const o={beatmapset_discussion_lock:"beatmapset_discussion",beatmapset_discussion_post_new:"beatmapset_discussion",beatmapset_discussion_qualified_problem:"beatmapset_problem",beatmapset_discussion_unlock:"beatmapset_discussion",beatmapset_disqualify:"beatmapset_state",beatmapset_love:"beatmapset_state",beatmapset_nominate:"beatmapset_state",beatmapset_qualify:"beatmapset_state",beatmapset_rank:"beatmapset_state",beatmapset_reset_nominations:"beatmapset_state",channel_message:"channel",comment_new:"comment",forum_topic_reply:"forum_topic_reply",legacy_pm:"legacy_pm",user_achievement_unlock:"user_achievement_unlock"}},"6MCy":function(e,t,n){"use strict";var r=n("Jryd"),s=n("cDcd"),o=parseInt((s.version||"16").slice(0,2),10)>=16,i=s.createElement;function a(e,t){return i(e,c(t),t.children)}function c(e){return e["data-sourcepos"]?{"data-sourcepos":e["data-sourcepos"]}:{}}e.exports={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:a.bind(null,"table"),tableHead:a.bind(null,"thead"),tableBody:a.bind(null,"tbody"),tableRow:a.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=c(e);return i(e.isHeader?"th":"td",t?r({style:t},n):n,e.children)},root:function(e){var t=!e.className,n=t&&s.Fragment||"div";return i(n,t?null:e,e.children)},text:function(e){return o?e.children:i("span",null,e.children)},list:function(e){var t=c(e);return null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString()),i(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=i("input",{type:"checkbox",checked:n,readOnly:!0})}return i("li",c(e),t,e.children)},definition:function(){return null},heading:function(e){return i("h".concat(e.level),c(e),e.children)},inlineCode:function(e){return i("code",c(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=i("code",t?{className:t}:null,e.value);return i("pre",c(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.isBlock?"div":"span";if(e.escapeHtml){var n=s.Fragment||t;return i(n,null,e.value)}var r={dangerouslySetInnerHTML:{__html:e.value}};return i(t,r)},virtualHtml:function(e){return i(e.tag,c(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?s.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}}},"6Nha":function(e,t,n){"use strict";e.exports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t.children||[]).reduce((function(t,n){return"definition"===n.type&&(t[n.identifier]={href:n.url,title:n.title}),e(n,t)}),n)}},"6QPw":function(e,t,n){"use strict";var r=n("cF9b"),s=n("3Zv4"),o=n("2etm"),i=n("mjdM"),a=n("cDcd");let c=class extends a.Component{render(){const e=new s.a;return 0===e.count?null:a.createElement(i.a,{icons:o.b.legacy_pm,item:e,message:osu.transChoice("notifications.item.legacy_pm.legacy_pm.legacy_pm",e.count),modifiers:["one"],url:"/forum/ucp.php?i=pm&folder=inbox",withCategory:!0,withCoverImage:!0})}};c=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([r.d],c),t.a=c},"6nUW":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,s=n("cDcd"),o=n("NzAu"),i=n("SYfz");r=s.createElement;var a=function(e){var t,n,s,a,c,u,l,p,d,h,m,f,v,b;for(l=null!=(d=e.modifiers)?d:[],b=e.text,n=e.icon,p=null!=(h=e.props)?h:{},t=null!=(m=e.extraClasses)?m:[],s=null!=(f=e.isBusy)&&f,p.className=osu.classWithModifiers("btn-osu-big",l),a=0,u=t.length;a<u;a++)c=t[a],p.className+=" "+c;return(null!=p.href?p.disabled?o.span:o.a:o.button)(p,Object(o.span)({className:"btn-osu-big__content "+(null==b||null==n?"btn-osu-big__content--center":"")},null!=b?Object(o.span)({className:"btn-osu-big__left"},Object(o.span)({className:"btn-osu-big__text-top"},null!=(v=b.top)?v:b),null!=b.bottom?Object(o.span)({className:"btn-osu-big__text-bottom"},b.bottom):void 0):void 0,null!=n?Object(o.span)({className:"btn-osu-big__icon"},Object(o.span)({className:"fa-fw"},s?r(i.a):Object(o.i)({className:n}))):void 0))}},"7Pxk":function(e,t,n){"use strict";var r=n("WCVR"),s=n("Zs/d");e.exports=function(e,t,n){for(var r,u,l,p=-1,d=t.length,h="",m="",f="",v="";++p<d;)if(r=t.charAt(p),l)if(l=!1,h+=f,m+=v,f="",v="",r===o)f=r,v=r;else for(h+=r,m+=r;++p<d;){if(!(r=t.charAt(p))||r===o){v=r,f=r;break}h+=r,m+=r}else if(r===a&&t.charAt(p+1)===r&&t.charAt(p+2)===r&&t.charAt(p+3)===r)f+=c,p+=3,l=!0;else if(r===i)f+=r,l=!0;else{for(u="";r===i||r===a;)u+=r,r=t.charAt(++p);if(r!==o)break;f+=u+r,v+=r}if(m)return!!n||e(h)({type:"code",lang:null,meta:null,value:s(m)})};var o="\n",i="\t",a=" ",c=r(a,4)},"7dd3":function(e,t,n){"use strict";var r,s=n("cDcd"),o=n("NzAu");s.createElement,r={add:"fas fa-plus",fix:"fas fa-check",misc:"far fa-circle"};var i=function(e){var t,n,s,i,a,c;return t=e.entry,Object(o.div)({className:"changelog-entry",key:t.id},Object(o.div)({className:"changelog-entry__row"},Object(o.div)({className:"changelog-entry__title "+(t.major?"changelog-entry__title--major":"")},Object(o.span)({className:"changelog-entry__title-icon"},Object(o.span)({className:"changelog-entry__icon "+r[t.type]})),null!=t.url?Object(o.a)({href:t.url,className:"changelog-entry__link"},t.title):t.title,null!=t.github_url?Object(o.span)(null," (",Object(o.a)({className:"changelog-entry__link",href:t.github_url},t.repository.replace(/^.*\//,"")+"#"+t.github_pull_request_id),")"):void 0,(c=_.escape(t.github_user.display_name),n=null!=(a=null!=(s=t.github_user.github_url)?s:t.github_user.user_url)?"<a data-user-id='"+(null!=(i=t.github_user.user_id)?i:"")+"' class='changelog-entry__user-link js-usercard' href='"+_.escape(a)+"' >"+c+"</a>":c,Object(o.span)({className:"changelog-entry__user",dangerouslySetInnerHTML:{__html:osu.trans("changelog.entry.by",{user:n})}})))),null!=t.message_html?Object(o.div)({className:"changelog-entry__row changelog-entry__row--message",dangerouslySetInnerHTML:{__html:t.message_html}}):void 0)};n.d(t,"a",(function(){return l}));var a,c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;a=s.createElement;var l=function(e){function t(){return this.renderNav=c(this.renderNav,this),this.render=c(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n,r,s,c;return e=osu.classWithModifiers("build",this.props.modifiers),r=_.groupBy(this.props.build.changelog_entries,"category"),t=_(r).keys().sort().value(),Object(o.div)({className:e+" t-changelog-stream--"+_.kebabCase(this.props.build.update_stream.display_name)},Object(o.div)({className:"build__version"},this.renderNav({version:"previous",icon:"fas fa-chevron-left"}),Object(o.a)({className:"build__version-link",href:_exported.OsuUrlHelper.changelogBuild(this.props.build)},Object(o.span)({className:"build__stream"},this.props.build.update_stream.display_name)," ",Object(o.span)({className:"u-changelog-stream--text"},this.props.build.display_version)),this.renderNav({version:"next",icon:"fas fa-chevron-right"})),null!=(c=this.props.showDate)&&c?Object(o.div)({className:"build__date"},moment(this.props.build.created_at).format("LL")):void 0,function(){var e,c,u;for(u=[],e=0,c=t.length;e<c;e++)n=t[e],u.push(Object(o.div)({key:n,className:"build__changelog-entries-container"},Object(o.div)({className:"build__changelog-entries-category"},n),Object(o.div)({className:"build__changelog-entries"},function(){var e,t,c,u,l;for(l=[],e=0,t=(c=r[n]).length;e<t;e++)s=c[e],l.push(Object(o.div)({key:null!=(u=s.id)?u:s.created_at+"-"+s.title,className:"build__changelog-entry"},a(i,{entry:s})));return l}())));return u}())},t.prototype.renderNav=function(e){var t,n,r;if(r=e.version,n=e.icon,null!=this.props.build.versions)return null!=(t=this.props.build.versions[r])?Object(o.a)({className:"build__version-link",href:_exported.OsuUrlHelper.changelogBuild(t),title:t.display_version},Object(o.i)({className:n})):Object(o.span)({className:"build__version-link build__version-link--disabled"},Object(o.i)({className:n}))},t}(s.PureComponent)},"9lfl":function(e,t,n){"use strict";var r=n("Jryd"),s=n("yXVM");e.exports=function(e){var t,n,o;for(n in s(a,e),s(i,a),t=a.prototype)(o=t[n])&&"object"==typeof o&&(t[n]="concat"in o?o.concat():r(o));return a;function i(t){return e.apply(this,t)}function a(){return this instanceof a?e.apply(this,arguments):new i(arguments)}}},"9zVE":function(e,t,n){"use strict";var r=n("cF9b"),s=n("cDcd"),o=n("SYfz");let i=class extends s.Component{render(){return this.props.isMarkingAsRead?s.createElement("div",{className:osu.classWithModifiers("notification-read-button",this.props.modifiers)},s.createElement("span",{className:"notification-read-button__text"},this.props.text),s.createElement("div",{className:"notification-read-button__icon"},s.createElement(o.a,null))):s.createElement("button",{type:"button",className:osu.classWithModifiers("notification-read-button",this.props.modifiers),onClick:this.props.onMarkAsRead},s.createElement("span",{className:"notification-read-button__text"},this.props.text),s.createElement("div",{className:"notification-read-button__icon"},s.createElement("span",{className:"fas fa-times"})))}};i.defaultProps={modifiers:[]},i=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([r.d],i),t.a=i},AGZR:function(e){e.exports=JSON.parse('{"AElig":"","AMP":"&","Aacute":"","Acirc":"","Agrave":"","Aring":"","Atilde":"","Auml":"","COPY":"","Ccedil":"","ETH":"","Eacute":"","Ecirc":"","Egrave":"","Euml":"","GT":">","Iacute":"","Icirc":"","Igrave":"","Iuml":"","LT":"<","Ntilde":"","Oacute":"","Ocirc":"","Ograve":"","Oslash":"","Otilde":"","Ouml":"","QUOT":"\\"","REG":"","THORN":"","Uacute":"","Ucirc":"","Ugrave":"","Uuml":"","Yacute":"","aacute":"","acirc":"","acute":"","aelig":"","agrave":" ","amp":"&","aring":"","atilde":"","auml":"","brvbar":"","ccedil":"","cedil":"","cent":"","copy":"","curren":"","deg":"","divide":"","eacute":"","ecirc":"","egrave":"","eth":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","iacute":"","icirc":"","iexcl":"","igrave":"","iquest":"","iuml":"","laquo":"","lt":"<","macr":"","micro":"","middot":"","nbsp":" ","not":"","ntilde":"","oacute":"","ocirc":"","ograve":"","ordf":"","ordm":"","oslash":"","otilde":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","raquo":"","reg":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","thorn":"","times":"","uacute":"","ucirc":"","ugrave":"","uml":"","uuml":"","yacute":"","yen":"","yuml":""}')},AMMU:function(e,t,n){"use strict";e.exports=function(e){return s.test("number"==typeof e?r(e):e.charAt(0))};var r=String.fromCharCode,s=/\s/},AU96:function(e,t,n){"use strict";var r=n("Yin1"),s=n("CnOT"),o=n("VxeA"),i=n("cDcd"),a=n("KHX3");function c(){function e(e,t,n){const r=new RegExp(osu.urlRegex).exec(t);if(!r||0!==r.index)return;if(n)return!0;const[s,,o]=r;return e(s)({children:[{type:"text",value:o}],href:s,type:"link"})}const t=this.Parser,n=t.prototype.inlineTokenizers,r=t.prototype.inlineMethods;e.locator=function(e,t){return e.indexOf("http",t)},n.link=e,r.unshift("link")}function u({allowedBlocks:e=[],allowedInlines:t=[]}={}){e.push("root","newline"),t.push("text"),this.Parser.prototype.blockMethods.filter(t=>!e.includes(t)).forEach(e=>{this.Parser.prototype.blockTokenizers[e]=()=>!0}),this.Parser.prototype.inlineMethods.filter(e=>!t.includes(e)).forEach(e=>{this.Parser.prototype.inlineTokenizers[e]=()=>!0,this.Parser.prototype.inlineTokenizers[e].locator=()=>-1})}var l=n("+AAq"),p=n("Y9Pv"),d=n("DHbW");const h=({data:e})=>{const t="beatmap-discussion-review-post-embed",n=i.useContext(d.a),r=i.useContext(p.a),s=n[e.discussion_id];if(!s)return i.createElement("div",{className:t},i.createElement("div",{className:`${t}__error`},"[DISCUSSION NOT LOADED]"));const o=[];"praise"===s.message_type?o.push("praise"):s.resolved&&o.push("resolved");const a=null!==s.beatmap_id;a||o.push("general-all");const c=()=>i.createElement("div",{className:`beatmap-discussion-message-type beatmap-discussion-message-type--${s.message_type}`},i.createElement("i",{className:BeatmapDiscussionHelper.messageType.icon[s.message_type]}));return i.createElement("div",{className:osu.classWithModifiers(t,o)},i.createElement("div",{className:`${t}__meta`},i.createElement("div",{className:`${t}__icon`},s.beatmap_id&&i.createElement(l.a,{beatmap:r[s.beatmap_id]}),!s.beatmap_id&&c()),i.createElement("div",null,s.beatmap_id&&c(),(()=>i.createElement("div",{className:`${t}__timestamp-text`},null!==s.timestamp?BeatmapDiscussionHelper.formatTimestamp(s.timestamp):osu.trans(`beatmap_discussions.timestamp_display.${a?"general":"general_all"}`)))())),i.createElement("div",{className:`${t}__stripe`}),i.createElement("div",{className:`${t}__body`,dangerouslySetInnerHTML:{__html:BeatmapDiscussionHelper.format((s.starting_post||s.posts[0]).message)}}),s.parent_id&&i.createElement("div",{className:`${t}__link`},i.createElement("a",{href:BeatmapDiscussionHelper.url({discussion:s}),className:`${t}__link-text`,title:osu.trans("beatmap_discussions.review.go_to_child")},i.createElement("i",{className:"fas fa-external-link-alt"}))))};var m=n("bucr");function f(){function e(e,t,n){const r=new RegExp(/^((\d{2,}:[0-5]\d[:.]\d{3})( \((?:\d[,|])*\d\))?)/).exec(t);if(!r)return;if(n)return!0;const[s,o]=r;return e(s)({children:[{type:"text",value:o}],href:m.a.openBeatmapEditor(o),type:"timestamp"})}const t=this.Parser,n=t.prototype.inlineTokenizers,r=t.prototype.inlineMethods;e.locator=function(e,t){const n=e.substr(t).search(/[0-9]{2}:/);return n<0?n:n+t},n.timestamp=e,r.unshift("timestamp")}class v extends i.Component{embed(e){return i.createElement("div",{className:"beatmap-discussion-review-post__block",key:osu.uuid()},i.createElement(h,{data:{discussion_id:e}}))}paragraph(e){return i.createElement(a,{plugins:[[u,{allowedBlocks:["paragraph"],allowedInlines:["emphasis","strong"]}],c,f],key:osu.uuid(),source:e,renderers:{link:e=>i.createElement("a",Object.assign({className:"beatmap-discussion-review-post__link",rel:"nofollow"},e)),paragraph:e=>i.createElement("div",{className:"beatmap-discussion-review-post__block"},i.createElement("div",Object.assign({className:"beatmapset-discussion-message"},e))),timestamp:e=>i.createElement("a",Object.assign({className:"beatmapset-discussion-message__timestamp"},e))}})}render(){const e=[];try{JSON.parse(this.props.message).forEach(t=>{switch(t.type){case"paragraph":e.push(this.paragraph(osu.presence(t.text)||"&nbsp;  "));break;case"embed":t.discussion_id&&e.push(this.embed(t.discussion_id))}})}catch(t){e.push(i.createElement("div",{key:osu.uuid()},"[error parsing review]"))}return i.createElement("div",{className:"beatmap-discussion-review-post"},e)}}var b=n("6nUW"),y=n("f7bm"),g=n("NzAu"),w=n("hc33");n.d(t,"a",(function(){return S}));var O,j,k=function(e,t){return function(){return e.apply(t,arguments)}},E={}.hasOwnProperty;j=i.createElement,O="beatmap-discussion-post";var S=function(e){function t(e){this.validPost=k(this.validPost,this),this.updatePost=k(this.updatePost,this),this.setMessage=k(this.setMessage,this),this.isTimeline=k(this.isTimeline,this),this.canReport=k(this.canReport,this),this.messageViewer=k(this.messageViewer,this),this.messageEditor=k(this.messageEditor,this),this.isOwner=k(this.isOwner,this),this.handleKeyDownCallback=k(this.handleKeyDownCallback,this),this.editStart=k(this.editStart,this),this.editCancel=k(this.editCancel,this),this.render=k(this.render,this),this.componentWillUnmount=k(this.componentWillUnmount,this),this.componentDidUpdate=k(this.componentDidUpdate,this),this.componentWillUpdate=k(this.componentWillUpdate,this),this.componentDidMount=k(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.textarea=i.createRef(),this.throttledUpdatePost=_.throttle(this.updatePost,1e3),this.handleKeyDown=InputHandler.textarea(this.handleKeyDownCallback),this.xhr={},this.cache={},this.state={editing:!1,posting:!1,message:this.props.post.message}}return function(e,t){for(var n in t)E.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return osu.pageChange()},t.prototype.componentWillUpdate=function(){return this.cache={}},t.prototype.componentDidUpdate=function(){return osu.pageChange()},t.prototype.componentWillUnmount=function(){var e,t,n,r;for(e in this.throttledUpdatePost.cancel(),n=[],t=this.xhr)E.call(t,e)&&(r=t[e],n.push(null!=r?r.abort():void 0));return n},t.prototype.render=function(){var e,t,n;return e=O+" "+O+"--"+this.props.type,this.state.editing&&(e+=" "+O+"--editing"),null!=this.props.post.deleted_at&&(e+=" "+O+"--deleted"),this.props.read||(e+=" "+O+"--unread"),t=this.isOwner()?o.a:this.props.user.group_badge,Object(g.div)({className:e,key:this.props.type+"-"+this.props.post.id,onClick:(n=this,function(){return $.publish("beatmapDiscussionPost:markRead",{id:n.props.post.id})})},Object(g.div)({className:O+"__content"},this.props.hideUserCard?void 0:j(s.a,{user:this.props.user,badge:t}),this.messageViewer(),this.messageEditor()))},t.prototype.editCancel=function(){return this.setState({editing:!1,message:this.props.post.message})},t.prototype.editStart=function(){var e,t;return null!=(e=this.textarea.current)&&(e.style.minHeight=this.messageBody.getBoundingClientRect().height+50+"px"),this.setState({editing:!0},(t=this,function(){var e;return null!=(e=t.textarea.current)?e.focus():void 0}))},t.prototype.handleKeyDownCallback=function(e,t){switch(e){case InputHandler.SUBMIT:return this.throttledUpdatePost()}},t.prototype.isOwner=function(){return this.props.post.user_id===this.props.beatmapset.user_id},t.prototype.messageEditor=function(){var e;if(this.props.canBeEdited)return e=!this.state.posting&&this.validPost(),Object(g.div)({className:O+"__message-container "+(this.state.editing?void 0:"hidden")},j(TextareaAutosize,{disabled:this.state.posting,className:O+"__message "+O+"__message--editor",onChange:this.setMessage,onKeyDown:this.handleKeyDown,value:this.state.message,ref:this.textarea}),j(r.a,{message:this.state.message,isTimeline:this.isTimeline()}),Object(g.div)({className:O+"__actions"},Object(g.div)({className:O+"__actions-group"}),Object(g.div)({className:O+"__actions-group"},Object(g.div)({className:O+"__action"},j(b.a,{text:osu.trans("common.buttons.cancel"),props:{onClick:this.editCancel,disabled:this.state.posting}})),Object(g.div)({className:O+"__action"},j(b.a,{text:osu.trans("common.buttons.save"),props:{onClick:this.throttledUpdatePost,disabled:!e}})))))},t.prototype.messageViewer=function(){var e,t,n,r,s,o,i,a,c,u;return e=(o="reply"===this.props.type?["beatmap-discussion-posts","beatmap_discussion_post",this.props.post]:["beatmap-discussions","beatmap_discussion",this.props.discussion])[0],n=o[1],t=o[2],Object(g.div)({className:O+"__message-container "+(this.state.editing?"hidden":void 0)},"review"===this.props.discussion.message_type&&"discussion"===this.props.type?Object(g.div)({className:O+"__message",ref:(u=this,function(e){return u.messageBody=e})},j(v,{discussions:this.context.discussions,message:this.props.post.message})):Object(g.div)({className:O+"__message",ref:function(e){return function(t){return e.messageBody=t}}(this),dangerouslySetInnerHTML:{__html:BeatmapDiscussionHelper.format(this.props.post.message)}}),Object(g.div)({className:O+"__info-container"},Object(g.span)({className:O+"__info",dangerouslySetInnerHTML:{__html:osu.timeago(this.props.post.created_at)}}),null!=t.deleted_at?Object(g.span)({className:O+"__info "+O+"__info--edited",dangerouslySetInnerHTML:{__html:osu.trans("beatmaps.discussions.deleted",{editor:osu.link(laroute.route("users.show",{user:t.deleted_by_id}),null!=(i=this.props.users[t.deleted_by_id])?i.username:void 0,{classNames:[O+"__info-user"]}),delete_time:osu.timeago(this.props.post.deleted_at)})}}):void 0,this.props.post.updated_at!==this.props.post.created_at&&(null!=(a=this.props.lastEditor)?a.id:void 0)?Object(g.span)({className:O+"__info "+O+"__info--edited",dangerouslySetInnerHTML:{__html:osu.trans("beatmaps.discussions.edited",{editor:osu.link(laroute.route("users.show",{user:this.props.lastEditor.id}),this.props.lastEditor.username,{classNames:[O+"__info-user"]}),update_time:osu.timeago(this.props.post.updated_at)})}}):void 0,"discussion"===this.props.type&&this.props.discussion.kudosu_denied?Object(g.span)({className:O+"__info "+O+"__info--edited"},osu.trans("beatmaps.discussions.kudosu_denied")):void 0),Object(g.div)({className:O+"__actions"},Object(g.div)({className:O+"__actions-group"},"discussion"===this.props.type?Object(g.span)({className:O+"__action "+O+"__action--button"},j(y.a,{value:BeatmapDiscussionHelper.url({discussion:this.props.discussion}),label:osu.trans("common.buttons.permalink"),valueAsUrl:!0})):void 0,this.props.canBeEdited?Object(g.button)({className:O+"__action "+O+"__action--button",onClick:this.editStart},osu.trans("beatmaps.discussions.edit")):void 0,null==t.deleted_at&&this.props.canBeDeleted?Object(g.a)({className:"js-beatmapset-discussion-update "+O+"__action "+O+"__action--button",href:laroute.route(e+".destroy",(r={},r[""+n]=t.id,r)),"data-remote":!0,"data-method":"DELETE","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.delete")):void 0,null!=t.deleted_at&&this.props.canBeRestored?Object(g.a)({className:"js-beatmapset-discussion-update "+O+"__action "+O+"__action--button",href:laroute.route(e+".restore",(s={},s[""+n]=t.id,s)),"data-remote":!0,"data-method":"POST","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.restore")):void 0,"discussion"===this.props.type&&(null!=(c=this.props.discussion.current_user_attributes)?c.can_moderate_kudosu:void 0)?this.props.discussion.can_grant_kudosu?Object(g.a)({className:"js-beatmapset-discussion-update "+O+"__action "+O+"__action--button",href:laroute.route("beatmap-discussions.deny-kudosu",{beatmap_discussion:this.props.discussion.id}),"data-remote":!0,"data-method":"POST","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.deny_kudosu")):this.props.discussion.kudosu_denied?Object(g.a)({className:"js-beatmapset-discussion-update "+O+"__action "+O+"__action--button",href:laroute.route("beatmap-discussions.allow-kudosu",{beatmap_discussion:this.props.discussion.id}),"data-remote":!0,"data-method":"POST","data-confirm":osu.trans("common.confirmation")},osu.trans("beatmaps.discussions.allow_kudosu")):void 0:void 0,this.canReport()?j(w.a,{className:O+"__action "+O+"__action--button",reportableId:this.props.post.id,reportableType:"beatmapset_discussion_post",user:this.props.user}):void 0)))},t.prototype.canReport=function(){return null!=currentUser.id&&this.props.post.user_id!==currentUser.id},t.prototype.isTimeline=function(){return null!=this.props.discussion.timestamp},t.prototype.setMessage=function(e){return this.setState({message:e.target.value})},t.prototype.updatePost=function(){var e,t;if(this.state.message!==this.props.post.message)return this.setState({posting:!0}),null!=(e=this.xhr.updatePost)&&e.abort(),this.xhr.updatePost=$.ajax(laroute.route("beatmap-discussion-posts.update",{beatmap_discussion_post:this.props.post.id}),{method:"PUT",data:{beatmap_discussion_post:{message:this.state.message}}}).done((t=this,function(e){return t.setState({editing:!1}),$.publish("beatmapsetDiscussions:update",{beatmapset:e})})).fail(osu.ajaxError).always(function(e){return function(){return e.setState({posting:!1})}}(this));this.setState({editing:!1})},t.prototype.validPost=function(){return BeatmapDiscussionHelper.validMessageLength(this.state.message,this.isTimeline())},t}(i.PureComponent)},AUlK:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){}return e.hasMenu=function(e){return e.replay||null!=currentUser.id&&e.user_id!==currentUser.id},e}()},"B+BC":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.render=o(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t;return Object(s.div)({className:"profile-badges"},function(){var n,r,o,i;for(i=[],n=0,r=(o=this.props.badges).length;n<r;n++)e=o[n],t=osu.present(e.url)?s.a:s.div,i.push(t({key:e.image_url,href:osu.present(e.url)?e.url:void 0,className:"profile-badges__badge",style:{backgroundImage:osu.urlPresence(e.image_url)},title:e.description}));return i}.call(this))},t}(r.PureComponent)},Be1W:function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},BhdQ:function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},C92G:function(e,t,n){"use strict";var r=n("cDcd"),s=n("faye"),o=n("NzAu"),i=n("LhsB"),a=n("txhI"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},p=function(e){function t(e){this.renderMenu=c(this.renderMenu,this),this.render=c(this.render,this),this.removePortal=c(this.removePortal,this),this.addPortal=c(this.addPortal,this),this.tooltipElement=c(this.tooltipElement,this),this.toggle=c(this.toggle,this),this.isMenuInPath=c(this.isMenuInPath,this),this.hide=c(this.hide,this),this.dismiss=c(this.dismiss,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidUpdate=c(this.componentDidUpdate,this),this.resize=c(this.resize,this),this.componentDidMount=c(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.uuid=osu.uuid(),this.menu=Object(r.createRef)(),this.state={active:!1}}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.contextType=i.a,t.defaultProps={children:function(e){}},t.prototype.componentDidMount=function(){return this.tooltipHideEvent=this.tooltipElement().qtip("option","hide.event"),$(window).on("throttled-resize.#{@uuid}",this.resize),$(document).on("turbolinks:before-cache."+this.uuid,(e=this,function(){return e.removePortal()}));var e},t.prototype.resize=function(){var e,t,n,r,s;if(this.state.active){if(null!=this.menu.current.offsetParent)return s=(n=(e=$(this.menu.current)).offset()).top,t=n.left,this.portal.style.display="block",this.portal.style.position="absolute",this.portal.style.top=Math.floor(s+e.height()/2)+"px",this.portal.style.left=Math.floor(t+e.width())+"px",null!=(r=this.tooltipElement()[0])?this.portal.style.zIndex=getComputedStyle(r).zIndex:void 0;this.portal.style.display="none"}},t.prototype.componentDidUpdate=function(e,t){var n,r;if(t.active!==this.state.active)return this.state.active?(this.resize(),this.addPortal(),this.tooltipElement().qtip("option","hide.event",!1),$(document).on("click."+this.uuid+" keydown."+this.uuid,this.hide),"function"==typeof(n=this.props).onShow?n.onShow():void 0):(this.removePortal(),this.tooltipElement().qtip("option","hide.event",this.tooltipHideEvent),$(document).off("click."+this.uuid+" keydown."+this.uuid,this.hide),"function"==typeof(r=this.props).onHide?r.onHide():void 0)},t.prototype.componentWillUnmount=function(){return $(document).off("."+this.uuid)},t.prototype.dismiss=function(){return this.setState({active:!1})},t.prototype.hide=function(e){var t;if(this.state.active&&!a.a.isOpen()&&!osu.popupShowing()&&null!=(t=e.originalEvent))return 27===t.keyCode||0===t.button&&!this.isMenuInPath(t.composedPath())?this.setState({active:!1}):void 0},t.prototype.isMenuInPath=function(e){var t,n;return t=this.menu.current,l.call(e,t)>=0||(n=this.portal,l.call(e,n)>=0)},t.prototype.toggle=function(){return this.setState({active:!this.state.active})},t.prototype.tooltipElement=function(){return $(this.context).closest(".qtip")},t.prototype.addPortal=function(){if(null==this.portal.parentElement)return document.body.appendChild(this.portal)},t.prototype.removePortal=function(){if(null!=this.portal.parentElement)return document.body.removeChild(this.portal)},t.prototype.render=function(){return null==this.portal&&(this.portal=document.createElement("div")),Object(o.div)({className:"popup-menu",ref:this.menu},Object(o.button)({className:"popup-menu__button",type:"button",onClick:this.toggle},Object(o.i)({className:"fas fa-ellipsis-v"})),Object(s.createPortal)(this.renderMenu(),this.portal))},t.prototype.renderMenu=function(){return this.state.active?Object(o.div)({className:"popup-menu__menu"},Object(o.div)({className:"simple-menu simple-menu--popup-menu"},this.props.children(this.dismiss))):null},t}(r.PureComponent),d=n("ZG74");n.d(t,"a",(function(){return m}));var h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function m(e){var{children:t}=e,n=h(e,["children"]);const s=r.useContext(d.a),o=r.useContext(d.b);return r.createElement(p,Object.assign({onHide:()=>s.activeKeyDidChange(null),onShow:()=>s.activeKeyDidChange(o)},n),t)}},CnOT:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,s,o=n("TY2o"),i=n("4cxI"),a=n("NzAu"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;s=React.createElement,r="beatmap-discussion-user-card";var l=function(e){function t(){return this.render=c(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,React.PureComponent),t.prototype.render=function(){var e,t,n,c;return e=null!=(n=this.props.additionalClasses)?n:[],t=null!=(c=this.props.hideStripe)&&c,Object(a.div)({className:osu.classWithModifiers(r,e),style:osu.groupColour(this.props.badge)},Object(a.div)({className:r+"__avatar"},Object(a.a)({className:r+"__user-link",href:laroute.route("users.show",{user:this.props.user.id})},s(o.a,{user:this.props.user,modifiers:["full-rounded"]}))),Object(a.div)({className:r+"__user"},Object(a.div)({className:r+"__user-row"},Object(a.a)({className:r+"__user-link",href:laroute.route("users.show",{user:this.props.user.id})},Object(a.span)({className:r+"__user-text u-ellipsis-overflow"},this.props.user.username)),this.props.user.is_bot?void 0:Object(a.a)({className:r+"__user-modding-history-link",href:laroute.route("users.modding.index",{user:this.props.user.id}),title:osu.trans("beatmap_discussion_posts.item.modding_history_link")},Object(a.i)({className:"fas fa-align-left"}))),Object(a.div)({className:r+"__user-badge"},s(i.a,{badge:this.props.badge}))),t?void 0:Object(a.div)({className:r+"__user-stripe"}))},t}()},DGoX:function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},DHbW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n("cDcd").createContext([])},De3I:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,s=n("cDcd"),o=n("dcvb"),i=n("NzAu");r=s.createElement;var a=function(e){var t,n,s,a,c,u,l,p;for(c=null!=(l=e.modifiers)?l:[],u=null!=(p=e.mods)?p:[],t="mods",n=0,s=c.length;n<s;n++)t+=" mods--"+(a=c[n]);return Object(i.div)({className:t},function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)a=u[e],n.push(Object(i.div)({key:a,className:"mods__mod"},Object(i.div)({className:"mods__mod-image"},r(o.a,{mod:a}))));return n}())}},DmM8:function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},EaLk:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return De})),n.d(t,"c",(function(){return re})),n.d(t,"d",(function(){return Ve})),n.d(t,"e",(function(){return Z})),n.d(t,"f",(function(){return Je})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return Mt})),n.d(t,"i",(function(){return yt})),n.d(t,"j",(function(){return Ot})),n.d(t,"k",(function(){return Ct})),n.d(t,"l",(function(){return K})),n.d(t,"m",(function(){return et})),n.d(t,"n",(function(){return We})),n.d(t,"o",(function(){return Be})),n.d(t,"p",(function(){return tt})),n.d(t,"q",(function(){return be}));var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function i(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}return i}var c="An invariant failed, however the error is obfuscated because this is an production build.",u=[];Object.freeze(u);var l={};function p(){return++ke.mobxGuid}function d(e){throw h(!1,e),"X"}function h(e,t){if(!e)throw new Error("[mobx] "+(t||c))}function m(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}Object.freeze(l);var f=function(){};function v(e){return null!==e&&"object"==typeof e}function b(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function y(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function g(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return v(e)&&!0===e[n]}}function _(e){return e instanceof Map}function w(e){return e instanceof Set}function O(e){var t=new Set;for(var n in e)t.add(n);return Object.getOwnPropertySymbols(e).forEach((function(n){Object.getOwnPropertyDescriptor(e,n).enumerable&&t.add(n)})),Array.from(t)}function j(e){return e&&e.toString?e.toString():new String(e).toString()}function k(e){return null===e?null:"object"==typeof e?""+e:e}var E=Symbol("mobx administration"),S=function(){function e(e){void 0===e&&(e="Atom@"+p()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ie.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.reportObserved=function(){return Pe(this)},e.prototype.reportChanged=function(){Te(),function(e){e.lowestObserverState!==ie.STALE&&(e.lowestObserverState=ie.STALE,e.observers.forEach((function(t){t.dependenciesState===ie.UP_TO_DATE&&(t.isTracing!==ae.NONE&&Ce(t,e),t.onBecomeStale()),t.dependenciesState=ie.STALE})))}(this),Ae()},e.prototype.toString=function(){return this.name},e}(),x=g("Atom",S);function N(e,t,n){void 0===t&&(t=f),void 0===n&&(n=f);var r=new S(e);return t!==f&&qe("onBecomeObserved",r,t,void 0),n!==f&&function(e,t,n){qe("onBecomeUnobserved",e,t,void 0)}(r,n),r}var T={identity:function(e,t){return e===t},structural:function(e,t){return Ut(e,t)},default:function(e,t){return Object.is(e,t)}},A=Symbol("mobx did run lazy initializers"),P=Symbol("mobx pending decorators"),C={},D={};function R(e,t){var n=t?C:D;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return M(this),this[e]},set:function(t){M(this),this[e]=t}})}function M(e){if(!0!==e[A]){var t=e[P];if(t)for(var n in y(e,A,!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function I(e,t){return function(){var n,r=function(r,s,i,a){if(!0===a)return t(r,s,i,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,P)){var c=r[P];y(r,P,o({},c))}return r[P][s]={prop:s,propertyCreator:t,descriptor:i,decoratorTarget:r,decoratorArguments:n},R(s,e)};return U(arguments)?(n=u,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function U(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function L(e,t,n){return Ze(e)?e:Array.isArray(e)?K.array(e,{name:n}):b(e)?K.object(e,void 0,{name:n}):_(e)?K.map(e,{name:n}):w(e)?K.set(e,{name:n}):e}function B(e){return e}function H(t){h(t);var n=I(!0,(function(e,n,r,s,o){var i=r?r.initializer?r.initializer.call(e):r.value:void 0;xt(e).addObservableProp(n,i,t)})),r=(void 0!==e&&e.env,n);return r.enhancer=t,r}var $={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function z(e){return null==e?$:"string"==typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze($);var V=H(L),W=H((function(e,t,n){return null==e?e:Ct(e)||yt(e)||Ot(e)||Et(e)?e:Array.isArray(e)?K.array(e,{name:n,deep:!1}):b(e)?K.object(e,void 0,{name:n,deep:!1}):_(e)?K.map(e,{name:n,deep:!1}):w(e)?K.set(e,{name:n,deep:!1}):d(!1)})),F=H(B),G=H((function(e,t,n){return Ut(e,t)?t:e}));function q(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?B:L}var J={box:function(e,t){arguments.length>2&&Y("box");var n=z(t);return new ce(e,q(n),n.name,!0,n.equals)},array:function(e,t){arguments.length>2&&Y("array");var n=z(t);return ht(e,q(n),n.name)},map:function(e,t){arguments.length>2&&Y("map");var n=z(t);return new wt(e,q(n),n.name)},set:function(e,t){arguments.length>2&&Y("set");var n=z(t);return new kt(e,q(n),n.name)},object:function(e,t,n){"string"==typeof arguments[1]&&Y("object");var r=z(n);if(!1===r.proxy)return Ke({},e,t,r);var s=Ye(r),o=Ke({},void 0,void 0,r),i=ot(o);return Xe(i,e,t,s),i},ref:F,shallow:W,deep:V,struct:G},K=function(e,t,n){if("string"==typeof arguments[1])return V.apply(null,arguments);if(Ze(e))return e;var r=b(e)?K.object(e,t,n):Array.isArray(e)?K.array(e,t):_(e)?K.map(e,t):w(e)?K.set(e,t):e;if(r!==e)return r;d(!1)};function Y(e){d("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(J).forEach((function(e){return K[e]=J[e]}));var X=I(!1,(function(e,t,n,r,s){var i=n.get,a=n.set,c=s[0]||{};xt(e).addComputedProp(e,t,o({get:i,set:a,context:e},c))})),Q=X({equals:T.structural}),Z=function(e,t,n){if("string"==typeof t)return X.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return X.apply(null,arguments);var r="object"==typeof t?t:{};return r.get=e,r.set="function"==typeof t?t:r.set,r.name=r.name||e.name||"",new ue(r)};function ee(e,t,n){var r=function(){return te(e,t,n||this,arguments)};return r.isMobxAction=!0,r}function te(e,t,n,r){var s=function(e,t,n,r){var s=ye();return Te(),{prevDerivation:s,prevAllowStateChanges:se(!0),notifySpy:!1,startTime:0}}(),o=!0;try{var i=t.apply(n,r);return o=!1,i}finally{o?(ke.suppressReactionErrors=o,ne(s),ke.suppressReactionErrors=!1):ne(s)}}function ne(e){oe(e.prevAllowStateChanges),Ae(),ge(e.prevDerivation),e.notifySpy}function re(e,t){var n,r=se(e);try{n=t()}finally{oe(r)}return n}function se(e){var t=ke.allowStateChanges;return ke.allowStateChanges=e,t}function oe(e){ke.allowStateChanges=e}Z.struct=Q;var ie,ae,ce=function(e){function t(t,n,r,s,o){void 0===r&&(r="ObservableValue@"+p()),void 0===s&&(s=!0),void 0===o&&(o=T.default);var i=e.call(this,r)||this;return i.enhancer=n,i.name=r,i.equals=o,i.hasUnreportedChange=!1,i.value=n(t,void 0,r),i}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){this.value,(e=this.prepareNewValue(e))!==ke.UNCHANGED&&this.setNewValue(e)},t.prototype.prepareNewValue=function(e){if(me(this),it(this)){var t=ct(this,{object:this,type:"update",newValue:e});if(!t)return ke.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?ke.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),ut(this)&&pt(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return at(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),lt(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return k(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(S),ue=(g("ObservableValue",ce),function(){function e(e){this.dependenciesState=ie.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ie.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+p(),this.value=new pe(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ae.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+p(),e.set&&(this.setter=ee(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?T.structural:T.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){e.lowestObserverState===ie.UP_TO_DATE&&(e.lowestObserverState=ie.POSSIBLY_STALE,e.observers.forEach((function(t){t.dependenciesState===ie.UP_TO_DATE&&(t.dependenciesState=ie.POSSIBLY_STALE,t.isTracing!==ae.NONE&&Ce(t,e),t.onBecomeStale())})))}(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.get=function(){this.isComputing&&d("Cycle detected in computation "+this.name+": "+this.derivation),0!==ke.inBatch||0!==this.observers.size||this.keepAlive?(Pe(this),he(this)&&this.trackAndCompute()&&function(e){e.lowestObserverState!==ie.STALE&&(e.lowestObserverState=ie.STALE,e.observers.forEach((function(t){t.dependenciesState===ie.POSSIBLY_STALE?t.dependenciesState=ie.STALE:t.dependenciesState===ie.UP_TO_DATE&&(e.lowestObserverState=ie.UP_TO_DATE)})))}(this)):he(this)&&(this.warnAboutUntrackedRead(),Te(),this.value=this.computeValue(!1),Ae());var e=this.value;if(de(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(de(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){h(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else h(!1,!1)},e.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===ie.NOT_TRACKING,n=this.computeValue(!0),r=t||de(e)||de(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,ke.computationDepth++,e)t=fe(this,this.derivation,this.scope);else if(!0===ke.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new pe(e)}return ke.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(ve(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,s=void 0;return function(e,t){void 0===t&&(t=l);var n,r=t&&t.name||e.name||"Autorun@"+p();if(t.scheduler||t.delay){var s=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Ge}(t),o=!1;n=new De(r,(function(){o||(o=!0,s((function(){o=!1,n.isDisposed||n.track(i)})))}),t.onError)}else n=new De(r,(function(){this.track(i)}),t.onError);function i(){e(n)}return n.schedule(),n.getDisposer()}((function(){var o=n.get();if(!r||t){var i=ye();e({type:"update",object:n,newValue:o,oldValue:s}),ge(i)}r=!1,s=o}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return k(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}()),le=g("ComputedValue",ue);!function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(ie||(ie={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(ae||(ae={}));var pe=function(e){this.cause=e};function de(e){return e instanceof pe}function he(e){switch(e.dependenciesState){case ie.UP_TO_DATE:return!1;case ie.NOT_TRACKING:case ie.STALE:return!0;case ie.POSSIBLY_STALE:for(var t=ye(),n=e.observing,r=n.length,s=0;s<r;s++){var o=n[s];if(le(o)){if(ke.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return ge(t),!0}if(e.dependenciesState===ie.STALE)return ge(t),!0}}return _e(e),ge(t),!1}}function me(e){var t=e.observers.size>0;ke.computationDepth>0&&t&&d(!1),ke.allowStateChanges||!t&&"strict"!==ke.enforceActions||d(!1)}function fe(e,t,n){_e(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++ke.runId;var r,s=ke.trackingDerivation;if(ke.trackingDerivation=e,!0===ke.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new pe(e)}return ke.trackingDerivation=s,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=ie.UP_TO_DATE,s=0,o=e.unboundDepsCount,i=0;i<o;i++)0===(a=n[i]).diffValue&&(a.diffValue=1,s!==i&&(n[s]=a),s++),a.dependenciesState>r&&(r=a.dependenciesState);for(n.length=s,e.newObserving=null,o=t.length;o--;)0===(a=t[o]).diffValue&&xe(a,e),a.diffValue=0;for(;s--;){var a;1===(a=n[s]).diffValue&&(a.diffValue=0,Se(a,e))}r!==ie.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),r}function ve(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)xe(t[n],e);e.dependenciesState=ie.NOT_TRACKING}function be(e){var t=ye();try{return e()}finally{ge(t)}}function ye(){var e=ke.trackingDerivation;return ke.trackingDerivation=null,e}function ge(e){ke.trackingDerivation=e}function _e(e){if(e.dependenciesState!==ie.UP_TO_DATE){e.dependenciesState=ie.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=ie.UP_TO_DATE}}var we=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Oe=!0,je=!1,ke=function(){var e=Ee();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Oe=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new we).version&&(Oe=!1),Oe?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new we):(setTimeout((function(){je||d("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new we)}();function Ee(){return"undefined"!=typeof window?window:r}function Se(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function xe(e,t){e.observers.delete(t),0===e.observers.size&&Ne(e)}function Ne(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,ke.pendingUnobservations.push(e))}function Te(){ke.inBatch++}function Ae(){if(0==--ke.inBatch){Ie();for(var e=ke.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof ue&&n.suspend())}ke.pendingUnobservations=[]}}function Pe(e){var t=ke.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&ke.inBatch>0&&Ne(e),!1)}function Ce(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===ae.BREAK){var n=[];!function e(t,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,n,r+1)})))}((r=e,Qe(Dt(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof ue?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var De=function(){function e(e,t,n){void 0===e&&(e="Reaction@"+p()),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=ie.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+p(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ae.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,ke.pendingReactions.push(this),Ie())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Te(),this._isScheduled=!1,he(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(e){this.reportExceptionInDerivation(e)}}Ae()}},e.prototype.track=function(e){if(!this.isDisposed){Te(),this._isRunning=!0;var t=fe(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ve(this),de(t)&&this.reportExceptionInDerivation(t.cause),Ae()}},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(ke.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";ke.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,e),ke.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Te(),ve(this),Ae()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[E]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=function(e){switch(e.length){case 0:return ke.trackingDerivation;case 1:return Dt(e[0]);case 2:return Dt(e[0],e[1])}}(e);if(!r)return d(!1);r.isTracing===ae.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?ae.BREAK:ae.LOG}(this,e)},e}(),Re=100,Me=function(e){return e()};function Ie(){ke.inBatch>0||ke.isRunningReactions||Me(Ue)}function Ue(){ke.isRunningReactions=!0;for(var e=ke.pendingReactions,t=0;e.length>0;){++t===Re&&(console.error("Reaction doesn't converge to a stable state after "+Re+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,s=n.length;r<s;r++)n[r].runReaction()}ke.isRunningReactions=!1}var Le=g("Reaction",De);function Be(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function He(){d(!1)}function $e(e){return function(t,n,r){if(r){if(r.value)return{value:ee(e,r.value),enumerable:!1,configurable:!0,writable:!0};var s=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return ee(e,s.call(this))}}}return ze(e).apply(this,arguments)}}function ze(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){y(this,n,Ve(e,t))}})}}var Ve=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?ee(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?ee(e,t):1===arguments.length&&"string"==typeof e?$e(e):!0!==r?$e(t).apply(null,arguments):void y(e,t,ee(e.name||t,n.value,this))};function We(e,t){return"string"==typeof e||e.name,te(0,"function"==typeof e?e:t,this,void 0)}function Fe(e,t,n){y(e,t,ee(t,n.bind(e)))}Ve.bound=function(e,t,n,r){return!0===r?(Fe(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Fe(this,t,n.value||n.initializer.call(this)),this[t]},set:He}:{enumerable:!1,configurable:!0,set:function(e){Fe(this,t,e)},get:function(){}}};var Ge=function(e){return e()};function qe(e,t,n,r){var s="string"==typeof n?Dt(t,n):Dt(t),o="string"==typeof n?r:n,i=e+"Listeners";return s[i]?s[i].add(o):s[i]=new Set([o]),"function"!=typeof s[e]?d(!1):function(){var e=s[i];e&&(e.delete(o),0===e.size&&delete s[i])}}function Je(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.computedConfigurable,s=e.disableErrorBoundaries,o=e.reactionScheduler;if(!0===e.isolateGlobalState&&((ke.pendingReactions.length||ke.inBatch||ke.isRunningReactions)&&d("isolateGlobalState should be called before MobX is running any reactions"),je=!0,Oe&&(0==--Ee().__mobxInstanceCount&&(Ee().__mobxGlobals=void 0),ke=new we)),void 0!==t){var i=void 0;switch(t){case!0:case"observed":i=!0;break;case!1:case"never":i=!1;break;case"strict":case"always":i="strict";break;default:d("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}ke.enforceActions=i,ke.allowStateChanges=!0!==i&&"strict"!==i}void 0!==n&&(ke.computedRequiresReaction=!!n),void 0!==r&&(ke.computedConfigurable=!!r),void 0!==s&&(!0===s&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),ke.disableErrorBoundaries=!!s),o&&function(e){var t=Me;Me=function(n){return e((function(){return t(n)}))}}(o)}function Ke(e,t,n,r){var s=Ye(r=z(r));return M(e),xt(e,r.name,s.enhancer),t&&Xe(e,t,n,s),e}function Ye(e){return e.defaultDecorator||(!1===e.deep?F:V)}function Xe(e,t,n,r){var s,o;Te();try{var a=O(t);try{for(var c=i(a),u=c.next();!u.done;u=c.next()){var l=u.value,p=Object.getOwnPropertyDescriptor(t,l),d=(n&&l in n?n[l]:p.get?X:r)(e,l,p,!0);d&&Object.defineProperty(e,l,d)}}catch(e){s={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}}finally{Ae()}}function Qe(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(Qe)),r}function Ze(e){return 1!==arguments.length&&d(!1),function(e,t){return null!=e&&(void 0!==t?!!Ct(e)&&e[E].values.has(t):Ct(e)||!!e[E]||x(e)||Le(e)||le(e))}(e)}function et(e,t,n,r){return"function"==typeof n?function(e,t,n,r){return Rt(e,t).observe(n,r)}(e,t,n,r):function(e,t,n){return Rt(e).observe(t,n)}(e,t,n)}function tt(e,t){void 0===t&&(t=void 0),Te();try{return e.apply(t)}finally{Ae()}}function nt(e){return e[E]}function rt(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e}var st={has:function(e,t){if(t===E||"constructor"===t||t===A)return!0;var n=nt(e);return rt(t)?n.has(t):t in e},get:function(e,t){if(t===E||"constructor"===t||t===A)return e[t];var n=nt(e),r=n.values.get(t);if(r instanceof S){var s=r.get();return void 0===s&&n.has(t),s}return rt(t)&&n.has(t),e[t]},set:function(e,t,n){return!!rt(t)&&(function e(t,n,r){if(2!==arguments.length||Et(t))if(Ct(t)){var s=t[E];s.values.get(n)?s.write(n,r):s.addObservableProp(n,r,s.defaultEnhancer)}else if(Ot(t))t.set(n,r);else if(Et(t))t.add(n);else{if(!yt(t))return d(!1);"number"!=typeof n&&(n=parseInt(n,10)),h(n>=0,"Not a valid index: '"+n+"'"),Te(),n>=t.length&&(t.length=n+1),t[n]=r,Ae()}else{Te();var o=n;try{for(var i in o)e(t,i,o[i])}finally{Ae()}}}(e,t,n),!0)},deleteProperty:function(e,t){return!!rt(t)&&(nt(e).remove(t),!0)},ownKeys:function(e){return nt(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return d("Dynamic observable objects cannot be frozen"),!1}};function ot(e){var t=new Proxy(e,st);return e[E].proxy=t,t}function it(e){return void 0!==e.interceptors&&e.interceptors.length>0}function at(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),m((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ct(e,t){var n=ye();try{var r=e.interceptors;if(r)for(var s=0,o=r.length;s<o&&(h(!(t=r[s](t))||t.type,"Intercept handlers should return nothing or a change object"),t);s++);return t}finally{ge(n)}}function ut(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function lt(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),m((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function pt(e,t){var n=ye(),r=e.changeListeners;if(r){for(var s=0,o=(r=r.slice()).length;s<o;s++)r[s](t);ge(n)}}var dt={get:function(e,t){return t===E?e[E]:"length"===t?e[E].getArrayLength():"number"==typeof t?ft.get.call(e,t):"string"!=typeof t||isNaN(t)?ft.hasOwnProperty(t)?ft[t]:e[t]:ft.get.call(e,parseInt(t))},set:function(e,t,n){return"length"===t?(e[E].setArrayLength(n),!0):"number"==typeof t?(ft.set.call(e,t,n),!0):!isNaN(t)&&(ft.set.call(e,parseInt(t),n),!0)},preventExtensions:function(e){return d("Observable arrays cannot be frozen"),!1}};function ht(e,t,n,r){void 0===n&&(n="ObservableArray@"+p()),void 0===r&&(r=!1);var s,o,i,a=new mt(n,t,r);s=a.values,o=E,i=a,Object.defineProperty(s,o,{enumerable:!1,writable:!1,configurable:!0,value:i});var c=new Proxy(a.values,dt);if(a.proxy=c,e&&e.length){var u=se(!0);a.spliceWithArray(0,0,e),oe(u)}return c}var mt=function(){function e(e,t,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new S(e||"ObservableArray@"+p()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return at(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),lt(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,n){var r=this;me(this.atom);var s=this.values.length;if(void 0===e?e=0:e>s?e=s:e<0&&(e=Math.max(0,s+e)),t=1===arguments.length?s-e:null==t?0:Math.max(0,Math.min(t,s-e)),void 0===n&&(n=u),it(this)){var o=ct(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:n});if(!o)return u;t=o.removedCount,n=o.added}n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}));var i=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,i),this.dehanceValues(i)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}([e,t],n));var s=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),s},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&!1,s=ut(this),o=s||r?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:n}:null;this.atom.reportChanged(),s&&pt(this,o)},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&!1,s=ut(this),o=s||r?{object:this.proxy,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom.reportChanged(),s&&pt(this,o)},e}(),ft={intercept:function(e){return this[E].intercept(e)},observe:function(e,t){return void 0===t&&(t=!1),this[E].observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[E];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=this[E];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray(e);case 2:return s.spliceWithArray(e,t)}return s.spliceWithArray(e,t,n)},spliceWithArray:function(e,t,n){return this[E].spliceWithArray(e,t,n)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[E];return n.spliceWithArray(n.values.length,0,e),n.values.length},pop:function(){return this.splice(Math.max(this[E].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[E];return n.spliceWithArray(0,0,e),n.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[E],n=t.dehanceValues(t.values).indexOf(e);return n>-1&&(this.splice(n,1),!0)},get:function(e){var t=this[E];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var n=this[E],r=n.values;if(e<r.length){me(n.atom);var s=r[e];if(it(n)){var o=ct(n,{type:"update",object:n.proxy,index:e,newValue:t});if(!o)return;t=o.newValue}(t=n.enhancer(t,s))!==s&&(r[e]=t,n.notifyArrayChildUpdate(e,t,s))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(e){ft[e]=function(){var t=this[E];t.atom.reportObserved();var n=t.dehanceValues(t.values);return n[e].apply(n,arguments)}}));var vt,bt=g("ObservableArrayAdministration",mt);function yt(e){return v(e)&&bt(e[E])}var gt,_t={},wt=function(){function e(e,t,n){if(void 0===t&&(t=L),void 0===n&&(n="ObservableMap@"+p()),this.enhancer=t,this.name=n,this[vt]=_t,this._keysAtom=N(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,t){var n=this._has(e);if(it(this)){var r=ct(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(it(this)&&!(r=ct(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=ut(this),r=n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return tt((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),n&&pt(this,r),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);return n?n.setNewValue(t):(n=new ce(t,B,this.name+"."+j(e)+"?",!1),this._hasMap.set(e,n)),n},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==ke.UNCHANGED){var r=ut(this),s=r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;n.setNewValue(t),r&&pt(this,s)}},e.prototype._addValue=function(e,t){var n=this;me(this._keysAtom),tt((function(){var r=new ce(t,n.enhancer,n.name+"."+j(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()}));var r=ut(this);r&&pt(this,r?{type:"add",object:this,name:e,newValue:t}:null)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=0,n=Array.from(this.keys());return Ht({next:function(){return t<n.length?{value:e.get(n[t++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var e=this,t=0,n=Array.from(this.keys());return Ht({next:function(){if(t<n.length){var r=n[t++];return{value:[r,e.get(r)],done:!1}}return{done:!0}}})},e.prototype[(vt=E,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,t){var n,r;try{for(var s=i(this),o=s.next();!o.done;o=s.next()){var c=a(o.value,2),u=c[0],l=c[1];e.call(t,l,u,this)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.merge=function(e){var t=this;return Ot(e)&&(e=e.toJS()),tt((function(){b(e)?O(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=a(e,2),r=n[0],s=n[1];return t.set(r,s)})):_(e)?(e.constructor!==Map&&d("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&d("Cannot initialize map from "+e)})),this},e.prototype.clear=function(){var e=this;tt((function(){be((function(){var t,n;try{for(var r=i(e.keys()),s=r.next();!s.done;s=r.next()){var o=s.value;e.delete(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))}))},e.prototype.replace=function(e){var t=this;return tt((function(){var n,r=b(n=e)?Object.keys(n):Array.isArray(n)?n.map((function(e){return a(e,1)[0]})):_(n)||Ot(n)?Array.from(n.keys()):d("Cannot get keys from '"+n+"'");Array.from(t.keys()).filter((function(e){return-1===r.indexOf(e)})).forEach((function(e){return t.delete(e)})),t.merge(e)})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,t,n={};try{for(var r=i(this),s=r.next();!s.done;s=r.next()){var o=a(s.value,2),c=o[0],u=o[1];n["symbol"==typeof c?c:j(c)]=u}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map((function(t){return j(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return lt(this,e)},e.prototype.intercept=function(e){return at(this,e)},e}(),Ot=g("ObservableMap",wt),jt={},kt=function(){function e(e,t,n){if(void 0===t&&(t=L),void 0===n&&(n="ObservableSet@"+p()),this.name=n,this[gt]=jt,this._data=new Set,this._atom=N(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;tt((function(){be((function(){var t,n;try{for(var r=i(e._data.values()),s=r.next();!s.done;s=r.next()){var o=s.value;e.delete(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))}))},e.prototype.forEach=function(e,t){var n,r;try{for(var s=i(this),o=s.next();!o.done;o=s.next()){var a=o.value;e.call(t,a,a,this)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if(me(this._atom),it(this)&&!(r=ct(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){tt((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=ut(this),r=n?{type:"add",object:this,newValue:e}:null;n&&pt(this,r)}return this},e.prototype.delete=function(e){var t=this;if(it(this)&&!(r=ct(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var n=ut(this),r=n?{type:"delete",object:this,oldValue:e}:null;return tt((function(){t._atom.reportChanged(),t._data.delete(e)})),n&&pt(this,r),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Ht({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,n=Array.from(this._data.values());return Ht({next:function(){return t<n.length?{value:e.dehanceValue(n[t++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Et(e)&&(e=e.toJS()),tt((function(){Array.isArray(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):w(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&d("Cannot initialize set from "+e)})),this},e.prototype.observe=function(e,t){return lt(this,e)},e.prototype.intercept=function(e){return at(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[(gt=E,Symbol.iterator)]=function(){return this.values()},e}(),Et=g("ObservableSet",kt),St=function(){function e(e,t,n,r){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=n,this.defaultEnhancer=r,this.keysAtom=new S(n+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var n=this.target,r=this.values.get(e);if(r instanceof ue)r.set(t);else{if(it(this)){if(!(o=ct(this,{type:"update",object:this.proxy||n,name:e,newValue:t})))return;t=o.newValue}if((t=r.prepareNewValue(t))!==ke.UNCHANGED){var s=ut(this),o=s?{type:"update",object:this.proxy||n,oldValue:r.value,name:e,newValue:t}:null;r.setNewValue(t),s&&pt(this,o)}}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),n=t.get(e);if(n)return n.get();var r=!!this.values.get(e);return n=new ce(r,B,this.name+"."+j(e)+"?",!1),t.set(e,n),n.get()},e.prototype.addObservableProp=function(e,t,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(it(this)){var s=ct(this,{object:this.proxy||r,name:e,type:"add",newValue:t});if(!s)return;t=s.newValue}var o=new ce(t,n,this.name+"."+j(e),!1);this.values.set(e,o),t=o.value,Object.defineProperty(r,e,function(e){return Nt[e]||(Nt[e]={configurable:!0,enumerable:!0,get:function(){return this[E].read(e)},set:function(t){this[E].write(e,t)}})}(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,n){var r,s,o,i=this.target;n.name=n.name||this.name+"."+j(t),this.values.set(t,new ue(n)),(e===i||(r=e,s=t,!(o=Object.getOwnPropertyDescriptor(r,s))||!1!==o.configurable&&!1!==o.writable))&&Object.defineProperty(e,t,function(e){return Tt[e]||(Tt[e]={configurable:ke.computedConfigurable,enumerable:!1,get:function(){return At(this).read(e)},set:function(t){At(this).write(e,t)}})}(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(it(this)&&!(i=ct(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{Te();var n=ut(this),r=this.values.get(e),s=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var o=this.pendingKeys.get(e);o&&o.set(!1)}delete this.target[e];var i=n?{type:"remove",object:this.proxy||t,oldValue:s,name:e}:null;n&&pt(this,i)}finally{Ae()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return lt(this,e)},e.prototype.intercept=function(e){return at(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var n=ut(this),r=n?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(n&&pt(this,r),this.pendingKeys){var s=this.pendingKeys.get(e);s&&s.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var n=[];try{for(var r=i(this.values),s=r.next();!s.done;s=r.next()){var o=a(s.value,2),c=o[0];o[1]instanceof ce&&n.push(c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e}();function xt(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=L),Object.prototype.hasOwnProperty.call(e,E))return e[E];b(e)||(t=(e.constructor.name||"ObservableObject")+"@"+p()),t||(t="ObservableObject@"+p());var r=new St(e,new Map,j(t),n);return y(e,E,r),r}var Nt=Object.create(null),Tt=Object.create(null);function At(e){return e[E]||(M(e),e[E])}var Pt=g("ObservableObjectAdministration",St);function Ct(e){return!!v(e)&&(M(e),Pt(e[E]))}function Dt(e,t){if("object"==typeof e&&null!==e){if(yt(e))return void 0!==t&&d(!1),e[E].atom;if(Et(e))return e[E];if(Ot(e)){var n=e;return void 0===t?n._keysAtom:((r=n._data.get(t)||n._hasMap.get(t))||d(!1),r)}var r;if(M(e),t&&!e[E]&&e[t],Ct(e))return t?((r=e[E].values.get(t))||d(!1),r):d(!1);if(x(e)||le(e)||Le(e))return e}else if("function"==typeof e&&Le(e[E]))return e[E];return d(!1)}function Rt(e,t){return e||d("Expecting some object"),void 0!==t?Rt(Dt(e,t)):x(e)||le(e)||Le(e)?e:Ot(e)||Et(e)?e:(M(e),e[E]?e[E]:void d(!1))}function Mt(e,t){return(void 0!==t?Dt(e,t):Ct(e)||Ot(e)||Et(e)?Rt(e):Dt(e)).name}var It=Object.prototype.toString;function Ut(e,t){return function e(t,n,r,s){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var o=typeof t;return("function"===o||"object"===o||"object"==typeof n)&&function(t,n,r,s){t=Lt(t),n=Lt(n);var o=It.call(t);if(o!==It.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var i="[object Array]"===o;if(!i){if("object"!=typeof t||"object"!=typeof n)return!1;var a=t.constructor,c=n.constructor;if(a!==c&&!("function"==typeof a&&a instanceof a&&"function"==typeof c&&c instanceof c)&&"constructor"in t&&"constructor"in n)return!1}s=s||[];for(var u=(r=r||[]).length;u--;)if(r[u]===t)return s[u]===n;if(r.push(t),s.push(n),i){if((u=t.length)!==n.length)return!1;for(;u--;)if(!e(t[u],n[u],r,s))return!1}else{var l=Object.keys(t),p=void 0;if(u=l.length,Object.keys(n).length!==u)return!1;for(;u--;)if(!Bt(n,p=l[u])||!e(t[p],n[p],r,s))return!1}return r.pop(),s.pop(),!0}(t,n,r,s)}(e,t)}function Lt(e){return yt(e)?e.slice():_(e)||Ot(e)?Array.from(e.entries()):w(e)||Et(e)?Array.from(e.entries()):e}function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ht(e){return e[Symbol.iterator]=$t,e}function $t(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Be,extras:{getDebugName:Mt},$mobx:E})}).call(this,n("2YuA"),n("btiA"))},EaeJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.renderHeaderStream=o(this.renderHeaderStream,this),this.render=o(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e;return Object(s.div)({className:osu.classWithModifiers("update-streams-v2",[null!=this.props.currentStreamId?"with-active":void 0])},Object(s.div)({className:"update-streams-v2__container"},function(){var t,n,r,s;for(s=[],t=0,n=(r=this.props.updateStreams).length;t<n;t++)e=r[t],s.push(this.renderHeaderStream({stream:e}));return s}.call(this)))},t.prototype.renderHeaderStream=function(e){var t,n,r;return n=e.stream,r=_.kebabCase(n.display_name),t=osu.classWithModifiers("update-streams-v2__item",[r,n.is_featured?"featured":void 0,this.props.currentStreamId===n.id?"active":void 0]),t+=" t-changelog-stream--"+r,Object(s.a)({href:_exported.OsuUrlHelper.changelogBuild(n.latest_build),key:n.id,className:t},Object(s.div)({className:"update-streams-v2__bar u-changelog-stream--bg"}),Object(s.p)({className:"update-streams-v2__row update-streams-v2__row--name"},n.display_name),Object(s.p)({className:"update-streams-v2__row update-streams-v2__row--version"},n.latest_build.display_version),n.user_count>0?Object(s.p)({className:"update-streams-v2__row update-streams-v2__row--users"},osu.transChoice("changelog.builds.users_online",n.user_count)):void 0)},t}(r.PureComponent)},EiUu:function(e,t,n){"use strict";var r=n("RnBu");e.exports=function(e,t){if("string"!=typeof e)return e;if(0===e.length)return e;var n=r.basename(e,r.extname(e))+t;return r.join(r.dirname(e),n)}},ElYz:function(e,t,n){"use strict";var r=n("DmM8"),s=n("WCVR"),o=n("p3jD");e.exports=function(e,t){var n,l,p,d,h=e.split(a),m=h.length+1,f=1/0,v=[];for(h.unshift(s(c,t)+u);m--;)if(l=o(h[m]),v[m]=l.stops,0!==r(h[m]).length){if(!l.indent){f=1/0;break}l.indent>0&&l.indent<f&&(f=l.indent)}if(f!==1/0)for(m=h.length;m--;){for(p=v[m],n=f;n&&!(n in p);)n--;d=0!==r(h[m]).length&&f&&n!==f?i:"",h[m]=d+h[m].slice(n in p?p[n]+1:0)}return h.shift(),h.join(a)};var i="\t",a="\n",c=" ",u="!"},Eo6g:function(e,t,n){"use strict";var r=n("AMMU"),s=n("mPRR");e.exports=m,m.notInList=!0,m.notInBlock=!0;var o="\\",i="\n",a="\t",c=" ",u="[",l="]",p="^",d=":",h=/^( {4}|\t)?/gm;function m(e,t,n){var m,f,v,b,y,g,_,w,O,j,k,E,S=this.offset;if(this.options.footnotes){for(m=0,f=t.length,v="",b=e.now(),y=b.line;m<f&&(O=t.charAt(m),r(O));)v+=O,m++;if(t.charAt(m)===u&&t.charAt(m+1)===p){for(m=(v+=u+p).length,_="";m<f&&(O=t.charAt(m))!==l;)O===o&&(_+=O,m++,O=t.charAt(m)),_+=O,m++;if(_&&t.charAt(m)===l&&t.charAt(m+1)===d){if(n)return!0;for(j=_,m=(v+=_+l+d).length;m<f&&((O=t.charAt(m))===a||O===c);)v+=O,m++;for(b.column+=v.length,b.offset+=v.length,_="",g="",w="";m<f;){if((O=t.charAt(m))===i){for(w=O,m++;m<f&&(O=t.charAt(m))===i;)w+=O,m++;for(_+=w,w="";m<f&&(O=t.charAt(m))===c;)w+=O,m++;if(0===w.length)break;_+=w}_&&(g+=_,_=""),g+=O,m++}return v+=g,g=g.replace(h,(function(e){return S[y]=(S[y]||0)+e.length,y++,""})),k=e(v),E=this.enterBlock(),g=this.tokenizeBlock(g,b),E(),k({type:"footnoteDefinition",identifier:s(j),label:j,children:g})}}}}},Ev30:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,s=n("If6E"),o=n("cDcd"),i=n("NzAu"),a=n("TY2o"),c=n("4cxI"),u=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty;r=o.createElement;var p=function(e){var t;function n(){return this.previousUsernames=u(this.previousUsernames,this),this.render=u(this.render,this),n.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),t="profile-info",n.prototype.render=function(){var e,n,o;return e=r(a.a,{user:this.props.user,modifiers:["full"]}),Object(i.div)({className:t},Object(i.div)({className:t+"__bg",style:{backgroundImage:osu.urlPresence(this.props.coverUrl)}}),this.props.user.id===currentUser.id?Object(i.a)({className:t+"__avatar",href:laroute.route("account.edit")+"#avatar",title:osu.trans("users.show.change_avatar")},e):Object(i.div)({className:t+"__avatar"},e),Object(i.div)({className:t+"__details"},Object(i.h1)({className:t+"__name"},Object(i.span)({className:"u-ellipsis-overflow"},this.props.user.username),Object(i.div)({className:t+"__previous-usernames"},this.previousUsernames())),Object(i.span)({className:t+"__title",style:{color:this.props.user.profile_colour}},null!=(n=this.props.user.title)?n:" "),Object(i.div)({className:t+"__icon-group"},Object(i.div)({className:t+"__icons"},this.props.user.is_supporter?Object(i.span)({className:t+"__icon "+t+"__icon--supporter",title:osu.trans("users.show.is_supporter")},_(this.props.user.support_level).times((function(e){return Object(i.span)({key:e,className:"fas fa-heart"})}))):void 0,null!=this.props.user.group_badge?Object(i.span)({className:t+"__icon"},r(c.a,{badge:this.props.user.group_badge,modifiers:["profile-page"]})):void 0),Object(i.div)({className:t+"__icons "+t+"__icons--flag"},null!=(null!=(o=this.props.user.country)?o.code:void 0)?Object(i.a)({className:t+"__flag "+t+"__flag--country",href:laroute.route("rankings",{mode:this.props.currentMode,country:this.props.user.country.code,type:"performance"})},Object(i.span)({className:t+"__flag-flag"},r(s.a,{country:this.props.user.country,modifiers:["full"]})),Object(i.span)({className:t+"__flag-text"},this.props.user.country.name)):void 0))),Object(i.div)({className:"profile-info__bar hidden-xs",style:{backgroundColor:this.props.user.profile_colour}}))},n.prototype.previousUsernames=function(){var e;if(0!==this.props.user.previous_usernames.length)return e=this.props.user.previous_usernames.join(", "),Object(i.div)({className:"profile-previous-usernames"},Object(i.a)({className:"profile-previous-usernames__icon profile-previous-usernames__icon--with-title",title:osu.trans("users.show.previous_usernames")+": "+e,onClick:this.doNothing},Object(i.span)({className:"fas fa-address-card"})),Object(i.div)({className:"profile-previous-usernames__icon profile-previous-usernames__icon--plain"},Object(i.span)({className:"fas fa-address-card"})),Object(i.div)({className:"profile-previous-usernames__content"},Object(i.div)({className:"profile-previous-usernames__title"},osu.trans("users.show.previous_usernames")),Object(i.div)({className:"profile-previous-usernames__names"},e)))},n.prototype.doNothing=function(e){},n}(o.PureComponent)},FAY1:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("0h6b"),s=n("YLtl"),o=n("C92G"),i=n("cDcd"),a=n("hc33");class c extends i.PureComponent{get canReport(){return!s.isEmpty(currentUser)&&null!=currentUser.id&&currentUser.id!==this.props.score.user_id}render(){const{score:e}=this.props;return i.createElement(o.a,null,t=>i.createElement(i.Fragment,null,e.replay?i.createElement("a",{className:"simple-menu__item js-login-required--click","data-turbolinks":!1,href:Object(r.route)("scores.download",{mode:e.mode,score:e.id}),onClick:t},osu.trans("users.show.extra.top_ranks.download_replay")):null,this.canReport?i.createElement(a.a,{className:"simple-menu__item",baseKey:"scores",reportableId:e.id,reportableType:`score_best_${e.mode}`,user:e.user}):null))}}},FVE9:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,s,o=n("cDcd"),i=n("NzAu"),a=n("SYfz"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;s=o.createElement,r="user-action-button";var l=function(e){function t(e){var n,r,s;this.isVisible=c(this.isVisible,this),this.followers=c(this.followers,this),this.renderIcon=c(this.renderIcon,this),this.renderCounter=c(this.renderCounter,this),this.render=c(this.render,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidMount=c(this.componentDidMount,this),this.refresh=c(this.refresh,this),this.clicked=c(this.clicked,this),this.updateFriends=c(this.updateFriends,this),this.requestDone=c(this.requestDone,this),t.__super__.constructor.call(this,e),this.button=o.createRef(),this.eventId="friendButton-"+this.props.userId+"-"+osu.uuid(),r=_.find(currentUser.friends,{target_id:e.userId}),n=null!=(s=this.props.followers)?s:0,null!=r&&(n-=1),this.state={friend:r,followersWithoutSelf:n}}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.defaultProps={showFollowerCounter:!1,alwaysVisible:!1},t.prototype.requestDone=function(){return this.setState({loading:!1})},t.prototype.updateFriends=function(e){return this.setState({friend:_.find(e,{target_id:this.props.userId})},(function(){return currentUser.friends=e,$.publish("user:update",currentUser),$.publish("friendButton:refresh")}))},t.prototype.clicked=function(e){return this.setState({loading:!0}),null!=this.state.friend?this.xhr=$.ajax({type:"DELETE",url:laroute.route("friends.destroy",{friend:this.props.userId})}):this.xhr=$.ajax({type:"POST",url:laroute.route("friends.store",{target:this.props.userId})}),this.xhr.done(this.updateFriends).fail(osu.emitAjaxError(this.button.current)).always(this.requestDone)},t.prototype.refresh=function(e){return this.setState({friend:_.find(currentUser.friends,{target_id:this.props.userId})},(function(){}),this.forceUpdate())},t.prototype.componentDidMount=function(){return $.subscribe("friendButton:refresh."+this.eventId,this.refresh)},t.prototype.componentWillUnmount=function(){var e;return $.unsubscribe("."+this.eventId),null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e,t,n,s,o,a,c,u,l,p;if("friend"===this.props.showIf&&null==this.state.friend)return null;if("mutual"===this.props.showIf&&!(null!=(o=this.state.friend)?o.mutual:void 0))return null;if(s=this.isVisible(),!this.props.alwaysVisible){if(!s)return null!=(c=this.props.container)&&c.classList.add("hidden"),null;null!=(a=this.props.container)&&a.classList.remove("hidden")}return e=osu.classWithModifiers(r,this.props.modifiers),n=(null!=(u=null!=(l=currentUser.friends)?l.length:void 0)?u:0)>=currentUser.max_friends,p=function(){switch(!1){case!!s:return osu.trans("friends.buttons.disabled");case null==this.state.friend:return osu.trans("friends.buttons.remove");case!n:return osu.trans("friends.too_many");default:return osu.trans("friends.buttons.add")}}.call(this),t=!s||this.state.loading||n&&null==this.state.friend,null==this.state.friend||this.state.loading||(this.state.friend.mutual?e+=" "+r+"--mutual":e+=" "+r+"--friend"),Object(i.div)({title:p},Object(i.button)({type:"button",className:e,onClick:this.clicked,ref:this.button,disabled:t},this.renderIcon({isFriendLimit:n,isVisible:s}),this.renderCounter()))},t.prototype.renderCounter=function(){if(this.props.showFollowerCounter&&null!=this.props.followers)return Object(i.span)({className:r+"__counter"},osu.formatNumber(this.followers()))},t.prototype.renderIcon=function(e){var t,n;return t=e.isFriendLimit,n=e.isVisible,Object(i.span)({className:r+"__icon-container"},function(){switch(!1){case!this.state.loading:return s(a.a);case!!n:return Object(i.i)({className:"fas fa-user"});case null==this.state.friend:return[Object(i.span)({key:"hover",className:r+"__icon "+r+"__icon--hover-visible"},Object(i.i)({className:"fas fa-user-times"})),this.state.friend.mutual?Object(i.span)({key:"normal-mutual",className:r+"__icon "+r+"__icon--hover-hidden"},Object(i.i)({className:"fas fa-user-friends"})):Object(i.span)({key:"normal",className:r+"__icon "+r+"__icon--hover-hidden"},Object(i.i)({className:"fas fa-user"}))];default:return Object(i.i)({className:t?"fas fa-user":"fas fa-user-plus"})}}.call(this))},t.prototype.followers=function(){return this.state.followersWithoutSelf+(null!=this.state.friend?1:0)},t.prototype.isVisible=function(){return null!=currentUser.id&&_.isFinite(this.props.userId)&&this.props.userId!==currentUser.id&&!_.find(currentUser.blocks,{target_id:this.props.userId})},t}(o.PureComponent)},FiYg:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("EaLk"),s=n("JlDh"),o=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class i{constructor(e,t,n){this.notificationStore=e,this.contextType=t,this.currentFilter=void 0!==n?n:this.typeNameFromUrl,this.store=t.isWidget?e.unreadStacks:e.stacks}get legacyPm(){return this.store.legacyPm}get stacks(){return this.store.orderedStacksOfType(this.currentFilter)}get type(){return this.store.getOrCreateType({objectType:this.currentFilter})}get typeNameFromUrl(){const e=new URL(location.href);return Object(s.c)(e.searchParams.get("type"))}loadMore(){var e;null===(e=this.type)||void 0===e||e.loadMore(this.contextType)}navigateTo(e){if(this.currentFilter=e,0===[...this.stacks].length&&this.loadMore(),!this.contextType.isWidget){let t;if(null==e){const e=new URL(window.location.href);e.searchParams.delete("type"),t=e.href}else t=osu.updateQueryString(null,{type:e});Turbolinks.controller.advanceHistory(t)}}}o([r.l],i.prototype,"currentFilter",void 0),o([r.e],i.prototype,"legacyPm",null),o([r.e],i.prototype,"stacks",null),o([r.e],i.prototype,"type",null),o([r.d],i.prototype,"loadMore",null),o([r.d],i.prototype,"navigateTo",null)},GLyB:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(e){this.previewStop=o(this.previewStop,this),this.previewPlay=o(this.previewPlay,this),t.__super__.constructor.call(this,e),this.state={playing:!1}}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return this.eventId="trackpreview-"+this.props.track.id,$.subscribe("osuAudio:initializing."+this.eventId,this.previewPlay),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop)},t.prototype.componentWillUnmount=function(){return $.unsubscribe("."+this.eventId)},t.prototype.render=function(){return Object(s.div)({className:"tracklist__cover",style:{backgroundImage:osu.urlPresence(this.props.track.cover_url)}},Object(s.a)({className:"tracklist__preview js-audio--play",href:"#","data-audio-url":this.props.track.preview},Object(s.i)({className:"fas "+(this.state.playing?"fa-pause":"fa-play")})))},t.prototype.previewPlay=function(e,t){return t.url!==this.props.track.preview?this.previewStop():this.setState({playing:!0})},t.prototype.previewStop=function(e){if(this.state.playing)return this.setState({playing:!1})},t}(r.Component)},GhGe:function(e,t,n){"use strict";var r=n("nHh1"),s=n("jiio"),o=n("pVYY"),i=n("gTvg"),a=n("pI+u");e.exports=function e(){var t=[],n=i(),b={},y=!1,g=-1;return _.data=function(e,t){return"string"==typeof e?2===arguments.length?(m("data",y),b[e]=t,_):u.call(b,e)&&b[e]||null:e?(m("data",y),b=e,_):b},_.freeze=w,_.attachers=t,_.use=function(e){var n;if(m("use",y),null==e);else if("function"==typeof e)u.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?i(e):s(e)}return n&&(b.settings=r(b.settings||{},n)),_;function s(e){i(e.plugins),e.settings&&(n=r(n||{},e.settings))}function o(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?u.apply(null,e):s(e)}}function i(e){var t,n;if(null==e);else{if(!("object"==typeof e&&"length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,n=-1;++n<t;)o(e[n])}}function u(e,n){var s=function(e){for(var n,r=t.length,s=-1;++s<r;)if((n=t[s])[0]===e)return n}(e);s?(a(s[1])&&a(n)&&(n=r(s[1],n)),s[1]=n):t.push(c.call(arguments))}},_.parse=function(e){var t,n=o(e);return w(),d("parse",t=_.Parser),p(t,"parse")?new t(String(n),n).parse():t(String(n),n)},_.stringify=function(e,t){var n,r=o(t);return w(),h("stringify",n=_.Compiler),f(e),p(n,"compile")?new n(e,r).compile():n(e,r)},_.run=O,_.runSync=function(e,t){var n,r=!1;return O(e,t,(function(e,t){r=!0,s(e),n=t})),v("runSync","run",r),n},_.process=j,_.processSync=function(e){var t,n=!1;return w(),d("processSync",_.Parser),h("processSync",_.Compiler),j(t=o(e),(function(e){n=!0,s(e)})),v("processSync","process",n),t},_;function _(){for(var n=e(),s=t.length,o=-1;++o<s;)n.use.apply(null,t[o]);return n.data(r(!0,{},b)),n}function w(){var e,r,s,o;if(y)return _;for(;++g<t.length;)r=(e=t[g])[0],!1!==(s=e[1])&&(!0===s&&(e[1]=void 0),"function"==typeof(o=r.apply(_,e.slice(1)))&&n.use(o));return y=!0,g=1/0,_}function O(e,t,r){if(f(e),w(),r||"function"!=typeof t||(r=t,t=null),!r)return new Promise(s);function s(s,i){n.run(e,o(t),(function(t,n,o){n=n||e,t?i(t):s?s(n):r(null,n,o)}))}s(null,r)}function j(e,t){if(w(),d("process",_.Parser),h("process",_.Compiler),!t)return new Promise(n);function n(n,r){var s=o(e);l.run(_,{file:s},(function(e){e?r(e):n?n(s):t(null,s)}))}n(null,t)}}().freeze();var c=[].slice,u={}.hasOwnProperty,l=i().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,r,s){e?n(e):(t.tree=r,t.file=s,n())}))})).use((function(e,t){t.file.contents=e.stringify(t.tree,t.file)}));function p(e,t){return"function"==typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function d(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function h(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function m(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function f(e){if(!e||"string"!=typeof e.type)throw new Error("Expected node, got `"+e+"`")}function v(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},GtRd:function(e,t,n){"use strict";e.exports=function(e,t){for(var n=e.indexOf("\n",t);n>t&&" "===e.charAt(n-1);)n--;return n}},HYKJ:function(e,t,n){"use strict";function r(e){return function(t){var n=-1,r=e.length;if(t<0)return{};for(;++n<r;)if(e[n]>t)return{line:n+1,column:t-(e[n-1]||0)+1,offset:t};return{}}}function s(e){return function(t){var n=t&&t.line,r=t&&t.column;return!isNaN(n)&&!isNaN(r)&&n-1 in e?(e[n-2]||0)+r-1||0:-1}}e.exports=function(e){var t=function(e){for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(n+1),n=e.indexOf("\n",n+1);return t.push(e.length+1),t}(String(e));return{toPosition:r(t),toOffset:s(t)}}},If6E:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDcd"),s=n("NzAu");r.createElement;var o=function(e){var t,n,r;return n=e.country,r=e.modifiers,null==(null!=n?n.code:void 0)?null:(t=osu.classWithModifiers("flag-country",r),Object(s.span)({className:t,title:n.name,style:{backgroundImage:"url('/images/flags/"+n.code+".png')"}}))}},Ix6x:function(e,t,n){"use strict";var r=n("1OSS"),s=n("AMMU"),o=n("uLnF");e.exports=w,w.locator=o,w.notInLink=!0;var i='"',a="'",c="(",u=")",l=",",p=".",d=":",h=";",m="<",f="@",v="[",b="]",y="mailto:",g=["http://","https://",y],_=g.length;function w(e,t,n){var o,w,O,j,k,E,S,x,N,T,A,P,C;if(this.options.gfm){for(o="",j=-1;++j<_;)if(E=g[j],(S=t.slice(0,E.length)).toLowerCase()===E){o=S;break}if(o){for(j=o.length,x=t.length,N="",T=0;j<x&&(O=t.charAt(j),!s(O)&&O!==m)&&(O!==p&&O!==l&&O!==d&&O!==h&&O!==i&&O!==a&&O!==u&&O!==b||(A=t.charAt(j+1))&&!s(A))&&(O!==c&&O!==v||T++,O!==u&&O!==b||!(--T<0));)N+=O,j++;if(N){if(w=o+=N,E===y){if(-1===(k=N.indexOf(f))||k===x-1)return;w=w.substr(y.length)}return!!n||(C=this.enterLink(),P=this.inlineTokenizers,this.inlineTokenizers={text:P.text},w=this.tokenizeInline(w,e.now()),this.inlineTokenizers=P,C(),e(o)({type:"link",title:null,url:r(o,{nonTerminated:!1}),children:w}))}}}}},JN1X:function(e,t,n){"use strict";var r=n("DmM8"),s=n("QgkL");e.exports=function(e,t,n){for(var u,l,p,d,h,m,f,v,b,y=this.offset,g=this.blockTokenizers,_=this.interruptBlockquote,w=e.now(),O=w.line,j=t.length,k=[],E=[],S=[],x=0;x<j&&((l=t.charAt(x))===a||l===i);)x++;if(t.charAt(x)===c){if(n)return!0;for(x=0;x<j;){for(f=x,v=!1,-1===(d=t.indexOf(o,x))&&(d=j);x<j&&((l=t.charAt(x))===a||l===i);)x++;if(t.charAt(x)===c?(x++,v=!0,t.charAt(x)===a&&x++):x=f,h=t.slice(x,d),!v&&!r(h)){x=f;break}if(!v&&(p=t.slice(x),s(_,g,this,[e,p,!0])))break;m=f===x?h:t.slice(f,d),S.push(x-f),k.push(m),E.push(h),x=d+1}for(x=-1,j=S.length,u=e(k.join(o));++x<j;)y[O]=(y[O]||0)+S[x],O++;return b=this.enterBlock(),E=this.tokenizeBlock(E.join(o),w),b(),u({type:"blockquote",children:E})}};var o="\n",i="\t",a=" ",c=">"},JOWQ:function(e,t,n){"use strict";e.exports=function(e,t,n){return function(){var r=n||this,s=r[e];return r[e]=!t,function(){r[e]=s}}}},Jcop:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var l,p,d,h,m=-1,f=t.length+1,v="";++m<f&&((l=t.charAt(m))===r||l===o);)v+=l;if(l===i||l===a||l===c)for(p=l,v+=l,d=1,h="";++m<f;)if((l=t.charAt(m))===p)d++,v+=h+p,h="";else{if(l!==o)return d>=u&&(!l||l===s)?(v+=h,!!n||e(v)({type:"thematicBreak"})):void 0;h+=l}};var r="\t",s="\n",o=" ",i="*",a="-",c="_",u=3},JlDh:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n("EaLk"),s=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};const o=[null,"beatmapset","build","channel","forum_topic","news_post","user"],i=[{type:null},{type:"user"},{type:"beatmapset"},{type:"forum_topic"},{type:"news_post"},{type:"build"},{type:"channel"}];function a(e){const t=e;return o.indexOf(t)>-1?t:o[0]}class c{constructor(e,t){this.name=e,this.resolver=t,this.isLoading=!1,this.isMarkingAsRead=!1,this.stacks=new Map,this.total=0}get isEmpty(){return this.total<=0}get hasVisibleNotifications(){return this.total>0&&this.stacks.size>0||"legacy_pm"===this.name}get hasMore(){return null!==this.cursor&&this.stackNotificationCount<this.total}get identity(){return{objectType:this.name}}get stackNotificationCount(){return[...this.stacks.values()].reduce((e,t)=>e+t.total,0)}static fromJson(e,t){const n=new c(e.name,t);return n.updateWithJson(e),n}loadMore(e){null!==this.cursor&&(this.isLoading=!0,this.resolver.loadMore(this.identity,e,this.cursor).always(Object(r.d)(()=>{this.isLoading=!1})))}markTypeAsRead(){this.resolver.queueMarkAsRead(this)}removeStack(e){const t=this.stacks.delete(e.id);return t&&(this.total-=e.total),t}updateWithJson(e){this.cursor=e.cursor,this.total=e.total}}s([r.l],c.prototype,"cursor",void 0),s([r.l],c.prototype,"isLoading",void 0),s([r.l],c.prototype,"isMarkingAsRead",void 0),s([r.l],c.prototype,"stacks",void 0),s([r.l],c.prototype,"total",void 0),s([r.e],c.prototype,"isEmpty",null),s([r.e],c.prototype,"hasVisibleNotifications",null),s([r.e],c.prototype,"hasMore",null),s([r.e],c.prototype,"stackNotificationCount",null),s([r.d],c.prototype,"loadMore",null),s([r.d],c.prototype,"markTypeAsRead",null),s([r.d],c.prototype,"removeStack",null),s([r.d],c.prototype,"updateWithJson",null)},Jryd:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var s in r)n.call(r,s)&&(e[s]=r[s])}return e};var n=Object.prototype.hasOwnProperty},KHX3:function(e,t,n){"use strict";var r=n("Jryd"),s=n("GhGe"),o=n("SifC"),i=n("rf6O"),a=n("lYbo"),c=n("TRjL"),u=n("Oyu6"),l=n("UXHk"),p=n("k6t2"),d=n("6Nha"),h=n("0O0h"),m=n("6MCy"),f=n("wke6"),v=Object.keys(m),b=function(e){var t=e.source||e.children||"",n=e.parserOptions;if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var i=r(m,e.renderers),h=[[o,n]].concat(e.plugins||[]).reduce(y,s()),b=h.parse(t),g=r(e,{renderers:i,definitions:d(b)}),_=function(e){var t=[p,a()],n=e.disallowedTypes;e.allowedTypes&&(n=v.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var r=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(u.ofType(n,r)),e.allowNode&&t.push(u.ifNotMatch(e.allowNode,r));var s=!e.escapeHtml&&!e.skipHtml,o=(e.astPlugins||[]).some((function(e){return(Array.isArray(e)?e[0]:e).identity===f.HtmlParser}));return s&&!o&&t.push(c),e.astPlugins?t.concat(e.astPlugins):t}(e),w=h.runSync(b),O=_.reduce((function(e,t){return t(e,g)}),w);return l(O,g)};function y(e,t){return Array.isArray(t)?e.use.apply(e,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t)):e.use(t)}b.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:h,astPlugins:[],plugins:[],parserOptions:{}},b.propTypes={className:i.string,source:i.string,children:i.string,sourcePos:i.bool,rawSourcePos:i.bool,escapeHtml:i.bool,skipHtml:i.bool,allowNode:i.func,allowedTypes:i.arrayOf(i.oneOf(v)),disallowedTypes:i.arrayOf(i.oneOf(v)),transformLinkUri:i.oneOfType([i.func,i.bool]),linkTarget:i.oneOfType([i.func,i.string]),transformImageUri:i.func,astPlugins:i.arrayOf(i.func),unwrapDisallowed:i.bool,renderers:i.object,plugins:i.array,parserOptions:i.object},b.types=v,b.renderers=m,b.uriTransformer=h,e.exports=b},KMrT:function(e,t,n){"use strict";var r=n("cF9b"),s=n("cDcd"),o=n("2etm"),i=n("0h6b");function a(e){if("comment_new"===e.name)switch(e.objectType){case"beatmapset":return Object(i.route)("beatmapsets.show",{beatmapset:e.objectId});case"build":return Object(i.route)("changelog.show",{changelog:e.objectId,key:"id"});case"news_post":return Object(i.route)("news.show",{news:e.objectId,key:"id"})}switch(e.objectType){case"beatmapset":return Object(i.route)("beatmapsets.discussion",{beatmapset:e.objectId});case"channel":return Object(i.route)("chat.index",{sendto:e.sourceUserId});case"forum_topic":return Object(i.route)("forum.topics.show",{topic:e.objectId,start:"unread"})}}function c(e){switch(e.name){case"beatmapset_discussion_lock":case"beatmapset_discussion_unlock":case"beatmapset_disqualify":case"beatmapset_love":case"beatmapset_nominate":case"beatmapset_qualify":case"beatmapset_reset_nominations":return Object(i.route)("beatmapsets.discussion",{beatmapset:e.objectId});case"beatmapset_discussion_post_new":case"beatmapset_discussion_qualified_problem":return BeatmapDiscussionHelper.url({beatmapId:e.details.beatmapId,beatmapsetId:e.objectId,discussionId:e.details.discussionId});case"beatmapset_rank":return Object(i.route)("beatmapsets.show",{beatmapset:e.objectId});case"channel_message":return Object(i.route)("chat.index",{sendto:e.sourceUserId});case"comment_new":return Object(i.route)("comments.show",{comment:e.details.commentId});case"forum_topic_reply":return Object(i.route)("forum.posts.show",{post:e.details.postId});case"user_achievement_unlock":return`${Object(i.route)("users.show",{user:e.details.userId})}#medals`}}var u=n("h/Ip"),l=n("9zVE"),p=n("Ncbg"),d=n("mjdM");function h(e,t=!1){const n={content:e.details.content,title:e.details.title,username:e.details.username};let r=`notifications.item.${e.displayType}.${e.category}`;"channel"===e.objectType&&(r+=`.${e.details.type}`),r+=`.${e.name}`,t&&(r+="_compact");const s=`${r}_empty`;return null==e.details.content&&osu.transExists(s)&&(r=s),osu.trans(r,n)}let m=class extends s.Component{constructor(){super(...arguments),this.handleMarkAsRead=()=>{this.props.stack.markAsRead(this.props.item)}}render(){return s.createElement(d.a,{markRead:this.handleMarkAsRead,icons:o.c[this.props.item.name||""],item:this.props.item,message:h(this.props.item,!0),modifiers:["compact"],url:c(this.props.item),withCategory:!1,withCoverImage:!1})}};var f=m=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([r.d],m);let v=class extends s.Component{constructor(){super(...arguments),this.state={expanded:!1},this.handleMarkAsRead=()=>{this.props.stack.markStackAsRead()},this.handleShowLess=()=>{this.setState({expanded:!1})},this.handleShowMore=()=>{this.props.stack.loadMore(this.context)},this.renderItem=e=>s.createElement("div",{className:"notification-popup-item-group__item",key:e.id},s.createElement(f,{item:e,stack:this.props.stack})),this.toggleExpand=()=>{this.setState({expanded:!this.state.expanded})}}render(){const e=this.props.stack.first;return null==e?null:s.createElement("div",{className:"notification-popup-item-group"},s.createElement(d.a,{canMarkAsRead:this.props.stack.canMarkAsRead,markRead:this.handleMarkAsRead,markingAsRead:this.props.stack.isMarkingAsRead,expandButton:this.renderExpandButton(),icons:o.a[e.category],item:e,message:e.messageGroup,modifiers:["group"],url:a(e),withCategory:!0,withCoverImage:!0}),this.renderItems())}renderExpandButton(){const e=this.props.stack.total,t=this.context.isWidget?"common.count.update":"common.count.notifications";return s.createElement("button",{type:"button",className:"show-more-link show-more-link--notification-group",onClick:this.toggleExpand},s.createElement("span",{className:"show-more-link__label"},s.createElement("span",{className:"show-more-link__label-text"},osu.transChoice(t,e)),s.createElement("span",{className:"show-more-link__label-icon"},s.createElement("span",{className:`fas fa-angle-${this.state.expanded?"up":"down"}`}))))}renderItems(){return this.state.expanded?s.createElement("div",{className:"notification-popup-item-group__items"},this.props.stack.orderedNotifications.map(this.renderItem),s.createElement("div",{className:"notification-popup-item-group__show-more"},s.createElement("div",{className:"notification-popup-item-group__expand"},this.renderShowMore()),s.createElement("div",{className:"notification-popup-item-group__collapse"},this.renderShowLess(),s.createElement(l.a,{isMarkingAsRead:this.props.stack.isMarkingAsRead,onMarkAsRead:this.handleMarkAsRead})))):null}renderShowLess(){return s.createElement(p.a,{callback:this.handleShowLess,direction:"up",hasMore:!0,label:osu.trans("common.buttons.show_less"),modifiers:["notification-group"]})}renderShowMore(){const e=this.props.stack;return e.hasMore?s.createElement(p.a,{callback:this.handleShowMore,hasMore:null!=e.cursor,loading:e.isLoading,modifiers:["notification-group"]}):null}};v.contextType=u.a;var b=v=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([r.d],v);let y=class extends s.Component{constructor(){super(...arguments),this.handleMarkAsRead=()=>{this.props.stack.markAsRead(this.props.stack.first)}}render(){const e=this.props.stack.first;return null==e?null:s.createElement(d.a,{markRead:this.handleMarkAsRead,markingAsRead:e.isMarkingAsRead,icons:o.b[e.name||""],item:e,message:h(e),modifiers:["one"],url:c(e),withCategory:!0,withCoverImage:!0})}};var g=y=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([r.d],y);let _=class extends s.Component{render(){if(!this.props.stack.hasVisibleNotifications)return null;const e=this.props.stack.isSingle?g:b;return s.createElement(e,{stack:this.props.stack,key:this.props.stack.id})}};_=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([r.d],_),t.a=_},KTKs:function(e,t,n){"use strict";e.exports=function(e,t,n){var r,s,o,i,a,c,u,l,p,d;if(n)return!0;for(i=(r=this.inlineMethods).length,s=this.inlineTokenizers,o=-1,p=t.length;++o<i;)"text"!==(l=r[o])&&s[l]&&((u=s[l].locator)||e.file.fail("Missing locator: `"+l+"`"),-1!==(c=u.call(this,t,1))&&c<p&&(p=c));a=t.slice(0,p),d=e.now(),this.decode(a,d,(function(t,n,r){e(r||t)({type:"text",value:t})}))}},KbVC:function(e,t,n){"use strict";var r=n("T+HN").openCloseTag;e.exports=function(e,t,n){for(var r,_,w,O,j,k,E,S=this.options.blocks.join("|"),x=new RegExp("^</?("+S+")(?=(\\s|/?>|$))","i"),N=t.length,T=0,A=[[c,u,!0],[l,p,!0],[d,h,!0],[m,f,!0],[v,b,!0],[x,y,!0],[g,y,!1]];T<N&&((O=t.charAt(T))===s||O===o);)T++;if(t.charAt(T)===a){for(r=-1===(r=t.indexOf(i,T+1))?N:r,_=t.slice(T,r),w=-1,j=A.length;++w<j;)if(A[w][0].test(_)){k=A[w];break}if(k){if(n)return k[2];if(T=r,!k[1].test(_))for(;T<N;){if(r=-1===(r=t.indexOf(i,T+1))?N:r,_=t.slice(T+1,r),k[1].test(_)){_&&(T=r);break}T=r}return e(E=t.slice(0,T))({type:"html",value:E})}}};var s="\t",o=" ",i="\n",a="<",c=/^<(script|pre|style)(?=(\s|>|$))/i,u=/<\/(script|pre|style)>/i,l=/^<!--/,p=/-->/,d=/^<\?/,h=/\?>/,m=/^<![A-Za-z]/,f=/>/,v=/^<!\[CDATA\[/,b=/\]\]>/,y=/^$/,g=new RegExp(r.source+"\\s*$")},LLPm:function(e,t,n){"use strict";e.exports=function(e,t,n){var l,p,d,h,m,f,v,b,y,g,_,w,O,j=this.options.gfm,k=t.length+1,E=0,S="";if(j){for(;E<k&&((d=t.charAt(E))===o||d===s);)S+=d,E++;if(w=E,(d=t.charAt(E))===i||d===a){for(E++,p=d,l=1,S+=d;E<k&&(d=t.charAt(E))===p;)S+=d,l++,E++;if(!(l<c)){for(;E<k&&((d=t.charAt(E))===o||d===s);)S+=d,E++;for(h="",v="";E<k&&(d=t.charAt(E))!==r&&(p!==a||d!==p);)d===o||d===s?v+=d:(h+=v+d,v=""),E++;if(!(d=t.charAt(E))||d===r){if(n)return!0;(O=e.now()).column+=S.length,O.offset+=S.length,S+=h,h=this.decode.raw(this.unescape(h),O),v&&(S+=v),v="",g="",_="",b="",y="";for(var x=!0;E<k;)if(b+=g,y+=_,g="",_="",(d=t.charAt(E))===r){for(x?(S+=d,x=!1):(g+=d,_+=d),v="",E++;E<k&&(d=t.charAt(E))===o;)v+=d,E++;if(g+=v,_+=v.slice(w),!(v.length>=u)){for(v="";E<k&&(d=t.charAt(E))===p;)v+=d,E++;if(g+=v,_+=v,!(v.length<l)){for(v="";E<k&&((d=t.charAt(E))===o||d===s);)g+=d,_+=d,E++;if(!d||d===r)break}}}else b+=d,_+=d,E++;for(S+=b+g,E=-1,k=h.length;++E<k;)if((d=h.charAt(E))===o||d===s)m||(m=h.slice(0,E));else if(m){f=h.slice(E);break}return e(S)({type:"code",lang:m||h||null,meta:f||null,value:y})}}}}};var r="\n",s="\t",o=" ",i="~",a="`",c=3,u=4},LhsB:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd");const s=Object(r.createContext)(void 0)},LnNg:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var p,d,h,m,f,v=e.now(),b=t.length,y=-1,g="";++y<b;){if((h=t.charAt(y))!==o||y>=c){y--;break}g+=h}for(p="",d="";++y<b;){if((h=t.charAt(y))===r){y--;break}h===o||h===s?d+=h:(p+=d+h,d="")}if(v.column+=g.length,v.offset+=g.length,g+=p+d,h=t.charAt(++y),m=t.charAt(++y),h===r&&(m===i||m===a)){for(g+=h,d=m,f=m===i?u:l;++y<b;){if((h=t.charAt(y))!==m){if(h!==r)return;y--;break}d+=h}return!!n||e(g+d)({type:"heading",depth:f,children:this.tokenizeInline(p,v)})}};var r="\n",s="\t",o=" ",i="=",a="-",c=3,u=1,l=2},Lspe:function(e,t,n){"use strict";var r=n("AMMU");e.exports=function(e,t,n){var o,i,a,c,u=t.charAt(0);if(u===s){if(n)return!0;for(c=1,o=t.length,i=u,a="";c<o&&(u=t.charAt(c),r(u));)a+=u,u===s&&(i+=a,a=""),c++;e(i)}};var s="\n"},MCzN:function(e,t,n){"use strict";var r=n("AMMU"),s=n("1OSS"),o=n("Be1W");e.exports=d,d.locator=o,d.notInLink=!0;var i="<",a=">",c="@",u="/",l="mailto:",p=l.length;function d(e,t,n){var o,d,h,m,f,v="",b=t.length,y=0,g="",_=!1,w="";if(t.charAt(0)===i){for(y++,v=i;y<b&&(o=t.charAt(y),!(r(o)||o===a||o===c||":"===o&&t.charAt(y+1)===u));)g+=o,y++;if(g){if(w+=g,g="",w+=o=t.charAt(y),y++,o===c)_=!0;else{if(":"!==o||t.charAt(y+1)!==u)return;w+=u,y++}for(;y<b&&(o=t.charAt(y),!r(o)&&o!==a);)g+=o,y++;if(o=t.charAt(y),g&&o===a)return!!n||(h=w+=g,v+=w+o,(d=e.now()).column++,d.offset++,_&&(w.slice(0,p).toLowerCase()===l?(h=h.substr(p),d.column+=p,d.offset+=p):w=l+w),m=this.inlineTokenizers,this.inlineTokenizers={text:m.text},f=this.enterLink(),h=this.tokenizeInline(h,d),this.inlineTokenizers=m,f(),e(v)({type:"link",title:null,url:s(w,{nonTerminated:!1}),children:h}))}}}},MKRK:function(e,t,n){"use strict";var r=n("DmM8"),s=n("WCVR"),o=n("BhdQ"),i=n("p3jD"),a=n("ElYz"),c=n("QgkL");e.exports=function(e,t,n){for(var s,i,a,y,_,w,O,j,k,S,x,N,T,A,P,C,D,R,M,I,U,L,B=this.options.commonmark,H=this.options.pedantic,$=this.blockTokenizers,z=this.interruptList,V=0,W=t.length,F=null,G=0,q=!1;V<W;){if((a=t.charAt(V))===v)G+=g-G%g;else{if(a!==m)break;G++}V++}if(!(G>=g)){if((a=t.charAt(V))===u||a===p||a===d)y=a,i=!1;else{for(i=!0,s="";V<W&&(a=t.charAt(V),o(a));)s+=a,V++;if(a=t.charAt(V),!s||!(a===h||B&&a===b))return;F=parseInt(s,10),y=a}if((a=t.charAt(++V))===m||a===v||!(H||a!==f&&""!==a)){if(n)return!0;for(V=0,T=[],A=[],P=[];V<W;){for(w=V,O=!1,L=!1,-1===(_=t.indexOf(f,V))&&(_=W),U=V+g,G=0;V<W;){if((a=t.charAt(V))===v)G+=g-G%g;else{if(a!==m)break;G++}V++}if(G>=g&&(L=!0),C&&G>=C.indent&&(L=!0),a=t.charAt(V),j=null,!L){if(a===u||a===p||a===d)j=a,V++,G++;else{for(s="";V<W&&(a=t.charAt(V),o(a));)s+=a,V++;a=t.charAt(V),V++,s&&(a===h||B&&a===b)&&(j=a,G+=s.length+1)}if(j)if((a=t.charAt(V))===v)G+=g-G%g,V++;else if(a===m){for(U=V+g;V<U&&t.charAt(V)===m;)V++,G++;V===U&&t.charAt(V)===m&&(V-=g-1,G-=g-1)}else a!==f&&""!==a&&(j=null)}if(j){if(!H&&y!==j)break;O=!0}else B||L||t.charAt(w)!==m?B&&C&&(L=G>=C.indent||G>g):L=!0,O=!1,V=w;if(S=t.slice(w,_),k=w===V?S:t.slice(V,_),(j===u||j===l||j===d)&&$.thematicBreak.call(this,e,S,!0))break;if(x=N,N=!O&&!r(k).length,L&&C)C.value=C.value.concat(P,S),A=A.concat(P,S),P=[];else if(O)0!==P.length&&(q=!0,C.value.push(""),C.trail=P.concat()),C={value:[S],indent:G,trail:[]},T.push(C),A=A.concat(P,S),P=[];else if(N){if(x&&!B)break;P.push(S)}else{if(x)break;if(c(z,$,this,[e,S,!0]))break;C.value=C.value.concat(P,S),A=A.concat(P,S),P=[]}V=_+1}for(M=e(A.join(f)).reset({type:"list",ordered:i,start:F,spread:q,children:[]}),D=this.enterList(),R=this.enterBlock(),V=-1,W=T.length;++V<W;)C=T[V].value.join(f),I=e.now(),e(C)(E(this,C,I),M),C=T[V].trail.join(f),V!==W-1&&(C+=f),e(C);return D(),R(),M}}};var u="*",l="_",p="+",d="-",h=".",m=" ",f="\n",v="\t",b=")",y="x",g=4,_=/\n\n(?!\s*$)/,w=/^\[([ \t]|x|X)][ \t]/,O=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,j=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,k=/^( {1,4}|\t)?/gm;function E(e,t,n){var r,s,o=e.offset,i=null;return t=(e.options.pedantic?S:x).apply(null,arguments),e.options.gfm&&(r=t.match(w))&&(s=r[0].length,i=r[1].toLowerCase()===y,o[n.line]+=s,t=t.slice(s)),{type:"listItem",spread:_.test(t),checked:i,children:e.tokenizeBlock(t,n)}}function S(e,t,n){var r=e.offset,s=n.line;return t=t.replace(j,o),s=n.line,t.replace(k,o);function o(e){return r[s]=(r[s]||0)+e.length,s++,""}}function x(e,t,n){var r,o,c,u,l,p,d,h=e.offset,v=n.line;for(u=(t=t.replace(O,(function(e,t,n,i,a){return o=t+n+i,c=a,Number(n)<10&&o.length%2==1&&(n=m+n),(r=t+s(m,n.length)+i)+c}))).split(f),(l=a(t,i(r).indent).split(f))[0]=c,h[v]=(h[v]||0)+o.length,v++,p=0,d=u.length;++p<d;)h[v]=(h[v]||0)+u[p].length-l[p].length,v++;return l.join(f)}},MaVE:function(e,t,n){"use strict";e.exports=function(e,t){return function(n){for(var s,o=0,i=n.indexOf(r),a=e[t],c=[];-1!==i;)c.push(n.slice(o,i)),o=i+1,(s=n.charAt(o))&&-1!==a.indexOf(s)||c.push(r),i=n.indexOf(r,o+1);return c.push(n.slice(o)),c.join("")}};var r="\\"},MeXQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},c=function(e){function t(e){var n;this.toggleSelector=o(this.toggleSelector,this),this.hideSelector=o(this.hideSelector,this),this.renderOption=o(this.renderOption,this),this.render=o(this.render,this),this.componentDidUpdate=o(this.componentDidUpdate,this),this.componentDidMount=o(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.bn=null!=(n=this.props.bn)?n:"select-options",this.hasBlackout=this.props.blackout||void 0===this.props.blackout,this.ref=Object(r.createRef)(),this.state={showingSelector:!1}}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return document.addEventListener("click",this.hideSelector)},t.prototype.componentDidUpdate=function(e,t){if(this.hasBlackout&&t.showingSelector!==this.state.showingSelector)return Blackout.toggle(this.state.showingSelector,.5)},t.prototype.componentWillUnmount=function(){return document.removeEventListener("click",this.hideSelector)},t.prototype.render=function(){var e,t,n;return e=""+this.bn,this.state.showingSelector&&(e+=" "+this.bn+"--selecting"),Object(s.div)({className:e,ref:this.ref},Object(s.div)({className:this.bn+"__select"},this.renderItem({children:[Object(s.div)({className:"u-ellipsis-overflow",key:"current"},null!=(n=this.props.selected)?n.text:void 0),Object(s.div)({key:"decoration",className:this.bn+"__decoration"},Object(s.i)({className:"fas fa-chevron-down"}))],item:this.props.selected,onClick:this.toggleSelector})),Object(s.div)({className:this.bn+"__selector"},function(){var e,n,r,s;for(s=[],e=0,n=(r=this.props.options).length;e<n;e++)t=r[e],s.push(this.renderOption(t));return s}.call(this)))},t.prototype.renderOption=function(e){var t,n;return this.renderItem({children:[Object(s.div)({className:"u-ellipsis-overflow",key:e.id},e.text)],item:e,selected:(null!=(t=this.props.selected)?t.id:void 0)===e.id,onClick:(n=this,function(t){return n.itemSelected(t,e)})})},t.prototype.renderItem=function(e){var t,n,r,o,i,a;return t=e.children,r=e.item,o=e.onClick,a=null!=(i=e.selected)&&i,n=this.bn+"__item",a&&(n+=" "+this.bn+"__item--selected"),null!=this.props.renderItem?this.props.renderItem({children:t,item:r,onClick:o,cssClasses:n}):Object(s.a)({className:n,href:"#",key:r.id,onClick:o},t)},t.prototype.hideSelector=function(e){var t;if(0===e.button&&(t=this.ref.current,!(a.call(e.composedPath(),t)>=0)))return this.setState({showingSelector:!1})},t.prototype.itemSelected=function(e,t){var n;if(0===e.button)return e.preventDefault(),this.setState({showingSelector:!1}),"function"==typeof(n=this.props).onItemSelected?n.onItemSelected(t):void 0},t.prototype.toggleSelector=function(e){if(0===e.button)return e.preventDefault(),this.setState({showingSelector:!this.state.showingSelector})},t}(r.PureComponent)},"NW+U":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t;return t=_.extend(osu.src2x(e.src),e),ReactDOMFactories.img(t,e.children)}},Ncbg:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("cDcd"),s=n("SYfz");const o="show-more-link",i=r.forwardRef((e,t)=>{var n,i;if(!e.hasMore&&!e.loading)return null;const a=r.createElement("span",{className:`fas fa-angle-${n=e.direction,null!=n?n:"down"}`}),c={children:r.createElement(r.Fragment,null,r.createElement("span",{className:`${o}__spinner`},r.createElement(s.a,null)),r.createElement("span",{className:`${o}__label`},r.createElement("span",{className:`${o}__label-icon ${o}__label-icon--left`},a),r.createElement("span",{className:`${o}__label-text`},null!=(i=e.label)?i:osu.trans("common.buttons.show_more"),null!=e.remaining&&` (${e.remaining})`),r.createElement("span",{className:`${o}__label-icon ${o}__label-icon--right`},a))),className:osu.classWithModifiers(o,e.modifiers),ref:t};if(e.loading)return r.createElement("span",Object.assign({"data-disabled":"1"},c));const u=e.url;let l=e.callback;return null==l&&null==u&&(l=()=>$.publish(e.event,e.data)),null==u?r.createElement("button",Object.assign({type:"button",onClick:l},c)):r.createElement("a",Object.assign({href:u,onClick:l},c))})},NkXE:function(e,t,n){"use strict";var r=n("AMMU"),s=n("WR+t");e.exports=a,a.locator=s;var o="~",i="~~";function a(e,t,n){var s,a,c,u="",l="",p="",d="";if(this.options.gfm&&t.charAt(0)===o&&t.charAt(1)===o&&!r(t.charAt(2)))for(s=1,a=t.length,(c=e.now()).column+=2,c.offset+=2;++s<a;){if(!((u=t.charAt(s))!==o||l!==o||p&&r(p)))return!!n||e(i+d+i)({type:"delete",children:this.tokenizeInline(d,c)});d+=l,p=l,l=u}}},O0zI:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,s,o,i=n("f4vq"),a=n("cDcd"),c=n("NzAu"),u=n("Ncbg"),l=n("SYfz"),p=function(e,t){return function(){return e.apply(t,arguments)}},d={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};s=a.createElement,o=i.a.dataStore.uiState,r="comment-show-more";var m=function(e){function t(e){this.load=p(this.load,this),this.render=p(this.render,this),this.componentWillUnmount=p(this.componentWillUnmount,this),t.__super__.constructor.call(this,e),this.state={loading:!1}}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.defaultProps={modifiers:[]},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e,t,n,i,a,p,d;return this.props.comments.length>=this.props.total?null:null==(n=o.comments.hasMoreComments[null!=(i=null!=(a=this.props.parent)?a.id:void 0)?i:null])||n?(e=osu.classWithModifiers(r,this.props.modifiers),h.call(this.props.modifiers,"top")>=0?(d=this.props.total-this.props.comments.length,t=["comments"],h.call(this.props.modifiers,"changelog")>=0?t.push("t-greyviolet-darker"):t.push("t-ddd"),s(u.a,{loading:this.state.loading,hasMore:!0,callback:this.load,modifiers:t,remaining:d})):Object(c.div)({className:e},this.state.loading?s(l.a):Object(c.button)({className:r+"__link",onClick:this.load},null!=(p=this.props.label)?p:osu.trans("common.buttons.show_more")))):null},t.prototype.load=function(){var e,t,n,r,s,i,a,c,u;return this.setState({loading:!0}),t={commentable_type:null!=(n=null!=(r=this.props.parent)?r.commentable_type:void 0)?n:this.props.commentableType,commentable_id:null!=(s=null!=(i=this.props.parent)?i.commentable_id:void 0)?s:this.props.commentableId,parent_id:null!=(a=null!=(c=this.props.parent)?c.id:void 0)?a:0,sort:o.comments.currentSort},null!=(e=_.last(this.props.comments))&&(t.cursor={id:e.id,created_at:e.createdAt,votes_count:e.votesCount}),this.xhr=$.ajax(laroute.route("comments.index"),{data:t,dataType:"json"}).done((function(e){return $.publish("comments:added",e)})).always((u=this,function(){return u.setState({loading:!1})}))},t}(a.PureComponent)},OTBi:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("*",t),r=e.indexOf("_",t);return-1===r?n:-1===n?r:r<n?r:n}},Oyu6:function(e,t,n){"use strict";var r=n("fDIx");function s(e,t,n,r){if("remove"===r)n.children.splice(t,1);else if("unwrap"===r){var s=[t,1];e.children&&(s=s.concat(e.children)),Array.prototype.splice.apply(n.children,s)}}t.ofType=function(e,t){return function(t){return e.forEach((function(e){return r(t,e,n,!0)})),t};function n(e,n,r){r&&s(e,n,r,t)}},t.ifNotMatch=function(e,t){return function(e){return r(e,n,!0),e};function n(n,r,o){o&&!e(n,r,o)&&s(n,r,o,t)}}},PTft:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n("cDcd");var r,s,o=n("NzAu");r="beatmap-basic-stats",s=function(e){var t,n,r;return r=e%60,n=Math.floor(e/60)%60,(t=Math.floor(e/3600))>0?t+":"+_.padStart(n,2,0)+":"+_.padStart(r,2,0):n+":"+_.padStart(r,2,0)};var i=function(e){var t,n,i;return t=e.beatmap,Object(o.div)({className:r},function(){var e,a,c,u;for(u=[],e=0,a=(c=["total_length","bpm","count_circles","count_sliders"]).length;e<a;e++)i=t[n=c[e]],i="bpm"===n?i>1e3?"":osu.formatNumber(i):"total_length"===n?s(i):osu.formatNumber(i),u.push(Object(o.div)({className:r+"__entry",key:n,title:osu.trans("beatmapsets.show.stats."+n,"total_length"===n?{hit_length:s(t.hit_length)}:void 0)},Object(o.div)({className:r+"__entry-icon",style:{backgroundImage:"url(/images/layout/beatmapset-page/"+n+".svg)"}}),Object(o.span)(null,i)));return u}())}},PsOV:function(e){e.exports=JSON.parse('{"0":"","128":"","130":"","131":"","132":"","133":"","134":" ","135":"","136":"","137":"","138":" ","139":"","140":"","142":"","145":"","146":"","147":"","148":"","149":"","150":"","151":"","152":"","153":"","154":"","155":"","156":"","158":"","159":""}')},QgkL:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var s,o,i=e.length,a=-1;++a<i;)if((void 0===(o=(s=e[a])[1]||{}).pedantic||o.pedantic===n.options.pedantic)&&(void 0===o.commonmark||o.commonmark===n.options.commonmark)&&t[s[0]].apply(n,r))return!0;return!1}},Qu9x:function(e,t,n){"use strict";var r=n("fDIx");function s(e){delete e.position}function o(e){e.position=void 0}e.exports=function(e,t){return r(e,t?s:o),e}},RnBu:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var s=e[r];"."===s?e.splice(r,1):".."===s?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,s="/"===i.charAt(0))}return(s?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!s).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===s(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var s=r(e.split("/")),o=r(n.split("/")),i=Math.min(s.length,o.length),a=i,c=0;c<i;c++)if(s[c]!==o[c]){a=c;break}var u=[];for(c=a;c<s.length;c++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!s){r=o;break}}else s=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,s=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!s){n=t+1;break}}else-1===r&&(s=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,s=!0,o=0,i=e.length-1;i>=0;--i){var a=e.charCodeAt(i);if(47!==a)-1===r&&(s=!1,r=i+1),46===a?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!s){n=i+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("2YuA"))},"SW8+":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty;r.createElement;var a=function(e){function t(){return this.render=o(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e;return e="page-mode-link page-mode-link--profile-page",this.props.page===this.props.currentPage&&(e+=" page-mode-link--is-active"),Object(s.span)({className:e},Object(s.span)({className:"fake-bold","data-content":osu.trans("users.show.extra."+this.props.page+".title")},osu.trans("users.show.extra."+this.props.page+".title")),Object(s.span)({className:"page-mode-link__stripe"}))},t}(r.PureComponent)},SYfz:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n("cDcd");var r=n("NzAu"),s=function(e){var t;return t=e.modifiers,Object(r.div)({className:osu.classWithModifiers("la-ball-clip-rotate",t)})}},SYsv:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDcd"),s=n("NzAu");r.createElement;var o=function(e){return Object(s.div)(null,Object(s.h2)({className:"title title--page-extra"},osu.trans("users.show.extra."+e.name+".title")),e.withEdit?Object(s.span)({className:"page-extra__dragdrop-toggle hidden-xs js-profile-page-extra--sortable-handle"},Object(s.i)({className:"fas fa-bars"})):void 0)}},SifC:function(e,t,n){"use strict";var r=n("9lfl"),s=n("Jryd"),o=n("UXHL");function i(e){var t=this.data("settings"),n=r(o);n.prototype.options=s(n.prototype.options,t,e),this.Parser=n}e.exports=i,i.Parser=o},SwEc:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,s=n("cDcd"),o=n("+FrL");r=s.createElement;var i=function(e){var t,n,s;return s=e.type,n=e.stats,t=e.modifiers,r(o.a,{modifiers:t,label:osu.trans("users.show.rank."+s+"_simple"),value:null!=n.rank[s]?"#"+osu.formatNumber(n.rank[s]):"-"})}},Sy6K:function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}},"T+HN":function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",s="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.openCloseTag=new RegExp("^(?:"+r+"|"+s+")"),t.tag=new RegExp("^(?:"+r+"|"+s+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},TGI5:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,s=n("f7bm"),o=n("cDcd"),i=n("NzAu"),a=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;r=o.createElement;var u=function(e){var t,n,o,u;function l(){return this.renderText=a(this.renderText,this),this.renderLink=a(this.renderLink,this),this.render=a(this.render,this),l.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(l,e),t="profile-links",o=function(e,n,r){var s,o,i,a;for(o in null==n&&(n={}),null==r&&(r=[]),null!=n.href?(i="a",r.push("link")):i="span",s=document.createElement(i),n)c.call(n,o)&&(a=n[o],s[o]=a);return s.className+=" "+osu.classWithModifiers(t+"__value",r),s.innerHTML=e,s.outerHTML},n={twitter:function(e){return{icon:"fab fa-twitter",url:"https://twitter.com/"+e,text:"@"+e}},discord:function(e){return{icon:"fab fa-discord",text:r(s.a,{value:e,showIcon:!0})}},interests:function(){return{icon:"far fa-heart"}},skype:function(e){return{icon:"fab fa-skype",url:"skype:"+e+"?chat"}},lastfm:function(e){return{icon:"fab fa-lastfm",url:"https://last.fm/user/"+e}},location:function(){return{icon:"fas fa-map-marker-alt"}},occupation:function(){return{icon:"fas fa-suitcase"}},website:function(e){return{icon:"fas fa-link",url:e,text:e.replace(/^https?:\/\//,"")}}},u={join_date:function(e){var t,n;return n=(t=moment(e)).toISOString(),t.isBefore(moment.utc([2008]))?{title:n,extraClasses:"js-tooltip-time",html:osu.trans("users.show.first_members")}:{html:osu.trans("users.show.joined_at",{date:o(t.format(osu.trans("common.datetime.year_month.moment")),{className:"js-tooltip-time",title:n})})}},last_visit:function(e,t){return t.is_online?{html:osu.trans("users.show.lastvisit_online")}:{html:osu.trans("users.show.lastvisit",{date:o(osu.timeago(e))})}},playstyle:function(e){var t;return t=e.map((function(e){return osu.trans("common.device."+e)})).join(", "),{html:osu.trans("users.show.plays_with",{devices:o(t)})}},post_count:function(e,t){var n,r;return n=osu.transChoice("users.show.post_count.count",osu.formatNumber(e)),r=laroute.route("users.posts",{user:t.id}),{html:osu.trans("users.show.post_count._",{link:o(n,{href:r})})}}},l.prototype.render=function(){var e,n,r;return r=[["join_date","last_visit","playstyle","post_count"].map(this.renderText),["location","interests","occupation"].map(this.renderLink),["twitter","discord","skype","lastfm","website"].map(this.renderLink)],Object(i.div)({className:t},function(){var s,o,a;for(a=[],e=s=0,o=r.length;s<o;e=++s)n=r[e],_.compact(n).length>0&&a.push(Object(i.div)({key:e,className:t+"__row "+t+"__row--"+e},n));return a}())},l.prototype.renderLink=function(e){var r,s,o,a,c,u,l,p;if(null!=(p=this.props.user[e]))return l=(a=n[e](p)).url,o=a.icon,c=a.text,null==(u=a.title)&&(u=osu.trans("users.show.info."+e)),null==c&&(c=p),s=t+"__value",null!=l?(r=i.a,s+=" "+t+"__value--link"):r=i.span,Object(i.div)({className:t+"__item",key:e},Object(i.span)({className:t+"__icon",title:u},Object(i.span)({className:"fa-fw "+o})),r({href:l,className:s},c))},l.prototype.renderText=function(e){var n,r,s,o,a;if(null!=(a=this.props.user[e]))return n=(s=u[e](a,this.props.user)).extraClasses,r=s.html,o=s.title,Object(i.div)({className:t+"__item "+(null!=n?n:""),key:e,title:o,dangerouslySetInnerHTML:{__html:r}})},l}(o.PureComponent)},TRjL:function(e,t,n){"use strict";var r=n("fDIx"),s="virtualHtml",o=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,i=/^<(\/?)([a-z]+)\s*>$/;e.exports=function(e){var t,n;return r(e,"html",(function(e,r,a){n!==a&&(t=[],n=a);var c=function(e){var t=e.value.match(o);return!!t&&t[1]}(e);if(c)return a.children.splice(r,1,{type:s,tag:c,position:e.position}),!0;var u=function(e,t){var n=e.value.match(i);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!u)return!0;var l=function(e,t){for(var n=e.length;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,u.tag);return l?a.children.splice(r,0,function(e,t,n){var r=n.children.indexOf(e.node),o=n.children.indexOf(t.node),i=n.children.splice(r,o-r+1).slice(1,-1);return{type:s,children:i,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(u,l,a)):u.opening||t.push(u),!0}),!0),e}},TY2o:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n("cDcd");var r=n("NzAu"),s=function(e){return null!=e.user.id?Object(r.div)({className:osu.classWithModifiers("avatar",e.modifiers),style:{backgroundImage:osu.urlPresence(e.user.avatar_url)}}):Object(r.div)({className:osu.classWithModifiers("avatar",_.concat(e.modifiers,"guest"))})}},U70x:function(e,t,n){"use strict";var r=n("0h6b"),s=n("wy2R"),o=n("cDcd");class i extends o.PureComponent{render(){const e=this.props.values.map(e=>{var t;let n="sort__item sort__item--button";return this.props.sortMode===e&&(n+=" sort__item--active"),o.createElement("button",{className:n,"data-value":e,key:e,onClick:this.props.onSortSelected},"rank"===e?o.createElement("span",null,o.createElement("i",{className:`fas fa-extra-mode-${t=currentUser.playmode,null!=t?t:"osu"}`})," ",osu.trans("sort.rank")):osu.trans(`sort.${e}`))});return o.createElement("div",{className:osu.classWithModifiers("sort",this.props.modifiers)},o.createElement("div",{className:"sort__items"},o.createElement("span",{className:"sort__item sort__item--title"},osu.trans("sort._")),e))}}var a=n("ed4P");n.d(t,"a",(function(){return h}));const c=["all","online","offline"],u=["last_visit","rank","username"],l=["card","list","brick"];function p(e,t){return null!=e.current_mode_rank&&null!=t.current_mode_rank?e.current_mode_rank>t.current_mode_rank?1:-1:null===e.current_mode_rank?1:-1}function d(e,t){return e.username.localeCompare(t.username)}class h extends o.PureComponent{constructor(){super(...arguments),this.state={filter:this.filterFromUrl,sortMode:this.sortFromUrl,viewMode:this.viewFromUrl},this.onSortSelected=e=>{const t=e.currentTarget.dataset.value,n=osu.updateQueryString(null,{sort:t});Turbolinks.controller.advanceHistory(n),this.setState({sortMode:t},this.saveOptions)},this.onViewSelected=e=>{const t=e.currentTarget.dataset.value,n=osu.updateQueryString(null,{view:t});Turbolinks.controller.advanceHistory(n),this.setState({viewMode:t},this.saveOptions)},this.optionSelected=e=>{e.preventDefault();const t=e.currentTarget.dataset.key,n=osu.updateQueryString(null,{filter:t});Turbolinks.controller.advanceHistory(n),this.setState({filter:t},this.saveOptions)}}get filterFromUrl(){var e,t;const n=new URL(location.href);return this.getAllowedQueryStringValue(c,n.searchParams.get("filter"),null===(t=null===(e=currentUser)||void 0===e?void 0:e.user_preferences)||void 0===t?void 0:t.user_list_filter)}get sortedUsers(){const e=this.getFilteredUsers(this.state.filter).slice();switch(this.state.sortMode){case"rank":return e.sort(p);case"username":return e.sort(d);default:return e.sort((e,t)=>e.is_online&&t.is_online?d(e,t):e.is_online||t.is_online?e.is_online?-1:1:s(t.last_visit||0).diff(s(e.last_visit||0)))}}get sortFromUrl(){var e,t;const n=new URL(location.href);return this.getAllowedQueryStringValue(u,n.searchParams.get("sort"),null===(t=null===(e=currentUser)||void 0===e?void 0:e.user_preferences)||void 0===t?void 0:t.user_list_sort)}get viewFromUrl(){var e,t;const n=new URL(location.href);return this.getAllowedQueryStringValue(l,n.searchParams.get("view"),null===(t=null===(e=currentUser)||void 0===e?void 0:e.user_preferences)||void 0===t?void 0:t.user_list_view)}render(){return o.createElement(o.Fragment,null,this.renderSelections(),o.createElement("div",{className:"user-list"},null!=this.props.title&&o.createElement("h1",{className:"user-list__title"},this.props.title),o.createElement("div",{className:"user-list__toolbar"},o.createElement("div",{className:"user-list__toolbar-item"},this.renderSorter()),o.createElement("div",{className:"user-list__toolbar-item"},this.renderViewMode())),o.createElement("div",{className:"user-list__items"},o.createElement(a.a,{users:this.sortedUsers,viewMode:this.state.viewMode}))))}renderOption(e,t,n=!1){const r=n?["active"]:[];let s=osu.classWithModifiers("update-streams-v2__item",r);return s+=` t-changelog-stream--${e}`,o.createElement("a",{className:s,"data-key":e,href:osu.updateQueryString(null,{filter:e}),key:e,onClick:this.optionSelected},o.createElement("div",{className:"update-streams-v2__bar u-changelog-stream--bg"}),o.createElement("p",{className:"update-streams-v2__row update-streams-v2__row--name"},osu.trans(`users.status.${e}`)),o.createElement("p",{className:"update-streams-v2__row update-streams-v2__row--version"},t))}renderSelections(){return o.createElement("div",{className:"update-streams-v2 update-streams-v2--with-active update-streams-v2--user-list"},o.createElement("div",{className:"update-streams-v2__container"},c.map(e=>this.renderOption(e,this.getFilteredUsers(e).length,e===this.state.filter))))}renderSorter(){return o.createElement(i,{modifiers:["user-list"],onSortSelected:this.onSortSelected,sortMode:this.state.sortMode,values:u})}renderViewMode(){return o.createElement("div",{className:"user-list__view-modes"},o.createElement("button",{className:osu.classWithModifiers("user-list__view-mode","card"===this.state.viewMode?["active"]:[]),"data-value":"card",title:osu.trans("users.view_mode.card"),onClick:this.onViewSelected},o.createElement("span",{className:"fas fa-square"})),o.createElement("button",{className:osu.classWithModifiers("user-list__view-mode","list"===this.state.viewMode?["active"]:[]),"data-value":"list",title:osu.trans("users.view_mode.list"),onClick:this.onViewSelected},o.createElement("span",{className:"fas fa-bars"})),o.createElement("button",{className:osu.classWithModifiers("user-list__view-mode","brick"===this.state.viewMode?["active"]:[]),"data-value":"brick",title:osu.trans("users.view_mode.brick"),onClick:this.onViewSelected},o.createElement("span",{className:"fas fa-th"})))}getAllowedQueryStringValue(e,t,n){const r=t;if(e.indexOf(r)>-1)return r;const s=n;return e.indexOf(s)>-1?s:e[0]}getFilteredUsers(e){switch(e){case"online":return this.props.users.filter(e=>e.is_online);case"offline":return this.props.users.filter(e=>!e.is_online);default:return this.props.users}}saveOptions(){null!=currentUser.id&&$.ajax(Object(r.route)("account.options"),{dataType:"JSON",method:"PUT",data:{user_profile_customization:{user_list_filter:this.state.filter,user_list_sort:this.state.sortMode,user_list_view:this.state.viewMode}}}).done(e=>$.publish("user:update",e))}}},UVl7:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r,s,o,i,a,c,u=n("f7bm"),l=n("2b+G"),p=n("O0zI"),d=n("4PZ6"),h=n("cF9b"),m=n("f4vq"),f=n("cDcd"),v=n("NzAu"),b=n("hc33"),y=n("Ncbg"),g=n("SYfz"),w=n("TY2o"),O=function(e,t){return function(){return e.apply(t,arguments)}},j={}.hasOwnProperty;o=f.createElement,s={username:osu.trans("users.deleted")},r=m.a.dataStore.commentableMetaStore,i=m.a.dataStore.commentStore,c=m.a.dataStore.userStore,a=m.a.dataStore.uiState;var k=function(e){var t,n,m;function k(e){var n,r;this.toggleReplies=O(this.toggleReplies,this),this.closeNewReply=O(this.closeNewReply,this),this.voteToggle=O(this.voteToggle,this),this.toggleNewReply=O(this.toggleNewReply,this),this.restore=O(this.restore,this),this.userFor=O(this.userFor,this),this.parentLink=O(this.parentLink,this),this.loadReplies=O(this.loadReplies,this),this.closeEdit=O(this.closeEdit,this),this.toggleEdit=O(this.toggleEdit,this),this.handleReplyPosted=O(this.handleReplyPosted,this),this.togglePinned=O(this.togglePinned,this),this.delete=O(this.delete,this),this.hasVoted=O(this.hasVoted,this),this.renderCommentableMeta=O(this.renderCommentableMeta,this),this.renderVoteText=O(this.renderVoteText,this),this.renderVoteButton=O(this.renderVoteButton,this),this.renderUsername=O(this.renderUsername,this),this.renderUserAvatar=O(this.renderUserAvatar,this),this.renderRestore=O(this.renderRestore,this),this.renderReport=O(this.renderReport,this),this.renderReplyButton=O(this.renderReplyButton,this),this.renderReplyBox=O(this.renderReplyBox,this),this.renderRepliesToggle=O(this.renderRepliesToggle,this),this.renderRepliesText=O(this.renderRepliesText,this),this.renderPermalink=O(this.renderPermalink,this),this.renderOwnerBadge=O(this.renderOwnerBadge,this),this.renderEditedBy=O(this.renderEditedBy,this),this.renderEdit=O(this.renderEdit,this),this.renderPin=O(this.renderPin,this),this.renderDelete=O(this.renderDelete,this),this.renderComment=O(this.renderComment,this),this.render=O(this.render,this),this.componentWillUnmount=O(this.componentWillUnmount,this),k.__super__.constructor.call(this,e),this.xhr={},this.loadMoreRef=f.createRef(),r=!osu.isMobile()&&!this.props.comment.isDeleted&&(null!=this.props.expandReplies?this.props.expandReplies:(null!=(n=a.getOrderedCommentsByParentId(this.props.comment.id))?n.length:void 0)>0&&this.props.depth<t),this.state={postingVote:!1,editing:!1,showNewReply:!1,expandReplies:r}}return function(e,t){for(var n in t)j.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(k,e),t=6,m=document.createElement("div"),n=function(e){return e.isDeleted?osu.trans("comments.deleted"):(m.innerHTML=e.messageHtml,_.truncate(m.textContent,{length:100}))},k.prototype.componentWillUnmount=function(){var e,t,n,r;for(e in n=[],t=this.xhr)j.call(t,e)&&(r=t[e],n.push(null!=r?r.abort():void 0));return n},k.prototype.render=function(){return o(h.a,null,(e=this,function(){var n,s,c,u,h,m,f,b;return e.children=null!=(u=a.getOrderedCommentsByParentId(e.props.comment.id))?u:[],c=i.comments.get(e.props.comment.parentId),b=e.userFor(e.props.comment),n=r.get(e.props.comment.commentableType,e.props.comment.commentableId),s=null!=(h=null!=(m=e.props.modifiers)?m.slice(0):void 0)?h:[],0===e.props.depth&&s.push("top"),f="comment__replies",e.props.depth<t&&(f+=" comment__replies--indented"),e.state.expandReplies||(f+=" comment__replies--hidden"),Object(v.div)({className:osu.classWithModifiers("comment",s)},e.renderRepliesToggle(),e.renderCommentableMeta(n),Object(v.div)({className:"comment__main "+(e.props.comment.isDeleted?"comment__main--deleted":"")},e.props.comment.canHaveVote?Object(v.div)({className:"comment__float-container comment__float-container--left hidden-xs"},e.renderVoteButton()):void 0,e.renderUserAvatar(b),Object(v.div)({className:"comment__container"},Object(v.div)({className:"comment__row comment__row--header"},e.renderUsername(b),e.renderOwnerBadge(n),e.props.comment.pinned?Object(v.span)({className:"comment__row-item  comment__row-item--pinned"},Object(v.span)({className:"fa fa-thumbtack"})," ",osu.trans("comments.pinned")):void 0,null!=c?Object(v.span)({className:"comment__row-item comment__row-item--parent"},e.parentLink(c)):void 0,e.props.comment.isDeleted?Object(v.span)({className:"comment__row-item comment__row-item--deleted"},osu.trans("comments.deleted")):void 0),e.state.editing?Object(v.div)({className:"comment__editor"},o(l.a,{id:e.props.comment.id,message:e.props.comment.message,modifiers:e.props.modifiers,close:e.closeEdit})):null!=e.props.comment.messageHtml?Object(v.div)({className:"comment__message",dangerouslySetInnerHTML:{__html:e.props.comment.messageHtml}}):void 0,Object(v.div)({className:"comment__row comment__row--footer"},e.props.comment.canHaveVote?Object(v.div)({className:"comment__row-item visible-xs"},e.renderVoteText()):void 0,Object(v.div)({className:"comment__row-item comment__row-item--info",dangerouslySetInnerHTML:{__html:osu.timeago(e.props.comment.createdAt)}}),e.renderPermalink(),e.renderReplyButton(),e.renderEdit(),e.renderRestore(),e.renderDelete(),e.renderPin(),e.renderReport(),e.renderEditedBy(),e.renderRepliesText()),e.renderReplyBox())),e.props.comment.repliesCount>0?Object(v.div)({className:f},e.children.map(e.renderComment),o(d.a,{comments:e.children,showDeleted:a.comments.isShowDeleted}),o(p.a,{parent:e.props.comment,comments:e.children,total:e.props.comment.repliesCount,modifiers:e.props.modifiers,label:0===e.children.length?osu.trans("comments.load_replies"):void 0,ref:e.loadMoreRef})):void 0)}));var e},k.prototype.renderComment=function(e){return(e=i.comments.get(e.id)).isDeleted&&!a.comments.isShowDeleted?null:o(k,{key:e.id,comment:e,depth:this.props.depth+1,parent:this.props.comment,modifiers:this.props.modifiers,expandReplies:this.props.expandReplies})},k.prototype.renderDelete=function(){if(!this.props.comment.isDeleted&&this.props.comment.canDelete)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action",onClick:this.delete},osu.trans("common.buttons.delete")))},k.prototype.renderPin=function(){if(this.props.comment.canPin)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action",onClick:this.togglePinned},osu.trans("common.buttons."+(this.props.comment.pinned?"unpin":"pin"))))},k.prototype.renderEdit=function(){if(this.props.comment.canEdit)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action "+(this.state.editing?"comment__action--active":""),onClick:this.toggleEdit},osu.trans("common.buttons.edit")))},k.prototype.renderEditedBy=function(){var e;if(!this.props.comment.isDeleted&&this.props.comment.isEdited)return e=c.get(this.props.comment.editedById),Object(v.div)({className:"comment__row-item comment__row-item--info",dangerouslySetInnerHTML:{__html:osu.trans("comments.edited",{timeago:osu.timeago(this.props.comment.editedAt),user:null!=e.id?osu.link(laroute.route("users.show",{user:e.id}),e.username,{classNames:["comment__link"]}):_.escape(e.username)})}})},k.prototype.renderOwnerBadge=function(e){return this.props.comment.userId!==e.owner_id?null:Object(v.div)({className:"comment__row-item"},Object(v.div)({className:"comment__owner-badge"},e.owner_title))},k.prototype.renderPermalink=function(){return Object(v.div)({className:"comment__row-item"},Object(v.span)({className:"comment__action comment__action--permalink"},o(u.a,{value:laroute.route("comments.show",{comment:this.props.comment.id}),label:osu.trans("common.buttons.permalink"),valueAsUrl:!0})))},k.prototype.renderRepliesText=function(){var e,t;if(0!==this.props.comment.repliesCount)return this.state.expandReplies||0!==this.children.length?(e=this.toggleReplies,t=osu.transChoice("comments.replies_count",this.props.comment.repliesCount)):(e=this.loadReplies,t=osu.trans("comments.load_replies")),Object(v.div)({className:"comment__row-item comment__row-item--replies"},o(y.a,{direction:this.state.expandReplies?"up":"down",hasMore:!0,label:t,callback:e,modifiers:["comment-replies"]}))},k.prototype.renderRepliesToggle=function(){if(0===this.props.depth&&this.children.length>0)return Object(v.div)({className:"comment__float-container comment__float-container--right"},Object(v.button)({className:"comment__top-show-replies",type:"button",onClick:this.toggleReplies},Object(v.span)({className:"fas "+(this.state.expandReplies?"fa-angle-up":"fa-angle-down")})))},k.prototype.renderReplyBox=function(){if(this.state.showNewReply)return Object(v.div)({className:"comment__reply-box"},o(l.a,{close:this.closeNewReply,modifiers:this.props.modifiers,onPosted:this.handleReplyPosted,parent:this.props.comment}))},k.prototype.renderReplyButton=function(){if(!this.props.comment.isDeleted)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action "+(this.state.showNewReply?"comment__action--active":""),onClick:this.toggleNewReply},osu.trans("common.buttons.reply")))},k.prototype.renderReport=function(){if(this.props.comment.canReport)return Object(v.div)({className:"comment__row-item"},o(b.a,{className:"comment__action",reportableId:this.props.comment.id,reportableType:"comment",user:this.userFor(this.props.comment)}))},k.prototype.renderRestore=function(){if(this.props.comment.isDeleted&&this.props.comment.canRestore)return Object(v.div)({className:"comment__row-item"},Object(v.button)({type:"button",className:"comment__action",onClick:this.restore},osu.trans("common.buttons.restore")))},k.prototype.renderUserAvatar=function(e){return null!=e.id?Object(v.a)({className:"comment__avatar js-usercard","data-user-id":e.id,href:laroute.route("users.show",{user:e.id})},o(w.a,{user:e,modifiers:["full-circle"]})):Object(v.span)({className:"comment__avatar"},o(w.a,{user:e,modifiers:["full-circle"]}))},k.prototype.renderUsername=function(e){return null!=e.id?Object(v.a)({"data-user-id":e.id,href:laroute.route("users.show",{user:e.id}),className:"js-usercard comment__row-item comment__row-item--username comment__row-item--username-link"},e.username):Object(v.span)({className:"comment__row-item comment__row-item--username"},e.username)},k.prototype.renderVoteButton=function(){var e,t;return e=osu.classWithModifiers("comment-vote",this.props.modifiers),this.state.postingVote&&(e+=" comment-vote--posting"),this.hasVoted()?(e+=" comment-vote--on",t=null):(e+=" comment-vote--off",t=Object(v.div)({className:"comment-vote__hover"},"+1")),Object(v.button)({className:e,type:"button",onClick:this.voteToggle,disabled:this.state.postingVote||!this.props.comment.canVote},Object(v.span)({className:"comment-vote__text"},"+"+osu.formatNumberSuffixed(this.props.comment.votesCount,null,{maximumFractionDigits:1})),this.state.postingVote?Object(v.span)({className:"comment-vote__spinner"},o(g.a)):void 0,t)},k.prototype.renderVoteText=function(){var e;return e="comment__action",this.hasVoted()&&(e+=" comment__action--active"),Object(v.button)({className:e,type:"button",onClick:this.voteToggle,disabled:this.state.postingVote},"+"+osu.formatNumberSuffixed(this.props.comment.votesCount,null,{maximumFractionDigits:1}))},k.prototype.renderCommentableMeta=function(e){var t,n;if(this.props.showCommentableMeta)return e.url?(t=v.a,n={href:e.url,className:"comment__link"}):(t=v.span,n=null),Object(v.div)({className:"comment__commentable-meta"},null!=this.props.comment.commentableType?Object(v.span)({className:"comment__commentable-meta-type"},Object(v.span)({className:"comment__commentable-meta-icon fas fa-comment"})," ",osu.trans("comments.commentable_name."+this.props.comment.commentableType)):void 0,t(n,e.title))},k.prototype.hasVoted=function(){return i.userVotes.has(this.props.comment.id)},k.prototype.delete=function(){var e;if(confirm(osu.trans("common.confirmation")))return null!=(e=this.xhr.delete)&&e.abort(),this.xhr.delete=$.ajax(laroute.route("comments.destroy",{comment:this.props.comment.id}),{method:"DELETE"}).done((function(e){return $.publish("comment:updated",e)})).fail((function(e,t){if("abort"!==t)return osu.ajaxError(e)}))},k.prototype.togglePinned=function(){var e;if(this.props.comment.canPin)return null!=(e=this.xhr.pin)&&e.abort(),this.xhr.pin=$.ajax(laroute.route("comments.pin",{comment:this.props.comment.id}),{method:this.props.comment.pinned?"DELETE":"POST"}).done((function(e){return $.publish("comment:updated",e)})).fail((function(e,t){if("abort"!==t)return osu.ajaxError(e)}))},k.prototype.handleReplyPosted=function(e){if("reply"===e)return this.setState({expandReplies:!0})},k.prototype.toggleEdit=function(){return this.setState({editing:!this.state.editing})},k.prototype.closeEdit=function(){return this.setState({editing:!1})},k.prototype.loadReplies=function(){var e;return null!=(e=this.loadMoreRef.current)&&e.load(),this.toggleReplies()},k.prototype.parentLink=function(e){var t,r;return r={title:n(e)},this.props.linkParent?(t=v.a,r.href=laroute.route("comments.show",{comment:e.id}),r.className="comment__link"):t=v.span,t(r,Object(v.span)({className:"fas fa-reply"})," ",this.userFor(e).username)},k.prototype.userFor=function(e){var t,n;return null!=(n=null!=(t=c.get(e.userId))?t.toJSON():void 0)?n:null!=e.legacyName?{username:e.legacyName}:s},k.prototype.restore=function(){var e;return null!=(e=this.xhr.restore)&&e.abort(),this.xhr.restore=$.ajax(laroute.route("comments.restore",{comment:this.props.comment.id}),{method:"POST"}).done((function(e){return $.publish("comment:updated",e)})).fail((function(e,t){if("abort"!==t)return osu.ajaxError(e)}))},k.prototype.toggleNewReply=function(){return this.setState({showNewReply:!this.state.showNewReply})},k.prototype.voteToggle=function(e){var t,n,r,s,o;if(s=e.target,null!=currentUser.id)return this.setState({postingVote:!0}),this.hasVoted()?(t="DELETE",r="removeUserVote"):(t="POST",r="addUserVote"),null!=(n=this.xhr.vote)&&n.abort(),this.xhr.vote=$.ajax(laroute.route("comments.vote",{comment:this.props.comment.id}),{method:t}).always((o=this,function(){return o.setState({postingVote:!1})})).done(function(e){return function(t){return $.publish("comment:updated",t),i[r](e.props.comment)}}(this)).fail((function(e,t){if("abort"!==t)return 401===e.status?$(s).trigger("ajax:error",[e,t]):osu.ajaxError(e)}));userLogin.show(s)},k.prototype.closeNewReply=function(){return this.setState({showNewReply:!1})},k.prototype.toggleReplies=function(){return this.setState({expandReplies:!this.state.expandReplies})},k}(f.PureComponent)},UXHL:function(e,t,n){"use strict";var r=n("Jryd"),s=n("JOWQ"),o=n("HYKJ"),i=n("MaVE"),a=n("oQpG"),c=n("ZB8s");function u(e,t){this.file=t,this.offset={},this.options=r(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=o(t).toOffset,this.unescape=i(this,"escape"),this.decode=a(this)}e.exports=u;var l=u.prototype;function p(e){var t,n=[];for(t in e)n.push(t);return n}l.setOptions=n("l2ru"),l.parse=n("pLKd"),l.options=n("q7YD"),l.exitStart=s("atStart",!0),l.enterList=s("inList",!1),l.enterLink=s("inLink",!1),l.enterBlock=s("inBlock",!1),l.interruptParagraph=[["thematicBreak"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.blockTokenizers={newline:n("Lspe"),indentedCode:n("7Pxk"),fencedCode:n("LLPm"),blockquote:n("JN1X"),atxHeading:n("pL8D"),thematicBreak:n("Jcop"),list:n("MKRK"),setextHeading:n("LnNg"),html:n("KbVC"),footnote:n("Eo6g"),definition:n("XYTD"),table:n("iwIW"),paragraph:n("eBPa")},l.inlineTokenizers={escape:n("wOcG"),autoLink:n("MCzN"),url:n("Ix6x"),html:n("l6ln"),link:n("v33t"),reference:n("wlJd"),strong:n("bYiV"),emphasis:n("giZH"),deletion:n("NkXE"),code:n("yzy7"),break:n("b3/f"),text:n("KTKs")},l.blockMethods=p(l.blockTokenizers),l.inlineMethods=p(l.inlineTokenizers),l.tokenizeBlock=c("block"),l.tokenizeInline=c("inline"),l.tokenizeFactory=c},UXHk:function(e,t,n){"use strict";var r=n("cDcd"),s=n("Jryd"),o=n("i5IF"),i={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function a(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}e.exports=function e(t,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=n.renderers[t.type];void 0===t.position&&(t.position=c.node&&c.node.position||i);var p=t.position.start,d=[t.type,p.line,p.column,u].join("-");if(!o.isValidElementType(l))throw new Error("Renderer for type `".concat(t.type,"` not defined or is not renderable"));var h=function(t,n,o,i,c,u){var l,p={key:n},d="string"==typeof i;o.sourcePos&&t.position&&(p["data-sourcepos"]=[(l=t.position).start.line,":",l.start.column,"-",l.end.line,":",l.end.column].map(String).join("")),o.rawSourcePos&&!d&&(p.sourcePosition=t.position),o.includeNodeIndex&&c.node&&c.node.children&&!d&&(p.index=c.node.children.indexOf(t),p.parentChildCount=c.node.children.length);var h=null!==t.identifier&&void 0!==t.identifier?o.definitions[t.identifier]||{}:null;switch(t.type){case"root":a(p,{className:o.className});break;case"text":p.nodeKey=n,p.children=t.value;break;case"heading":p.level=t.depth;break;case"list":p.start=t.start,p.ordered=t.ordered,p.tight=!t.loose,p.depth=t.depth;break;case"listItem":p.checked=t.checked,p.tight=!t.loose,p.ordered=t.ordered,p.index=t.index,p.children=function(e,t){return e.loose?e.children:t.node&&e.index>0&&t.node.children[e.index-1].loose?e.children:function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children||[]:[t])}),[])}(e)}(t,c).map((function(n,r){return e(n,o,{node:t,props:p},r)}));break;case"definition":a(p,{identifier:t.identifier,title:t.title,url:t.url});break;case"code":a(p,{language:t.lang&&t.lang.split(/\s/,1)[0]});break;case"inlineCode":p.children=t.value,p.inline=!0;break;case"link":a(p,{title:t.title||void 0,target:"function"==typeof o.linkTarget?o.linkTarget(t.url,t.children,t.title):o.linkTarget,href:o.transformLinkUri?o.transformLinkUri(t.url,t.children,t.title):t.url});break;case"image":a(p,{alt:t.alt||void 0,title:t.title||void 0,src:o.transformImageUri?o.transformImageUri(t.url,t.children,t.title,t.alt):t.url});break;case"linkReference":a(p,s(h,{href:o.transformLinkUri?o.transformLinkUri(h.href):h.href}));break;case"imageReference":a(p,{src:o.transformImageUri&&h.href?o.transformImageUri(h.href,t.children,h.title,t.alt):h.href,title:h.title||void 0,alt:t.alt||void 0});break;case"table":case"tableHead":case"tableBody":p.columnAlignment=t.align;break;case"tableRow":p.isHeader="tableHead"===c.node.type,p.columnAlignment=c.props.columnAlignment;break;case"tableCell":a(p,{isHeader:c.props.isHeader,align:c.props.columnAlignment[u]});break;case"virtualHtml":p.tag=t.tag;break;case"html":p.isBlock=t.position.start.line!==t.position.end.line,p.escapeHtml=o.escapeHtml,p.skipHtml=o.skipHtml;break;case"parsedHtml":var m;t.children&&(m=t.children.map((function(n,r){return e(n,o,{node:t,props:p},r)}))),p.escapeHtml=o.escapeHtml,p.skipHtml=o.skipHtml,p.element=function(e,t){var n=e.element;if(Array.isArray(n)){var s=r.Fragment||"div";return r.createElement(s,null,n)}if(n.props.children||t){var o=r.Children.toArray(n.props.children).concat(t);return r.cloneElement(n,null,o)}return r.cloneElement(n,null)}(t,m);break;default:a(p,s(t,{type:void 0,position:void 0,children:void 0}))}return!d&&t.value&&(p.value=t.value),p}(t,d,n,l,c,u);return r.createElement(l,h,h.children||t.children&&t.children.map((function(r,s){return e(r,n,{node:t,props:h},s)}))||void 0)}},UpvM:function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},VEn2:function(e,t,n){"use strict";var r=n("YLtl"),s=n("wy2R"),o=n("cDcd"),i=n("0h6b");class a extends o.Component{constructor(e){if(super(e),this.state={expanded:!1},this.stateRecord=null,this.recordState=()=>{null!=this.stateRecord&&(this.stateRecord.dataset[this.stateRecordKey]=this.state.expanded?"1":"")},this.renderPost=e=>{let t="news-sidebar-month__item";return null!=this.props.currentPost&&this.props.currentPost.id===e.id&&(t+=" news-sidebar-month__item--active"),o.createElement("li",{key:e.id},o.createElement("a",{href:Object(i.route)("news.show",{news:e.slug}),className:t},e.title))},this.toggleExpand=()=>{this.setState({expanded:!this.state.expanded},this.recordState)},osu.isMobile())this.state.expanded=!1;else if(null==e.currentPost)this.state.expanded=e.initialExpand;else{const t=s.utc(e.currentPost.published_at);this.state.expanded=t.year()===e.year&&t.month()===e.month}const t=document.querySelector(".js-news-sidebar-record");t instanceof HTMLElement&&(this.stateRecord=t),null==this.stateRecordValue?this.recordState():this.state.expanded=this.stateRecordValue}get stateRecordKey(){return`month-${this.props.month}`}get stateRecordValue(){return this.stateRecord instanceof HTMLElement&&null!=this.stateRecord.dataset[this.stateRecordKey]?"1"===this.stateRecord.dataset[this.stateRecordKey]:null}render(){return o.createElement("div",{className:"news-sidebar-month"},o.createElement("button",{className:"news-sidebar-month__toggle",type:"button",onClick:this.toggleExpand},s.utc([this.props.year,this.props.month]).format(osu.trans("common.datetime.year_month_short.moment")),o.createElement("span",{className:"news-sidebar-month__toggle-icon"},o.createElement("i",{className:this.state.expanded?"fas fa-chevron-up":"fas fa-chevron-down"}))),o.createElement("ul",{className:`news-sidebar-month__items ${this.state.expanded?"":"hidden"}`},this.props.posts.map(this.renderPost)))}}function c(e){return o.createElement("div",{className:"news-sidebar-years"},e.years.map(t=>o.createElement("a",{href:Object(i.route)("news.index",{year:t}),key:t,className:`news-sidebar-years__item ${t===e.currentYear?"news-sidebar-years__item--active":""}`},t)))}function u(e){const t=Object(r.groupBy)(e.data.news_posts,e=>s.utc(e.published_at).month());let n=!0;return o.createElement("div",{className:"sidebar"},o.createElement("button",{type:"button",className:"sidebar__mobile-toggle sidebar__mobile-toggle--mobile-only js-mobile-toggle","data-mobile-toggle-target":"news-archive"},o.createElement("h2",{className:"sidebar__title"},osu.trans("news.sidebar.archive")),o.createElement("div",{className:"sidebar__mobile-toggle-icon"},o.createElement("i",{className:"fas fa-chevron-down"}))),o.createElement("div",{className:"sidebar__content hidden-xs js-mobile-toggle","data-mobile-toggle-id":"news-archive"},o.createElement(c,{years:e.data.years,currentYear:e.data.current_year}),Object(r.rangeRight)(0,12).map(r=>{if(null==t[r])return;const s=n;return n=!1,o.createElement(a,{year:e.data.current_year,initialExpand:s,key:r,month:r,posts:t[r],currentPost:e.currentPost})})))}n.d(t,"a",(function(){return u}))},VefT:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("YLtl"),s=n("cDcd");const o=e=>{const t=osu.classWithModifiers("supporter-icon",e.modifiers);return s.createElement("span",{className:t,title:osu.trans("users.show.is_supporter")},Object(r.times)(e.level||1,e=>s.createElement("span",{key:e,className:"fas fa-heart"})))}},VxeA:function(e,t,n){"use strict";t.a={colour:"hsl(200, 60%, 50%)",name:"Beatmap Mapper",short_name:"MAP"}},WCVR:function(e,t,n){"use strict";var r,s="";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(r!==e||void 0===r)r=e,s="";else if(s.length>=n)return s.substr(0,n);for(;n>s.length&&t>1;)1&t&&(s+=e),t>>=1,e+=e;return s=(s+=e).substr(0,n)}},WLnA:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));const r=new class{constructor(){this.listeners=new Set,this.trace=!1}dispatch(e){this.trace&&console.debug("Dispatcher::dispatch",e),this.listeners.forEach(t=>{t.handleDispatchAction(e)})}register(e){this.listeners.add(e)}};function s(e){r.dispatch(e)}function o(e){return class extends e{constructor(...e){super(...e),this.handleDispatchAction&&r.register(this)}}}},"WR+t":function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},WU0t:function(e,t,n){"use strict";var r;e.exports=function(e){var t,n="&"+e+";";return(r=r||document.createElement("i")).innerHTML=n,(59!==(t=r.textContent).charCodeAt(t.length-1)||"semi"===e)&&(t!==n&&t)}},X9sK:function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},XFVs:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("0h6b"),s=n("wy2R"),o=n("cDcd"),i=n("mk7q");function a({modifiers:e,post:t}){let n;null!=t.first_image&&(n=o.createElement("img",{className:"news-card__cover",src:t.first_image}));let a=t.preview;return null==a&&(a=""),o.createElement("a",{className:osu.classWithModifiers("news-card",null!=e?e:["index","hover"]),href:Object(r.route)("news.show",{news:t.slug})},o.createElement("div",{className:"news-card__cover-container"},n,o.createElement("div",{className:"news-card__time js-tooltip-time",title:t.published_at},s.utc(t.published_at).format("ll"))),o.createElement("div",{className:"news-card__main"},o.createElement("div",{className:"news-card__row news-card__row--title"},t.title),o.createElement("div",{className:"news-card__row news-card__row--preview",dangerouslySetInnerHTML:{__html:a}}),o.createElement("div",{className:"news-card__row news-card__row--author"},o.createElement(i.a,{pattern:osu.trans("news.show.by"),mappings:{":user":o.createElement("strong",{key:"author"},t.author)}}))))}},XPyy:function(e,t,n){"use strict";var r=n("jbZF"),s=n("If6E"),o=n("FVE9"),i=n("0h6b"),a=n("YLtl"),c=n("C92G"),u=n("cDcd"),l=n("hc33"),p=n("SYfz"),d=n("VefT"),h=n("oQBk");class m extends u.PureComponent{constructor(){super(...arguments),this.eventId=`user-card-brick-${osu.uuid()}`,this.state={backgroundLoaded:!1},this.addFriendModifier=e=>{let t=!1,n=!1;if(null!=currentUser.friends){const e=currentUser.friends.find(e=>e.target_id===this.props.user.id);null!=e&&(t=!0,n=e.mutual)}n?e.push("mutual"):t&&!this.context.isFriendsPage&&e.push("friend")},this.onBackgroundLoad=()=>{this.setState({backgroundLoaded:!0})},this.refresh=()=>{this.forceUpdate()}}componentDidMount(){$.subscribe(`friendButton:refresh.${this.eventId}`,this.refresh)}componentWillUnmount(){$.unsubscribe(`.${this.eventId}`)}render(){var e;const t=this.props.modifiers.concat(this.props.mode);return this.addFriendModifier(t),u.createElement("div",{className:`js-usercard ${osu.classWithModifiers("user-card-brick",t)}`,"data-user-id":this.props.user.id},this.renderBackground(),u.createElement("div",{className:"user-card-brick__group-bar",style:osu.groupColour(this.props.user.group_badge),title:null===(e=this.props.user.group_badge)||void 0===e?void 0:e.name}),u.createElement("a",{className:"user-card-brick__username",href:Object(i.route)("users.show",{user:this.props.user.id})},u.createElement("div",{className:"u-ellipsis-overflow"},this.props.user.username)))}renderBackground(){let e=null;if(this.props.user.cover&&this.props.user.cover.url){let t="user-card-brick__background";this.state.backgroundLoaded&&(t+=" user-card-brick__background--loaded"),e=u.createElement("img",{className:t,onLoad:this.onBackgroundLoad,src:this.props.user.cover.url})}return u.createElement("a",{href:Object(i.route)("users.show",{user:this.props.user.id}),className:"user-card-brick__background-container"},e)}}m.contextType=h.a,m.defaultProps={mode:"brick",modifiers:[]},n.d(t,"a",(function(){return f}));class f extends u.PureComponent{constructor(){super(...arguments),this.state={avatarLoaded:!1,backgroundLoaded:!1},this.onAvatarLoad=()=>{this.setState({avatarLoaded:!0})},this.onBackgroundLoad=()=>{this.setState({backgroundLoaded:!0})}}get canMessage(){return!this.isSelf&&null==a.find(currentUser.blocks,{target_id:this.user.id})}get isOnline(){return this.user.is_online}get isSelf(){return currentUser.id===this.user.id}get isUserLoaded(){return Number.isFinite(this.user.id)&&this.user.id>0}get isUserNotFound(){return-1===this.user.id}get user(){return this.props.user||f.userLoading}render(){if("brick"===this.props.mode)return null==this.props.user?null:u.createElement(m,Object.assign({},this.props,{user:this.props.user}));const e=this.props.modifiers.slice();return e.push(this.props.activated?"active":"highlightable"),e.push(this.props.mode),u.createElement("div",{className:osu.classWithModifiers("user-card",e)},this.renderBackground(),u.createElement("div",{className:"user-card__card"},u.createElement("div",{className:"user-card__content user-card__content--details"},u.createElement("div",{className:"user-card__user"},this.renderAvatar()),u.createElement("div",{className:"user-card__details"},this.renderIcons(),u.createElement("div",{className:"user-card__username"},u.createElement("div",{className:"u-ellipsis-overflow"},this.user.username)),this.renderListModeIcons())),this.renderStatusBar()))}renderAvatar(){const e=this.state.avatarLoaded?["loaded"]:[];return u.createElement("div",{className:"user-card__avatar-space"},u.createElement("div",{className:osu.classWithModifiers("user-card__avatar-spinner",e)},this.isUserNotFound?null:u.createElement(p.a,{modifiers:e})),this.isUserLoaded?u.createElement("img",{className:osu.classWithModifiers("user-card__avatar",e),onError:this.onAvatarLoad,onLoad:this.onAvatarLoad,src:this.user.avatar_url}):null)}renderBackground(){let e;const t=osu.classWithModifiers("user-card__background-overlay",this.isOnline?["online"]:[]);if(this.user.cover&&this.user.cover.url){let n="user-card__background";this.state.backgroundLoaded||(n+=" user-card__background--loading"),e=u.createElement(u.Fragment,null,u.createElement("img",{className:n,onLoad:this.onBackgroundLoad,src:this.user.cover.url}),u.createElement("div",{className:t}))}else e=u.createElement("div",{className:t});return this.isUserLoaded?u.createElement("a",{href:Object(i.route)("users.show",{user:this.user.id}),className:"user-card__background-container"},e):e}renderIcons(){return this.isUserLoaded?u.createElement("div",{className:"user-card__icons"},u.createElement("a",{className:"user-card__icon user-card__icon--flag",href:Object(i.route)("rankings",{mode:"osu",type:"performance",country:this.user.country_code})},u.createElement(s.a,{country:this.user.country,modifiers:["full"]})),"card"===this.props.mode&&this.user.is_supporter?u.createElement("a",{className:"user-card__icon",href:Object(i.route)("support-the-game")},u.createElement(d.a,{modifiers:["user-card"]})):null,"card"===this.props.mode?u.createElement("div",{className:"user-card__icon"},u.createElement(o.a,{userId:this.user.id,modifiers:["user-card"]})):null):null}renderListModeIcons(){return"list"===this.props.mode&&this.isUserLoaded?u.createElement("div",{className:"user-card__icons"},this.user.is_supporter&&u.createElement("a",{className:"user-card__icon",href:Object(i.route)("support-the-game")},u.createElement(d.a,{level:this.user.support_level,modifiers:["user-list"]})),u.createElement("div",{className:"user-card__icon"},u.createElement(o.a,{userId:this.user.id,modifiers:["user-list"]}))):null}renderMenuButton(){return this.isSelf?null:u.createElement("div",{className:"user-card__icon user-card__icon--menu"},u.createElement(c.a,null,e=>u.createElement(u.Fragment,null,this.canMessage?u.createElement("a",{className:"simple-menu__item js-login-required--click",href:Object(i.route)("messages.users.show",{user:this.user.id}),onClick:e},u.createElement("span",{className:"fas fa-envelope"}),` ${osu.trans("users.card.send_message")}`):null,u.createElement(r.a,{onClick:e,modifiers:["inline"],userId:this.user.id,wrapperClass:"simple-menu__item"}),u.createElement(l.a,{className:"simple-menu__item",icon:!0,onFormClose:e,reportableId:this.user.id.toString(),reportableType:"user",user:this.user}))))}renderStatusBar(){if(!this.isUserLoaded)return null;const e=this.isOnline||null==this.user.last_visit?"":osu.trans("users.show.lastvisit",{date:osu.timeago(this.user.last_visit)}),t=this.isOnline?osu.trans("users.status.online"):osu.trans("users.status.offline");return u.createElement("div",{className:"user-card__content user-card__content--status"},u.createElement("div",{className:"user-card__status"},this.renderStatusIcon(),u.createElement("div",{className:"user-card__status-messages"},u.createElement("span",{className:"user-card__status-message user-card__status-message--sub u-ellipsis-overflow",dangerouslySetInnerHTML:{__html:e}}),u.createElement("span",{className:"user-card__status-message u-ellipsis-overflow"},t))),u.createElement("div",{className:"user-card__icons user-card__icons--menu"},this.renderMenuButton()))}renderStatusIcon(){return this.isUserLoaded?u.createElement("div",{className:"user-card__status-icon-container"},u.createElement("div",{className:`user-card__status-icon user-card__status-icon--${this.isOnline?"online":"offline"}`})):null}}f.defaultProps={activated:!1,mode:"card",modifiers:[]},f.userLoading={avatar_url:"",country_code:"",cover:{},default_group:"",id:0,is_active:!1,is_bot:!1,is_online:!1,is_supporter:!1,last_visit:"",pm_friends_only:!0,profile_colour:"",username:osu.trans("users.card.loading")}},XVa7:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("[",t),r=e.indexOf("![",t);return-1===r?n:n<r?n:r}},XYTD:function(e,t,n){"use strict";var r=n("AMMU"),s=n("mPRR");e.exports=function(e,t,n){for(var r,b,_,w,O,j,k,E,S=this.options.commonmark,x=0,N=t.length,T="";x<N&&((w=t.charAt(x))===l||w===u);)T+=w,x++;if((w=t.charAt(x))===p){for(x++,T+=w,_="";x<N&&(w=t.charAt(x))!==d;)w===a&&(_+=w,x++,w=t.charAt(x)),_+=w,x++;if(_&&t.charAt(x)===d&&t.charAt(x+1)===f){for(j=_,x=(T+=_+d+f).length,_="";x<N&&((w=t.charAt(x))===u||w===l||w===c);)T+=w,x++;if(_="",r=T,(w=t.charAt(x))===v){for(x++;x<N&&y(w=t.charAt(x));)_+=w,x++;if((w=t.charAt(x))===y.delimiter)T+=v+_+w,x++;else{if(S)return;x-=_.length+1,_=""}}if(!_){for(;x<N&&g(w=t.charAt(x));)_+=w,x++;T+=_}if(_){for(k=_,_="";x<N&&((w=t.charAt(x))===u||w===l||w===c);)_+=w,x++;if(O=null,(w=t.charAt(x))===o?O=o:w===i?O=i:w===h&&(O=m),O){if(!_)return;for(x=(T+=_+w).length,_="";x<N&&(w=t.charAt(x))!==O;){if(w===c){if(x++,(w=t.charAt(x))===c||w===O)return;_+=c}_+=w,x++}if((w=t.charAt(x))!==O)return;b=T,T+=_+w,x++,E=_,_=""}else _="",x=T.length;for(;x<N&&((w=t.charAt(x))===u||w===l);)T+=w,x++;return(w=t.charAt(x))&&w!==c?void 0:!!n||(r=e(r).test().end,k=this.decode.raw(this.unescape(k),r,{nonTerminated:!1}),E&&(b=e(b).test().end,E=this.decode.raw(this.unescape(E),b)),e(T)({type:"definition",identifier:s(j),label:j,title:E||null,url:k}))}}}};var o='"',i="'",a="\\",c="\n",u="\t",l=" ",p="[",d="]",h="(",m=")",f=":",v="<",b=">";function y(e){return e!==b&&e!==p&&e!==d}function g(e){return e!==p&&e!==d&&!r(e)}y.delimiter=b},Y9Pv:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n("cDcd").createContext([])},Yin1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("cDcd");var r,s=n("NzAu");r="beatmap-discussion-message-length-counter";var o=function(e){var t,n,o;return o=e.message,e.isTimeline?(n=BeatmapDiscussionHelper.MAX_LENGTH_TIMELINE,t=r,o.length>n?t+=" "+r+"--over":o.length>.95*n&&(t+=" "+r+"--almost-over"),Object(s.div)({className:t},o.length+" / "+n)):null}},ZB8s:function(e,t,n){"use strict";function r(e){var t,n;return"text"!==e.type||!e.position||(t=e.position.start,n=e.position.end,t.line!==n.line||n.column-t.column===e.value.length)}function s(e,t){return e.value+=t.value,e}function o(e,t){return this.options.commonmark||this.options.gfm?t:(e.children=e.children.concat(t.children),e)}e.exports=function(e){return function(t,n){var i,a,c,u,l,p=this,d=p.offset,h=[],m=p[e+"Methods"],f=p[e+"Tokenizers"],v=n.line,b=n.column;if(!t)return h;for(w.now=g,w.file=p.file,y("");t;){for(i=-1,a=m.length,u=!1;++i<a&&(!(c=f[m[i]])||c.onlyAtStart&&!p.atStart||c.notInList&&p.inList||c.notInBlock&&p.inBlock||c.notInLink&&p.inLink||(l=t.length,c.apply(p,[w,t]),!(u=l!==t.length))););u||p.file.fail(new Error("Infinite loop"),w.now())}return p.eof=g(),h;function y(e){for(var t=-1,n=e.indexOf("\n");-1!==n;)v++,t=n,n=e.indexOf("\n",n+1);-1===t?b+=e.length:b=e.length-t,v in d&&(-1!==t?b+=d[v]:b<=d[v]&&(b=d[v]+1))}function g(){var e={line:v,column:b};return e.offset=p.toOffset(e),e}function _(e){this.start=e,this.end=g()}function w(e){var n,i=function(){var e=[],t=v+1;return function(){for(var n=v+1;t<n;)e.push((d[t]||0)+1),t++;return e}}(),a=(n=g(),function(e,t){var r=e.position,s=r?r.start:n,o=[],i=r&&r.end.line,a=n.line;if(e.position=new _(s),r&&t&&r.indent){if(o=r.indent,i<a){for(;++i<a;)o.push((d[i]||0)+1);o.push(n.column)}t=o.concat(t)}return e.position.indent=t||[],e}),c=g();return function(e){t.substring(0,e.length)!==e&&p.file.fail(new Error("Incorrectly eaten value: please report this warning on https://git.io/vg5Ft"),g())}(e),u.reset=l,l.test=m,u.test=m,t=t.substring(e.length),y(e),i=i(),u;function u(e,t){return a(function(e,t){var n=t?t.children:h,i=n[n.length-1];return i&&e.type===i.type&&("text"===e.type||"blockquote"===e.type)&&r(i)&&r(e)&&(e=("text"===e.type?s:o).call(p,i,e)),e!==i&&n.push(e),p.atStart&&0!==h.length&&p.exitStart(),e}(a(e),t),i)}function l(){var n=u.apply(null,arguments);return v=c.line,b=c.column,t=e+t,n}function m(){var n=a({});return v=c.line,b=c.column,t=e+t,n.position}}}}},ZG74:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("cDcd");function s(e){this.setState({activeKey:e})}const o=Object(r.createContext)({activeKeyDidChange:e=>{}}),i=Object(r.createContext)(null)},ZXkc:function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},"Zs/d":function(e,t,n){"use strict";e.exports=function(e){for(var t=String(e),n=t.length;t.charAt(--n)===r;);return t.slice(0,n+1)};var r="\n"},"b3/f":function(e,t,n){"use strict";var r=n("GtRd");e.exports=a,a.locator=r;var s=" ",o="\n",i=2;function a(e,t,n){for(var r,a=t.length,c=-1,u="";++c<a;){if((r=t.charAt(c))===o){if(c<i)return;return!!n||e(u+=r)({type:"break"})}if(r!==s)return;u+=r}}},b4M7:function(e,t,n){"use strict";e.exports=function(e){return String(e).replace(/\s+/g," ")}},bYiV:function(e,t,n){"use strict";var r=n("DmM8"),s=n("AMMU"),o=n("k4GU");e.exports=u,u.locator=o;var i="\\",a="*",c="_";function u(e,t,n){var o,u,l,p,d,h,m,f=0,v=t.charAt(f);if(!(v!==a&&v!==c||t.charAt(++f)!==v||(u=this.options.pedantic,d=(l=v)+l,h=t.length,f++,p="",v="",u&&s(t.charAt(f)))))for(;f<h;){if(m=v,!((v=t.charAt(f))!==l||t.charAt(f+1)!==l||u&&s(m))&&(v=t.charAt(f+2))!==l){if(!r(p))return;return!!n||((o=e.now()).column+=2,o.offset+=2,e(d+p+d)({type:"strong",children:this.tokenizeInline(p,o)}))}u||v!==i||(p+=v,v=t.charAt(++f)),p+=v,f++}}},btiA:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},bucr:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("0h6b"),s=n("YLtl");class o{static beatmapDownloadDirect(e){return`osu://b/${e}`}static changelogBuild(e){return r.route("changelog.build",{stream:e.update_stream.name,build:e.version})}static isHTML(e){return e.isHTML()||s.startsWith(e.getPath(),"/home/changelog/")}static isInternal(e){return RegExp(`^/(?:${this.internalUrls})(?:$|/|#)`).test(e.getPath())}static openBeatmapEditor(e){return`osu://edit/${e}`}}o.internalUrls=["admin","api/v2","beatmaps","beatmapsets","client-verifications","comments","community","help","home","legal","oauth","rankings","session","store","users"].join("|")},cF9b:function(e,t,n){"use strict";n.d(t,"d",(function(){return de})),n.d(t,"a",(function(){return he})),n.d(t,"b",(function(){return ge})),n.d(t,"c",(function(){return G}));var r=n("EaLk"),s=n("cDcd"),o=n.n(s),i=n("faye");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return e(t={exports:{}},t.exports),t.exports}var v,b=f((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case p:case o:case a:case i:return e;default:switch(e=e&&e.$$typeof){case u:case d:case c:return e;default:return t}}case s:return t}}}function b(e){return v(e)===p}t.typeOf=v,t.AsyncMode=l,t.ConcurrentMode=p,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Profiler=a,t.Portal=s,t.StrictMode=i,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===p||e===a||e===i||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d)},t.isAsyncMode=function(e){return b(e)||v(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return v(e)===u},t.isContextProvider=function(e){return v(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===a},t.isPortal=function(e){return v(e)===s},t.isStrictMode=function(e){return v(e)===i}}));(v=b)&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")&&v.default,b.typeOf,b.AsyncMode,b.ConcurrentMode,b.ContextConsumer,b.ContextProvider,b.Element,b.ForwardRef,b.Fragment,b.Profiler,b.Portal,b.StrictMode,b.isValidElementType,b.isAsyncMode,b.isConcurrentMode,b.isContextConsumer,b.isContextProvider,b.isElement,b.isForwardRef,b.isFragment,b.isProfiler,b.isPortal,b.isStrictMode;var y=f((function(e){e.exports=b})),g={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},w={};w[y.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var O=Object.defineProperty,j=Object.getOwnPropertyNames,k=Object.getOwnPropertySymbols,E=Object.getOwnPropertyDescriptor,S=Object.getPrototypeOf,x=Object.prototype,N=function e(t,n,r){if("string"!=typeof n){if(x){var s=S(n);s&&s!==x&&e(t,s,r)}var o=j(n);k&&(o=o.concat(k(n)));for(var i=w[t.$$typeof]||g,a=w[n.$$typeof]||g,c=0;c<o.length;++c){var u=o[c];if(!(_[u]||r&&r[u]||a&&a[u]||i&&i[u])){var l=E(n,u);try{O(t,u,l)}catch(e){}}}return t}return t},T=function(){function e(){c(this,e),this.listeners=[]}return l(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach((function(t){return t(e)}))}}]),e}();function A(e){function t(t,n,s,o,i,a){for(var c=arguments.length,u=new Array(c>6?c-6:0),l=6;l<c;l++)u[l-6]=arguments[l];return Object(r.q)((function(){if(o=o||"<<anonymous>>",a=a||s,null==n[s]){if(t){var r=null===n[s]?"null":"undefined";return new Error("The "+i+" `"+a+"` is marked as required in `"+o+"`, but its value is `"+r+"`.")}return null}return e.apply(void 0,[n,s,o,i,a].concat(u))}))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function P(e){var t=a(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function C(e,t){return A((function(n,s,o,i,a){return Object(r.q)((function(){if(e&&P(n[s])===t.toLowerCase())return null;var i;switch(t){case"Array":i=r.i;break;case"Object":i=r.k;break;case"Map":i=r.j;break;default:throw new Error("Unexpected mobxType: ".concat(t))}var c=n[s];if(!i(c)){var u=function(e){var t=P(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}(c),l=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+u+"` supplied to `"+o+"`, expected `mobx.Observable"+t+"`"+l+".")}return null}))}))}function D(e,t){return A((function(n,s,o,i,a){for(var c=arguments.length,u=new Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];return Object(r.q)((function(){if("function"!=typeof t)return new Error("Property `"+a+"` of component `"+o+"` has invalid PropType notation.");var r=C(e,"Array")(n,s,o);if(r instanceof Error)return r;for(var c=n[s],l=0;l<c.length;l++)if((r=t.apply(void 0,[c,l,o,i,a+"["+l+"]"].concat(u)))instanceof Error)return r;return null}))}))}C(!1,"Array"),D.bind(null,!1),C(!1,"Map"),C(!1,"Object"),C(!0,"Array"),D.bind(null,!0);var R=C(!0,"Object"),M=0,I={};function U(e){return I[e]||(I[e]=function(e){if("function"==typeof Symbol)return Symbol(e);var t="__$mobx-react ".concat(e," (").concat(M,")");return M++,t}(e)),I[e]}var L=U("patchMixins"),B=U("patchedDefinition");function H(e,t){for(var n=this,r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];t.locks++;try{var i;return null!=e&&(i=e.apply(this,s)),i}finally{t.locks--,0===t.locks&&t.methods.forEach((function(e){e.apply(n,s)}))}}function $(e,t){return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];H.call.apply(H,[this,e,t].concat(r))}}function z(e,t){for(var n=function(e,t){var n=e[L]=e[L]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(e,t),r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];for(var i=0;i<s.length;i++){var a=s[i];n.methods.indexOf(a)<0&&n.methods.push(a)}var c=Object.getOwnPropertyDescriptor(e,t);if(!c||!c[B]){var u=e[t],l=function e(t,n,r,s,o){var i,a=$(o,s);return p(i={},B,!0),p(i,"get",(function(){return a})),p(i,"set",(function(o){if(this===t)a=$(o,s);else{var i=e(this,n,r,s,o);Object.defineProperty(this,n,i)}})),p(i,"configurable",!0),p(i,"enumerable",r),i}(e,t,c?c.enumerable:void 0,n,u);Object.defineProperty(e,t,l)}}var V={mobxStores:R};Object.seal(V);var W={contextTypes:{get:function(){return V},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function F(e,t,n){var r="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");n&&(r+="-with-"+n);var o=function(n){function r(){var e,t;c(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=m(this,(e=h(r)).call.apply(e,[this].concat(s)))).storeRef=function(e){t.wrappedInstance=e},t}return d(r,n),l(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var o=e(this.context.mobxStores||{},n,this.context)||{};for(var i in o)n[i]=o[i];return function(e){return!(e.prototype&&e.prototype.render)}(t)||(n.ref=this.storeRef),Object(s.createElement)(t,n)}}]),r}(s.Component);return o.displayName=r,N(o,t),o.wrappedComponent=t,Object.defineProperties(o,W),o}function G(){var e;if("function"==typeof arguments[0])return e=arguments[0],function(t){var n=F(e,t);return n.isMobxInjector=!1,(n=de(n)).isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=function(e){return function(t,n){return e.forEach((function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}})),n}}(t),function(n){return F(e,n,t.join("-"))}}var q=r.a||"$mobx",J=U("isUnmounted"),K=!1,Y=!1,X=!1,Q="undefined"!=typeof WeakMap?new WeakMap:void 0,Z=new T,ee=U("skipRender"),te=U("isForcingUpdate"),ne="function"==typeof s.forwardRef&&Object(s.forwardRef)((function(e,t){})).$$typeof;function re(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}function se(e){if(i.findDOMNode)try{return Object(i.findDOMNode)(e)}catch(e){return null}return null}function oe(e){var t=se(e);t&&Q&&Q.set(t,e),Z.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}var ie=new T;function ae(e,t){if(ce(e,t))return!0;if("object"!==a(e)||null===e||"object"!==a(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var s=0;s<n.length;s++)if(!hasOwnProperty.call(t,n[s])||!ce(e[n[s]],t[n[s]]))return!1;return!0}function ce(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ue(e){var t=this;if(!0===Y)return e.call(this);function n(){var e=this;c=!1;var t=void 0,n=void 0;if(u.track((function(){K&&(e.__$mobRenderStart=Date.now());try{n=Object(r.c)(!1,a)}catch(e){t=e}K&&(e.__$mobRenderEnd=Date.now())})),t)throw ie.emit(t),t;return n}var o=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;re(this,ee,!1),re(this,te,!1);var a=e.bind(this),c=!1,u=new r.b("".concat(o,"#").concat(i,".render()"),(function(){if(!c&&(c=!0,"function"==typeof t.componentWillReact&&t.componentWillReact(),!0!==t[J])){var e=!0;try{re(t,te,!0),t[ee]||s.Component.prototype.forceUpdate.call(t),e=!1}finally{re(t,te,!1),e&&u.dispose()}}}));return u.reactComponent=this,n[q]=u,this.render=n,n.call(this)}var le={componentWillUnmount:function(){if(!0!==Y&&(this.render[q]&&this.render[q].dispose(),this[J]=!0,K)){var e=se(this);e&&Q&&Q.delete(e),Z.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){K&&oe(this)},componentDidUpdate:function(){K&&oe(this)},shouldComponentUpdate:function(e,t){return Y&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!ae(this.props,e)}};function pe(e,t){var n=U("reactProp_".concat(t,"_valueHolder")),s=U("reactProp_".concat(t,"_atomHolder"));function o(){return this[s]||re(this,s,Object(r.g)("reactive "+t)),this[s]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o.call(this).reportObserved(),this[n]},set:function(e){this[te]||ae(this[n],e)?re(this,n,e):(re(this,n,e),re(this,ee,!0),o.call(this).reportChanged(),re(this,ee,!1))}})}function de(e,t){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return X||(X=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?G.apply(null,e)(de(t)):function(t){return de(e,t)};var n=e;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===s.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),ne&&n.$$typeof===ne){var r=n.render;if("function"!=typeof r)throw new Error("render property of ForwardRef was not a function");return Object(s.forwardRef)((function(){var e=arguments;return o.a.createElement(he,null,(function(){return r.apply(void 0,e)}))}))}if(!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||s.Component.isPrototypeOf(n))){var i,a,u=de((a=i=function(e){function t(){return c(this,t),m(this,h(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),t}(s.Component),i.displayName=n.displayName||n.name,i.contextTypes=n.contextTypes,i.propTypes=n.propTypes,i.defaultProps=n.defaultProps,a));return N(u,n),u}if(!n)throw new Error("Please pass a valid component to 'observer'");var p=n.prototype||n;!function(e){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach((function(t){!function(e,t){z(e,t,le[t])}(e,t)})),e.shouldComponentUpdate?e.shouldComponentUpdate!==le.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):e.shouldComponentUpdate=le.shouldComponentUpdate}(p),n.isMobXReactObserver=!0,pe(p,"props"),pe(p,"state");var f=p.render;return p.render=function(){return ue.call(this,f)},n}var he=de((function(e){var t=e.children,n=e.inject,r=e.render,s=t||r;if(void 0===s)return null;if(!n)return s();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var i=G(n)(s);return o.a.createElement(i,null)}));he.displayName="Observer";var me=function(e,t,n,r,s){var o="children"===t?"render":"children";return"function"==typeof e[t]&&"function"==typeof e[o]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof e[t]&&"function"!=typeof e[o]?new Error("Invalid prop `"+s+"` of type `"+a(e[t])+"` supplied to `"+n+"`, expected `function`."):void 0};function fe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function ve(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function be(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}he.propTypes={render:me,children:me},fe.__suppressDeprecationWarning=!0,ve.__suppressDeprecationWarning=!0,be.__suppressDeprecationWarning=!0;var ye={children:!0,key:!0,ref:!0},ge=function(e){function t(e,n){var r;return c(this,t),(r=m(this,h(t).call(this,e,n))).state={},_e(e,r.state),r}return d(t,e),l(t,[{key:"render",value:function(){return s.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={};return _e(this.context.mobxStores,e),_e(this.props,e),{mobxStores:e}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e)return null;if(!t)return e;if(Object.keys(e).filter(we).length!==Object.keys(t).filter(we).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var n in e)we(n)&&t[n]!==e[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return e}}]),t}(s.Component);function _e(e,t){if(e)for(var n in e)we(n)&&(t[n]=e[n])}function we(e){return!ye[e]&&"suppressChangedStoreWarning"!==e}if(ge.contextTypes={mobxStores:R},ge.childContextTypes={mobxStores:R.isRequired},function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==s){var o=e.displayName||e.name,i="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=fe,t.componentWillReceiveProps=ve),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=be;var a=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;a.call(this,e,t,r)}}}(ge),U("disposeOnUnmount"),!s.Component)throw new Error("mobx-react requires React to be available");if(!r.o)throw new Error("mobx-react requires mobx to be available");if("function"==typeof i.unstable_batchedUpdates&&Object(r.f)({reactionScheduler:i.unstable_batchedUpdates}),"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":a(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var Oe={spy:r.o,extras:{getDebugName:r.h}},je={renderReporter:Z,componentByNodeRegistry:Q,componentByNodeRegistery:Q,trackComponents:function(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");K||(K=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(je,Oe)}},"d+cC":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("YLtl"),s=n("EaLk"),o=n("srn7"),i=n("wy2R"),a=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class c{constructor(){this.channelId=-1,this.content="",this.errored=!1,this.isAction=!1,this.messageId=-1,this.persisted=!1,this.timestamp=i().toISOString(),this.uuid=osu.uuid(),this.uuid=osu.uuid(),this.sender=new o.a(-1)}get parsedContent(){return osu.linkify(r.escape(this.content),!0)}static fromJSON(e){const t=Object.create(c.prototype);return Object.assign(t,{channelId:e.channel_id,content:e.content,isAction:e.is_action,messageId:e.message_id,persisted:!0,timestamp:e.timestamp,uuid:osu.uuid()})}persist(){return this.persisted=!0,this}update(e){return this.messageId=e.messageId,this.channelId=e.channelId,this.content=e.content,this.timestamp=e.timestamp,this.isAction=e.isAction,this.errored=e.errored,this.sender=e.sender,this}}a([s.l],c.prototype,"channelId",void 0),a([s.l],c.prototype,"content",void 0),a([s.l],c.prototype,"errored",void 0),a([s.l],c.prototype,"isAction",void 0),a([s.l],c.prototype,"messageId",void 0),a([s.l],c.prototype,"persisted",void 0),a([s.l],c.prototype,"sender",void 0),a([s.l],c.prototype,"timestamp",void 0),a([s.l],c.prototype,"uuid",void 0),a([s.e],c.prototype,"parsedContent",null),a([s.d],c.prototype,"persist",null),a([s.d],c.prototype,"update",null)},dcvb:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n("cDcd");var r=n("NzAu"),s=function(e){var t,n,s,o,i,a;for(i=null!=(a=e.modifiers)?a:[],o=e.mod,t="mod",n=0,s=i.length;n<s;n++)t+=" mod--"+i[n];return t+=" mod--"+o,Object(r.div)({className:t,title:osu.trans("beatmaps.mods."+o)})}},dqUM:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,s,o=n("cDcd"),i=n("NzAu"),a=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty;o.createElement,r="notification-banner-v2",s=document.getElementsByClassName("js-notification-banners");var u=function(e){function t(e){this.createPortalContainer=a(this.createPortalContainer,this),this.removePortalContainer=a(this.removePortalContainer,this),this.render=a(this.render,this),this.componentWillUnmount=a(this.componentWillUnmount,this),this.componentDidMount=a(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.eventId="notification-banner-"+osu.uuid(),this.createPortalContainer()}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return $(document).on("turbolinks:before-cache."+this.eventId,this.removePortalContainer)},t.prototype.componentWillUnmount=function(){return $(document).off("."+this.eventId),this.removePortalContainer()},t.prototype.render=function(){var e;return e=Object(i.div)({className:r+" "+r+"--"+this.props.type},Object(i.div)({className:r+"__col "+r+"__col--icon"}),Object(i.div)({className:r+"__col "+r+"__col--label"},Object(i.div)({className:r+"__type"},this.props.type),Object(i.div)({className:r+"__text"},this.props.title)),Object(i.div)({className:r+"__col"},Object(i.div)({className:r+"__text"},this.props.message))),ReactDOM.createPortal(e,this.portalContainer)},t.prototype.removePortalContainer=function(){return s[0].removeChild(this.portalContainer)},t.prototype.createPortalContainer=function(){return this.portalContainer=document.createElement("div"),s[0].appendChild(this.portalContainer)},t}(o.PureComponent)},eBPa:function(e,t,n){"use strict";var r=n("DmM8"),s=n("BhdQ"),o=n("Zs/d"),i=n("QgkL");e.exports=function(e,t,n){for(var p,d,h,m,f,v=this.options,b=v.commonmark,y=v.gfm,g=this.blockTokenizers,_=this.interruptParagraph,w=t.indexOf(c),O=t.length;w<O;){if(-1===w){w=O;break}if(t.charAt(w+1)===c)break;if(b){for(m=0,p=w+1;p<O;){if((h=t.charAt(p))===a){m=l;break}if(h!==u)break;m++,p++}if(m>=l&&h!==c){w=t.indexOf(c,w+1);continue}}if(d=t.slice(w+1),i(_,g,this,[e,d,!0]))break;if(g.list.call(this,e,d,!0)&&(this.inList||b||y&&!s(r.left(d).charAt(0))))break;if(p=w,-1!==(w=t.indexOf(c,w+1))&&""===r(t.slice(p,w))){w=p;break}}return d=t.slice(0,w),""===r(d)?(e(d),null):!!n||(f=e.now(),e(d=o(d))({type:"paragraph",children:this.tokenizeInline(d,f)}))};var a="\t",c="\n",u=" ",l=4},ed4P:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("cDcd"),s=n("ZG74"),o=n("XPyy");class i extends r.PureComponent{constructor(){super(...arguments),this.activeKeyDidChange=s.c.bind(this),this.state={}}render(){const e=null!=this.state.activeKey?["menu-active"]:[];return e.push(this.props.viewMode),r.createElement(s.a.Provider,{value:{activeKeyDidChange:this.activeKeyDidChange}},r.createElement("div",{className:osu.classWithModifiers("user-cards",e)},this.props.users.map(e=>{const t=this.state.activeKey===e.id;return r.createElement(s.b.Provider,{key:e.id,value:e.id},r.createElement(o.a,{activated:t,mode:this.props.viewMode,modifiers:["has-outline",...this.props.modifiers],user:e}))})))}}i.defaultProps={modifiers:[]}},f4vq:function(e,t,n){"use strict";var r=n("EaLk"),s=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class o{constructor(){this.beatmapsetIds=[],this.hasMore=!1,this.total=0}get hasMoreForPager(){return this.hasMore&&this.beatmapsetIds.length<this.total}get isExpired(){return null==this.fetchedAt||(new Date).getTime()-this.fetchedAt.getTime()>o.CACHE_DURATION_MS}append(e){for(const t of e.beatmapsets)this.beatmapsetIds.push(t.id);this.cursor=e.cursor,this.fetchedAt=new Date,this.hasMore=null!==e.cursor,this.total=e.total}reset(){this.beatmapsetIds=[],this.fetchedAt=void 0,this.cursor=void 0,this.hasMore=!1,this.total=0}}o.CACHE_DURATION_MS=6e4,s([r.l],o.prototype,"beatmapsetIds",void 0),s([r.l],o.prototype,"hasMore",void 0),s([r.l],o.prototype,"total",void 0),s([r.e],o.prototype,"hasMoreForPager",null),s([r.e],o.prototype,"isExpired",null),s([r.d],o.prototype,"append",null),s([r.d],o.prototype,"reset",null);var i=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class a{constructor(e){this.extra=null,this.general=null,this.genre=null,this.language=null,this.mode=null,this.played=null,this.rank=null,this.sort=null,this.status=null,this.sanitizedQuery=null;const t=BeatmapsetFilter.filtersFromUrl(e);for(const n of Object.keys(t))this[n]=t[n]}get displaySort(){return this.selectedValue("sort")}get query(){return this.sanitizedQuery}set query(e){const t=osu.presence((e||"").trim());this.sanitizedQuery!==t&&(this.sanitizedQuery=t)}get queryParams(){const e=this.values;return BeatmapsetFilter.queryParamsFromFilters(e)}selectedValue(e){const t=this[e];return null==t?BeatmapsetFilter.getDefault(this.values,e):t}toKeyString(){const e=this.values,t=BeatmapsetFilter.fillDefaults(e),n=[];for(const r of Object.keys(t))n.push(`${r}=${t[r]}`);return n.join("&")}update(e){(void 0!==e.query&&e.query!==this.query||void 0!==e.status&&e.status!==this.status)&&(this.sort=null);for(const t of Object.keys(e))this[t]=e[t]}get values(){const e=Object.assign({},this);return e.query=this.sanitizedQuery,delete e.sanitizedQuery,e}}i([r.l],a.prototype,"extra",void 0),i([r.l],a.prototype,"general",void 0),i([r.l],a.prototype,"genre",void 0),i([r.l],a.prototype,"language",void 0),i([r.l],a.prototype,"mode",void 0),i([r.l],a.prototype,"played",void 0),i([r.l],a.prototype,"rank",void 0),i([r.l],a.prototype,"sort",void 0),i([r.l],a.prototype,"status",void 0),i([r.l],a.prototype,"sanitizedQuery",void 0),i([r.e],a.prototype,"displaySort",null),i([r.e],a.prototype,"query",null),i([r.e],a.prototype,"queryParams",null),i([r.d],a.prototype,"update",null),i([r.e],a.prototype,"values",null);var c=n("0h6b"),u=n("YLtl"),l=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},p=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class d{constructor(e){this.beatmapsetSearch=e,this.currentResultSet=new o,this.searchStatus={error:null,from:0,state:"completed"},this.debouncedFilterChangedSearch=Object(u.debounce)(this.filterChangedSearch,500),this.filterChangedHandler=e=>{const t=e;t.oldValue!==t.newValue&&("sort"===e.name&&null==t.newValue||(this.searchStatus.state="input",this.debouncedFilterChangedSearch(),"sanitizedQuery"!==e.name&&this.debouncedFilterChangedSearch.flush()))}}get currentBeatmapsetIds(){return this.currentResultSet.beatmapsetIds}get error(){return this.searchStatus.error}get hasMore(){return this.currentResultSet.hasMoreForPager}get isBusy(){return"searching"===this.searchStatus.state||"input"===this.searchStatus.state}get isPaging(){return"paging"===this.searchStatus.state}get isSupporterMissing(){return!currentUser.is_supporter&&BeatmapsetFilter.supporterRequired(this.filters).length>0}get recommendedDifficulty(){return this.beatmapsetSearch.recommendedDifficulties.get(this.filters.mode)}get supporterRequiredFilterText(){const e=BeatmapsetFilter.supporterRequired(this.filters),t=Object(u.map)(e,e=>osu.trans(`beatmaps.listing.search.filters.${e}`));return osu.transArray(t)}cancel(){this.debouncedFilterChangedSearch.cancel(),this.beatmapsetSearch.cancel()}initialize(e){this.restoreStateFromUrl(),this.beatmapsetSearch.initialize(this.filters,e),this.initialErrorMessage=e.error}loadMore(){return p(this,void 0,void 0,(function*(){!this.isBusy&&this.hasMore&&this.search(this.currentBeatmapsetIds.length)}))}restoreTurbolinks(){this.restoreStateFromUrl(),this.search(0,!0),null!=this.initialErrorMessage&&(osu.popup(this.initialErrorMessage,"danger"),delete this.initialErrorMessage)}search(e=0,t=!1){return p(this,void 0,void 0,(function*(){if(this.isSupporterMissing||e<0)return void(this.searchStatus={state:"completed",error:null,from:e,restore:t});let n;this.searchStatus={from:0,restore:t,state:0===e?"searching":"paging"};try{yield this.beatmapsetSearch.get(this.filters,e)}catch(e){n=0!==e.readyState?e:null}Object(r.n)(()=>{this.searchStatus={state:"completed",error:n,from:e,restore:t},this.currentResultSet=this.beatmapsetSearch.getResultSet(this.filters)})}))}updateFilters(e){this.filters.update(e)}filterChangedSearch(){const e=Object(c.route)("beatmapsets.index",this.filters.queryParams);Turbolinks.controller.advanceHistory(e),this.search()}restoreStateFromUrl(){const e=BeatmapsetFilter.filtersFromUrl(location.href);null!=this.filtersObserver&&this.filtersObserver(),this.filters=new a(location.href),this.filtersObserver=Object(r.m)(this.filters,this.filterChangedHandler),this.isExpanded=Object(u.intersection)(Object.keys(e),BeatmapsetFilter.expand).length>0}}l([r.l],d.prototype,"currentResultSet",void 0),l([r.l],d.prototype,"filters",void 0),l([r.l],d.prototype,"isExpanded",void 0),l([r.l],d.prototype,"searchStatus",void 0),l([r.e],d.prototype,"currentBeatmapsetIds",null),l([r.e],d.prototype,"error",null),l([r.e],d.prototype,"hasMore",null),l([r.e],d.prototype,"isBusy",null),l([r.e],d.prototype,"isPaging",null),l([r.e],d.prototype,"isSupporterMissing",null),l([r.e],d.prototype,"recommendedDifficulty",null),l([r.e],d.prototype,"supporterRequiredFilterText",null),l([r.d],d.prototype,"cancel",null),l([r.d],d.prototype,"loadMore",null),l([r.d],d.prototype,"restoreTurbolinks",null),l([r.d],d.prototype,"search",null),l([r.d],d.prototype,"updateFilters",null),l([r.d],d.prototype,"restoreStateFromUrl",null);var h=n("kKxR"),m=n("iRgH"),f=n("WLnA"),v=n("d+cC");class b{getMessages(e,t){return new Promise((n,r)=>{$.get(Object(c.route)("chat.channels.messages.index",Object.assign({channel:e},t))).done(e=>{n(e)}).fail(e=>{r(e)})})}getUpdates(e){return new Promise((t,n)=>{$.get(Object(c.route)("chat.updates"),{since:e}).done(e=>{t(e)}).fail(e=>{n(e)})})}markAsRead(e,t){return new Promise((n,r)=>{$.ajax({type:"PUT",url:Object(c.route)("chat.channels.mark-as-read",{channel:e,message:t})}).done(e=>{n(e)}).fail(e=>{r(e)})})}newConversation(e,t,n){return new Promise((r,s)=>{$.post(Object(c.route)("chat.new"),{is_action:n,message:t,target_id:e}).done(e=>{r(e)}).fail(e=>{s(e)})})}partChannel(e,t){return new Promise((n,r)=>{$.ajax(Object(c.route)("chat.channels.part",{channel:e,user:t}),{method:"DELETE"}).done(e=>{n(e)}).fail(e=>{r(e)})})}sendMessage(e,t,n){return new Promise((r,s)=>{$.post(Object(c.route)("chat.channels.messages.store",{channel:e}),{is_action:n,message:t,target_id:e,target_type:"channel"}).done(e=>{r(e)}).fail(e=>{s(e)})})}}let y=class{constructor(e){this.rootDataStore=e,this.windowIsActive=!0,this.rootDataStore=e,this.api=new b}addMessages(e,t){const n=[];Object(r.p)(()=>{t.forEach(e=>{const t=v.a.fromJSON(e);t.sender=this.rootDataStore.userStore.getOrCreate(e.sender_id,e.sender),n.push(t)}),this.rootDataStore.channelStore.addMessages(e,n)})}changeChannel(e){const t=this.rootDataStore.uiState.chat,n=this.rootDataStore.channelStore;(e!==t.selected||n.getOrCreate(e).loaded)&&Object(r.p)(()=>{"NEW"!==n.getOrCreate(t.selected).type&&(t.autoScroll=!1);const r=n.getOrCreate(e);r.newChannel||(r.loaded?this.markAsRead(e):this.loadChannel(e).then(()=>{this.windowIsActive&&this.markAsRead(e)})),t.selected=e})}focusChannelAtIndex(e){const t=this.rootDataStore.channelStore.channelList;if(0===t.length)return void(this.rootDataStore.channelStore.loaded=!1);const n=Object(u.clamp)(e,0,t.length-1),r=this.rootDataStore.channelStore.channelList[n];Object(f.a)(new h.c(r.channelId))}handleDispatchAction(e){e instanceof h.c?this.changeChannel(e.channelId):e instanceof h.a?this.loadChannelEarlierMessages(e.channelId):e instanceof h.b?this.handleChatChannelPartAction(e):e instanceof h.d?this.windowIsActive&&this.rootDataStore.channelStore.loaded&&this.markAsRead(this.rootDataStore.uiState.chat.selected):e instanceof h.g?this.handleChatPresenceUpdateAction():e instanceof m.b?(this.windowIsActive=!0,this.rootDataStore.channelStore.loaded&&this.markAsRead(this.rootDataStore.uiState.chat.selected)):e instanceof m.a&&(this.windowIsActive=!1)}loadChannel(e){const t=this.rootDataStore.channelStore.getOrCreate(e);return t.loading?Promise.resolve():(t.loading=!0,this.api.getMessages(e).then(n=>{Object(r.p)(()=>{this.addMessages(e,n),t.loading=!1,t.loaded=!0})}).catch(e=>{t.loading=!1,console.debug("loadChannel error",e)}))}loadChannelEarlierMessages(e){const t=this.rootDataStore.channelStore.get(e);null!=t&&t.hasEarlierMessages&&!t.loadingEarlierMessages&&(t.loadingEarlierMessages=!0,this.api.getMessages(t.channelId,{until:t.minMessageId}).then(n=>{Object(r.p)(()=>{t.loadingEarlierMessages=!1,this.addMessages(e,n)})}).catch(e=>{t.loadingEarlierMessages=!1,console.debug("loadChannelEarlierMessages error",e)}))}markAsRead(e){const t=this.rootDataStore.channelStore.getOrCreate(e),n=t.lastMessageId;if(!t.isUnread)return;const r=t.messages[t.messages.length-1];r&&r.sender.id===window.currentUser.id?t.lastReadId=n:this.api.markAsRead(t.channelId,n).then(()=>{t.lastReadId=n}).catch(e=>{console.debug("markAsRead error",e)})}handleChatChannelPartAction(e){var t;const n=this.rootDataStore.channelStore,r=n.get(e.channelId),s=null!=r?n.channelList.indexOf(r):null;if(n.partChannel(e.channelId),this.rootDataStore.uiState.chat.selected===(null===(t=r)||void 0===t?void 0:t.channelId)&&this.focusChannelAtIndex(null!=s?s:0),e.shouldSync&&-1!==e.channelId)return this.api.partChannel(e.channelId,window.currentUser.id).catch(e=>{console.debug("leaveChannel error",e)})}handleChatPresenceUpdateAction(){null==this.rootDataStore.channelStore.get(this.rootDataStore.uiState.chat.selected)&&this.focusChannelAtIndex(0)}};var g=y=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([f.b],y);let _=class{constructor(e){this.rootDataStore=e,this.pollingEnabled=!0,this.pollTime=1e3,this.pollTimeIdle=5e3,this.updateXHR=!1,this.windowIsActive=!0,this.pollForUpdates=()=>{this.updateXHR||(this.updateXHR=!0,this.api.getUpdates(this.rootDataStore.channelStore.maxMessageId).then(e=>{this.updateXHR=!1,this.pollingEnabled&&(this.updateTimerId=Timeout.set(this.pollingTime(),this.pollForUpdates)),e&&Object(r.p)(()=>{e.messages.forEach(e=>{const t=v.a.fromJSON(e);t.sender=this.rootDataStore.userStore.getOrCreate(e.sender_id,e.sender),Object(f.a)(new h.d(t))}),Object(f.a)(new h.g(e.presence))})}).catch(e=>{this.updateXHR=!1,this.pollingEnabled&&(this.updateTimerId=Timeout.set(this.pollingTime(),this.pollForUpdates))}))},this.api=new b}handleDispatchAction(e){e instanceof h.e?this.sendMessage(e.message):e instanceof m.b?this.windowIsActive=!0:e instanceof m.a&&(this.windowIsActive=!1)}pollingTime(){return this.windowIsActive?this.pollTime:this.pollTimeIdle}sendMessage(e){const t=e.channelId,n=this.rootDataStore.channelStore.getOrCreate(t);if(n.newChannel){const s=n.users.slice().find(e=>e!==currentUser.id);if(!s)return void console.debug("sendMessage:: userId not found?? this shouldn't happen");this.api.newConversation(s,e.content,e.isAction).then(e=>{const n=e.new_channel_id;Object(r.p)(()=>{this.rootDataStore.channelStore.channels.delete(t),this.rootDataStore.channelStore.updatePresence(e.presence),Object(f.a)(new h.c(n))})}).catch(()=>{e.errored=!0,Object(f.a)(new h.f(e))})}else this.api.sendMessage(t,e.content,e.isAction).then(t=>{t?e.messageId=t.message_id:e.errored=!0,Object(f.a)(new h.f(e))}).catch(()=>{e.errored=!0,Object(f.a)(new h.f(e))})}startPolling(){this.updateTimerId||(this.updateTimerId=Timeout.set(this.pollingTime(),this.pollForUpdates))}stopPolling(){this.updateTimerId&&(Timeout.clear(this.updateTimerId),this.updateTimerId=void 0,this.updateXHR=!1)}};var w=_=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([f.b],_);class O{}class j{}var k=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};let E=class{constructor(e){this.beatmapsetStore=e,this.recommendedDifficulties=new Map,this.resultSets=new Map}cancel(){this.xhr&&this.xhr.abort()}get(e,t=0){if(t<0)throw Error("from must be > 0");const n=e.toKeyString(),s=this.getOrCreate(n);return t>0&&t<s.beatmapsetIds.length||0===t&&!s.isExpired?Promise.resolve(s):this.fetch(e,t).then(n=>(Object(r.n)(()=>{0===t&&s.reset(),this.updateBeatmapsetStore(n),s.append(n),this.recommendedDifficulties.set(e.mode,n.recommended_difficulty)}),s))}getResultSet(e){const t=e.toKeyString();return this.getOrCreate(t)}handleDispatchAction(e){(e instanceof O||e instanceof j)&&this.clear()}initialize(e,t){this.updateBeatmapsetStore(t);const n=e.toKeyString(),r=this.getOrCreate(n);null==r.fetchedAt&&(r.append(t),this.recommendedDifficulties.set(e.mode,t.recommended_difficulty))}clear(){this.resultSets.clear(),this.recommendedDifficulties.clear()}fetch(e,t){this.cancel();const n=e.queryParams,r=e.toKeyString(),s=this.getOrCreate(r).cursor;if(t>0)if(null!=s)n.cursor=s;else if(null===s)return Promise.resolve({});const o=Object(c.route)("beatmapsets.search");return this.xhr=$.ajax(o,{data:n,dataType:"json",method:"get"}),this.xhr}getOrCreate(e){let t=this.resultSets.get(e);return null==t&&(t=new o,this.resultSets.set(e,t)),t}updateBeatmapsetStore(e){for(const t of e.beatmapsets)this.beatmapsetStore.update(t)}};k([r.l],E.prototype,"recommendedDifficulties",void 0),k([r.l],E.prototype,"resultSets",void 0),k([r.d],E.prototype,"get",null),k([r.d],E.prototype,"initialize",null),k([r.d],E.prototype,"clear",null),E=k([f.b],E);class S{constructor(e){this.root=e}}var x=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class N extends S{constructor(){super(...arguments),this.beatmapsets=r.l.map()}get(e){return this.beatmapsets.get(e)}handleDispatchAction(e){(e instanceof O||e instanceof j)&&this.flushStore()}update(e){this.beatmapsets.set(e.id,e)}flushStore(){this.beatmapsets.clear()}}x([r.l],N.prototype,"beatmapsets",void 0),x([r.d],N.prototype,"update",null),x([r.d],N.prototype,"flushStore",null);var T=n("sTr9"),A=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};let P=class extends S{constructor(){super(...arguments),this.channels=r.l.map(),this.loaded=!1}get channelList(){return[...this.nonPmChannels,...this.pmChannels]}get maxMessageId(){const e=Array.from(this.channels.toJS().values()),t=u.maxBy(e,"lastMessageId");return null==t?-1:t.lastMessageId}get nonPmChannels(){const e=[];return this.channels.forEach(t=>{"PM"!==t.type&&t.metaLoaded&&e.push(t)}),e.sort((e,t)=>e.name===t.name?0:e.name>t.name?-1:1)}get pmChannels(){const e=[];return this.channels.forEach(t=>{(t.newChannel||"PM"===t.type&&t.metaLoaded)&&e.push(t)}),e.sort((e,t)=>e.newChannel?-1:t.newChannel?1:e.lastMessageId===t.lastMessageId?0:e.lastMessageId>t.lastMessageId?-1:1)}addMessages(e,t){u.isEmpty(t)||this.getOrCreate(e).addMessages(t)}findPM(e){if(e===Ne.currentUser.id)return null;for(let[,t]of this.channels)if("PM"===t.type&&t.users.some(t=>t===e))return t;return null}flushStore(){this.channels=r.l.map(),this.loaded=!1}get(e){return this.channels.get(e)}getOrCreate(e){let t=this.channels.get(e);return t||(t=new T.a(e),this.channels.set(e,t)),t}handleDispatchAction(e){if(e instanceof h.e)this.getOrCreate(e.message.channelId).addMessages(e.message,!0);else if(e instanceof h.d)this.getOrCreate(e.message.channelId).addMessages(e.message);else if(e instanceof h.f){const t=this.getOrCreate(e.message.channelId);t.updateMessage(e.message),t.resortMessages()}else e instanceof h.g?this.updatePresence(e.presence):e instanceof j&&this.flushStore()}partChannel(e){this.channels.delete(e)}updatePresence(e){e.forEach(e=>{this.getOrCreate(e.channel_id).updatePresence(e)}),this.channels.forEach(t=>{t.newChannel||e.find(e=>e.channel_id===t.channelId)||Object(f.a)(new h.b(t.channelId,!1))}),this.loaded=!0}};A([r.l],P.prototype,"channels",void 0),A([r.l],P.prototype,"loaded",void 0),A([r.e],P.prototype,"channelList",null),A([r.e],P.prototype,"maxMessageId",null),A([r.e],P.prototype,"nonPmChannels",null),A([r.e],P.prototype,"pmChannels",null),A([r.d],P.prototype,"addMessages",null),A([r.d],P.prototype,"flushStore",null),A([r.d],P.prototype,"getOrCreate",null),A([r.d],P.prototype,"partChannel",null),A([r.d],P.prototype,"updatePresence",null);var C=P=A([f.b],P),D=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},R=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class M{constructor(e){this.isRevoking=!1,this.revoked=!1,this.id=e.id,this.name=e.name,this.scopes=new Set(e.scopes),this.userId=e.user_id,this.user=e.user}revoke(){return R(this,void 0,void 0,(function*(){return this.isRevoking=!0,$.ajax({method:"DELETE",url:Object(c.route)("oauth.authorized-clients.destroy",{authorized_client:this.id})}).then(()=>{this.revoked=!0}).always(()=>{this.isRevoking=!1})}))}}D([r.l],M.prototype,"isRevoking",void 0),D([r.l],M.prototype,"revoked",void 0),D([r.l],M.prototype,"scopes",void 0),D([r.d],M.prototype,"revoke",null);var I=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class U extends S{constructor(){super(...arguments),this.clients=new Map}handleDispatchAction(e){(e instanceof O||e instanceof j)&&this.flushStore()}initialize(e){for(const t of e){const e=new M(t);this.clients.set(e.id,e)}}flushStore(){this.clients.clear()}}I([r.l],U.prototype,"clients",void 0),I([r.d],U.prototype,"flushStore",null);var L=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class B{constructor(e){this.commentableId=e.commentable_id,this.commentableType=e.commentable_type,this.createdAt=e.created_at,this.deletedAt=e.deleted_at,this.editedAt=e.edited_at,this.editedById=e.edited_by_id,this.id=e.id,this.legacyName=e.legacy_name,this.message=e.message,this.messageHtml=e.message_html,this.parentId=e.parent_id,this.pinned=e.pinned,this.repliesCount=e.replies_count,this.updatedAt=e.updated_at,this.userId=e.user_id,this.votesCount=e.votes_count}get canDelete(){return this.canModerate||this.isOwner}get canEdit(){return this.canModerate||this.isOwner&&!this.isDeleted}get canHaveVote(){return!this.isDeleted}get canModerate(){return currentUser.is_admin||currentUser.is_moderator}get canPin(){return currentUser.is_admin&&(null==this.parentId||this.pinned)}get canReport(){return null!=currentUser.id&&this.userId!==currentUser.id}get canRestore(){return this.canModerate}get canVote(){return!this.isOwner}get isDeleted(){return null!=this.deletedAt}get isEdited(){return null!=this.editedAt}get isOwner(){return null!=currentUser.id&&this.userId===currentUser.id}}L([r.e],B.prototype,"canDelete",null),L([r.e],B.prototype,"canEdit",null),L([r.e],B.prototype,"canHaveVote",null),L([r.e],B.prototype,"canModerate",null),L([r.e],B.prototype,"canPin",null),L([r.e],B.prototype,"canReport",null),L([r.e],B.prototype,"canRestore",null),L([r.e],B.prototype,"canVote",null),L([r.e],B.prototype,"isDeleted",null),L([r.e],B.prototype,"isEdited",null),L([r.e],B.prototype,"isOwner",null);var H=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class z extends S{constructor(){super(...arguments),this.comments=r.l.map(),this.userVotes=new Set,this.groupedByParentId={}}addUserVote(e){this.userVotes.add(e.id)}addVoted(e){null!=e&&e.forEach(e=>this.userVotes.add(e))}flushStore(){this.invalidate(),this.comments.clear(),this.userVotes.clear()}getRepliesByParentId(e){return this.groupedByParentId[String(e)]}handleDispatchAction(e){e instanceof j&&this.flushStore()}initialize(e,t){this.flushStore(),this.addVoted(t),this.updateWithJSON(e)}removeUserVote(e){this.userVotes.delete(e.id)}updateWithJSON(e){if(null!=e)for(const t of e){const e=new B(t),n=this.comments.has(e.id);if(this.comments.set(e.id,e),!n){const t=String(e.parentId);null!=this.groupedByParentId[t]?this.groupedByParentId[t].push(e):this.groupedByParentId[t]=[e]}}}invalidate(){this.groupedByParentId={}}}H([r.l],z.prototype,"comments",void 0),H([r.l],z.prototype,"userVotes",void 0),H([r.d],z.prototype,"addUserVote",null),H([r.d],z.prototype,"addVoted",null),H([r.d],z.prototype,"flushStore",null),H([r.d],z.prototype,"initialize",null),H([r.d],z.prototype,"removeUserVote",null),H([r.d],z.prototype,"updateWithJSON",null);var V=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class W extends S{constructor(){super(...arguments),this.meta=r.l.map()}flushStore(){this.meta.clear()}get(e,t){const n=this.meta.get(`${e}-${t}`);return null!=n?n:this.meta.get(null)}handleDispatchAction(e){e instanceof j&&this.flushStore()}initialize(e){this.flushStore(),this.updateWithJSON(e)}updateWithJSON(e){if(null!=e)for(const t of e){const e=null!=t.type&&null!=t.id?`${t.type}-${t.id}`:null;this.meta.set(e,t)}}}V([r.l],W.prototype,"meta",void 0),V([r.d],W.prototype,"flushStore",null),V([r.d],W.prototype,"initialize",null),V([r.d],W.prototype,"updateWithJSON",null);var F=n("3Zv4"),G=n("y2EG"),q=n("5evE"),J=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class K{constructor(e,t,n,r){this.objectId=e,this.objectType=t,this.category=n,this.resolver=r,this.cursor=null,this.displayOrder=0,this.isLoading=!1,this.isMarkingAsRead=!1,this.notifications=new Map,this.total=0,this.lastNotification=null}get canMarkAsRead(){for(const[,e]of this.notifications)if(e.canMarkRead)return!0;return!1}get first(){var e;return null!=(e=this.orderedNotifications[0])?e:this.lastNotification}get hasVisibleNotifications(){return this.notifications.size>0||"legacy_pm"===this.objectType}get hasMore(){return!(this.notifications.size>=this.total||null==this.cursor)}get id(){return`${this.objectType}-${this.objectId}-${this.category}`}set isRead(e){this.notifications.forEach(t=>t.isRead=e)}get isSingle(){return 1===this.total}get identity(){return{category:this.category,objectId:this.objectId,objectType:this.objectType}}get isLegacyPm(){return"legacy_pm"===this.objectType}get orderedNotifications(){return[...this.notifications.values()].sort((e,t)=>t.id-e.id)}get type(){return this.objectType}static fromJson(e,t){const n=new K(e.object_id,e.object_type,Object(q.a)(e.name),t);return n.updateWithJson(e),n}add(e){this.notifications.set(e.id,e),this.displayOrder=Math.max(e.id,this.displayOrder)}loadMore(e){null!=this.cursor&&(this.isLoading=!0,this.resolver.loadMore(this.identity,e,this.cursor).always(Object(r.d)(()=>{this.isLoading=!1})))}markAsRead(e){null!=e&&this.notifications.has(e.id)&&this.resolver.queueMarkAsRead(e)}markStackAsRead(){this.resolver.queueMarkAsRead(this)}remove(e){1===this.notifications.size&&(this.lastNotification=this.notifications.values().next().value);const t=this.notifications.delete(e.id);return t&&this.total--,t}updateWithJson(e){this.cursor=e.cursor,this.total=e.total}}J([r.l],K.prototype,"cursor",void 0),J([r.l],K.prototype,"displayOrder",void 0),J([r.l],K.prototype,"isLoading",void 0),J([r.l],K.prototype,"isMarkingAsRead",void 0),J([r.l],K.prototype,"notifications",void 0),J([r.l],K.prototype,"total",void 0),J([r.l],K.prototype,"lastNotification",void 0),J([r.e],K.prototype,"canMarkAsRead",null),J([r.e],K.prototype,"first",null),J([r.e],K.prototype,"hasVisibleNotifications",null),J([r.e],K.prototype,"hasMore",null),J([r.e],K.prototype,"id",null),J([r.e],K.prototype,"isSingle",null),J([r.e],K.prototype,"orderedNotifications",null),J([r.d],K.prototype,"add",null),J([r.d],K.prototype,"loadMore",null),J([r.d],K.prototype,"markAsRead",null),J([r.d],K.prototype,"markStackAsRead",null),J([r.d],K.prototype,"remove",null),J([r.d],K.prototype,"updateWithJson",null);var Y=n("JlDh"),X=n("uW+8"),Q=n("nxXY"),Z=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class ee{constructor(){this.debouncedSendQueuedMarkedAsRead=Object(u.debounce)(this.sendQueuedMarkedAsRead,500),this.queuedMarkedAsRead=new Map}loadMore(e,t,n){const r=Object(Q.d)(e);delete r.id;const s=Object(c.route)("notifications.index",r),o={data:{cursor:n,unread:t.isWidget},dataType:"json",url:s};return $.ajax(o).then(e=>{Object(f.a)(new X.a(e,t))})}queueMarkAsRead(e){if(e.isMarkingAsRead=!0,e instanceof G.a)return e.canMarkRead&&this.queuedMarkedAsRead.set(e.id,e),void this.debouncedSendQueuedMarkedAsRead();$.ajax({data:Object(Q.d)(e.identity),dataType:"json",method:"POST",url:Object(c.route)("notifications.mark-read")}).then(Object(r.d)(()=>{Object(f.a)(new X.c([e.identity],0))})).always(Object(r.d)(()=>e.isMarkingAsRead=!1))}sendQueuedMarkedAsRead(){if(0===this.queuedMarkedAsRead.size)return;const e=[...this.queuedMarkedAsRead.values()],t=e.map(e=>e.identity);this.queuedMarkedAsRead.clear(),$.ajax({data:{notifications:t.map(Q.d)},dataType:"json",method:"POST",url:Object(c.route)("notifications.mark-read")}).then(Object(r.d)(()=>{Object(f.a)(new X.c(t,0))})).always(Object(r.d)(()=>e.forEach(e=>e.isMarkingAsRead=!1)))}}Z([r.d],ee.prototype,"loadMore",null),Z([r.d],ee.prototype,"queueMarkAsRead",null);var te=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};let ne=class{constructor(e){this.notificationStore=e,this.legacyPm=new F.a,this.types=new Map,this.resolver=new ee,this.getOrCreateType({objectType:null})}get allStacks(){return this.allType.stacks}get allType(){return this.getOrCreateType({objectType:null})}get isEmpty(){return 1===this.types.size&&0===this.allStacks.size}get total(){return this.allType.total}set total(e){this.allType.total=e}flushStore(){this.types.clear()}getOrCreateType(e){let t=this.types.get(e.objectType);return null==t&&(t=new Y.b(e.objectType,this.resolver),this.types.set(t.name,t)),t}getStack(e){var t;return null===(t=this.types.get(e.objectType))||void 0===t?void 0:t.stacks.get(Object(Q.c)(e))}handleDispatchAction(e){e instanceof X.b?this.handleNotificationEventNew(e):e instanceof X.a?this.handleNotificationEventMoreLoaded(e):e instanceof X.c?this.handleNotificationEventRead(e):(e instanceof O||e instanceof j)&&this.flushStore()}handleNotificationEventMoreLoaded(e){e.context.isWidget||this.updateWithBundle(e.data)}handleNotificationEventNew(e){const t=e.data;let n=this.notificationStore.get(t.id);null==n?(n=G.a.fromJson(t),this.notificationStore.add(n)):n.updateFromJson(t);const r=n.identity,s=this.getOrCreateType(r);let o=this.getStack(r);null==o&&(o=new K(t.object_id,t.object_type,Object(q.a)(t.name),this.resolver)),o.notifications.has(n.id)||(o.total++,s.total++,this.total++),o.add(n),s.stacks.set(o.id,o),this.allStacks.set(o.id,o)}handleNotificationEventRead(e){if(0===e.data.length)return;const t=e.data[0];if("stack"===Object(Q.b)(t)){const e=this.getStack(t);null!=e&&(e.isRead=!0)}}orderedStacksOfType(e){return this.stacksOfType(e).sort((e,t)=>t.displayOrder-e.displayOrder)}stacksOfType(e){var t,n,r;const s=this.types.get(e),o=[];if(null==s)return o;const i=null!=(n=null===(t=s.cursor)||void 0===t?void 0:t.id)?n:0;for(const[,a]of s.stacks)void 0!==(null===(r=s)||void 0===r?void 0:r.cursor)&&a.displayOrder>=i&&o.push(a);return o}updateWithBundle(e){var t,n,r;null===(t=e.types)||void 0===t||t.forEach(e=>this.updateWithTypeJson(e)),null===(n=e.stacks)||void 0===n||n.forEach(e=>this.updateWithStackJson(e)),null===(r=e.notifications)||void 0===r||r.forEach(e=>this.updateWithNotificationJson(e))}updateWithNotificationJson(e){var t;let n=this.notificationStore.get(e.id);null==n?(n=G.a.fromJson(e),this.notificationStore.add(n)):n.updateFromJson(e),null===(t=this.getOrCreateType(n.identity).stacks.get(n.stackId))||void 0===t||t.add(n)}updateWithStackJson(e){const t=this.getOrCreateType(Object(Q.a)(e));let n=t.stacks.get(function(e){return`${e.object_type}-${e.object_id}-${Object(q.a)(e.name)}`}(e));null==n?(n=K.fromJson(e,this.resolver),t.stacks.set(n.id,n),this.allType.stacks.set(n.id,n)):n.updateWithJson(e)}updateWithTypeJson(e){this.getOrCreateType({objectType:e.name}).updateWithJson(e)}};te([r.l],ne.prototype,"legacyPm",void 0),te([r.l],ne.prototype,"types",void 0),te([r.e],ne.prototype,"total",null),te([r.d],ne.prototype,"flushStore",null),te([r.d],ne.prototype,"handleDispatchAction",null),te([r.d],ne.prototype,"handleNotificationEventMoreLoaded",null),te([r.d],ne.prototype,"handleNotificationEventNew",null),te([r.d],ne.prototype,"handleNotificationEventRead",null),te([r.d],ne.prototype,"updateWithBundle",null);var re=ne=te([f.b],ne),se=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};let oe=class extends re{constructor(){super(...arguments),this.deletedStacks=new Set,this.handleNotificationRead=e=>{var t,n,r,s,o,i;if("notification"!==Object(Q.b)(e))return;const a=this.notificationStore.get(null!=(t=e.id)?t:0),c=this.getStack(e),u=this.getOrCreateType(e),l=null===(n=c)||void 0===n?void 0:n.notifications.get(null!=(r=e.id)?r:0);if(null==a){if(null==l){if(null==c||null==e.id)return;e.id<(null!=(i=null===(o=c.cursor)||void 0===o?void 0:o.id)?i:0)&&(this.total--,c.total--,u.total--)}}else a.isRead||(null===(s=c)||void 0===s||s.remove(a),u.total--,this.total--,a.isRead=!0)}}get totalWithPm(){return this.total+this.legacyPm.count}handleNotificationEventMoreLoaded(e){e.context.isWidget&&this.updateWithBundle(e.data)}handleNotificationEventNew(e){e.data.is_read||super.handleNotificationEventNew(e)}handleNotificationEventRead(e){if(0===e.data.length)return;const t=e.data[0];switch(Object(Q.b)(t)){case"type":this.handleTypeRead(t,e.readCount);break;case"stack":this.handleStackRead(t,e.readCount);break;case"notification":e.data.forEach(this.handleNotificationRead)}}updateWithBundle(e){super.updateWithBundle(e),null!=e.unread_count&&(this.total=e.unread_count)}handleStackRead(e,t){const n=this.getStack(e),r=Object(Q.c)(e);null!=n?(this.deletedStacks.add(r),n.isRead=!0,this.allStacks.delete(r),this.total-=n.total,this.getOrCreateType(e).removeStack(n)):this.deletedStacks.has(r)||(this.deletedStacks.add(r),this.total-=t)}handleTypeRead(e,t){const n=this.getOrCreateType(e);if(null===n.name){for(const[e,t]of this.types)null!==e&&this.typeRead(t);n.total=0}else this.typeRead(n)}typeRead(e){e.stacks.forEach(e=>{e.isRead=!0,this.allType.removeStack(e)}),this.types.delete(e.name)}};se([r.e],oe.prototype,"totalWithPm",null),se([r.d],oe.prototype,"handleNotificationEventMoreLoaded",null),se([r.d],oe.prototype,"handleNotificationEventNew",null),se([r.d],oe.prototype,"handleNotificationEventRead",null),se([r.d],oe.prototype,"updateWithBundle",null);var ie=oe=se([f.b],oe),ae=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};let ce=class{constructor(){this.notifications=new Map,this.stacks=new re(this),this.unreadStacks=new ie(this)}add(e){this.notifications.set(e.id,e)}flushStore(){this.notifications.clear()}get(e){return this.notifications.get(e)}handleDispatchAction(e){(e instanceof O||e instanceof j)&&this.flushStore()}};ae([r.l],ce.prototype,"notifications",void 0),ae([r.d],ce.prototype,"add",null),ae([r.d],ce.prototype,"flushStore",null),ae([r.d],ce.prototype,"handleDispatchAction",null);var ue=ce=ae([f.b],ce),le=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},pe=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class de extends M{constructor(e){super(e),this.isUpdating=!1,this.redirect=e.redirect,this.secret=e.secret}delete(){return pe(this,void 0,void 0,(function*(){return this.isRevoking=!0,$.ajax({method:"DELETE",url:Object(c.route)("oauth.clients.destroy",{client:this.id})}).then(()=>{this.revoked=!0}).always(()=>{this.isRevoking=!1})}))}updateFromJson(e){this.id=e.id,this.name=e.name,this.scopes=new Set(e.scopes),this.userId=e.user_id,this.user=e.user,this.redirect=e.redirect,this.secret=e.secret}updateWith(e){return pe(this,void 0,void 0,(function*(){const{redirect:t}=e;return this.isUpdating=!0,$.ajax({data:{redirect:t},method:"PUT",url:Object(c.route)("oauth.clients.update",{client:this.id})}).then(e=>{this.updateFromJson(e)}).always(()=>{this.isUpdating=!1})}))}}le([r.l],de.prototype,"isUpdating",void 0),le([r.d],de.prototype,"delete",null),le([r.d],de.prototype,"updateFromJson",null),le([r.d],de.prototype,"updateWith",null);var he=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class me extends S{constructor(){super(...arguments),this.clients=new Map}handleDispatchAction(e){(e instanceof O||e instanceof j)&&this.flushStore()}initialize(e){for(const t of e)this.updateWithJson(t)}updateWithJson(e){const t=new de(e);return this.clients.set(t.id,t),t}flushStore(){this.clients.clear()}}he([r.l],me.prototype,"clients",void 0),he([r.d],me.prototype,"updateWithJson",null),he([r.d],me.prototype,"flushStore",null);var fe=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};let ve=class extends S{constructor(){super(...arguments),this.autoScroll=!1,this.lastReadId=-1,this.selected=-1}flushStore(){this.selected=-1,this.lastReadId=-1}handleDispatchAction(e){e instanceof h.c?this.lastReadId=this.root.channelStore.getOrCreate(e.channelId).lastReadId||-1:e instanceof h.e?(this.lastReadId=this.root.channelStore.getOrCreate(e.message.channelId).lastMessageId||-1,this.autoScroll=!0):e instanceof j&&this.flushStore()}};fe([r.l],ve.prototype,"autoScroll",void 0),fe([r.l],ve.prototype,"lastReadId",void 0),fe([r.l],ve.prototype,"selected",void 0),fe([r.d],ve.prototype,"flushStore",null);var be=ve=fe([f.b],ve),ye=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};const ge={currentSort:"new",hasMoreComments:{},isShowDeleted:!1,loadingFollow:null,loadingSort:null,pinnedCommentIds:[],topLevelCommentIds:[],topLevelCount:0,total:0,userFollow:!1};class _e extends S{constructor(){super(...arguments),this.account={client:null,isCreatingNewClient:!1,newClientVisible:!1},this.chat=new be(this.root),this.comments=Object.assign({},ge),this.orderedCommentsByParentId={}}exportCommentsUIState(){return{comments:this.comments,orderedCommentsByParentId:this.orderedCommentsByParentId}}getOrderedCommentsByParentId(e){return this.populateOrderedCommentsForParentId(e),this.orderedCommentsByParentId[e]}importCommentsUIState(e){this.comments=Object.assign({},ge,e.comments),this.orderedCommentsByParentId=e.orderedCommentsByParentId}initializeWithCommentBundleJSON(e){this.comments.hasMoreComments={},this.comments.hasMoreComments[e.has_more_id]=e.has_more,this.comments.currentSort=e.sort,this.comments.userFollow=e.user_follow,this.comments.topLevelCount=e.top_level_count?e.top_level_count:0,this.comments.total=e.total?e.total:0,null!=e.comments&&(this.comments.topLevelCommentIds=e.comments.map(e=>e.id)),this.updatePinnedCommentIds(e),this.orderedCommentsByParentId={}}updateFromCommentsAdded(e){this.comments.hasMoreComments[e.has_more_id]=e.has_more,e.top_level_count&&e.total&&(this.comments.topLevelCount=e.top_level_count,this.comments.total=e.total);for(const t of e.comments){const e=new B(t),n=e.parentId;null==n?this.comments.topLevelCommentIds.push(e.id):(this.populateOrderedCommentsForParentId(n),this.orderedCommentsByParentId[n].push(e))}}updateFromCommentsNew(e){e.top_level_count&&e.total&&(this.comments.topLevelCount=e.top_level_count,this.comments.total=e.total);const t=new B(e.comments[0]),n=t.parentId;null==n?this.comments.topLevelCommentIds.unshift(t.id):(this.populateOrderedCommentsForParentId(n),this.orderedCommentsByParentId[n].unshift(t))}updateFromCommentUpdated(e){this.updatePinnedCommentIds(e)}orderComments(e){switch(this.comments.currentSort){case"old":return Object(u.orderBy)(e,"createdAt","asc");case"top":return Object(u.orderBy)(e,"votesCount","desc");default:return Object(u.orderBy)(e,"createdAt","desc")}}populateOrderedCommentsForParentId(e){if(null==this.orderedCommentsByParentId[e]){const t=this.root.commentStore.getRepliesByParentId(e);this.orderedCommentsByParentId[e]=this.orderComments(t)}}updatePinnedCommentIds(e){null!=e.pinned_comments&&(this.comments.pinnedCommentIds=e.pinned_comments.map(e=>e.id))}}ye([r.l],_e.prototype,"account",void 0),ye([r.l],_e.prototype,"comments",void 0),ye([r.d],_e.prototype,"importCommentsUIState",null),ye([r.d],_e.prototype,"initializeWithCommentBundleJSON",null),ye([r.d],_e.prototype,"updateFromCommentsAdded",null),ye([r.d],_e.prototype,"updateFromCommentsNew",null),ye([r.d],_e.prototype,"updateFromCommentUpdated",null);var we=n("srn7"),Oe=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class je extends S{constructor(){super(...arguments),this.users=r.l.map()}flushStore(){this.users=r.l.map()}get(e){return this.users.get(e)}getOrCreate(e,t){let n=this.users.get(e);return n&&n.loaded?n:(n=t?we.a.fromJSON(t):new we.a(e),this.users.set(e,n),n.loaded||n.load(),n)}handleDispatchAction(e){e instanceof j&&this.flushStore()}updateWithJSON(e){if(null!=e)for(const t of e){const e=we.a.fromJSON(t);this.users.set(e.id,e)}}}Oe([r.l],je.prototype,"users",void 0),Oe([r.d],je.prototype,"flushStore",null),Oe([r.d],je.prototype,"getOrCreate",null),Oe([r.d],je.prototype,"updateWithJSON",null);class ke{constructor(){this.uiState=new _e(this),this.beatmapsetStore=new N(this),this.beatmapsetSearch=new E(this.beatmapsetStore),this.clientStore=new U(this),this.commentableMetaStore=new W(this),this.commentStore=new z(this),this.channelStore=new C(this),this.notificationStore=new ue,this.ownClientStore=new me(this),this.userStore=new je(this)}updateWithCommentBundleJSON(e){this.commentableMetaStore.updateWithJSON(e.commentable_meta),this.commentStore.updateWithJSON(e.comments),this.commentStore.updateWithJSON(e.included_comments),this.commentStore.updateWithJSON(e.pinned_comments),this.userStore.updateWithJSON(e.users),this.commentStore.addVoted(e.user_votes)}}!function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);o>3&&i&&Object.defineProperty(t,n,i)}([r.d],ke.prototype,"updateWithCommentBundleJSON",null);class Ee{constructor(e){this.userLogin=()=>{Object(f.a)(new O)},this.userLogout=()=>{Object(f.a)(new j)},$(e.document).on("ajax:success",".js-logout-link",this.userLogout),$(e.document).on("ajax:success",".js-login-form",this.userLogin)}}class Se{constructor(e){this.focusChange=e=>{"focus"===e.type?Object(f.a)(new m.b):Object(f.a)(new m.a)},$(e).on("blur focus",this.focusChange)}}const xe=new class{constructor(e){this.setUser=(e,t)=>{this.dataStore.userStore.getOrCreate(t.id,t)},this.window=e,this.dataStore=new ke,this.chatWorker=new w(this.dataStore),this.chatOrchestrator=new g(this.dataStore),this.userLoginObserver=new Ee(this.window),this.windowFocusObserver=new Se(this.window),this.beatmapsetSearchController=new d(this.dataStore.beatmapsetSearch),$(document).on("turbolinks:load.osu-core",()=>{null!=e.currentUser&&this.dataStore.userStore.getOrCreate(e.currentUser.id,e.currentUser),$(document).off("turbolinks:load.osu-core")}),$.subscribe("user:update",this.setUser)}get currentUser(){return window.currentUser}}(window);window.OsuCore=xe;var Ne=t.a=xe},f7bm:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("iBbO"),s=n("cDcd");const o="click-to-copy";class i extends s.Component{constructor(){super(...arguments),this.timer=null,this.title=null,this.click=e=>{e.preventDefault();const t=e.currentTarget;null==this.api&&(this.api=$(t).qtip("api")),r.writeText(this.props.value),this.api.set("content.text",osu.trans("common.buttons.click_to_copy_copied")),Timeout.clear(this.timer),this.timer=Timeout.set(1e3,this.restoreTooltipText),null==this.title&&(this.title=t.getAttribute("title")||t.dataset.origTitle||null)},this.restoreTooltipText=()=>{null!=this.title&&(this.api.hide(),Timeout.set(100,()=>{this.api.set("content.text",this.title)}))}}componentWillMount(){this.restoreTooltipText()}render(){return this.props.value?s.createElement("a",{className:o,"data-tooltip-pin-position":!0,"data-tooltip-position":"bottom center","data-tooltip-hide-events":"mouseleave",href:this.props.valueAsUrl?this.props.value:"#",onClick:this.click,title:osu.trans("common.buttons.click_to_copy")},this.props.label||this.props.value,this.props.showIcon&&s.createElement("i",{className:`fas fa-paste ${o}__icon`})):s.createElement("span",null)}}i.defaultProps={showIcon:!1,valueAsUrl:!1}},fDIx:function(e,t,n){"use strict";e.exports=a;var r=n("uNUE"),s=r.CONTINUE,o=r.SKIP,i=r.EXIT;function a(e,t,n,s){"function"==typeof t&&"function"!=typeof n&&(s=n,n=t,t=null),r(e,t,(function(e,t){var r=t[t.length-1],s=r?r.children.indexOf(e):null;return n(e,s,r)}),s)}a.CONTINUE=s,a.SKIP=o,a.EXIT=i},fWFV:function(e,t,n){(function(e){var n,r,s,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===i(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],a=o.obj[o.prop],c=Object.keys(a),u=0;u<c.length;++u){var l=c[u],p=a[l];"object"===i(p)&&null!==p&&-1===n.indexOf(p)&&(t.push({obj:a,prop:l}),n.push(p))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(s(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n){if(0===e.length)return e;var r=e;if("symbol"===i(e)?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var s="",a=0;a<r.length;++a){var c=r.charCodeAt(a);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?s+=r.charAt(a):c<128?s+=o[c]:c<2048?s+=o[192|c>>6]+o[128|63&c]:c<55296||c>=57344?s+=o[224|c>>12]+o[128|c>>6&63]+o[128|63&c]:(a+=1,c=65536+((1023&c)<<10|1023&r.charCodeAt(a)),s+=o[240|c>>18]+o[128|c>>12&63]+o[128|c>>6&63]+o[128|63&c])}return s},isBuffer:function(e){return!(!e||"object"!==i(e)||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,o){if(!n)return t;if("object"!==i(n)){if(s(t))t.push(n);else{if(!t||"object"!==i(t))return[t,n];(o&&(o.plainObjects||o.allowPrototypes)||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==i(t))return[t].concat(n);var c=t;return s(t)&&!s(n)&&(c=a(t,o)),s(t)&&s(n)?(n.forEach((function(n,s){if(r.call(t,s)){var a=t[s];a&&"object"===i(a)&&n&&"object"===i(n)?t[s]=e(a,n,o):t.push(n)}else t[s]=n})),t):Object.keys(n).reduce((function(t,s){var i=n[s];return r.call(t,s)?t[s]=e(t[s],i,o):t[s]=i,t}),c)}}},function(e,t,n){"use strict";var r=String.prototype.replace,s=/%20/g,o=n(0),i={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=o.assign({default:i.RFC3986,formatters:{RFC1738:function(e){return r.call(e,s,"+")},RFC3986:function(e){return String(e)}}},i)},function(e,t,n){"use strict";var r=n(3),s=n(4),o=n(1);e.exports={formats:o,parse:s,stringify:r}},function(e,t,n){"use strict";var r=n(0),s=n(1),o=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=Array.prototype.push,l=function(e,t){u.apply(e,c(t)?t:[t])},p=Date.prototype.toISOString,d=s.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:d,formatter:s.formatters[d],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},m=function e(t,n,s,o,a,u,p,d,m,f,v,b,y){var g,_=t;if("function"==typeof p?_=p(n,_):_ instanceof Date?_=f(_):"comma"===s&&c(_)&&(_=_.join(",")),null===_){if(o)return u&&!b?u(n,h.encoder,y):n;_=""}if("string"==typeof(g=_)||"number"==typeof g||"boolean"==typeof g||"symbol"===i(g)||"bigint"==typeof g||r.isBuffer(_))return u?[v(b?n:u(n,h.encoder,y))+"="+v(u(_,h.encoder,y))]:[v(n)+"="+v(String(_))];var w,O=[];if(void 0===_)return O;if(c(p))w=p;else{var j=Object.keys(_);w=d?j.sort(d):j}for(var k=0;k<w.length;++k){var E=w[k];a&&null===_[E]||(c(_)?l(O,e(_[E],"function"==typeof s?s(n,E):n,s,o,a,u,p,d,m,f,v,b,y)):l(O,e(_[E],n+(m?"."+E:"["+E+"]"),s,o,a,u,p,d,m,f,v,b,y)))}return O};e.exports=function(e,t){var n,r=e,u=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=s.default;if(void 0!==e.format){if(!o.call(s.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=s.formatters[n],i=h.filter;return("function"==typeof e.filter||c(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:i,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"==typeof u.filter?r=(0,u.filter)("",r):c(u.filter)&&(n=u.filter);var p,d=[];if("object"!==i(r)||null===r)return"";p=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=a[p];n||(n=Object.keys(r)),u.sort&&n.sort(u.sort);for(var v=0;v<n.length;++v){var b=n[v];u.skipNulls&&null===r[b]||l(d,m(r[b],b,f,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var y=d.join(u.delimiter),g=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}},function(e,t,n){"use strict";var r=n(0),s=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},a=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,i=n.depth>0&&/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,c=[];if(a){if(!n.plainObjects&&s.call(Object.prototype,a)&&!n.allowPrototypes)return;c.push(a)}for(var u=0;n.depth>0&&null!==(i=o.exec(r))&&u<n.depth;){if(u+=1,!n.plainObjects&&s.call(Object.prototype,i[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(e,t,n){for(var r=t,s=e.length-1;s>=0;--s){var o,i=e[s];if("[]"===i&&n.parseArrays)o=[].concat(r);else{o=n.plainObjects?Object.create(null):{};var a="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,c=parseInt(a,10);n.parseArrays||""!==a?!isNaN(c)&&i!==a&&String(c)===a&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[])[c]=r:o[a]=r:o={0:r}}r=o}return r}(c,t,n)}};e.exports=function(e,t){var n=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var n,a={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=t.parameterLimit===1/0?void 0:t.parameterLimit,l=c.split(t.delimiter,u),p=-1,d=t.charset;if(t.charsetSentinel)for(n=0;n<l.length;++n)0===l[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[n]?d="utf-8":"utf8=%26%2310003%3B"===l[n]&&(d="iso-8859-1"),p=n,n=l.length);for(n=0;n<l.length;++n)if(n!==p){var h,m,f=l[n],v=f.indexOf("]="),b=-1===v?f.indexOf("="):v+1;-1===b?(h=t.decoder(f,o.decoder,d),m=t.strictNullHandling?null:""):(h=t.decoder(f.slice(0,b),o.decoder,d),m=t.decoder(f.slice(b+1),o.decoder,d)),m&&t.interpretNumericEntities&&"iso-8859-1"===d&&(m=i(m)),m&&t.comma&&m.indexOf(",")>-1&&(m=m.split(",")),s.call(a,h)?a[h]=r.combine(a[h],m):a[h]=m}return a}(e,n):e,u=n.plainObjects?Object.create(null):{},l=Object.keys(c),p=0;p<l.length;++p){var d=l[p],h=a(d,c[d],n);u=r.merge(u,h,n)}return r.compact(u)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var s=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.ziggy=r,this.route=this.ziggy.namedRoutes[this.name],void 0===this.name)throw new Error("Ziggy Error: You must provide a route name");if(void 0===this.route)throw new Error("Ziggy Error: route '".concat(this.name,"' is not found in the route list"));this.absolute=void 0===n||n,this.domain=this.setDomain(),this.path=this.route.uri.replace(/^\//,"")}var t,n;return t=e,(n=[{key:"setDomain",value:function(){if(!this.absolute)return"/";if(!this.route.domain)return this.ziggy.baseUrl.replace(/\/?$/,"/");var e=(this.route.domain||this.ziggy.baseDomain).replace(/\/+$/,"");return this.ziggy.basePort&&e.replace(/\/+$/,"")===this.ziggy.baseDomain.replace(/\/+$/,"")&&(e=this.ziggy.baseDomain+":"+this.ziggy.basePort),this.ziggy.baseProtocol+"://"+e+"/"}},{key:"construct",value:function(){return this.domain+this.path}}])&&r(t.prototype,n),e}(),o=n(2);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,n){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(e,r));return n&&p(s,n.prototype),s}).apply(null,arguments)}(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"default",(function(){return m}));var h=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=function(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,d(t).call(this))).name=e,o.absolute=r,o.ziggy=i||Ziggy,o.urlBuilder=o.name?new s(e,r,o.ziggy):null,o.template=o.urlBuilder?o.urlBuilder.construct():"",o.urlParams=o.normalizeParams(n),o.queryParams={},o.hydrated="",o}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"normalizeParams",value:function(e){return void 0===e?{}:((e="object"!==c(e)?[e]:e).hasOwnProperty("id")&&-1==this.template.indexOf("{id}")&&(e=[e.id]),this.numericParamIndices=Array.isArray(e),a({},e))}},{key:"with",value:function(e){return this.urlParams=this.normalizeParams(e),this}},{key:"withQuery",value:function(e){return a(this.queryParams,e),this}},{key:"hydrateUrl",value:function(){var e=this;if(this.hydrated)return this.hydrated;var t=this.template.replace(/{([^}]+)}/gi,(function(t,n){var r,s,o=e.trimParam(t);if(e.ziggy.defaultParameters.hasOwnProperty(o)&&(r=e.ziggy.defaultParameters[o]),r&&!e.urlParams[o])return delete e.urlParams[o],r;if(e.numericParamIndices?(e.urlParams=Object.values(e.urlParams),s=e.urlParams.shift()):(s=e.urlParams[o],delete e.urlParams[o]),void 0===s){if(-1===t.indexOf("?"))throw new Error("Ziggy Error: '"+o+"' key is required for route '"+e.name+"'");return""}return s.id?encodeURIComponent(s.id):encodeURIComponent(s)}));return null!=this.urlBuilder&&""!==this.urlBuilder.path&&(t=t.replace(/\/+$/,"")),this.hydrated=t,this.hydrated}},{key:"matchUrl",value:function(){var e=window.location.hostname+(window.location.port?":"+window.location.port:"")+window.location.pathname,t=this.template.replace(/(\/\{[^\}]*\?\})/g,"/").replace(/(\{[^\}]*\})/gi,"[^/?]+").replace(/\/?$/,"").split("://")[1],n=this.template.replace(/(\{[^\}]*\})/gi,"[^/?]+").split("://")[1],r=e.replace(/\/?$/,"/"),s=new RegExp("^"+n+"/$").test(r),o=new RegExp("^"+t+"/$").test(r);return s||o}},{key:"constructQuery",value:function(){if(0===Object.keys(this.queryParams).length&&0===Object.keys(this.urlParams).length)return"";var e=a(this.urlParams,this.queryParams);return Object(o.stringify)(e,{encodeValuesOnly:!0,skipNulls:!0,addQueryPrefix:!0,arrayFormat:"indices"})}},{key:"current",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Object.keys(this.ziggy.namedRoutes),s=r.filter((function(n){return-1!==e.ziggy.namedRoutes[n].methods.indexOf("GET")&&new t(n,void 0,void 0,e.ziggy).matchUrl()}))[0];if(n){var o=new RegExp("^"+n.replace("*",".*").replace(".",".")+"$","i");return o.test(s)}return s}},{key:"check",value:function(e){return Object.keys(this.ziggy.namedRoutes).includes(e)}},{key:"extractParams",value:function(e,t,n){var r=this,s=e.split(n);return t.split(n).reduce((function(e,t,n){return 0===t.indexOf("{")&&-1!==t.indexOf("}")&&s[n]?a(e,(o={},i=r.trimParam(t),c=s[n],i in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,o)):e;var o,i,c}),{})}},{key:"parse",value:function(){this.return=this.hydrateUrl()+this.constructQuery()}},{key:"url",value:function(){return this.parse(),this.return}},{key:"toString",value:function(){return this.url()}},{key:"trimParam",value:function(e){return e.replace(/{|}|\?/g,"")}},{key:"valueOf",value:function(){return this.url()}},{key:"params",get:function(){var e=this.ziggy.namedRoutes[this.current()];return a(this.extractParams(window.location.hostname,e.domain||"","."),this.extractParams(window.location.pathname.slice(1),e.uri,"/"))}}])&&u(n.prototype,r),t}(l(String));function m(e,t,n,r){return new h(e,t,n,r)}}]).default},"object"===i(t)&&"object"===i(e)?e.exports=o():(r=[],void 0===(s="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=s))}).call(this,n("qs9r")(e))},fgfA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,s=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case s:switch(e=e.type){case p:case d:case i:case c:case a:case m:return e;default:switch(e=e&&e.$$typeof){case l:case h:case u:return e;default:return t}}case v:case f:case o:return t}}}function y(e){return b(e)===d}t.typeOf=b,t.AsyncMode=p,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=s,t.ForwardRef=h,t.Fragment=i,t.Lazy=v,t.Memo=f,t.Portal=o,t.Profiler=c,t.StrictMode=a,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===c||e===a||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===f||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h)},t.isAsyncMode=function(e){return y(e)||b(e)===p},t.isConcurrentMode=y,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===i},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===f},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===c},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===m}},g1Eu:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("cDcd"),s=n("NzAu"),o=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,a=function(e){function t(e){this.reset=o(this.reset,this),this.render=o(this.render,this),this.mountObserver=o(this.mountObserver,this),this.onScroll=o(this.onScroll,this),this.onClick=o(this.onClick,this),this.componentWillUnmount=o(this.componentWillUnmount,this),t.__super__.constructor.call(this,e),this.state={lastScrollY:null}}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentWillUnmount=function(){if(document.removeEventListener("scroll",this.onScroll),null!=this.observer)return this.observer.disconnect(),this.observer=null},t.prototype.onClick=function(e){var t,n;return null!=this.state.lastScrollY?(window.scrollTo(window.pageXOffset,this.state.lastScrollY),this.setState({lastScrollY:null})):(n=null!=(null!=(t=this.props.anchor)?t.current:void 0)?$(this.props.anchor.current).offset().top:0,window.pageYOffset>n?(this.setState({lastScrollY:window.pageYOffset}),window.scrollTo(window.pageXOffset,n),this.mountObserver()):void 0)},t.prototype.onScroll=function(e){if(this.setState({lastScrollY:null}),document.removeEventListener("scroll",this.onScroll),null!=this.observer)return this.observer.disconnect(),this.observer=null},t.prototype.mountObserver=function(){var e,t,n,r;return null!=window.IntersectionObserver?(n=null!=(e=null!=(t=this.props.anchor)?t.current:void 0)?e:document.body,this.observer=new IntersectionObserver((r=this,function(e){var t,s,o,i;for(i=[],s=0,o=e.length;s<o;s++){if((t=e[s]).target===n&&0===t.boundingClientRect.top){document.addEventListener("scroll",r.onScroll);break}i.push(void 0)}return i})),this.observer.observe(n)):Timeout.set(0,function(e){return function(){return document.addEventListener("scroll",e.onScroll)}}(this))},t.prototype.render=function(){return Object(s.button)({className:"back-to-top","data-tooltip-float":"fixed",onClick:this.onClick,title:null!=this.state.lastScrollY?osu.trans("common.buttons.back_to_previous"):osu.trans("common.buttons.back_to_top")},Object(s.i)({className:null!=this.state.lastScrollY?"fas fa-angle-down":"fas fa-angle-up"}))},t.prototype.reset=function(){return this.setState({lastScrollY:null})},t}(r.PureComponent)},gTvg:function(e,t,n){"use strict";var r=n("2oEb");e.exports=o,o.wrap=r;var s=[].slice;function o(){var e=[],t={run:function(){var t=-1,n=s.call(arguments,0,-1),o=arguments[arguments.length-1];if("function"!=typeof o)throw new Error("Expected function as last argument, not "+o);(function i(a){var c=e[++t],u=s.call(arguments,0).slice(1),l=n.length,p=-1;if(a)o(a);else{for(;++p<l;)null!==u[p]&&void 0!==u[p]||(u[p]=n[p]);n=u,c?r(c,i).apply(null,n):o.apply(null,[null].concat(n))}}).apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},giZH:function(e,t,n){"use strict";var r=n("DmM8"),s=n("kxIg"),o=n("AMMU"),i=n("OTBi");e.exports=l,l.locator=i;var a="*",c="_",u="\\";function l(e,t,n){var i,l,p,d,h,m,f,v=0,b=t.charAt(v);if(!(b!==a&&b!==c||(l=this.options.pedantic,h=b,p=b,m=t.length,v++,d="",b="",l&&o(t.charAt(v)))))for(;v<m;){if(f=b,!((b=t.charAt(v))!==p||l&&o(f))){if((b=t.charAt(++v))!==p){if(!r(d)||f===p)return;if(!l&&p===c&&s(b)){d+=p;continue}return!!n||((i=e.now()).column++,i.offset++,e(h+d+p)({type:"emphasis",children:this.tokenizeInline(d,i)}))}d+=p}l||b!==u||(d+=b,b=t.charAt(++v)),d+=b,v++}}},"h/Ip":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd");const s=Object(r.createContext)({isWidget:!1})},hc33:function(e,t,n){"use strict";var r,s=n("0h6b"),o=n("cDcd"),i=n("YLtl"),a=n("txhI"),c=n("NzAu"),u=n("MeXQ"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;r="report-form";var d=function(e){function t(e){this.sendReport=l(this.sendReport,this),this.renderFormContent=l(this.renderFormContent,this),this.renderForm=l(this.renderForm,this),this.render=l(this.render,this),this.onItemSelected=l(this.onItemSelected,this),t.__super__.constructor.call(this,e),this.options=[{id:"Cheating",text:osu.trans("users.report.options.cheating")},{id:"Insults",text:osu.trans("users.report.options.insults")},{id:"Spam",text:osu.trans("users.report.options.spam")},{id:"UnwantedContent",text:osu.trans("users.report.options.unwanted_content")},{id:"Nonsense",text:osu.trans("users.report.options.nonsense")},{id:"Other",text:osu.trans("users.report.options.other")}],null!=e.visibleOptions&&(this.options=_.intersectionWith(this.options,e.visibleOptions,(function(e,t){return e.id===t}))),this.textarea=Object(o.createRef)(),this.state={selectedReason:this.options[0]}}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.onItemSelected=function(e){return this.setState({selectedReason:e})},t.prototype.render=function(){return this.props.visible?this.renderForm():null},t.prototype.renderForm=function(){var e;return e=this.props.completed?osu.trans("users.report.thanks"):this.props.title,Object(o.createElement)(a.a,{onClose:this.props.onClose,visible:this.props.visible},Object(c.div)({className:r},Object(c.div)({className:r+"__header"},Object(c.div)({className:r+"__row "+r+"__row--exclamation"},Object(c.i)({className:"fas fa-exclamation-triangle"})),Object(c.div)({className:r+"__row "+r+"__row--title",dangerouslySetInnerHTML:{__html:"<span>"+e+"</span>"}})),this.props.completed?void 0:this.renderFormContent()))},t.prototype.renderFormContent=function(){return Object(c.div)(null,Object(i.isEmpty)(this.options)?void 0:[Object(c.div)({key:"label",className:r+"__row"},osu.trans("users.report.reason")),Object(c.div)({key:"options",className:r+"__row"},Object(o.createElement)(u.a,{blackout:!1,bn:r+"-select-options",onItemSelected:this.onItemSelected,options:this.options,selected:this.state.selectedReason}))],Object(c.div)({className:r+"__row"},osu.trans("users.report.comments")),Object(c.div)({className:r+"__row"},Object(c.textarea)({className:r+"__textarea",placeholder:osu.trans("users.report.placeholder"),ref:this.textarea})),Object(c.div)({className:r+"__row "+r+"__row--buttons"},[Object(c.button)({className:r+"__button "+r+"__button--report",disabled:this.props.disabled,key:"report",type:"button",onClick:this.sendReport},osu.trans("users.report.actions.send")),Object(c.button)({className:r+"__button",disabled:this.props.disabled,key:"cancel",type:"button",onClick:this.props.onClose},osu.trans("users.report.actions.cancel"))]))},t.prototype.sendReport=function(e){var t,n,r;return n={reason:null!=(r=this.state.selectedReason)?r.id:void 0,comments:this.textarea.current.value},"function"==typeof(t=this.props).onSubmit?t.onSubmit(n):void 0},t}(o.PureComponent);n.d(t,"a",(function(){return f}));var h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const m={beatmapset_discussion_post:["Insults","Spam","UnwantedContent","Nonsense","Other"],comment:["Insults","Spam","UnwantedContent","Nonsense","Other"],scores:["Cheating","Other"]};class f extends o.PureComponent{constructor(e){super(e),this.onFormClose=()=>{this.setState({disabled:!1,showingForm:!1},this.props.onFormClose)},this.onSubmit=e=>{this.setState({disabled:!0});const t={data:{comments:e.comments,reason:e.reason,reportable_id:this.props.reportableId,reportable_type:this.props.reportableType},dataType:"json",type:"POST",url:Object(s.route)("reports.store")};$.ajax(t).done(()=>{this.timeout=Timeout.set(1e3,this.onFormClose),this.setState({completed:!0})}).fail(e=>{osu.ajaxError(e),this.setState({disabled:!1})})},this.showForm=e=>{0===e.button&&(e.preventDefault(),Timeout.clear(this.timeout),this.setState({disabled:!1,showingForm:!0}))},this.state={completed:!1,disabled:!1,showingForm:!1}}render(){const e=this.props,{baseKey:t,icon:n,onFormClose:r,reportableId:s,reportableType:i,user:a}=e,c=h(e,["baseKey","icon","onFormClose","reportableId","reportableType","user"]),u=t||this.props.reportableType;return o.createElement(o.Fragment,null,o.createElement("button",Object.assign({key:"button",onClick:this.showForm},c),n?o.createElement("span",{className:"textual-button textual-button--inline"},o.createElement("i",{className:"textual-button__icon fas fa-exclamation-triangle"})," ",osu.trans(`report.${u}.button`)):osu.trans(`report.${u}.button`)),o.createElement(d,{completed:this.state.completed,disabled:this.state.disabled,onClose:this.onFormClose,onSubmit:this.onSubmit,title:osu.trans(`report.${u}.title`,{username:`<strong>${a.username}</strong>`}),visible:this.state.showingForm,visibleOptions:m[u]}))}}f.defaultProps={icon:!1,onFormClose:()=>{}}},i5IF:function(e,t,n){"use strict";e.exports=n("fgfA")},iBbO:function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(){return t=[function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(i,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.DT=o.DT;var i=function(e){},a=!0,c=function(){(console.warn||console.log).apply(console,arguments)}.bind("[clipboard-polyfill]"),u="text/plain";function l(e){i=e}function p(){a=!1,o.suppressDTWarnings()}function d(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){if(a&&!e.getData(u)&&c("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),E()){if(function(e){var t=e.getData(u);if(void 0===t)throw"No `text/plain` value was specified.";return window.clipboardData.setData("Text",t)}(e))return[2];throw"Copying failed, possibly because the user rejected it."}if(_(e))return i("regular execCopy worked"),[2];if(-1<navigator.userAgent.indexOf("Edge"))return i('UA "Edge" => assuming success'),[2];if(w(document.body,e))return i("copyUsingTempSelection worked"),[2];if(function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=w(t,e);return document.body.removeChild(t),n}(e))return i("copyUsingTempElem worked"),[2];if(void 0!==(t=e.getData(u))&&function(e){i("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(i("Using shadow DOM."),n=t.attachShadow({mode:"open"}));var r=document.createElement("span");r.innerText=e,n.appendChild(r),document.body.appendChild(t),O(r);var s=document.execCommand("copy");return j(),document.body.removeChild(t),s}(t))return i("copyTextUsingDOM worked"),[2];throw"Copy command failed."}))}))}function h(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){return navigator.clipboard&&navigator.clipboard.writeText?(i("Using `navigator.clipboard.writeText()`."),[2,navigator.clipboard.writeText(e)]):[2,d(k(e))]}))}))}function m(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=k,[4,f()];case 1:return[2,e.apply(void 0,[t.sent()])]}}))}))}function f(){return r(this,void 0,void 0,(function(){return s(this,(function(e){if(navigator.clipboard&&navigator.clipboard.readText)return i("Using `navigator.clipboard.readText()`."),[2,navigator.clipboard.readText()];if(E())return i("Reading text using IE strategy."),[2,function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){if(""===(e=window.clipboardData.getData("Text")))throw"Empty clipboard or could not read plain text from clipboard";return[2,e]}))}))}()];throw"Read is not supported in your browser."}))}))}t.setDebugLog=l,t.suppressWarnings=p,t.write=d,t.writeText=h,t.read=m,t.readText=f;var v=!1;function b(){v||(a&&c('The deprecated default object of `clipboard-polyfill` was called. Please switch to `import * as clipboard from "clipboard-polyfill"` and see https://github.com/lgarron/clipboard-polyfill/issues/101 for more info.'),v=!0)}var y=function(){function e(){}return e.setDebugLog=function(e){return b(),l(e)},e.suppressWarnings=function(){return b(),p()},e.write=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){return b(),[2,d(e)]}))}))},e.writeText=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){return b(),[2,h(e)]}))}))},e.read=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){return b(),[2,m()]}))}))},e.readText=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){return b(),[2,f()]}))}))},e.DT=o.DT,e}();t.default=y;var g=function(){this.success=!1};function _(e){var t=new g,n=function(e,t,n){i("listener called"),e.success=!0,t.forEach((function(t,r){var s=n.clipboardData;s.setData(r,t),r===u&&s.getData(r)!=t&&(i("setting text/plain failed"),e.success=!1)})),n.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function w(e,t){O(e);var n=_(t);return j(),n}function O(e){var t=document.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function j(){var e=document.getSelection();e&&e.removeAllRanges()}function k(e){var t=new o.DT;return t.setData(u,e),t}function E(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["text/plain","text/html"],s=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),o=!0;t.suppressDTWarnings=function(){o=!1};var i=function(){function e(){this.m={}}return e.prototype.setData=function(e,t){o&&-1===r.indexOf(e)&&s("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[e]=t},e.prototype.getData=function(e){return this.m[e]},e.prototype.forEach=function(e){for(var t in this.m)e(this.m[t],t)},e}();t.DT=i}],n={},e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var s in t)e.d(r,s,function(e){return t[e]}.bind(null,s));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=0);function e(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var t,n}()},iRgH:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));class r{}class s{}},iwIW:function(e,t,n){"use strict";var r=n("AMMU");e.exports=function(e,t,n){var v,b,y,g,_,w,O,j,k,E,S,x,N,T,A,P,C,D,R,M,I,U;if(this.options.gfm){for(v=0,P=0,w=t.length+1,O=[];v<w;){if(M=t.indexOf(o,v),I=t.indexOf(l,v+1),-1===M&&(M=t.length),-1===I||I>M){if(P<d)return;break}O.push(t.slice(v,M)),P++,v=M+1}for(g=O.join(o),v=0,w=(b=O.splice(1,1)[0]||[]).length,P--,y=!1,S=[];v<w;){if((k=b.charAt(v))===l){if(E=null,!1===y){if(!1===U)return}else S.push(y),y=!1;U=!1}else if(k===a)E=!0,y=y||null;else if(k===c)y=y===h?m:E&&null===y?f:h;else if(!r(k))return;v++}if(!1!==y&&S.push(y),!(S.length<p)){if(n)return!0;for(A=-1,D=[],R=e(g).reset({type:"table",align:S,children:D});++A<P;){for(C=O[A],_={type:"tableRow",children:[]},A&&e(o),e(C).reset(_,R),w=C.length+1,v=0,j="",x="",N=!0;v<w;)(k=C.charAt(v))!==s&&k!==i?(""===k||k===l?N?e(k):(!x&&!k||N||(g=x,j.length>1&&(k?(g+=j.slice(0,j.length-1),j=j.charAt(j.length-1)):(g+=j,j="")),T=e.now(),e(g)({type:"tableCell",children:this.tokenizeInline(x,T)},_)),e(j+k),j="",x=""):(j&&(x+=j,j=""),x+=k,k===u&&v!==w-2&&(x+=C.charAt(v+1),v++)),N=!1,v++):(x?j+=k:e(k),v++);A||e(o+b)}return R}}};var s="\t",o="\n",i=" ",a="-",c=":",u="\\",l="|",p=1,d=2,h="left",m="center",f="right"},jbZF:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,s,o=n("cDcd"),i=n("NzAu"),a=n("SYfz"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;s=o.createElement,r="textual-button";var l=function(e){function t(e){this.isVisible=c(this.isVisible,this),this.render=c(this.render,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidMount=c(this.componentDidMount,this),this.clicked=c(this.clicked,this),this.refresh=c(this.refresh,this),this.updateBlocks=c(this.updateBlocks,this),t.__super__.constructor.call(this,e),this.button=o.createRef(),this.eventId="blockButton-"+this.props.userId+"-"+osu.uuid(),this.state={block:_.find(currentUser.blocks,{target_id:e.userId})}}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.defaultProps={onClick:function(){}},t.prototype.updateBlocks=function(e){return this.setState({block:_.find(e,{target_id:this.props.userId})},(function(){return currentUser.blocks=_.filter(e,{relation_type:"block"}),currentUser.friends=_.filter(e,{relation_type:"friend"}),$.publish("user:update",currentUser),$.publish("blockButton:refresh"),$.publish("friendButton:refresh")})),this.props.onClick()},t.prototype.refresh=function(e){return this.setState({block:_.find(currentUser.blocks,{target_id:this.props.userId})})},t.prototype.clicked=function(e){var t;if(confirm(osu.trans("common.confirmation")))return this.setState({loading:!0},(t=this,function(){return t.state.block?t.xhr=$.ajax({type:"DELETE",url:laroute.route("blocks.destroy",{block:t.props.userId})}):t.xhr=$.ajax({type:"POST",url:laroute.route("blocks.store",{target:t.props.userId})}),t.xhr.always((function(){return t.setState({loading:!1})})).fail(osu.emitAjaxError(t.button.current)).done(t.updateBlocks)}));this.props.onClick()},t.prototype.componentDidMount=function(){return $.subscribe("blockButton:refresh."+this.eventId,this.refresh)},t.prototype.componentWillUnmount=function(){var e;return $.unsubscribe("."+this.eventId),null!=(e=this.xhr)?e.abort():void 0},t.prototype.render=function(){var e,t,n;return this.isVisible()?(e=osu.classWithModifiers(r,["block"].concat(this.props.modifiers)),null!=this.props.wrapperClass?(n=this.props.wrapperClass,t=e):(n=e,t=null),Object(i.button)({type:"button",className:n,onClick:this.clicked,ref:this.button,disabled:this.state.loading},Object(i.span)({className:t},this.state.loading?Object(i.span)({className:r+"__icon fa-fw"},s(a.a)):Object(i.i)({className:r+"__icon fas fa-ban fa-fw"})," ",this.state.block?osu.trans("users.blocks.button.unblock"):osu.trans("users.blocks.button.block")))):null},t.prototype.isVisible=function(){return null!=currentUser.id&&_.isFinite(this.props.userId)&&this.props.userId!==currentUser.id},t}(o.PureComponent)},jiio:function(e,t,n){"use strict";e.exports=function(e){if(e)throw e}},k4GU:function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("**",t),r=e.indexOf("__",t);return-1===r?n:-1===n?r:r<n?r:n}},k6t2:function(e,t,n){"use strict";var r=n("fDIx");function s(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}e.exports=function(e){return r(e,"table",s),e}},kKxR:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u}));class r{constructor(e){this.channelId=e}}class s{constructor(e,t=!0){this.channelId=e,this.shouldSync=t}}class o{constructor(e){this.channelId=e}}class i{constructor(e){this.message=e}}class a{constructor(e){this.message=e}}class c{constructor(e){this.message=e}}class u{constructor(e){this.presence=e}}},kxIg:function(e,t,n){"use strict";e.exports=function(e){return s.test("number"==typeof e?r(e):e.charAt(0))};var r=String.fromCharCode,s=/\w/},"l+Wg":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("qpPZ"),s=n("0h6b"),o=n("cDcd");function i(e){const t=[{active:"index"===e.section,title:osu.trans("news.index.title.info"),url:Object(s.route)("news.index")}];return"show"===e.section&&null!=e.post&&t.push({active:!0,title:e.post.title,url:Object(s.route)("news.show",{news:e.post.slug})}),o.createElement(r.a,{theme:"news",links:t,linksBreadcrumb:!0})}},l2ru:function(e,t,n){"use strict";var r=n("Jryd"),s=n("on4i"),o=n("q7YD");e.exports=function(e){var t,n,i=this.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=r(e)}for(t in o){if(null==(n=e[t])&&(n=i[t]),"blocks"!==t&&"boolean"!=typeof n||"blocks"===t&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+t+"`");e[t]=n}return this.options=e,this.escape=s(e),this}},l6ln:function(e,t,n){"use strict";var r=n("DGoX"),s=n("Be1W"),o=n("T+HN").tag;e.exports=d,d.locator=s;var i="<",a="?",c="!",u="/",l=/^<a /i,p=/^<\/a>/i;function d(e,t,n){var s,d,h=t.length;if(!(t.charAt(0)!==i||h<3)&&(s=t.charAt(1),(r(s)||s===a||s===c||s===u)&&(d=t.match(o))))return!!n||(d=d[0],!this.inLink&&l.test(d)?this.inLink=!0:this.inLink&&p.test(d)&&(this.inLink=!1),e(d)({type:"html",value:d}))}},lNvx:function(e,t,n){"use strict";var r={}.hasOwnProperty;function s(e){return e&&"object"==typeof e||(e={}),i(e.line)+":"+i(e.column)}function o(e){return e&&"object"==typeof e||(e={}),s(e.start)+"-"+s(e.end)}function i(e){return e&&"number"==typeof e?e:1}e.exports=function(e){return e&&"object"==typeof e?r.call(e,"position")||r.call(e,"type")?o(e.position):r.call(e,"start")||r.call(e,"end")?o(e):r.call(e,"line")||r.call(e,"column")?s(e):null:null}},lYbo:function(e,t,n){var r=n("uNUE");e.exports=function(){return function(e){return r(e,"list",(function(e,t){var n,r,s=0;for(n=0,r=t.length;n<r;n++)"list"===t[n].type&&(s+=1);for(n=0,r=e.children.length;n<r;n++){var o=e.children[n];o.index=n,o.ordered=e.ordered}e.depth=s})),e}}},leGJ:function(e,t,n){"use strict";var r,s,o=n("Yin1"),i=n("6nUW"),a=n("cDcd"),c=n("NzAu"),u=n("TY2o"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;s=a.createElement,r="beatmap-discussion-post";var d=function(e){var t;function n(e){this.validPost=l(this.validPost,this),this.setMessage=l(this.setMessage,this),this.post=l(this.post,this),this.isTimeline=l(this.isTimeline,this),this.handleKeyDownCallback=l(this.handleKeyDownCallback,this),this.editStart=l(this.editStart,this),this.canResolve=l(this.canResolve,this),this.canReopen=l(this.canReopen,this),this.renderReplyButton=l(this.renderReplyButton,this),this.renderPlaceholder=l(this.renderPlaceholder,this),this.renderCancelButton=l(this.renderCancelButton,this),this.renderBox=l(this.renderBox,this),this.render=l(this.render,this),this.componentWillUnmount=l(this.componentWillUnmount,this),n.__super__.constructor.call(this,e),this.box=a.createRef(),this.throttledPost=_.throttle(this.post,1e3),this.handleKeyDown=InputHandler.textarea(this.handleKeyDownCallback),this.state={editing:!1,message:"",posting:null}}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),t={reply_resolve:"fas fa-check",reply_reopen:"fas fa-exclamation-circle",reply:"fas fa-reply"},n.prototype.componentWillUnmount=function(){var e;return this.throttledPost.cancel(),null!=(e=this.postXhr)?e.abort():void 0},n.prototype.render=function(){return this.state.editing?this.renderBox():this.renderPlaceholder()},n.prototype.renderBox=function(){return Object(c.div)({className:r+" "+r+"--reply "+r+"--new-reply"},Object(c.div)({className:r+"__content"},Object(c.div)({className:r+"__avatar"},s(u.a,{user:this.props.currentUser,modifiers:["full-rounded"]})),this.renderCancelButton(),Object(c.div)({className:r+"__message-container"},s(TextareaAutosize,{disabled:null!=this.state.posting,className:r+"__message "+r+"__message--editor",value:this.state.message,onChange:this.setMessage,onKeyDown:this.handleKeyDown,placeholder:osu.trans("beatmaps.discussions.reply_placeholder"),ref:this.box}))),Object(c.div)({className:r+"__footer "+r+"__footer--notice"},osu.trans("beatmaps.discussions.reply_notice"),s(o.a,{message:this.state.message,isTimeline:this.isTimeline()})),Object(c.div)({className:r+"__footer"},Object(c.div)({className:r+"__actions"},Object(c.div)({className:r+"__actions-group"},this.canResolve()&&!this.props.discussion.resolved?this.renderReplyButton("reply_resolve"):void 0,this.canReopen()&&this.props.discussion.resolved?this.renderReplyButton("reply_reopen"):void 0,this.renderReplyButton("reply")))))},n.prototype.renderCancelButton=function(){return Object(c.button)({className:r+"__action "+r+"__action--cancel",disabled:null!=this.state.posting,onClick:(e=this,function(){return e.setState({editing:!1})})},Object(c.i)({className:"fas fa-times"}));var e},n.prototype.renderPlaceholder=function(){var e,t,n;return n=(t=null!=this.props.currentUser.id?[osu.trans("beatmap_discussions.reply.open.user"),"fas fa-reply"]:[osu.trans("beatmap_discussions.reply.open.guest"),"fas fa-sign-in-alt"])[0],e=t[1],Object(c.div)({className:r+" "+r+"--reply "+r+"--new-reply "+r+"--new-reply-placeholder"},s(i.a,{text:n,icon:e,modifiers:["beatmap-discussion-reply-open"],props:{onClick:this.editStart}}))},n.prototype.renderReplyButton=function(e){return Object(c.div)({className:r+"__action"},s(i.a,{text:osu.trans("common.buttons."+e),icon:t[e],isBusy:this.state.posting===e,props:{disabled:!this.validPost()||null!=this.state.posting,onClick:this.throttledPost,"data-action":e}}))},n.prototype.canReopen=function(){return this.props.discussion.can_be_resolved&&this.props.discussion.current_user_attributes.can_reopen},n.prototype.canResolve=function(){return this.props.discussion.can_be_resolved&&this.props.discussion.current_user_attributes.can_resolve},n.prototype.editStart=function(){var e;if(null!=this.props.currentUser.id)return this.setState({editing:!0},(e=this,function(){var t;return null!=(t=e.box.current)?t.focus():void 0}));userLogin.show()},n.prototype.handleKeyDownCallback=function(e,t){switch(e){case InputHandler.CANCEL:return this.setState({editing:!1});case InputHandler.SUBMIT:return this.throttledPost(t)}},n.prototype.isTimeline=function(){return null!=this.props.discussion.timestamp},n.prototype.post=function(e){var t,n,r,s,o;if(this.validPost())return LoadingOverlay.show(),null!=(n=this.postXhr)&&n.abort(),t=null!=(r=e.currentTarget.dataset.action)?r:"reply",this.setState({posting:t}),s=function(){switch(t){case"reply_resolve":return!0;case"reply_reopen":return!1;default:return null}}(),this.postXhr=$.ajax(laroute.route("beatmap-discussion-posts.store"),{method:"POST",data:{beatmap_discussion_id:this.props.discussion.id,beatmap_discussion:null!=s?{resolved:s}:{},beatmap_discussion_post:{message:this.state.message}}}).done((o=this,function(e){return o.setState({message:"",editing:!1}),$.publish("beatmapDiscussionPost:markRead",{id:e.beatmap_discussion_post_ids}),$.publish("beatmapsetDiscussions:update",{beatmapset:e.beatmapset})})).fail(osu.ajaxError).always(function(e){return function(){return LoadingOverlay.hide(),e.setState({posting:null})}}(this))},n.prototype.setMessage=function(e){return this.setState({message:e.target.value})},n.prototype.validPost=function(){return BeatmapDiscussionHelper.validMessageLength(this.state.message,this.isTimeline())},n}(a.PureComponent),h=n("AU96");a.createElement;var m=function(e){var t,n;return t=function(){switch(e.post.message.type){case"resolved":return osu.trans("beatmap_discussions.system.resolved."+e.post.message.value,{user:osu.link(laroute.route("users.show",{user:e.user.id}),e.user.username,{classNames:["beatmap-discussion-system-post__user"]})})}}(),n="beatmap-discussion-system-post beatmap-discussion-system-post--"+e.post.message.type,e.post.deleted_at&&(n+=" beatmap-discussion-system-post--deleted"),Object(c.div)({className:n},Object(c.div)({className:"beatmap-discussion-system-post__content",dangerouslySetInnerHTML:{__html:t}}))},f=n("CnOT"),v=n("VxeA");n.d(t,"a",(function(){return w}));var b,y=function(e,t){return function(){return e.apply(t,arguments)}},g={}.hasOwnProperty;b=a.createElement;var w=function(e){function t(e){this.toggleExpand=y(this.toggleExpand,this),this.timestamp=y(this.timestamp,this),this.setHighlight=y(this.setHighlight,this),this.setCollapse=y(this.setCollapse,this),this.resolvedSystemPostId=y(this.resolvedSystemPostId,this),this.post=y(this.post,this),this.canBeRepliedTo=y(this.canBeRepliedTo,this),this.canDownvote=y(this.canDownvote,this),this.isVisible=y(this.isVisible,this),this.isOwner=y(this.isOwner,this),this.emitSetHighlight=y(this.emitSetHighlight,this),this.doVote=y(this.doVote,this),this.showVoters=y(this.showVoters,this),this.refreshTooltip=y(this.refreshTooltip,this),this.getTooltipContent=y(this.getTooltipContent,this),this.voterList=y(this.voterList,this),this.displayVote=y(this.displayVote,this),this.postFooter=y(this.postFooter,this),this.postButtons=y(this.postButtons,this),this.render=y(this.render,this),this.componentDidUpdate=y(this.componentDidUpdate,this),this.componentWillUnmount=y(this.componentWillUnmount,this),this.componentWillMount=y(this.componentWillMount,this),t.__super__.constructor.call(this,e),this.eventId="beatmap-discussion-entry-"+this.props.discussion.id,this.tooltips={},this.state={collapsed:!1,highlighted:!1}}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentWillMount=function(){return $.subscribe("beatmapDiscussionEntry:collapse."+this.eventId,this.setCollapse),$.subscribe("beatmapDiscussionEntry:highlight."+this.eventId,this.setHighlight)},t.prototype.componentWillUnmount=function(){var e;return $.unsubscribe("."+this.eventId),null!=(e=this.voteXhr)?e.abort():void 0},t.prototype.componentDidUpdate=function(){return _.each(this.tooltips,(e=this,function(t,n){return e.refreshTooltip(t.qtip("api"),n)}));var e},t.prototype.render=function(){var e,t,n,r,s;return this.isVisible(this.props.discussion)&&(this.props.discussion.starting_post||this.props.discussion.posts&&0!==this.props.discussion.posts.length)?(r="beatmap-discussion js-beatmap-discussion-jump",this.state.highlighted&&(r+=" beatmap-discussion--highlighted"),null!=this.props.discussion.deleted_at&&(r+=" beatmap-discussion--deleted"),null!=this.props.discussion.timestamp&&(r+=" beatmap-discussion--timeline"),this.props.preview&&(r+=" beatmap-discussion--preview"),"review"===this.props.discussion.message_type&&(r+=" beatmap-discussion--review"),n="beatmap-discussion__line",this.props.discussion.resolved&&(n+=" beatmap-discussion__line--resolved"),this._resolvedSystemPostId=null,t=this.props.discussion.starting_post||this.props.discussion.posts[0],e=(s=this.props.users[this.props.discussion.user_id]).id===this.props.beatmapset.user_id?v.a:s.group_badge,_.includes(this.props.readPostIds,t.id)||this.isOwner(t)||this.props.preview||(r+=" beatmap-discussion--unread"),Object(c.div)({className:r,"data-id":this.props.discussion.id,onClick:this.emitSetHighlight},Object(c.div)({className:"beatmap-discussion__timestamp hidden-xs"},this.timestamp()),Object(c.div)({className:"beatmap-discussion__compact"},Object(c.div)({className:"beatmap-discussion__discussion"},Object(c.div)({className:"beatmap-discussion__top",style:{color:osu.groupColour(e)}},Object(c.div)({className:"beatmap-discussion__discussion-header"},b(f.a,{user:s,badge:e,hideStripe:!0})),this.props.preview?void 0:this.postButtons()),Object(c.div)({className:"beatmap-discussion__review-wrapper"},this.post(t,"discussion",!0)),this.props.preview?void 0:this.postFooter(),Object(c.div)({className:n}))),Object(c.div)({className:"beatmap-discussion__full"},Object(c.div)({className:"beatmap-discussion__discussion"},Object(c.div)({className:"beatmap-discussion__top"},this.post(t,"discussion"),this.props.preview?void 0:this.postButtons()),this.props.preview?void 0:this.postFooter(),Object(c.div)({className:n}))))):null},t.prototype.postButtons=function(){return Object(c.div)({className:"beatmap-discussion__actions-container"},Object(c.div)({className:"beatmap-discussion__actions"},null!=this.props.parentDiscussion?Object(c.a)({href:BeatmapDiscussionHelper.url({discussion:this.props.parentDiscussion}),title:osu.trans("beatmap_discussions.review.go_to_parent"),className:"beatmap-discussion__link-to-parent"},Object(c.i)({className:"fas fa-tasks"})):void 0,["up","down"].map((e=this,function(t){return Object(c.div)({key:t,type:t,className:"beatmap-discussion__action",onMouseOver:e.showVoters,onTouchStart:e.showVoters},e.displayVote(t),e.voterList(t))})),Object(c.button)({className:"beatmap-discussion__action beatmap-discussion__action--with-line",onClick:this.toggleExpand},Object(c.div)({className:"beatmap-discussion-expand "+(this.state.collapsed?void 0:"beatmap-discussion-expand--expanded")},Object(c.i)({className:"fas fa-chevron-down"})))));var e},t.prototype.postFooter=function(){var e,t,n;return Object(c.div)({className:"beatmap-discussion__expanded "+(this.state.collapsed?"hidden":void 0)},Object(c.div)({className:"beatmap-discussion__replies"},function(){var r,s,o,i;for(i=[],r=0,s=(o=this.props.discussion.posts.slice(1)).length;r<s;r++)if(n=o[r],this.isVisible(n)){if(n.system&&"resolved"===n.message.type){if(e=n.message.value,t===e)continue;t=e}i.push(this.post(n,"reply"))}return i}.call(this)),this.canBeRepliedTo()?b(d,{currentUser:this.props.currentUser,beatmapset:this.props.beatmapset,currentBeatmap:this.props.currentBeatmap,discussion:this.props.discussion}):void 0)},t.prototype.displayVote=function(e){var t,n,r,s,o,i,a,u,l;if(l="beatmap-discussion-vote",t=(o=function(){switch(e){case"up":return[1,"thumbs-up"];case"down":return[-1,"thumbs-down"]}}())[0],s=o[1],null!=t)return n=null!=(i=this.props.discussion.current_user_attributes)?i.vote_score:void 0,u=l+" "+l+"--"+e,0!==(a=n===t?0:t)&&(u+=" "+l+"--inactive"),r=this.isOwner()||"down"===e&&!this.canDownvote()||!this.canBeRepliedTo(),Object(c.button)({className:u,"data-score":a,disabled:r,onClick:this.doVote},Object(c.i)({className:"fas fa-"+s}),Object(c.span)({className:l+"__count"},this.props.discussion.votes[e]))},t.prototype.voterList=function(e){return Object(c.div)({className:"user-list-popup user-list-popup__template js-user-list-popup--"+this.props.discussion.id+"-"+e,style:{display:"none"}},this.props.discussion.votes[e]<1?osu.trans("beatmaps.discussions.votes.none."+e):b(a.Fragment,null,Object(c.div)({className:"user-list-popup__title"},osu.trans("beatmaps.discussions.votes.latest."+e),":"),this.props.discussion.votes.voters[e].map((t=this,function(e){var n;return Object(c.a)({href:laroute.route("users.show",{user:e}),className:"js-usercard user-list-popup__user",key:e,"data-user-id":e},b(u.a,{user:null!=(n=t.props.users[e])?n:[],modifiers:["full"]}))})),this.props.discussion.votes[e]>this.props.discussion.votes.voters[e].length?Object(c.div)({className:"user-list-popup__remainder-count"},osu.transChoice("common.count.plus_others",this.props.discussion.votes[e]-this.props.discussion.votes.voters[e].length)):void 0));var t},t.prototype.getTooltipContent=function(e){return $(".js-user-list-popup--"+this.props.discussion.id+"-"+e).html()},t.prototype.refreshTooltip=function(e,t){if(e)return e.set("content.text",this.getTooltipContent(t))},t.prototype.showVoters=function(e){var t,n,r;if(t=e.currentTarget,!(this.props.favcount<1||t._tooltip))return t._tooltip=!0,n=t.getAttribute("type"),this.tooltips[n]=$(t).qtip({style:{classes:"user-list-popup",def:!1,tip:!1},content:{text:(r=this,function(e,t){return r.getTooltipContent(n)})},position:{at:"top center",my:"bottom center",viewport:$(window)},show:{delay:100,ready:!0,solo:!0,effect:function(){return $(this).fadeTo(110,1)}},hide:{fixed:!0,delay:500,effect:function(){return $(this).fadeTo(250,0)}}})},t.prototype.doVote=function(e){var t;return LoadingOverlay.show(),null!=(t=this.voteXhr)&&t.abort(),this.voteXhr=$.ajax(laroute.route("beatmap-discussions.vote",{beatmap_discussion:this.props.discussion.id}),{method:"PUT",data:{beatmap_discussion_vote:{score:e.currentTarget.dataset.score}}}).done((function(e){return $.publish("beatmapsetDiscussions:update",{beatmapset:e})})).fail(osu.ajaxError).always(LoadingOverlay.hide)},t.prototype.emitSetHighlight=function(){return $.publish("beatmapDiscussionEntry:highlight",{id:this.props.discussion.id})},t.prototype.isOwner=function(e){return null==e&&(e=this.props.discussion),null!=this.props.currentUser.id&&e.user_id===this.props.currentUser.id},t.prototype.isVisible=function(e){return null!=e&&(this.props.showDeleted||null==e.deleted_at)},t.prototype.canDownvote=function(){return this.props.currentUser.is_admin||this.props.currentUser.is_moderator||this.props.currentUser.is_bng},t.prototype.canBeRepliedTo=function(){return(!this.props.beatmapset.discussion_locked||BeatmapDiscussionHelper.canModeratePosts(this.props.currentUser))&&(null==this.props.discussion.beatmap_id||null==this.props.currentBeatmap.deleted_at)},t.prototype.post=function(e,t,n){var r,s,o,i,a;if(null!=e.id)return i=e.system?m:h.a,o=BeatmapDiscussionHelper.canModeratePosts(this.props.currentUser),s=this.isOwner(e)&&e.id>this.resolvedSystemPostId()&&!this.props.beatmapset.discussion_locked,r="discussion"===t?null!=(a=this.props.discussion.current_user_attributes)?a.can_destroy:void 0:o||s,b(i,{key:e.id,beatmapset:this.props.beatmapset,beatmap:this.props.currentBeatmap,discussion:this.props.discussion,post:e,type:t,read:_.includes(this.props.readPostIds,e.id)||this.isOwner(e)||this.props.preview,users:this.props.users,user:this.props.users[e.user_id],lastEditor:this.props.users[e.last_editor_id],canBeEdited:this.props.currentUser.is_admin||s,canBeDeleted:r,canBeRestored:o,currentUser:this.props.currentUser,hideUserCard:n})},t.prototype.resolvedSystemPostId=function(){var e,t;return null==this._resolvedSystemPostId&&(t=_.findLast(this.props.discussion.posts,(function(e){return e.system&&"resolved"===e.message.type})),this._resolvedSystemPostId=null!=(e=null!=t?t.id:void 0)?e:-1),this._resolvedSystemPostId},t.prototype.setCollapse=function(e,t){var n,r;if(n=t.collapse,this.props.visible&&(r="collapse"===n,this.state.collapsed!==r))return this.setState({collapsed:r})},t.prototype.setHighlight=function(e,t){var n;if(n=t.id===this.props.discussion.id,this.state.highlighted!==n)return this.setState({highlighted:n})},t.prototype.timestamp=function(){var e;return e="beatmap-discussion-timestamp",Object(c.div)({className:e},null!=this.props.discussion.timestamp&&this.props.isTimelineVisible?Object(c.div)({className:e+"__point"}):void 0,Object(c.div)({className:e+"__icons-container"},Object(c.div)({className:e+"__icons"},Object(c.div)({className:e+"__icon"},Object(c.span)({className:"beatmap-discussion-message-type beatmap-discussion-message-type--"+_.kebabCase(this.props.discussion.message_type)},Object(c.i)({className:BeatmapDiscussionHelper.messageType.icon[_.camelCase(this.props.discussion.message_type)]}))),this.props.discussion.resolved?Object(c.div)({className:e+"__icon "+e+"__icon--resolved"},Object(c.i)({className:"far fa-check-circle"})):void 0),Object(c.div)({className:e+"__text"},BeatmapDiscussionHelper.formatTimestamp(this.props.discussion.timestamp))))},t.prototype.toggleExpand=function(){return this.setState({collapsed:!this.state.collapsed})},t}(a.PureComponent)},mPRR:function(e,t,n){"use strict";var r=n("b4M7");e.exports=function(e){return r(e).toLowerCase()}},mQSo:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,s=n("cDcd"),o=n("NzAu"),i=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty;s.createElement,r="beatmapset-mapping";var c=function(e){function t(){return this.renderDate=i(this.renderDate,this),this.render=i(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n;return n={id:this.props.beatmapset.user_id,username:this.props.beatmapset.creator,avatar_url:null!=(e=null!=(t=this.props.user)?t:this.props.beatmapset.user)?e.avatar_url:void 0},Object(o.div)({className:r},null!=n.id?Object(o.a)({href:laroute.route("users.show",{user:n.id}),className:"avatar avatar--beatmapset",style:{backgroundImage:osu.urlPresence(n.avatar_url)}}):Object(o.span)({className:"avatar avatar--beatmapset avatar--guest"}),Object(o.div)({className:r+"__content"},Object(o.div)({className:r+"__mapper",dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.mapped_by",{mapper:this.userLink(n)})}}),this.renderDate("submitted","submitted_date"),this.props.beatmapset.ranked>0?this.renderDate(this.props.beatmapset.status,"ranked_date"):this.renderDate("updated","last_updated")))},t.prototype.renderDate=function(e,t){return Object(o.div)({className:r+"__date",dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details_date."+e,{timeago:osu.timeago(this.props.beatmapset[t])})}})},t.prototype.userLink=function(e){var t;return null!=e.id?laroute.link_to_route("users.show",e.username,{user:e.id},{class:r+"__user js-usercard","data-user-id":e.id}):"<span class='"+r+"__user'>"+_.escape(null!=(t=e.username)?t:osu.trans("users.deleted"))+"</span>"},t}(s.PureComponent)},mjdM:function(e,t,n){"use strict";var r=n("cF9b"),s=n("h/Ip"),o=n("9zVE"),i=n("cDcd");let a=class extends i.Component{constructor(){super(...arguments),this.handleContainerClick=e=>{osu.isClickable(e.target)||null!=this.props.markRead&&this.props.markRead()}}get canMarkAsRead(){var e;return null!=(e=this.props.canMarkAsRead)?e:this.props.item.canMarkRead}render(){return i.createElement("div",{className:this.blockClass(),onClick:this.handleContainerClick},this.renderCover(),i.createElement("div",{className:"notification-popup-item__main"},i.createElement("div",{className:"notification-popup-item__content"},this.renderCategory(),this.renderMessage(),this.renderTime(),this.renderExpandButton()),this.renderMarkAsReadButton()),this.renderUnreadStripe())}blockClass(){const e=[...this.props.modifiers,this.props.item.category];return this.props.item.isRead&&!this.props.canMarkAsRead&&e.push("read"),`clickable-row ${osu.classWithModifiers("notification-popup-item",e)}`}renderCategory(){if(!this.props.withCategory)return null;const e=osu.trans(`notifications.item.${this.props.item.displayType}.${this.props.item.category}._`);return""===e?null:i.createElement("div",{className:"notification-popup-item__row notification-popup-item__row--category"},e)}renderCover(){const e=this.props.withCoverImage?this.props.item.details.coverUrl:null;return i.createElement("div",{className:"notification-popup-item__cover",style:{backgroundImage:osu.urlPresence(e)}},i.createElement("div",{className:"notification-popup-item__cover-overlay"},this.renderCoverIcons()))}renderCoverIcons(){return null==this.props.icons?null:this.props.icons.map(e=>i.createElement("div",{key:e,className:"notification-popup-item__cover-icon"},i.createElement("span",{className:e})))}renderExpandButton(){return null==this.props.expandButton?null:i.createElement("div",{className:"notification-popup-item__row notification-popup-item__row--expand"},this.props.expandButton)}renderMarkAsReadButton(){var e;return this.canMarkAsRead?i.createElement(o.a,{isMarkingAsRead:(e=this.props.markingAsRead,null!=e?e:this.props.item.isMarkingAsRead),modifiers:["fancy"],onMarkAsRead:this.props.markRead}):null}renderMessage(){return i.createElement("a",{onClick:this.props.markRead,href:this.props.url,className:"notification-popup-item__row notification-popup-item__row--message clickable-row-link"},this.props.message)}renderTime(){if(null!=this.props.item.createdAtJson)return i.createElement("div",{className:"notification-popup-item__row notification-popup-item__row--time",dangerouslySetInnerHTML:{__html:osu.timeago(this.props.item.createdAtJson)}})}renderUnreadStripe(){return this.context.isWidget||!this.canMarkAsRead?null:i.createElement("span",{className:"notification-popup-item__unread-stripe"})}};a.contextType=s.a,a=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([r.d],a),t.a=a},mk7q:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cDcd");function s(e){const t=Object.keys(e.mappings),n=new RegExp(`(${t.join("|")})`),s=e.pattern.split(n);return r.createElement(r.Fragment,null,s.map(t=>e.mappings[t]?e.mappings[t]:t))}},nHh1:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===s.call(e)},c=function(e){if(!e||"[object Object]"!==s.call(e))return!1;var t,n=r.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!o)return!1;for(t in e);return void 0===t||r.call(e,t)},u=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(i)return i(e,t).value}return e[t]};e.exports=function e(){var t,n,r,s,o,i,p=arguments[0],d=1,h=arguments.length,m=!1;for("boolean"==typeof p&&(m=p,p=arguments[1]||{},d=2),(null==p||"object"!=typeof p&&"function"!=typeof p)&&(p={});d<h;++d)if(null!=(t=arguments[d]))for(n in t)r=l(p,n),p!==(s=l(t,n))&&(m&&s&&(c(s)||(o=a(s)))?(o?(o=!1,i=r&&a(r)?r:[]):i=r&&c(r)?r:{},u(p,{name:n,newValue:e(m,i,s)})):void 0!==s&&u(p,{name:n,newValue:s}));return p}},nfvb:function(e,t,n){"use strict";(function(t){var r=n("RnBu"),s=n("EiUu"),o=n("X9sK");e.exports=u;var i={}.hasOwnProperty,a=u.prototype,c=["history","path","basename","stem","extname","dirname"];function u(e){var n,r,s;if(e){if("string"==typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof u))return new u(e);for(this.data={},this.messages=[],this.history=[],this.cwd=t.cwd(),r=-1,s=c.length;++r<s;)n=c[r],i.call(e,n)&&(this[n]=e[n]);for(n in e)-1===c.indexOf(n)&&(this[n]=e[n])}function l(e,t){if(-1!==e.indexOf(r.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+r.sep+"`")}function p(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function d(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}a.toString=function(e){var t=this.contents||"";return o(t)?t.toString(e):String(t)},Object.defineProperty(a,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){p(e,"path"),e!==this.path&&this.history.push(e)}}),Object.defineProperty(a,"dirname",{get:function(){return"string"==typeof this.path?r.dirname(this.path):void 0},set:function(e){d(this.path,"dirname"),this.path=r.join(e||"",this.basename)}}),Object.defineProperty(a,"basename",{get:function(){return"string"==typeof this.path?r.basename(this.path):void 0},set:function(e){p(e,"basename"),l(e,"basename"),this.path=r.join(this.dirname||"",e)}}),Object.defineProperty(a,"extname",{get:function(){return"string"==typeof this.path?r.extname(this.path):void 0},set:function(e){var t=e||"";if(l(t,"extname"),d(this.path,"extname"),t){if("."!==t.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==t.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=s(this.path,t)}}),Object.defineProperty(a,"stem",{get:function(){return"string"==typeof this.path?r.basename(this.path,this.extname):void 0},set:function(e){p(e,"stem"),l(e,"stem"),this.path=r.join(this.dirname||"",e+(this.extname||""))}})}).call(this,n("2YuA"))},nvaN:function(e,t,n){"use strict";function r(e){if("string"==typeof e)return function(e){return function(t){return Boolean(t&&t.type===e)}}(e);if(null==e)return i;if("object"==typeof e)return("length"in e?o:s)(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function s(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function o(e){var t=function(e){for(var t=[],n=e.length,s=-1;++s<n;)t[s]=r(e[s]);return t}(e),n=t.length;return function(){for(var e=-1;++e<n;)if(t[e].apply(this,arguments))return!0;return!1}}function i(){return!0}e.exports=r},nxXY:function(e,t,n){"use strict";function r(e){return`${e.objectType}-${e.objectId}-${e.category}`}function s(e){return null!=e.objectId&&null!=e.category?null!=e.id?"notification":"stack":"type"}function o(e){return{category:e.category,id:e.id,objectId:e.object_id,objectType:e.object_type}}function i(e){return{category:e.category,id:e.id,object_id:e.objectId,object_type:e.objectType}}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i}))},oQBk:function(e,t,n){"use strict";var r=n("cDcd");const s=Object(r.createContext)({isFriendsPage:!1});t.a=s},oQpG:function(e,t,n){"use strict";var r=n("Jryd"),s=n("1OSS");e.exports=function(e){return n.raw=function(e,n,i){return s(e,r(i,{position:t(n),warning:o}))},n;function t(t){for(var n=e.offset,r=t.line,s=[];++r&&r in n;)s.push((n[r]||0)+1);return{start:t,indent:s}}function n(n,r,i){s(n,{position:t(r),warning:o,text:i,reference:i,textContext:e,referenceContext:e})}function o(t,n,r){3!==r&&e.file.message(t,n)}}},on4i:function(e,t,n){"use strict";e.exports=i;var r=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],s=r.concat(["~","|"]),o=s.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function i(e){var t=e||{};return t.commonmark?o:t.gfm?s:r}i.default=r,i.gfm=s,i.commonmark=o},p3jD:function(e,t,n){"use strict";e.exports=function(e){for(var t,n=0,a=0,c=e.charAt(n),u={};c===r||c===s;)a+=t=c===r?i:o,t>1&&(a=Math.floor(a/t)*t),u[a]=n,c=e.charAt(++n);return{indent:a,stops:u}};var r="\t",s=" ",o=1,i=4},"pI+u":function(e,t,n){"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})}},pL8D:function(e,t,n){"use strict";e.exports=function(e,t,n){for(var c,u,l,p=this.options.pedantic,d=t.length+1,h=-1,m=e.now(),f="",v="";++h<d;){if((c=t.charAt(h))!==o&&c!==s){h--;break}f+=c}for(l=0;++h<=d;){if((c=t.charAt(h))!==i){h--;break}f+=c,l++}if(!(l>a)&&l&&(p||t.charAt(h+1)!==i)){for(d=t.length+1,u="";++h<d;){if((c=t.charAt(h))!==o&&c!==s){h--;break}u+=c}if(p||0!==u.length||!c||c===r){if(n)return!0;for(f+=u,u="",v="";++h<d&&(c=t.charAt(h))&&c!==r;)if(c===o||c===s||c===i){for(;c===o||c===s;)u+=c,c=t.charAt(++h);if(p||!v||u||c!==i){for(;c===i;)u+=c,c=t.charAt(++h);for(;c===o||c===s;)u+=c,c=t.charAt(++h);h--}else v+=c}else v+=u+c,u="";return m.column+=f.length,m.offset+=f.length,e(f+=v+u)({type:"heading",depth:l,children:this.tokenizeInline(v,m)})}}};var r="\n",s="\t",o=" ",i="#",a=6},pLKd:function(e,t,n){"use strict";var r=n("Jryd"),s=n("Qu9x");e.exports=function(){var e,t=String(this.file),n={line:1,column:1,offset:0},a=r(n);return 65279===(t=t.replace(i,o)).charCodeAt(0)&&(t=t.slice(1),a.column++,a.offset++),e={type:"root",children:this.tokenizeBlock(t,a),position:{start:n,end:this.eof||r(n)}},this.options.position||s(e,!0),e};var o="\n",i=/\r\n|\r/g},pVYY:function(e,t,n){"use strict";var r=n("ulNQ"),s=n("nfvb");e.exports=s;var o=s.prototype;o.message=function(e,t,n){var s=this.path,o=new r(e,t,n);return s&&(o.name=s+":"+o.name,o.file=s),o.fatal=!1,this.messages.push(o),o},o.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},o.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},"q3z+":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,s=n("+AAq"),o=n("NW+U"),i=n("cDcd"),a=n("NzAu"),c=n("mk7q"),u=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty;r=i.createElement;var p=function(e){function t(e){this.previewStop=u(this.previewStop,this),this.previewStart=u(this.previewStart,this),this.previewInitializing=u(this.previewInitializing,this),this.render=u(this.render,this),this.componentWillUnmount=u(this.componentWillUnmount,this),this.componentDidMount=u(this.componentDidMount,this),t.__super__.constructor.call(this,e),this.eventId="beatmapsetPanel-"+e.beatmap.beatmapset_id+"-"+osu.uuid(),this.state={preview:"ended",previewDuration:0}}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.componentDidMount=function(){return $.subscribe("osuAudio:initializing."+this.eventId,this.previewInitializing),$.subscribe("osuAudio:playing."+this.eventId,this.previewStart),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop),$(document).on("turbolinks:before-cache."+this.eventId,this.componentWillUnmount)},t.prototype.componentWillUnmount=function(){return this.previewStop(),$.unsubscribe("."+this.eventId),$(document).off("."+this.eventId)},t.prototype.hideImage=function(e){return e.currentTarget.style.display="none"},t.prototype.render=function(){var e,t,n,i,u,l,p,d,h,m,f,v,b,y,g;return n=this.props.beatmap,(g=_.includes(["wip","pending","graveyard"],n.status))&&(u=osu.formatNumber(n.hype.current),b=osu.formatNumber(n.hype.required),l=osu.formatNumber(n.nominations.current),y=osu.formatNumber(n.nominations.required)),f=osu.formatNumber(n.play_count),d=osu.formatNumber(n.favourite_count),i=n.beatmaps.length>10,h=BeatmapHelper.group(n.beatmaps),p=function(){var n,o,c,u;for(u=[],n=0,o=(c=BeatmapHelper.modes).length;n<o;n++)m=c[n],null!=(t=h[m])&&(i?u.push([r(s.a,{key:m+"-icon",beatmap:_.last(t),showTitle:!1}),Object(a.span)({className:"beatmapset-panel__difficulty-count",key:m+"-count"},t.length)]):u.push(function(){var n,o,i;for(i=[],n=0,o=t.length;n<o;n++)e=t[n],i.push(Object(a.div)({className:"beatmapset-panel__difficulty-icon",key:e.id},r(s.a,{beatmap:e})));return i}()));return u}(),Object(a.div)({className:"beatmapset-panel"+("ended"!==this.state.preview?" beatmapset-panel--previewing":"")},Object(a.div)({className:"beatmapset-panel__panel"},Object(a.a)({href:laroute.route("beatmapsets.show",{beatmapset:n.id}),className:"beatmapset-panel__header"},r(o.a,{className:"beatmapset-panel__image",onError:this.hideImage,src:n.covers.card}),Object(a.div)({className:"beatmapset-panel__image-overlay"}),Object(a.div)({className:"beatmapset-panel__status-container"},n.video?Object(a.div)({className:"beatmapset-panel__extra-icon"},Object(a.i)({className:"fas fa-film fa-fw"})):void 0,n.storyboard?Object(a.div)({className:"beatmapset-panel__extra-icon"},Object(a.i)({className:"fas fa-image fa-fw"})):void 0,Object(a.div)({className:"beatmapset-status"},osu.trans("beatmapsets.show.status."+n.status))),Object(a.div)({className:"beatmapset-panel__title-artist-box"},Object(a.div)({className:"u-ellipsis-overflow beatmapset-panel__header-text beatmapset-panel__header-text--title"},n.title),Object(a.div)({className:"beatmapset-panel__header-text"},n.artist)),Object(a.div)({className:"beatmapset-panel__counts-box"},g?Object(a.div)(null,Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.hype.required_text",{current:u,required:b})},Object(a.span)({className:"beatmapset-panel__count-number"},u),Object(a.i)({className:"fas fa-bullhorn fa-fw"})),Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.nominations.required_text",{current:l,required:y})},Object(a.span)({className:"beatmapset-panel__count-number"},l),Object(a.i)({className:"fas fa-thumbs-up fa-fw"}))):Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.panel.playcount",{count:f})},Object(a.span)({className:"beatmapset-panel__count-number"},f),Object(a.i)({className:"fas fa-fw fa-play-circle"})),Object(a.div)({className:"beatmapset-panel__count",title:osu.trans("beatmaps.panel.favourites",{count:d})},Object(a.span)({className:"beatmapset-panel__count-number"},d),Object(a.i)({className:"fas fa-fw fa-heart"}))),Object(a.div)({className:"beatmapset-panel__preview-bar",style:{transitionDuration:this.state.previewDuration+"s",width:""+("playing"===this.state.preview?"100%":0)}})),Object(a.div)({className:"beatmapset-panel__content"},Object(a.div)({className:"beatmapset-panel__row"},Object(a.div)({className:"beatmapset-panel__mapper-source-box"},Object(a.div)({className:"u-ellipsis-overflow"},r(c.a,{pattern:osu.trans("beatmapsets.show.details.mapped_by"),mappings:{":mapper":Object(a.a)({key:"mapper",href:laroute.route("users.show",{user:n.user_id}),className:"js-usercard","data-user-id":n.user_id},Object(a.strong)(null,n.creator))}})),Object(a.div)({className:"u-ellipsis-overflow"},"graveyard"===(v=n.status)||"wip"===v||"pending"===v?Object(a.span)({dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.updated_timeago",{timeago:osu.timeago(n.last_updated)})}}):n.source)),Object(a.div)({className:"beatmapset-panel__icons-box"},("undefined"!=typeof currentUser&&null!==currentUser?currentUser.id:void 0)?n.availability.download_disabled?Object(a.div)({title:osu.trans("beatmapsets.availability.disabled"),className:"beatmapset-panel__icon beatmapset-panel__icon--disabled"},Object(a.i)({className:"fas fa-lg fa-download"})):Object(a.a)({href:laroute.route("beatmapsets.download",{beatmapset:n.id}),title:osu.trans("beatmapsets.show.details.download._"),className:"beatmapset-panel__icon js-beatmapset-download-link","data-turbolinks":"false"},Object(a.i)({className:"fas fa-lg fa-download"})):void 0)),Object(a.div)({className:"beatmapset-panel__difficulties"},p))),Object(a.a)({href:"#",className:"beatmapset-panel__play js-audio--play","data-audio-url":n.preview_url},Object(a.i)({className:"fas fa-"+("ended"===this.state.preview?"play":"stop")})),Object(a.div)({className:"beatmapset-panel__shadow"}))},t.prototype.previewInitializing=function(e,t){var n;return n=t.url,t.player,n!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"initializing",previewDuration:0})},t.prototype.previewStart=function(e,t){var n,r;return r=t.url,n=t.player,r!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"playing",previewDuration:n.duration})},t.prototype.previewStop=function(){if("ended"!==this.state.preview)return this.setState({preview:"ended",previewDuration:0})},t}(i.PureComponent)},q7YD:function(e,t,n){"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,footnotes:!1,pedantic:!1,blocks:n("UpvM")}},qpPZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cDcd"),s=n("SYfz");class o extends r.Component{render(){let e="header-v4";return this.props.theme&&(e+=` header-v4--${this.props.theme}`),currentUser.is_restricted&&(e+=" header-v4--restricted"),r.createElement("div",{className:e},r.createElement("div",{className:"header-v4__container header-v4__container--main"},r.createElement("div",{className:"header-v4__bg-container"},r.createElement("div",{className:"header-v4__bg",style:{backgroundImage:osu.urlPresence(this.props.backgroundImage)}})),this.props.isCoverUpdating&&r.createElement("div",{className:"header-v4__spinner"},r.createElement(s.a,null)),r.createElement("div",{className:"header-v4__content"},this.props.contentPrepend,r.createElement("div",{className:"header-v4__row header-v4__row--title"},r.createElement("div",{className:"header-v4__icon"}),r.createElement("div",{className:"header-v4__title"},this.title()),this.props.titleAppend),this.props.contentAppend)),this.props.links.length>0&&r.createElement("div",{className:"header-v4__container"},r.createElement("div",{className:"header-v4__content"},r.createElement("div",{className:"header-v4__row header-v4__row--bar"},this.renderLinks(),this.renderLinksMobile()))))}renderLinks(){const e=this.props.links.map(e=>{const t=[];return e.active&&t.push("active"),r.createElement("li",{className:"header-nav-v4__item",key:`${e.url}-${e.title}`},r.createElement("a",Object.assign({className:osu.classWithModifiers("header-nav-v4__link",t),href:e.url,onClick:this.props.onLinkClick},e.data),r.createElement("span",{className:"fake-bold","data-content":e.title},e.title)))}),t=this.props.linksBreadcrumb?"ol":"ul",n=[];return n.push(this.props.linksBreadcrumb?"breadcrumb":"list"),r.createElement(t,{className:osu.classWithModifiers("header-nav-v4",n)},e)}renderLinksMobile(){if(this.props.linksBreadcrumb)return null;if(0===this.props.links.length)return null;let e=this.props.links[0];const t=this.props.links.map(t=>{return t.active&&([].push("active"),e=t),r.createElement("li",{key:`${t.url}-${t.title}`},r.createElement("a",Object.assign({className:"header-nav-mobile__item js-click-menu--close",href:t.url,onClick:this.props.onLinkClick},t.data),t.title))});return r.createElement("div",{className:"header-nav-mobile"},r.createElement("a",{className:"header-nav-mobile__toggle js-click-menu","data-click-menu-target":"header-nav-mobile",href:e.url},e.title,r.createElement("span",{className:"header-nav-mobile__toggle-icon"},r.createElement("span",{className:"fas fa-chevron-down"}))),r.createElement("ul",{className:"header-nav-mobile__menu js-click-menu","data-click-menu-id":"header-nav-mobile","data-visibility":"hidden"},t))}title(){const e=osu.parseJson("json-route-section");if(null!=e){const t=[`page_title.${e.namespace}.${e.controller}.${e.action}`,`page_title.${e.namespace}.${e.controller}._`,`page_title.${e.namespace}._`];for(const e of t)if(osu.transExists(e,fallbackLocale))return osu.trans(e)}return"unknown"}}o.defaultProps={links:[],linksBreadcrumb:!1}},qs9r:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},sTr9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("YLtl"),s=n("EaLk"),o=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class i{constructor(e){this.firstMessageId=-1,this.lastMessageId=-1,this.loaded=!1,this.loading=!1,this.loadingEarlierMessages=!1,this.messages=Object(s.l)([]),this.metaLoaded=!1,this.moderated=!1,this.name="",this.newChannel=!1,this.type="NEW",this.users=[],this.updatePresence=e=>{var t;this.name=e.name,this.description=e.description,this.type=e.type,this.icon=e.icon||"/images/layout/chat/channel-default.png",this.lastReadId=e.last_read_id;const n=r.max([this.lastMessageId,e.last_message_id]);this.lastMessageId=null!=n?n:-1,this.firstMessageId=null!=(t=e.first_message_id)?t:-1,this.users=e.users,this.metaLoaded=!0},this.channelId=e}get isUnread(){return null!=this.lastReadId?this.lastMessageId>this.lastReadId:this.lastMessageId>-1}get exists(){return this.channelId>0}get hasEarlierMessages(){var e;return this.firstMessageId!==(null===(e=this.messages[0])||void 0===e?void 0:e.messageId)}get minMessageId(){var e,t;const n=null!=(t=null===(e=this.messages[0])||void 0===e?void 0:e.messageId)?t:-1;return"number"==typeof n?n:-1}get pmTarget(){if("PM"===this.type)return this.users.find(e=>e!==currentUser.id)}static fromJSON(e){const t=Object.create(i.prototype);return Object.assign(t,{channelId:e.channel_id,name:e.name,type:e.type,description:e.description,firstMessageId:e.first_message_id,icon:e.icon,lastMessageId:e.last_message_id,lastReadId:e.last_read_id})}static newPM(e){const t=new i(-1);return t.newChannel=!0,t.type="PM",t.name=e.username,t.icon=e.avatarUrl,t.users=[currentUser.id,e.id],t}addMessages(e,t=!1){Object(s.p)(()=>{this.messages=this.messages.concat(e),t||this.resortMessages();const n=r([].concat(e)).filter(e=>"number"==typeof e.messageId).maxBy("messageId");let s;(s=null!=n&&"number"==typeof n.messageId?n.messageId:-1)>this.lastMessageId&&(this.lastMessageId=s)})}resortMessages(){this.messages=r(this.messages).sortBy("timestamp").uniqBy("messageId").value()}unload(){this.messages=Object(s.l)([])}updateMessage(e){const t=r.find(this.messages,{uuid:e.uuid});t&&(t.update(e),t.errored?t.messageId=t.uuid:t.persist())}}o([s.l],i.prototype,"channelId",void 0),o([s.l],i.prototype,"description",void 0),o([s.l],i.prototype,"icon",void 0),o([s.l],i.prototype,"lastMessageId",void 0),o([s.l],i.prototype,"lastReadId",void 0),o([s.l],i.prototype,"loaded",void 0),o([s.l],i.prototype,"loading",void 0),o([s.l],i.prototype,"loadingEarlierMessages",void 0),o([s.l],i.prototype,"messages",void 0),o([s.l],i.prototype,"metaLoaded",void 0),o([s.l],i.prototype,"moderated",void 0),o([s.l],i.prototype,"name",void 0),o([s.l],i.prototype,"newChannel",void 0),o([s.l],i.prototype,"type",void 0),o([s.l],i.prototype,"users",void 0),o([s.e],i.prototype,"isUnread",null),o([s.e],i.prototype,"exists",null),o([s.e],i.prototype,"hasEarlierMessages",null),o([s.e],i.prototype,"minMessageId",null),o([s.e],i.prototype,"pmTarget",null),o([s.d],i.prototype,"addMessages",null),o([s.d],i.prototype,"resortMessages",null),o([s.d],i.prototype,"unload",null),o([s.d],i.prototype,"updateMessage",null),o([s.d],i.prototype,"updatePresence",void 0)},srn7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("EaLk"),s=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class o{constructor(e){this.avatarUrl="/images/layout/avatar-guest.png",this.countryCode="XX",this.isActive=!1,this.isBot=!1,this.isOnline=!1,this.isSupporter=!1,this.loaded=!1,this.pmFriendsOnly=!1,this.profileColour="",this.username="",this.id=e}static fromJSON(e){const t=Object.create(o.prototype);return Object.assign(t,{avatarUrl:e.avatar_url,countryCode:e.country_code,id:e.id,isActive:e.is_active,isBot:e.is_bot,isOnline:e.is_online,isSupporter:e.is_supporter,loaded:!0,pmFriendsOnly:e.pm_friends_only,profileColour:e.profile_colour,username:e.username})}is(e){return e.id===this.id}load(){}toJSON(){return{avatar_url:this.avatarUrl,country_code:this.countryCode,id:this.id,is_active:this.isActive,is_bot:this.isBot,is_online:this.isOnline,is_supporter:this.isSupporter,pm_friends_only:this.pmFriendsOnly,profile_colour:this.profileColour,username:this.username}}updateFromJSON(e){var t;this.username=e.username,this.avatarUrl=e.avatar_url,this.profileColour=null!=(t=e.profile_colour)?t:"",this.countryCode=e.country_code,this.isSupporter=e.is_supporter,this.isActive=e.is_active,this.isBot=e.is_bot,this.isOnline=e.is_online,this.pmFriendsOnly=e.pm_friends_only,this.loaded=!0}}s([r.l],o.prototype,"avatarUrl",void 0),s([r.l],o.prototype,"countryCode",void 0),s([r.l],o.prototype,"id",void 0),s([r.l],o.prototype,"isActive",void 0),s([r.l],o.prototype,"isBot",void 0),s([r.l],o.prototype,"isOnline",void 0),s([r.l],o.prototype,"isSupporter",void 0),s([r.l],o.prototype,"loaded",void 0),s([r.l],o.prototype,"pmFriendsOnly",void 0),s([r.l],o.prototype,"profileColour",void 0),s([r.l],o.prototype,"username",void 0),s([r.d],o.prototype,"updateFromJSON",null)},tmLN:function(e,t,n){"use strict";var r=n("DGoX"),s=n("BhdQ");e.exports=function(e){return r(e)||s(e)}},txhI:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("cDcd"),s=n("NzAu"),o=n("faye"),i=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,c=function(e){function t(){this.renderPortalContent=i(this.renderPortalContent,this),this.render=i(this.render,this),this.hideModal=i(this.hideModal,this),this.handleMouseUp=i(this.handleMouseUp,this),this.handleMouseDown=i(this.handleMouseDown,this),this.handleEsc=i(this.handleEsc,this),this.componentWillUnmount=i(this.componentWillUnmount,this),this.componentDidUpdate=i(this.componentDidUpdate,this),this.componentDidMount=i(this.componentDidMount,this),this.ref=Object(r.createRef)()}return function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.isOpen=function(){return document.body.classList.contains("js-react-modal---is-open")},t.prototype.close=function(){return document.body.classList.remove("js-react-modal---is-open"),Blackout.toggle(!1,.5)},t.prototype.componentDidMount=function(){var e;return document.body.appendChild(this.portal),document.addEventListener("keydown",this.handleEsc),$(document).on("turbolinks:before-cache.modal",(e=this,function(){return e.close(),document.body.removeChild(e.portal)})),this.props.visible?this.open():this.close()},t.prototype.componentDidUpdate=function(e){if(e.visible!==this.props.visible)return this.props.visible?this.open():this.close()},t.prototype.componentWillUnmount=function(){return this.close(),document.removeEventListener("keydown",this.handleEsc),$(document).off(".modal")},t.prototype.handleEsc=function(e){var t;if(27===e.keyCode)return"function"==typeof(t=this.props).onClose?t.onClose():void 0},t.prototype.handleMouseDown=function(e){return this.clickStartTarget=e.target},t.prototype.handleMouseUp=function(e){return this.clickEndTarget=e.target},t.prototype.hideModal=function(e){var t;if(0===e.button&&e.target===this.ref.current&&this.clickEndTarget===this.clickStartTarget)return"function"==typeof(t=this.props).onClose?t.onClose():void 0},t.prototype.open=function(){return document.body.classList.add("js-react-modal---is-open"),Blackout.toggle(!0,.5)},t.prototype.render=function(){return null==this.portal&&(this.portal=document.createElement("div")),Object(o.createPortal)(this.renderPortalContent(),this.portal)},t.prototype.renderPortalContent=function(){return Object(s.div)({className:"js-react-modal",onClick:this.hideModal,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.ref},this.props.children)},t}(r.PureComponent)},uLnF:function(e,t,n){"use strict";e.exports=function(e,t){var n,s=r.length,o=-1,i=-1;if(!this.options.gfm)return-1;for(;++o<s;)-1!==(n=e.indexOf(r[o],t))&&(n<i||-1===i)&&(i=n);return i};var r=["https://","http://","mailto:"]},uNUE:function(e,t,n){"use strict";e.exports=a;var r=n("nvaN"),s=!0,o="skip",i=!1;function a(e,t,n,s){var a;"function"==typeof t&&"function"!=typeof n&&(s=n,n=t,t=null),a=r(t),function e(r,u,l){var p,d=[];return(t&&!a(r,u,l[l.length-1]||null)||(d=c(n(r,l)))[0]!==i)&&r.children&&d[0]!==o&&(p=c(function(t,n){for(var r,o=s?-1:1,a=(s?t.length:-1)+o;a>-1&&a<t.length;){if((r=e(t[a],a,n))[0]===i)return r;a="number"==typeof r[1]?r[1]:a+o}}(r.children,l.concat(r))))[0]===i?p:d}(e,null,[])}function c(e){return null!==e&&"object"==typeof e&&"length"in e?e:"number"==typeof e?[s,e]:[e]}a.CONTINUE=s,a.SKIP=o,a.EXIT=i},"uW+8":function(e,t,n){"use strict";class r{}var s=n("nxXY");n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));class o extends r{constructor(e,t){super(),this.data=e,this.context=t}}class i extends r{constructor(e){super(),this.data=e}}class a extends r{constructor(e,t){super(),this.data=e,this.readCount=t}static fromJson(e){const t=e.data.notifications.map(e=>Object(s.a)(e));return new a(t,e.data.read_count)}}},ulNQ:function(e,t,n){"use strict";var r=n("lNvx");function s(){}e.exports=i,s.prototype=Error.prototype,i.prototype=new s;var o=i.prototype;function i(e,t,n){var s,o,i;"string"==typeof t&&(n=t,t=null),s=function(e){var t,n=[null,null];return"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1))),n}(n),o=r(t)||"1:1",i={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(i=t,t=t.start):i.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=i,this.source=s[0],this.ruleId=s[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},v33t:function(e,t,n){"use strict";var r=n("AMMU"),s=n("XVa7");e.exports=b,b.locator=s;var o="\n",i="!",a='"',c="'",u="(",l=")",p="<",d=">",h="[",m="\\",f="]",v="`";function b(e,t,n){var s,b,y,g,_,w,O,j,k,E,S,x,N,T,A,P,C,D,R="",M=0,I=t.charAt(0),U=this.options.pedantic,L=this.options.commonmark,B=this.options.gfm;if(I===i&&(j=!0,R=I,I=t.charAt(++M)),I===h&&(j||!this.inLink)){for(R+=I,T="",M++,S=t.length,N=0,(P=e.now()).column+=M,P.offset+=M;M<S;){if(w=I=t.charAt(M),I===v){for(b=1;t.charAt(M+1)===v;)w+=I,M++,b++;y?b>=y&&(y=0):y=b}else if(I===m)M++,w+=t.charAt(M);else if(y&&!B||I!==h){if((!y||B)&&I===f){if(!N){if(!U)for(;M<S&&(I=t.charAt(M+1),r(I));)w+=I,M++;if(t.charAt(M+1)!==u)return;w+=u,s=!0,M++;break}N--}}else N++;T+=w,w="",M++}if(s){for(k=T,R+=T+w,M++;M<S&&(I=t.charAt(M),r(I));)R+=I,M++;if(T="",g=R,(I=t.charAt(M))===p){for(M++,g+=p;M<S&&(I=t.charAt(M))!==d;){if(L&&I===o)return;T+=I,M++}if(t.charAt(M)!==d)return;R+=p+T+d,A=T,M++}else{for(I=null,w="";M<S&&(I=t.charAt(M),!w||!(I===a||I===c||L&&I===u));){if(r(I)){if(!U)break;w+=I}else{if(I===u)N++;else if(I===l){if(0===N)break;N--}T+=w,w="",I===m&&(T+=m,I=t.charAt(++M)),T+=I}M++}A=T,M=(R+=T).length}for(T="";M<S&&(I=t.charAt(M),r(I));)T+=I,M++;if(I=t.charAt(M),R+=T,T&&(I===a||I===c||L&&I===u))if(M++,T="",E=I===u?l:I,_=R+=I,L){for(;M<S&&(I=t.charAt(M))!==E;)I===m&&(T+=m,I=t.charAt(++M)),M++,T+=I;if((I=t.charAt(M))!==E)return;for(x=T,R+=T+I,M++;M<S&&(I=t.charAt(M),r(I));)R+=I,M++}else for(w="";M<S;){if((I=t.charAt(M))===E)O&&(T+=E+w,w=""),O=!0;else if(O){if(I===l){R+=T+E+w,x=T;break}r(I)?w+=I:(T+=E+w+I,w="",O=!1)}else T+=I;M++}if(t.charAt(M)===l)return!!n||(R+=l,A=this.decode.raw(this.unescape(A),e(g).test().end,{nonTerminated:!1}),x&&(_=e(_).test().end,x=this.decode.raw(this.unescape(x),_)),D={type:j?"image":"link",title:x||null,url:A},j?D.alt=this.decode.raw(this.unescape(k),P)||null:(C=this.enterLink(),D.children=this.tokenizeInline(k,P),C()),e(R)(D))}}}},vt1Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,s=n("SYsv"),o=n("cDcd"),i=n("NzAu"),a=n("Ncbg"),c=n("mk7q"),u=n("+FrL"),l=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;r=o.createElement;var d=function(e){function t(){return this.render=l(this.render,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,e),t.prototype.render=function(){var e,t,n,o;return Object(i.div)({className:"page-extra"},r(s.a,{name:this.props.name,withEdit:this.props.withEdit}),Object(i.div)({className:"kudosu-box"},r(u.a,{modifiers:["kudosu"],label:osu.trans("users.show.extra.kudosu.total"),value:osu.formatNumber(this.props.user.kudosu.total),description:r(c.a,{mappings:{":link":Object(i.a)({href:laroute.route("wiki.show",{page:"Kudosu"}),key:"link"},osu.trans("users.show.extra.kudosu.total_info.link"))},pattern:osu.trans("users.show.extra.kudosu.total_info._")})}),r(u.a,{modifiers:["kudosu"],label:osu.trans("users.show.extra.kudosu.available"),value:osu.formatNumber(this.props.user.kudosu.available),description:osu.trans("users.show.extra.kudosu.available_info")})),(null!=(o=this.props.recentlyReceivedKudosu)?o.length:void 0)?Object(i.ul)({className:"profile-extra-entries profile-extra-entries--kudosu"},function(){var r,s,o,a,c,u,l,p;for(p=[],r=0,s=(o=this.props.recentlyReceivedKudosu).length;r<s;r++)null!=(t=o[r]).id&&(e=null!=t.giver?osu.link(t.giver.url,t.giver.username,{classNames:["profile-extra-entries__link profile-extra-entries__link--kudosu"]}):_.escape(osu.trans("users.deleted")),n=null!=(null!=(a=t.post)?a.url:void 0)?osu.link(null!=(c=t.post)?c.url:void 0,null!=(u=t.post)?u.title:void 0,{classNames:["profile-extra-entries__link profile-extra-entries__link--kudosu"]}):null!=(l=t.post)?l.title:void 0,p.push(Object(i.li)({key:"kudosu-"+t.id,className:"profile-extra-entries__item"},Object(i.div)({className:"profile-extra-entries__detail"},Object(i.div)({className:"profile-extra-entries__text",dangerouslySetInnerHTML:{__html:osu.trans("users.show.extra.kudosu.entry."+t.model+"."+t.action,{amount:"<strong class='profile-extra-entries__kudosu-amount'>"+osu.trans("users.show.extra.kudosu.entry.amount",{amount:Math.abs(t.amount)})+"</strong>",giver:e,post:n})}})),Object(i.div)({className:"profile-extra-entries__time",dangerouslySetInnerHTML:{__html:osu.timeago(t.created_at)}}))));return p}.call(this),Object(i.li)({className:"profile-extra-entries__item"},r(a.a,{modifiers:["profile-page","t-greyseafoam-dark"],event:"profile:showMore",hasMore:this.props.pagination.recentlyReceivedKudosu.hasMore,loading:this.props.pagination.recentlyReceivedKudosu.loading,data:{name:"recentlyReceivedKudosu",url:laroute.route("users.kudosu",{user:this.props.user.id})}}))):Object(i.div)({className:"profile-extra-entries profile-extra-entries--kudosu"},osu.trans("users.show.extra.kudosu.entry.empty")))},t}(o.Component)},w9NC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,s,o=n("EaLk"),i=n("cF9b"),a=n("f4vq"),c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};s=a.a.dataStore.uiState,r=React.createElement;var p=function(e){function t(e){var n,r;this.updateSort=c(this.updateSort,this),this.toggleFollow=c(this.toggleFollow,this),this.toggleShowDeleted=c(this.toggleShowDeleted,this),this.saveState=c(this.saveState,this),this.jsonStorageId=c(this.jsonStorageId,this),this.handleCommentUpdated=c(this.handleCommentUpdated,this),this.handleCommentsNew=c(this.handleCommentsNew,this),this.handleCommentsAdded=c(this.handleCommentsAdded,this),this.render=c(this.render,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidMount=c(this.componentDidMount,this),t.__super__.constructor.call(this,e),null!=e.commentableType&&null!=e.commentableId&&(null!=(n=osu.parseJson("json-comments-"+e.commentableType+"-"+e.commentableId,!0))&&(a.a.dataStore.updateWithCommentBundleJSON(n),s.initializeWithCommentBundleJSON(n)),null!=(r=osu.parseJson(this.jsonStorageId()))&&s.importCommentsUIState(r)),this.id="comments-"+osu.uuid()}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,React.PureComponent),t.prototype.SORTS=["new","old","top"],t.prototype.componentDidMount=function(){return $.subscribe("comments:added."+this.id,this.handleCommentsAdded),$.subscribe("comments:new."+this.id,this.handleCommentsNew),$.subscribe("comments:sort."+this.id,this.updateSort),$.subscribe("comments:toggle-show-deleted."+this.id,this.toggleShowDeleted),$.subscribe("comments:toggle-follow."+this.id,this.toggleFollow),$.subscribe("comment:updated."+this.id,this.handleCommentUpdated),$(document).on("turbolinks:before-cache."+this.id,this.saveState)},t.prototype.componentWillUnmount=function(){return $.unsubscribe("."+this.id)},t.prototype.render=function(){return r(i.a,null,(e=this,function(){var t;return(t=_.assign({},e.props.componentProps)).commentableId=e.props.commentableId,t.commentableType=e.props.commentableType,r(e.props.component,t)}));var e},t.prototype.handleCommentsAdded=function(e,t){return Object(o.n)((function(){return a.a.dataStore.updateWithCommentBundleJSON(t),s.updateFromCommentsAdded(t)}))},t.prototype.handleCommentsNew=function(e,t){return Object(o.n)((function(){return a.a.dataStore.updateWithCommentBundleJSON(t),s.updateFromCommentsNew(t)}))},t.prototype.handleCommentUpdated=function(e,t){return Object(o.n)((function(){return a.a.dataStore.updateWithCommentBundleJSON(t),s.updateFromCommentUpdated(t)}))},t.prototype.jsonStorageId=function(){return"json-comments-manager-state-"+this.props.commentableType+"-"+this.props.commentableId},t.prototype.saveState=function(){if(null!=this.props.commentableType&&null!=this.props.commentableId)return osu.storeJson(this.jsonStorageId(),s.exportCommentsUIState())},t.prototype.toggleShowDeleted=function(){return Object(o.n)((function(){return s.comments.isShowDeleted=!s.comments.isShowDeleted}))},t.prototype.toggleFollow=function(){var e;if(e={follow:{notifiable_type:this.props.commentableType,notifiable_id:this.props.commentableId,subtype:"comment"}},!s.comments.loadingFollow)return s.comments.loadingFollow=!0,$.ajax(laroute.route("follows.store"),{data:e,dataType:"json",method:s.comments.userFollow?"DELETE":"POST"}).always((function(){return s.comments.loadingFollow=!1})).done((function(){return s.comments.userFollow=!s.comments.userFollow})).fail((function(e,t){if("abort"!==t)return osu.ajaxError(e)}))},t.prototype.updateSort=function(e,t){var n,r;if(r=t.sort,this.props.commentableType&&this.props.commentableId&&!(l.call(this.SORTS,r)<0))return Object(o.n)((function(){return s.comments.loadingSort=r})),n={commentable_type:this.props.commentableType,commentable_id:this.props.commentableId,sort:r,parent_id:0},$.ajax(laroute.route("comments.index"),{data:n,dataType:"json"}).done((function(e){return $.ajax(laroute.route("account.options"),{method:"PUT",data:{user_profile_customization:{comments_sort:r}}}),Object(o.n)((function(){return a.a.dataStore.commentStore.flushStore(),a.a.dataStore.updateWithCommentBundleJSON(e),s.initializeWithCommentBundleJSON(e)}))})).always((function(){return Object(o.n)((function(){return s.comments.loadingSort=null}))}))},t}()},wOcG:function(e,t,n){"use strict";var r=n("ZXkc");e.exports=i,i.locator=r;var s="\n",o="\\";function i(e,t,n){var r,i;if(t.charAt(0)===o&&(r=t.charAt(1),-1!==this.escape.indexOf(r)))return!!n||(i=r===s?{type:"break"}:{type:"text",value:r},e(o+r)(i))}},wke6:function(e,t,n){"use strict";t.HtmlParser="undefined"==typeof Symbol?"__RMD_HTML_PARSER__":Symbol("__RMD_HTML_PARSER__")},wlJd:function(e,t,n){"use strict";var r=n("AMMU"),s=n("XVa7"),o=n("mPRR");e.exports=y,y.locator=s;var i="link",a="image",c="footnote",u="shortcut",l="collapsed",p="full",d=" ",h="!",m="[",f="\\",v="]",b="^";function y(e,t,n){var s,y,g,_,w,O,j,k,E=this.options.commonmark,S=this.options.footnotes,x=t.charAt(0),N=0,T=t.length,A="",P="",C=i,D=u;if(x===h&&(C=a,P=x,x=t.charAt(++N)),x===m){if(N++,P+=x,O="",S&&t.charAt(N)===b){if(C===a)return;P+=b,N++,C=c}for(k=0;N<T;){if((x=t.charAt(N))===m)j=!0,k++;else if(x===v){if(!k)break;k--}x===f&&(O+=f,x=t.charAt(++N)),O+=x,N++}if(A=O,s=O,(x=t.charAt(N))===v){if(N++,A+=x,O="",!E)for(;N<T&&(x=t.charAt(N),r(x));)O+=x,N++;if(x=t.charAt(N),C===c||x!==m||S&&t.charAt(N+1)===b){if(!s)return;y=s}else{for(y="",O+=x,N++;N<T&&(x=t.charAt(N))!==m&&x!==v;)x===f&&(y+=f,x=t.charAt(++N)),y+=x,N++;(x=t.charAt(N))===v?(D=y?p:l,O+=y+x,N++):y="",A+=O,O=""}if(D===p||!j)return A=P+A,C===i&&this.inLink?null:!!n||(C===c&&-1!==s.indexOf(d)?e(A)({type:c,children:this.tokenizeInline(s,e.now())}):((g=e.now()).column+=P.length,g.offset+=P.length,_={type:C+"Reference",identifier:o(y=D===p?y:s),label:y},C!==i&&C!==a||(_.referenceType=D),C===i?(w=this.enterLink(),_.children=this.tokenizeInline(s,g),w()):C===a&&(_.alt=this.decode.raw(this.unescape(s),g)||null),e(A)(_)))}}}},y2EG:function(e,t,n){"use strict";var r=n("YLtl"),s=n("EaLk"),o=n("5evE");n.d(t,"a",(function(){return a}));var i=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};class a{constructor(e,t){this.id=e,this.objectType=t,this.isMarkingAsRead=!1,this.isRead=!1,this.updateFromJson=e=>(this.createdAtJson=e.created_at,this.isRead=e.is_read,this.name=e.name,this.objectId=e.object_id,this.sourceUserId=e.source_user_id,this.details={},"object"==typeof e.details&&Object(r.forEach)(e.details,(e,t)=>{this.details[Object(r.camelCase)(t)]=e}),this)}get canMarkRead(){return this.id>0&&!this.isRead}get category(){var e;return Object(o.a)(null!=(e=this.name)?e:"")}get categoryGroupKey(){return Object(o.b)(this)}get displayType(){return function(e){if(null!=e.objectType&&null!=e.objectId)return"user_achievement_unlock"===e.name?"user_achievement":e.objectType}(this)}get identity(){return{category:this.category,id:this.id,objectId:this.objectId,objectType:this.objectType}}get messageGroup(){if("channel"===this.objectType){const e={title:this.details.title,username:this.details.username},t=`notifications.item.${this.objectType}.${this.category}.${this.details.type}.${this.name}_group`;return osu.trans(t,e)}return this.details.title}get stackId(){return`${this.objectType}-${this.objectId}-${this.category}`}static fromJson(e){return new a(e.id,e.object_type).updateFromJson(e)}}i([s.l],a.prototype,"isMarkingAsRead",void 0),i([s.l],a.prototype,"isRead",void 0),i([s.e],a.prototype,"canMarkRead",null),i([s.e],a.prototype,"category",null),i([s.e],a.prototype,"categoryGroupKey",null),i([s.e],a.prototype,"displayType",null),i([s.e],a.prototype,"messageGroup",null),i([s.e],a.prototype,"stackId",null)},yXVM:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},yzy7:function(e,t,n){"use strict";var r=n("/pT6");e.exports=a,a.locator=r;var s=10,o=32,i=96;function a(e,t,n){for(var r,a,c,u,l,p,d=t.length,h=0;h<d&&t.charCodeAt(h)===i;)h++;if(0!==h&&h!==d){for(r=h,l=t.charCodeAt(h);h<d;){if(u=l,l=t.charCodeAt(h+1),u===i){if(void 0===a&&(a=h),c=h+1,l!==i&&c-a===r){p=!0;break}}else void 0!==a&&(a=void 0,c=void 0);h++}if(p){if(n)return!0;if(h=r,d=a,u=t.charCodeAt(h),l=t.charCodeAt(d-1),p=!1,d-h>2&&(u===o||u===s)&&(l===o||l===s)){for(h++,d--;h<d;){if((u=t.charCodeAt(h))!==o&&u!==s){p=!0;break}h++}!0===p&&(r++,a--)}return e(t.slice(0,c))({type:"inlineCode",value:t.slice(r,a)})}}}}});
//# sourceMappingURL=commons.js.map